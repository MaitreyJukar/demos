!function(a){"use strict";a.Common.Interactivities.ShapeSlicer||(a.Common.Interactivities.ShapeSlicer={},a.Common.Interactivities.ShapeSlicer.Models={},a.Common.Interactivities.ShapeSlicer.Views={})}(window.MathInteractives),function(){"use strict";if(!MathInteractives.Common.Interactivities.ShapeSlicer.Models.ShapeSlicer){var a=null;MathInteractives.Common.Interactivities.ShapeSlicer.Models.ShapeSlicer=MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{interacivityType:null,numberOfShapes:null,shapeNumber:null,clickableSphereRadius:9.5,clickableSphereScaleFactor:1.31,maxPoints:3,pathCoordinates:null,helpElements:[],shape2DModel:null,galleryObject:null,currentGalleryIndex:0,galleryImageCount:0,galleryFirstVisibleColumn:0,noOfSlicedShapes:0,isSliceShapeButtonEnabled:!1,shapeCollection:null,saveStateLoad:!1,activityLoaded:!0,eventManager:null,showClearPopup:!1,requestAnimation:!1,isSaveImageButtonEnabled:!1,isTryAnotherButtonEnabled:!1,attributesToIgnore:["saveStateLoad","eventManager","currentTab","pathCoordinates","isTryAnotherButtonEnabled","shapeColorsToUse"]}},initialize:function(){a=MathInteractives.Common.Interactivities.ShapeSlicer.Models.ShapeSlicer;var b=new a.EVENT_MANAGER_MODEL;this.set("eventManager",b),this._selectInteractivityType(),this._setNumberOfShapes(),null===this.get("galleryObject")&&this.set("galleryObject",[]),this.on("change:galleryObject",this.galleryObjectChange,this),b.on(a.EVENT_MANAGER_MODEL.SAVE_IMAGE,this._updateGalleryObjectsCount,this),b.on(a.EVENT_MANAGER_MODEL.DELETE_IMAGE,this._updateGalleryObjectsCount,this),b.on(a.EVENT_MANAGER_MODEL.CLEAR_ALL_IMAGES,this._updateGalleryObjectsCount,this),this._generateCollection()},_generateCollection:function(){var a=this.get("shapeCollection");a=a?new Backbone.Collection(a):new Backbone.Collection,this.set("shapeCollection",a)},galleryObjectChange:function(){},_updateGalleryObjectsCount:function(){var a=this.get("galleryObject").length;this.set("galleryImageCount",a)},_selectInteractivityType:function(){var a=this.get("interacivityType");null===a&&this.set("interacivityType",this.get("type"))},_setNumberOfShapes:function(){var b=a.NUMBER_OF_SHAPES,c=this.get("interacivityType"),d=a.DEFAULT_SHAPE[c],e=this.get("shapeNumber");switch(c){case 1:this.set("numberOfShapes",b[1]),e=e||d,this.set("shapeNumber",parseInt(e));break;case 2:this.set("numberOfShapes",b[2]),e=e||d,this.set("shapeNumber",parseInt(e))}},getCurrentGalleryIndex:function(a){return this.get("currentGalleryIndex")},setCurrentGalleryIndex:function(a){this.set("currentGalleryIndex",a)},getCurrentStateData:function(){var b,c=this.get("eventManager");return c.trigger(a.EVENT_MANAGER_MODEL.SAVE_STATE_START),b=JSON.stringify(this,this.getJSONAttributes),c.trigger(a.EVENT_MANAGER_MODEL.SAVE_STATE_END),b},getJSONAttributes:function(a,b){var c=b;switch(a){case"path":case"manager":case"player":case"jsonData":case"helpElements":case"pathCoordinates":case"eventManager":c=void 0;break;case"saveStateLoad":c=!0}return c}},{EVENT_MANAGER_MODEL:Backbone.Model.extend({},{SAVE_STATE_START:"save-state-start",SAVE_STATE_END:"save-state-end",SHAPE_SLICED:"shape-sliced",DRAW_SLICED_SHAPE:"draw-sliced-shape",SAVE_IMAGE:"save-image",EDIT_IMAGE:"edit-image",DELETE_IMAGE:"delete-image",CLEAR_ALL_IMAGES:"clear-all-images",POINTS_ON_SAME_EDGE:"points-on-same-edge",POINTS_ON_SAME_FACE:"points-on-same-face",CLICK_ON_3D_CANVAS:"click-on-3d-canvas",CREATE_CROSSSECTION:"create-crosssection",DISABLE_HOVER:"disable-hover",ENABLE_HOVER:"enable-hover",TAB_CHANGED:"tab-changed",UNLOAD_INTERACTIVE:"unload-interactive",ENABLE_TRY_ANOTHER:"enable-try-another",DISABLE_TRY_ANOTHER:"disable-try-another",SET_RESET_BUTTON_STATE:"set-reset-button-state",DISABLE_BUTTON_ON_COLOR_PICKER:"disable-button-on-color-picker",ENABLE_BUTTON_ON_COLOR_PICKER:"enable-button-on-color-picker",DESELECT_SHAPE:"deselect-shape",SET_FOCUS:"set-focus"}),NUMBER_OF_SHAPES:{1:6,2:3},SHAPES:{1:["Cube","Tetrahedron","Prism","Cone","Sphere","Cylinder"],2:["Cube","TriangularPrism","Pyramid"]},MAX_SLICE_SHAPES:11,RESET_ROTATE_BUTTON_WIDTH:43,RESET_ROTATE_BUTTON_HEIGHT:38,LEFT_CANVAS:{HEIGHT:353,WIDTH:432},DEFAULT_SHAPE:{1:0,2:0},MAX_GALLERY_LENGTH:24})}}(),function(){"use strict";if(!MathInteractives.Common.Interactivities.ShapeSlicer.Views.Overview){var a=MathInteractives.Common.Interactivities.ShapeSlicer.Models.ShapeSlicer.EVENT_MANAGER_MODEL;MathInteractives.Common.Interactivities.ShapeSlicer.Views.Overview=MathInteractives.Common.Player.Views.Base.extend({initialize:function(){var b=MathInteractives.Common.Utilities.Models.BrowserCheck,c=b.isIE&&9===Number(b.browserVersion);if(this.initializeDefaultProperties(),c){var d=this.player.$el,e=$("<div>").attr("id",this.idPrefix+"three-js-ie-9-text").addClass("three-js-ie-9-text").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",font:"bold 16px Montserrat","text-align":"center","line-height":"2"}),f=$("<div>").addClass("three-js-ie-9-empty-modal").css({position:"absolute",height:644,width:930,top:0,left:0,"background-color":"rgba(0,0,0,0.8)"}).append(e);d.append(f),this.loadScreen("ie-9-pop-up-screen"),this.player.enableAllHeaderButtons(!1),this.player.setModalPresent(!0),this.enableTab("header-subtitle",!1),this.enableTab("overview-header",!1),this.enableTab("overview-header-tts-sound-btn",!1),this.enableTab("overview-text",!1),this.enableTab("overview-submit-button",!1),this.enableTab("overview-readable-text-region",!1)}else this.eventManager=this.model.get("eventManager"),this.loadScreen("title-screen"),this.render(),this.player.bindTabChange(function(b){this.model.set("currentTab",0),this.eventManager.trigger(a.TAB_CHANGED,0)},this,0)},render:function(){var a=this.model.get("galleryObject");0===a.length&&this.player.enableTab(!1,2)}})}}(),function(){var a=Handlebars.template,b=MathInteractives.Common.Interactivities.ShapeSlicer.templates=MathInteractives.Common.Interactivities.ShapeSlicer.templates||{};b.overview=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'overview-tab-holder" class="overview-tab-holder"></div>'})}();