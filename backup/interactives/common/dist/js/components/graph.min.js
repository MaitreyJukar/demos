!function(){"use strict";MathInteractives.Common.Components.Models.Graph=Backbone.Model.extend({defaults:{chartType:"scatter",chartCredits:!1,chartHeight:null,chartWidth:null,animation:!1,zoomType:null,borderColor:"#C9C9C9",borderRadius:0,borderWidth:2,marginBottom:50,marginLeft:50,marginRight:50,marginTop:50,chartTitle:"New title",plotBorderWidth:1,showGrid:!0,gridLineThickness:2,gridLineColor:"#AAAAAA",xMin:0,yMin:0,xMax:10,yMax:10,xAxisLineWidth:3,xAxislineColor:"#606060",xTitle:"x-axis title",xTickLength:0,xLabelPositionX:0,xLabelPositionY:24.5,xTickInterval:1,xTitleOffset:35,xUseHTML:!0,xFormatter:null,xAxisLabelStyle:{color:"#777777",fontSize:"16px",fontFamily:"Arial",fill:"#777777"},xAxisTitleUseHTML:!1,yAxisLineWidth:3,yAxislineColor:"#606060",yTitle:"y-axis title",yTickLength:0,yLabelPositionX:-12.5,yLabelPositionY:5,yTickInterval:2,yTitleOffset:30,yUseHTML:!1,yFormatter:null,yAxisLabelStyle:{color:"#777777",fontSize:"16px",fontFamily:"Arial",fill:"#777777"},toolTipFormatter:null,toolTipUseHTML:!1,toolTipEnabled:!0,toolTipHideDelay:-1,tooltipStyle:{fontSize:"13px",fontFamily:"Arial",color:"#000000"},toolTipHideAnimation:!1,toolTipBorderColor:null,plotOptHover:!1,plotLineAnimation:!1,plotCount:1,plotCountIdPrefix:"plot_",series:[]},initialize:function(){var a;a=this,this.manageHeightWidth("height"),this.manageHeightWidth("width"),this.on("change:chartHeight",function(){a.manageHeightWidth("height")}),this.on("change:chartWidth",function(){a.manageHeightWidth("width")})},manageHeightWidth:function(a){var b,c;switch(a){case"height":c=this.get("chartHeight")?this.get("chartHeight")+this.get("marginTop")+this.get("marginBottom"):this.get("chartHeight"),this.set("chartHeight",c);break;case"width":b=this.get("chartWidth")?this.get("chartWidth")+this.get("marginLeft")+this.get("marginRight"):this.get("chartWidth"),this.set("chartWidth",b)}},addPlot:function(a,b){var c,d,e,f,g,h;return f=this,b||(b=new MathInteractives.Common.Components.Models.Graph.Marker),g=f.get("plotCount"),e=MathInteractives.Common.Components.Models.Graph,d={},d.id=f.get("plotCountIdPrefix")+g,f.set("plotCount",g+1,{silent:!0}),d.color=b.get("lineColor")?b.get("lineColor"):e.LINE_COLOR,d.lineWidth=b.get("lineWidth")||0===b.get("lineWidth")?b.get("lineWidth"):e.LINE_WIDTH,d.data=a,d.marker={},d.marker.lineWidth=b.get("pointLineWidth")?b.get("pointLineWidth"):e.POINT_LINE_WIDTH,d.marker.radius=b.get("pointRadius")?b.get("pointRadius"):e.POINT_RADIUS,d.marker.fillColor=b.get("pointFillColor"),h="url("+(b.get("pointSymbol")?b.get("pointSymbol"):e.POINT_FILL_URL)+")",d.marker.symbol=b.get("useImageInSymbol")?h:b.get("pointSymbol"),d.marker.states={},d.marker.states.hover={},d.marker.states.hover.enabled=!1,d.showInLegend=!1,d.dashStyle=b.get("dashStyle")?b.get("dashStyle"):e.LINE_TYPES.CONTINUES_THIN_LINE,d.toolTipText=b.get("toolTipText")||{},c=_.clone(f.get("series")),c.push(d),f.set("series",c),d.id},getMarkerData:function(a,b){var c,d,e,f,g;switch(f=null,b){case"mouseOver":g="mouseOverMarker";break;case"mouseOut":g="mouseOutMarker"}for(d=this.get("series"),e=d.length,c=0;e>c;c++)a===d[c].id&&(f=d[c][g]);return f},addMarkerForEvents:function(a,b,c){var d,e,f,g,h,i,j;if(i=MathInteractives.Common.Components.Models.Graph,b){switch(a){case"mouseOver":d="mouseOverMarker";break;case"mouseOut":d="mouseOutMarker"}for(h={},h.lineWidth=b.get("pointLineWidth")?b.get("pointLineWidth"):i.POINT_LINE_WIDTH,h.radius=b.get("pointRadius")?b.get("pointRadius"):i.POINT_RADIUS,h.fillColor=b.get("pointFillColor"),j="url("+(b.get("pointSymbol")?b.get("pointSymbol"):i.POINT_FILL_URL)+")",h.symbol=b.get("useImageInSymbol")?j:b.get("pointSymbol"),h.states={},h.states.hover={},h.states.hover.enabled=!1,g=this.get("series"),f=g.length,e=0;f>e;e++)c===g[e].id&&(g[e][d]=h,this.set("series",g,{silent:!0}))}},addPoint:function(a,b,c){var d,e,f;for(d=a.get(c),d.addPoint(b),d=this.get("series"),e=d.length,f=0;e>f;f++)d[f].id===c&&d[f].push(b)},removeAllPlot:function(){this.set("series",[])}},{POINT_FILL_URL:"common/media/image/dragItems/Drag-Handle_up.png",POINT_FILL_URL_MOUSE_OVER:"common/media/image/dragItems/Drag-Handle_Over.png",POINT_LINE_WIDTH:0,POINT_RADIUS:9,LINE_COLOR:"#4c1787",LINE_WIDTH:5,LINE_TYPES:{CONTINUES_THIN_LINE:"solid",DASHED_THIN_LINE:"dash"},PREDEFINED_SHAPES:{CIRCLE:"circle",SQUARE:"square",TRIANGLE:"triangle",DIAMOND:"diamond",TRIANGLE_DOWN:"triangle-down"},Marker:Backbone.Model.extend({defaults:{lineColor:null,lineWidth:null,pointFillColor:null,pointLineWidth:null,pointRadius:null,pointSymbol:null,useImageInSymbol:!0,dashStyle:null}})})}(),function(){"use strict";MathInteractives.Common.Components.Views.Graph=Backbone.View.extend({graphOptions:{},markerOnMouseOver:null,markerOnMouseOut:null,initialize:function(){this.model.on("change",this.render,this),this.bindEvents(),this.render()},render:function(){var a;this.getGraphSetupOptions(),a=this.graphOptions,this.$el.highcharts(a),this.doMiscellaneousWork()},bindEvents:function(){$(window).resize(function(a){$(".highcharts-container").slice(1).remove()})},doMiscellaneousWork:function(){return},getGraphSetupOptions:function(){var a,b,c,d,e,f,g,h,i,j,k,l;l=this,a=this.model,b=this.graphOptions,e=a.get("marginBottom"),f=a.get("marginTop"),g=a.get("marginRight"),h=a.get("marginLeft"),i=this.$el.width(),j=this.$el.height(),d=i-g-h,k=d/(a.get("xMax")-a.get("xMin")),d=k*Math.abs(a.get("xMin")),c=j-f-e,k=c/(a.get("yMax")-a.get("yMin")),c=k*Math.abs(a.get("yMin")),b.chart={type:a.get("chartType"),height:a.get("chartHeight"),width:a.get("chartWidth"),animation:!1,showAxes:!0,borderColor:"#C9C9C9",bordeRadius:0,bordeWidth:2,marginBottom:e,marginLeft:h,marginTop:f,marginRight:g,plotBorderWidth:a.get("plotBorderWidth")},b.title={},b.title.text=a.get("chartTitle"),b.title.style={color:"#4c1787","font-size":"18px",fontFamily:"Montserrat, Arial, sans-serif","font-weight":"bold",fill:"#4c1787"},b.xAxis={min:a.get("xMin"),max:a.get("xMax"),tickInterval:a.get("xTickInterval"),gridLineColor:a.get("gridLineColor"),gridLineWidth:a.get("gridLineThickness"),lineColor:a.get("xAxislineColor"),lineWidth:a.get("xAxisLineWidth"),tickLength:a.get("xTickLength"),offset:-c},b.xAxis.title={},b.xAxis.title.useHTML=a.get("xAxisTitleUseHTML"),b.xAxis.title.text=a.get("xTitle"),b.xAxis.title.offset=a.get("xTitleOffset"),b.xAxis.title.style={color:"#222",fontSize:"16px",fontFamily:"Arial, sans-serif",fontWeight:"bold",fill:"#222"},b.xAxis.labels={},b.xAxis.labels.align="center",b.xAxis.labels.x=a.get("xLabelPositionX"),b.xAxis.labels.y=a.get("xLabelPositionY"),b.xAxis.labels.style=a.get("xAxisLabelStyle"),null!==a.get(" ")&&(b.xAxis.labels.formatter=a.get("xFormatter")),b.xAxis.labels.useHTML=a.get("xUseHTML"),b.yAxis={min:a.get("yMin"),max:a.get("yMax"),tickInterval:a.get("yTickInterval"),gridLineColor:a.get("gridLineColor"),gridLineWidth:a.get("gridLineThickness"),lineColor:a.get("yAxislineColor"),lineWidth:a.get("yAxisLineWidth"),tickLength:a.get("yTickLength"),offset:-d},b.yAxis.title={},b.yAxis.title.text=a.get("yTitle"),b.yAxis.title.offset=a.get("yTitleOffset"),b.yAxis.title.style={color:"#222","font-size":"16px",fontFamily:"Arial, sans-serif","font-weight":"bold",fill:"#222"},b.yAxis.labels={},b.yAxis.labels.align="right",b.yAxis.labels.x=a.get("yLabelPositionX"),b.yAxis.labels.y=a.get("yLabelPositionY"),b.yAxis.labels.style=a.get("yAxisLabelStyle"),null!==a.get("yFormatter")&&(b.yAxis.labels.formatter=a.get("yFormatter")),b.yAxis.labels.useHTML=a.get("yUseHTML"),b.tooltip={},b.tooltip.animation=a.get("toolTipHideAnimation"),b.tooltip.style=a.get("tooltipStyle"),b.tooltip.enabled=a.get("toolTipEnabled"),b.tooltip.useHTML=a.get("toolTipUseHTML"),null!==a.get("toolTipBorderColor")&&(b.tooltip.borderColor=a.get("toolTipBorderColor")),null!==a.get("toolTipFormatter")?b.tooltip.formatter=a.get("toolTipFormatter"):b.tooltip.formatter=function(){return a.get("xTitle")+": "+this.x+"<br/>"+a.get("yTitle")+": "+this.y},b.tooltip.hideDelay=a.get("toolTipHideDelay"),b.series=a.get("series"),b.credits={enabled:a.get("chartCredits")},b.plotOptions={},b.plotOptions.series={},b.plotOptions.series.animation=a.get("plotLineAnimation"),b.plotOptions.series.states={},b.plotOptions.series.states.hover={},b.plotOptions.series.states.hover.enabled=a.get("plotOptHover"),b.plotOptions.series.point={},b.plotOptions.series.point.events={},b.plotOptions.series.point.events.mouseOver=function(){var b,c;c=this.series.userOptions.id,b=a.getMarkerData(c,"mouseOver"),b&&this.update({marker:b})},b.plotOptions.series.point.events.mouseOut=function(){var b,c;c=this.series.userOptions.id,b=a.getMarkerData(c,"mouseOut"),b&&this.update({marker:b})}}})}(),function(){var a=Handlebars.template,b=MathInteractives.Common.Components.templates=MathInteractives.Common.Components.templates||{};b.graphIt=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\ufeff<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-it-graph-container-main-wrapper" class="graph-it-graph-container-main-wrapper">\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-it-graph-container" class="graph-it-graph-container">\r\n    <canvas id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-it-canvas" width="',(g=c.canvasWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.canvasWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" height="',(g=c.canvasHeight)?f=g.call(b,{hash:{},data:e}):(g=b&&b.canvasHeight,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'canvas"></canvas>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-controls" class="graph-controls">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-line-control" class="draw-line-control">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-line-btn" class="draw-line-btn"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-line-label" class="draw-line-label"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'move-line-control" class="move-line-control">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'move-line-btn" class="move-line-btn"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'move-line-label" class="move-line-label"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'users-graph-control" class="users-graph-control">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'users-graph-btn" class="users-graph-btn"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'users-graph-label" class="users-graph-label"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'feedback-graph-control" class="feedback-graph-control">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'feedback-graph-btn" class="feedback-graph-btn"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'feedback-graph-label" class="feedback-graph-label"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'clear-graph-btn" class="clear-graph-btn"></div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-graph-title" class="draw-graph-title typography-header">\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-graph-x-axis-label" class="draw-graph-x-axis-label typography-label">\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'draw-graph-y-axis-label" class="draw-graph-y-axis-label typography-label">\r\n    </div>\r\n</div>\r\n</div>'})}();