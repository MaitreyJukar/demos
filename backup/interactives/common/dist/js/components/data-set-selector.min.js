!function(a){"use strict";var b=null;a.Common.Components.Theme2.Views.DataSetSelectorView=a.Common.Player.Views.Base.extend({dataSets:[],modelPath:null,clearAllDataBtnView:null,directionTextView:null,templatePath:null,dataSetDeleteIndex:null,dataSetDeleteTooltip:null,idSuffix:"",dataSetSelected:!1,isRoleButtonEnabled:!1,isPopupExist:!1,events:{"click .data-set":"_selectDataSet","click .add-your-own":"_addYourOwnDataSet","click .clear-all-btn-container.clickEnabled":"_createClearAllPopup"},initialize:function(c){var d=this,e=d.model;d.initializeDefaultProperties(),d.options.hasClearAllBtn===!1?d.options.hasClearAllBtn=!1:d.options.hasClearAllBtn=!0,d.modelPath=a.Common.Components.Theme2.Models.DataSetSelectorModel,d.filePath=e.get("path"),d.manager=e.get("manager"),d.player=e.get("player"),d.dataSets=e.get("dataSets"),d.idSuffix=c.idSuffix,d.isRoleButtonEnabled=c.isRoleButtonEnabled,d.idPrefix=this.player.getIDPrefix(),d.EVT_SEL_DATASET=b.EVT_SEL_DATASET,d.EVT_ADD_DATASET=b.EVT_ADD_DATASET,d.EVT_DEL_DATASET=b.EVT_DEL_DATASET,d.EVT_DEL_ALL_DATASET=b.EVT_DEL_ALL_DATASET,d.templatePath=a.Common.Components.templates,d._initLocAccText(),d.render()},render:function(){var a=this;a.model;a.$el.html($(a.templatePath.dataSetSelectorScreen({idPrefix:a.idPrefix,idSuffix:a.idSuffix}))),a._createDirectionText(),a._createButtons(),a._generateTooltips(),a._updateDataSetView()},_bindMouseEvents:function(){var b=this;b.$(".data-set").off("mousedown").on("mousedown",{context:b},b._mouseDownEvent),b.$(".data-set-delete-btn").off("mousedown").on("mousedown",{context:b},b._mouseDownEvent),b.$(".add-your-own").off("mousedown").on("mousedown",{context:b},b._mouseDownEvent),b.$(".data-set-delete-btn").off("click").on("click",$.proxy(this._triggerDeleteEvent,this)),b.$(".data-set").off("mouseenter").on("mouseenter",function(a){b.$(".data-set").removeClass("hover"),b.$(".add-your-own").removeClass("hover"),b._hideDataSetDeleteTooltip(a),$(this).addClass("hover")}),b.$(".data-set").off("mouseleave").on("mouseleave",function(a){$(this).removeClass("hover")}),b.$(".data-set-delete-btn").off("mouseenter").on("mouseenter",function(a){$(this).addClass("hover"),setTimeout(function(){b._showDataSetDeleteTooltip(a)},100)}),b.$(".data-set-delete-btn").off("mouseleave").on("mouseleave",function(a){$(this).removeClass("hover"),setTimeout(function(){b._hideDataSetDeleteTooltip(a)},130)}),b.$(".add-your-own-btn").off("mouseenter").on("mouseenter",function(a){$(this).addClass("hover")}),$(".add-your-own-btn").off("mouseleave").on("mouseleave",function(a){$(this).removeClass("hover")}),b.$(".add-your-own").off("mouseenter").on("mouseenter",function(a){b.$(".data-set").removeClass("hover"),b.$(".add-your-own").removeClass("hover"),b._hideDataSetDeleteTooltip(a),$(this).addClass("hover")}),b.$(".add-your-own").off("mouseleave").on("mouseleave",function(a){$(this).removeClass("hover")}),a.Common.Utilities.Models.Utils.EnableTouch(b.$(".data-set")),a.Common.Utilities.Models.Utils.EnableTouch(b.$(".data-set-delete-btn")),a.Common.Utilities.Models.Utils.EnableTouch(b.$(".add-your-own")),a.Common.Utilities.Models.Utils.EnableTouch(b.$(".add-your-own-btn"))},_mouseDownEvent:function(a){$(this).addClass("down"),$(document).on("mouseup.DataSetSelector",a.data,function(a){a.data.context.$(".add-your-own,.data-set,.data-set-delete-btn").removeClass("down"),$(this).off("mouseup.DataSetSelector")})},_touchStartEvent:function(a){$(this).addClass("down"),$(document).on("touchend.DataSetSelector",a.data,function(a){a.data.context.$(".add-your-own, .data-set, .data-set-delete-btn").removeClass("down"),$(this).off("touchend.DataSetSelector")})},_updateDataSetView:function(){var b,c=this,d=c.model,e=null,f=d.get("showEmptyDataSets");c.dataSets.length<d.get("noOfSetsToSelect")+d.get("userDataSetLimit")?c.userDataFree=!0:c.userDataFree=!1,f&&(b=d.get("noOfSetsToSelect")+d.get("userDataSetLimit")-c.dataSets.length-1,0===b&&(f=!1)),c.$("#"+c.idPrefix+c.idSuffix+"data-set-container").html($(c.templatePath.dataSetContainer({idPrefix:c.idPrefix,idSuffix:c.idSuffix,models:c.dataSets.models,userDataFree:c.userDataFree,showNumbers:c.options.showNumbers,addBtnText:c.options.locAccText.addBtn.loc,showEmptyDataSets:f,emptyDataSets:_.range(b)}))),c.$(".data-set-number-text").each(function(a,b){$(b).html(parseInt($(b).html(),10)+1)}),c.$(".data-set-delete-btn-icon").addClass(c.getFontAwesomeClass("close")),c.$(".add-your-own-btn").addClass(c.getFontAwesomeClass("plus-square")),c.options.hasClearAllBtn&&(c.dataSets.length>d.get("noOfSetsToSelect")?(c.clearAllDataBtnView.getButtonState()!==a.global.Theme2.Button.BUTTON_STATE_ACTIVE&&c.clearAllDataBtnView.setButtonState(a.global.Theme2.Button.BUTTON_STATE_ACTIVE),e={elementId:this.idSuffix+"clear-all-btn-container",role:"button",tabIndex:820,acc:c.options.locAccText.clearAllBtn.acc},this.createAccDiv(e)):c.clearAllDataBtnView.getButtonState()!==a.global.Theme2.Button.BUTTON_STATE_DISABLED&&c.clearAllDataBtnView.setButtonState(a.global.Theme2.Button.BUTTON_STATE_DISABLED)),c._bindMouseEvents(),c._setTabIndices()},_createDirectionText:function(){var b=this,c=null,d=null;null===b.directionTextView&&(c={idPrefix:b.idPrefix,containerId:b.idPrefix+b.idSuffix+"data-set-selector-direction-text",manager:b.manager,player:b.player,path:b.filePath,text:b.options.locAccText.directionText.loc,accText:b.options.locAccText.directionText.acc,textColor:"#ffffff",showButton:!1,ttsBaseClass:"data-set-selector tts-button-custom-blue",tabIndex:500},b.options.directionText&&(d={textColor:b.options.directionText.textColor||"#ffffff",ttsBaseClass:b.options.directionText.ttsBaseClass||"tts-button-custom-blue"},b.options.directionText.btn&&(d.showButton=!0,d.btnBaseClass=b.options.directionText.btn.baseClass||"data-selector-btn-class",d.clickCallback=b.options.directionText.btn.callBack,d.btnTextColor=b.options.directionText.btn.textColor||"#fff",d.buttonText=b.options.locAccText.directionText.btn.loc,d.buttonAccText=b.options.locAccText.directionText.btn.acc)),$.extend(c,d),b.directionTextView=new a.global.Theme2.DirectionText.generateDirectionText(c))},_initLocAccText:function(){var a=this.options.locAccText;a=a||{},a.directionText=a.directionText||{},a.directionText.btn=a.directionText.btn||{},a.addBtn=a.addBtn||{},a.deletePopup=a.deletePopup||{},a.clearAllBtn=a.clearAllBtn||{},a.dataSetContainer=a.dataSetContainer||{},a.noUserDatasetText=a.noUserDatasetText||{},a.dataSetSelectInstruction=a.dataSetSelectInstruction||{},a.clearAllPopup=a.clearAllPopup||{},a.deleteDataPopup=a.deleteDataPopup||{},a.clearAllPopup.title=a.clearAllPopup.title||{},a.clearAllPopup.body=a.clearAllPopup.body||{},a.clearAllPopup.okBtn=a.clearAllPopup.okBtn||{},a.clearAllPopup.cancelBtn=a.clearAllPopup.cancelBtn||{},a.deleteDataPopup.title=a.deleteDataPopup.title||{},a.deleteDataPopup.body=a.deleteDataPopup.body||{},a.deleteDataPopup.okBtn=a.deleteDataPopup.okBtn||{},a.deleteDataPopup.cancelBtn=a.deleteDataPopup.cancelBtn||{},this.options.locAccText=a},_setTabIndices:function(){var a=0,b=this,c=b.model.get("dataSets"),d=null,e=null,f={};for(b.options.locAccText.dataSetContainer.acc&&(-1!==b.options.locAccText.dataSetContainer.acc.indexOf("%@$%")&&(e=b.options.locAccText.dataSetContainer.acc.replace("%@$%",b.getDataSetCount())),-1!==b.options.locAccText.dataSetContainer.acc.indexOf("%U_COUNT%")&&(e=b.options.locAccText.dataSetContainer.acc.replace("%U_COUNT%",b.dataSets.getUserDataSets().length))),f={elementId:b.idSuffix+"data-set-selector-area",tabIndex:600,acc:e||b.options.locAccText.dataSetContainer.acc||""},b.createAccDiv(f),a=0;a<c.length;a++)d=b.options.locAccText.dataSetSelectInstruction.acc?b.options.locAccText.dataSetSelectInstruction.acc.replace("%DSN%",c.at(a).get("dataSetAccName")||c.at(a).get("dataSetName")):c.at(a).get("dataSetAccName")?c.at(a).get("dataSetAccName").replace("%DSN%",c.at(a).get("dataSetName")):c.at(a).get("dataSetName"),f={elementId:b.idSuffix+"data-set-"+a,offsetTop:7,offsetLeft:7,tabIndex:620+5*a,acc:d},b.isRoleButtonEnabled&&(f.role="button"),b.createAccDiv(f),a>=b.model.get("noOfSetsToSelect")&&(f={elementId:b.idSuffix+"data-set-delete-btn-"+a,role:"button",tabIndex:620+5*a+2,acc:b.options.locAccText.deletePopup.acc},b.createAccDiv(f));f={elementId:b.idSuffix+"add-your-own",offsetTop:7,offsetLeft:7,tabIndex:695,acc:b.options.locAccText.addBtn.acc},b.isRoleButtonEnabled&&(f.role="button"),b.createAccDiv(f)},getDataSetCount:function(){return this.dataSets.length},createDataSet:function(b){return new a.Common.Player.Models.BaseInteractive(b)},_createButtons:function(){var b,c=this,d=null,e=c.options.buttons,f={};if(c.options.hasClearAllBtn&&(d={player:c.player,manager:c.manager,path:c.filePath,idPrefix:c.idPrefix,data:{id:c.idPrefix+c.idSuffix+"clear-all-btn-container",type:a.global.Theme2.Button.TYPE.TEXT,text:c.options.locAccText.clearAllBtn.loc,baseClass:"data-selector-btn-class",width:163,height:38}},c.clearAllDataBtnView=a.global.Theme2.Button.generateButton(d)),e)for(b=0;b<e.length;b++){c.$("#"+c.idPrefix+c.idSuffix+"data-set-selector-area").append($("<div>",{id:c.idPrefix+c.idSuffix+e[b].container+"-container","class":"data-set-selector "+e[b].container+"-container button-container"})),d={player:c.player,manager:c.manager,path:c.filePath,idPrefix:c.idPrefix,data:{id:c.idPrefix+c.idSuffix+e[b].container+"-container",type:e[b].type||a.global.Theme2.Button.TYPE.TEXT,text:e[b].text,baseClass:e[b].baseClass||"data-selector-btn-class",icon:e[b].icon,width:e[b].width||0}},c[e[b].name]=a.global.Theme2.Button.generateButton(d);var g=e[b].callback;c[e[b].name].$el.off("click").on("click",{callBack:g},function(a){c.stopReading(),a.data.callBack&&a.data.callBack(a)}),f={elementId:c.idSuffix+e[b].container+"-container",role:"button",tabIndex:700+5*b,acc:e[b].accText||e[b].text},c.createAccDiv(f)}},showSelector:function(){var a=this;a.$el.show(),a.focus(),a.dataSetSelected=!1},hideSelector:function(){var a=this;a.stopReading(),a.$el.hide()},_generateTooltips:function(){var b=this,c=(b.idPrefix,a.Common.Components.Theme2.Views.Tooltip),d=a.global.Theme2.Tooltip,e={_player:b.player,idPrefix:b.idPrefix,manager:b.manager,path:b.filePath,type:c.TYPE.GENERAL,isTts:!1};e.isArrow=!0,e.arrowType=c.ARROW_TYPE.TOP_MIDDLE,e.elementEl=b.idPrefix+b.idSuffix+"delete-dataset-tooltip-container",e.text=b.options.locAccText.deletePopup.loc,e.accText=b.options.locAccText.deletePopup.acc,b.dataSetDeleteTooltip=d.generateTooltip(e),b.dataSetDeleteTooltip.hideTooltip()},_showDataSetDeleteTooltip:function(a){var b=this;b.dataSetDeleteTooltip.elementEl=a.target.id,b.dataSetDeleteTooltip.showTooltip()},_hideDataSetDeleteTooltip:function(){this.dataSetDeleteTooltip.hideTooltip()},_createClearAllPopup:function(){var b=this,c=null;b.stopReading(),c={player:b.player,manager:b.manager,path:b.filePath,idPrefix:b.idPrefix,title:b.options.locAccText.clearAllPopup.title.loc,accTitle:b.options.locAccText.clearAllPopup.title.acc,text:b.options.locAccText.clearAllPopup.body.loc,accText:b.options.locAccText.clearAllPopup.body.acc,titleTextColorClass:"data-set-selector popup-title",bodyTextColorClass:"data-set-selector popup-body",buttonTextColor:"#000000",containsTts:!0,width:"440",buttons:[{id:b.idSuffix+"clear-all-ok-button",type:a.global.Theme2.Button.TYPE.TEXT,text:b.options.locAccText.clearAllPopup.okBtn.loc,clickCallBack:{fnc:b._clearAllUserDataSets,scope:b},baseClass:"data-set-selector popup-button",height:34,width:112},{id:b.idSuffix+"clear-all-cancel-button",type:a.global.Theme2.Button.TYPE.TEXT,text:b.options.locAccText.clearAllPopup.cancelBtn.loc,clickCallBack:{fnc:b._clearAllCancel,scope:b},baseClass:"data-set-selector popup-button",height:34,width:112}]},a.global.Theme2.PopUpBox.createPopup(c)},addDataSet:function(a){var b=this,c=b.dataSets.getDataSetByIndex(a.dataSetIndex);0===c.length?(b.dataSets.add(a),b._updateDataSetView()):($.extend(c[0].attributes,a),b._updateDataSetView())},addOrUpdateDataSet:function(a){var b=this;b.dataSets.add(a),b.model.set("dataSets",b.dataSets),b._updateDataSetView(),b.trigger(b.EVT_SEL_DATASET,{dataSet:a,index:b.dataSets.indexOf(a)})},_triggerDeleteEvent:function(a){var b=this;a.stopPropagation(),b.stopReading(),b._hideDataSetDeleteTooltip(),b.dataSetDeleteIndex=$(a.currentTarget).attr("data-set-index"),b.trigger(b.EVT_DEL_DATASET,{dataSetName:b.dataSets.getDataSetByIndex(b.dataSetDeleteIndex).get("dataSetName")})},_createDeleteConfirmPopup:function(){if(!this.isPopupExist){var b=this,c={player:b.player,manager:b.manager,path:b.filePath,idPrefix:b.idPrefix,title:b.options.locAccText.deleteDataPopup.title.loc,accTitle:b.options.locAccText.deleteDataPopup.title.acc,text:b.options.locAccText.deleteDataPopup.body.loc,accText:b.options.locAccText.deleteDataPopup.body.acc,titleTextColorClass:"data-set-selector popup-title",bodyTextColorClass:"data-set-selector popup-body",buttonTextColor:"#000000",containsTts:!0,buttons:[{id:b.idSuffix+"delete-data-set-ok-button",type:a.global.Theme2.Button.TYPE.TEXT,text:b.options.locAccText.deleteDataPopup.okBtn.loc,clickCallBack:{fnc:b._deleteDataSet,scope:b},baseClass:"data-set-selector popup-button",height:34,width:112},{id:b.idSuffix+"clear-all-cancel-button",type:a.global.Theme2.Button.TYPE.TEXT,text:b.options.locAccText.deleteDataPopup.cancelBtn.loc,clickCallBack:{fnc:b._deleteCancel,scope:b},baseClass:"data-set-selector popup-button",height:34,width:112}]};this.isPopupExist=!0,a.global.Theme2.PopUpBox.createPopup(c)}},changeDeleteDataSetMessage:function(a){var b=this;null!==a?(b.options.locAccText.deleteDataPopup.body.loc=a.loc,b.options.locAccText.deleteDataPopup.body.acc=a.acc,b._createDeleteConfirmPopup()):b.log("No loc text found.")},_clearAllUserDataSets:function(){var a=this,b=a.dataSets.getUserDataSets();a.dataSets.remove(b),a._updateDataSetView(),a.trigger(a.EVT_DEL_ALL_DATASET),a.setFocus(a.idSuffix+"data-set-selector-area")},focus:function(){var a=this;a.setFocus(a.idSuffix+"data-set-selector-direction-text-direction-text-text")},_clearAllCancel:function(){var a=this;a.setFocus(a.idSuffix+"clear-all-btn-container")},_deleteCancel:function(){var a=this;a.setFocus(a.idSuffix+"data-set-delete-btn-"+a.dataSetDeleteIndex),this.isPopupExist=!1},_selectDataSet:function(a){var b=this,c=null;b.stopReading(),b.dataSetSelected=!0,$(a.currentTarget).removeClass("hover"),b.dataSetSelected=!1,c=$(a.currentTarget).attr("data-set-index"),c&&b.trigger(b.EVT_SEL_DATASET,{dataSet:b.dataSets.getDataSetByIndex(c),index:c})},_addYourOwnDataSet:function(){var a=this;a.stopReading(),a.dataSetSelected=!0,a.trigger(a.EVT_ADD_DATASET)},_deleteDataSet:function(){var a=this,c={},d=a.dataSets.getDataSetByIndex(a.dataSetDeleteIndex);a.dataSets.remove(d),a._updateDataSetView(),a.dataSetDeleteIndex==a.dataSets.length?a.setFocus(this.idSuffix+"add-your-own"):a.setFocus(this.idSuffix+"data-set-"+a.dataSetDeleteIndex),c.dataSetDeleteIndex=a.dataSetDeleteIndex,a.trigger(b.EVT_DEL_POPUP_OK_CLICKED,c),this.isPopupExist=!1},setHelpElements:function(b,c){var d,e=this,f=e.options.buttons,g=a.Common.Components.Theme2.Models.DataSetSelectorModel.DATA_SET_HELP_ELEM_WIDTH,h=this.model.getHelpElementWidth(),i=h.datasetHelpWidth||g.DATA_SET_HELP_WIDTH,j=h.addYourOwnHelpWidth||g.ADD_YOUR_OWN_HELP_WIDTH,k=h.deleteHelpWidth||e.player.getTextHeightWidth(e.getMessage(c.deleteDataset,0)).width;if(this.getMessage(c.datasetSelect,0),b.push({elementId:e.idSuffix+"data-set-container",helpId:c.datasetSelect,msgId:0,fromElementCenter:!0,tooltipWidth:i,hideArrowDiv:!0},{elementId:e.idSuffix+"add-your-own",helpId:c.addYourOwn,msgId:0,position:"bottom",tooltipWidth:j,dynamicArrowPosition:!0},{elementId:e.idSuffix+"data-set-delete-btn-"+this.model.get("noOfSetsToSelect"),helpId:c.deleteDataset,msgId:0,position:"bottom",tooltipWidth:k,dynamicArrowPosition:!0}),f)for(d=0;d<f.length;d++)f[d].helpElement&&b.push({elementId:e.idSuffix+f[d].container+"-container",helpId:f[d].helpElement.helpId,msgId:f[d].helpElement.msgId||0,position:f[d].helpElement.position||"top",tooltipWidth:f[d].helpElement.width||210,dynamicArrowPosition:!0});b.push({elementId:e.idSuffix+"clear-all-btn-container",helpId:c.clearAll,msgId:0,position:"top",tooltipWidth:180,dynamicArrowPosition:!0})}},{createSelectorScreen:function(b){if(null!==b.containerId){var c,d,e="#"+b.containerId;return c=new a.Common.Components.Theme2.Models.DataSetSelectorModel(b.data),d=new a.Common.Components.Theme2.Views.DataSetSelectorView({el:e,model:c,idSuffix:b.idSuffix,locAccText:b.locAccText,showNumbers:b.showNumbers,directionText:b.directionText,hasClearAllBtn:b.hasClearAllBtn,buttons:b.buttons,isRoleButtonEnabled:b.isRoleButtonEnabled})}},EVT_ADD_DATASET:"addDataSetClicked",EVT_SEL_DATASET:"dataSetSelected",EVT_DEL_DATASET:"deleteDataSet",EVT_DEL_POPUP_OK_CLICKED:"deleteDataSetPopupOkClicked",EVT_DEL_ALL_DATASET:"deleteAllDataSet",USER_DATASET_COUNT:"%U_COUNT%"}),b=a.Common.Components.Theme2.Views.DataSetSelectorView,a.global.Theme2.DataSelector=a.Common.Components.Theme2.Views.DataSetSelectorView}(window.MathInteractives),function(a){"use strict";var b;a.Common.Components.Theme2.Models.DataSetSelectorModel=a.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{userDataSetLimit:0,noOfPredefinedSets:0,noOfSetsToSelect:0,userDataSets:null,dataSets:null,isShuffle:!1,helpElemWidth:{},jsonData:null,showEmptyDataSets:!1}},initialize:function(b){var c,d=this;d.set("userDataSets",d.get("dataSets")),c=d.get("isShuffle")?_.sample(d.get("jsonData"),d.get("noOfSetsToSelect")):_.first(d.get("jsonData"),d.get("noOfSetsToSelect")),null!==d.get("userDataSets")&&(c=c.concat(d.get("userDataSets"))),d.set("dataSets",new a.Common.Components.Theme2.Collections.DataSetCollection(c))},getDataSet:function(a){return this.get("dataSets").getDataSetByIndex(a)},getCurrentStateData:function(){var a,b=this;return null!==b.get("dataSets")&&b.set("userDataSets",b.get("dataSets").getUserDataSets()),a=JSON.stringify(b.toJSON(),b.getJSONAttributes),$.parseJSON(a)},getHelpElementWidth:function(){return this.get("helpElemWidth")},getJSONAttributes:function(a,b){var c=b;switch(a){case"path":c=void 0;break;case"manager":c=void 0;break;case"player":c=void 0;break;case"dataSets":c=void 0;break;case"jsonData":c=void 0;break;case"noOfSetsToSelect":c=void 0;break;case"noOfPredefinedSets":c=void 0;break;case"userDataSetLimit":c=void 0}return c}},{getChangesType:function(a,c){var d=dataSet.tableHeader3Text&&!dataSet.isSet2Empty?!0:!1;if(JSON.stringify(a)===JSON.stringify(c))return b.DATA_SET_CHNGE_TYPE.NO_CHANGE;if(d){if(a.dataSetName!==c.dataSetName||a.tableHeader1Text!==c.tableHeader1Text||a.tableHeader2Text!==c.tableHeader2Text||a.tableHeader3Text!==c.tableHeader3Text)return JSON.stringify(a.rowModelCollection)===JSON.stringify(c.rowModelCollection)?b.DATA_SET_CHNGE_TYPE.ONLY_LABLE_CHANGE:b.DATA_SET_CHNGE_TYPE.LABEL_DATA_BOTH_CHANGE;if(JSON.stringify(a.rowModelCollection)!==JSON.stringify(c.rowModelCollection))return b.DATA_SET_CHNGE_TYPE.ONLY_DATA_CHANGE}else{if(a.dataSetName!==c.dataSetName||a.tableHeader1Text!==c.tableHeader1Text||a.tableHeader2Text!==c.tableHeader2Text)return JSON.stringify(a.rowModelCollection)===JSON.stringify(c.rowModelCollection)?b.DATA_SET_CHNGE_TYPE.ONLY_LABLE_CHANGE:b.DATA_SET_CHNGE_TYPE.LABEL_DATA_BOTH_CHANGE;if(JSON.stringify(a.rowModelCollection)!==JSON.stringify(c.rowModelCollection))return b.DATA_SET_CHNGE_TYPE.ONLY_DATA_CHANGE}},isMinRowPartiallyFilled:function(a,b,c){var d="X",e="Y",f=c?c.length:2,c=c?c:[d,e],g=a.rowModelCollection,h=0;switch(f){case 2:for(var i="valueOf"+c[0],j="valueOf"+c[1],k=0;k<g.length;k++)if((""!==g[k][i].toString().trim()||""!==g[k][j].toString().trim())&&h++,h==b)return!0;break;case 3:for(var i="valueOf"+c[0],j="valueOf"+c[1],l="valueOf"+c[2],k=0;k<g.length;k++)if((""!==g[k][i].toString().trim()||""!==g[k][j].toString().trim()||""!==g[k][l].toString().trim())&&h++,h==b)return!0}return!1},isMinRowFullyFilled:function(a,b,c){var d="X",e="Y",f=c?c.length:2,c=c?c:[d,e],g=a.rowModelCollection,h=0;switch(f){case 1:for(var i="valueOf"+c[0],j=0;j<g.length;j++)if(""!==g[j][i].toString().trim()&&h++,h===b)return!0;break;case 2:for(var i="valueOf"+c[0],k="valueOf"+c[1],j=0;j<g.length;j++)if(""!==g[j][i].toString().trim()&&""!==g[j][k].toString().trim()&&h++,h===b)return!0;break;case 3:for(var i="valueOf"+c[0],k="valueOf"+c[1],l="valueOf"+c[2],j=0;j<g.length;j++)if(""!==g[j][i].toString().trim()&&""!==g[j][k].toString().trim()&&""!==g[j][l].toString().trim()&&h++,h===b)return!0}return!1},isAnyRowPartiallyFilled:function(a,b){var c="X",d="Y",e=b?b.length:2,b=b?b:[c,d],f=a.rowModelCollection;switch(e){case 2:for(var g="valueOf"+b[0],h="valueOf"+b[1],i=0;i<f.length;i++)if(!(""!==f[i][g].toString().trim()&&""!==f[i][h].toString().trim()||""===f[i][g].toString().trim()&&""===f[i][h].toString().trim()))return!0;break;case 3:for(var g="valueOf"+b[0],h="valueOf"+b[1],j="valueOf"+b[2],i=0;i<f.length;i++)if(!(""!==f[i][g].toString().trim()&&""!==f[i][h].toString().trim()&&""!==f[i][j].toString().trim()||""===f[i][g].toString().trim()&&""===f[i][h].toString().trim()&&""===f[i][j].toString().trim()))return!0}return!1},trimDataSet:function(a,b){void 0!==a.toJSON&&(a=a.toJSON());var c="X",d="Y",e=b?b.length:2,b=b?b:[c,d],f=a.rowModelCollection,g=[];switch(e){case 1:for(var h="valueOf"+b[0],i=0;i<f.length;i++)""!==f[i][h].toString().trim()&&(g[g.length]=f[i]);break;case 2:for(var h="valueOf"+b[0],j="valueOf"+b[1],i=0;i<f.length;i++)(""!==f[i][h].toString().trim()||""!==f[i][j].toString().trim())&&(g[g.length]=f[i]);break;case 3:for(var h="valueOf"+b[0],j="valueOf"+b[1],k="valueOf"+b[2],i=0;i<f.length;i++)(""!==f[i][h].toString().trim()||""!==f[i][j].toString().trim()||""!==f[i][k].toString().trim())&&(g[g.length]=f[i])}return a.rowModelCollection=g,a},isAnyDataOutOfRange:function(a,b){var c=_.keys(b),d=a.rowModelCollection,e=c.length,f={rowNumber:-1,columnNumber:-1};switch(e){case 1:for(var g="valueOf"+c[0],h=b[c[0]].min,i=b[c[0]].max,j=0;j<d.length;j++)if(""!==d[j][g].toString().trim()){var k=parseFloat(d[j][g]);if(k>i||h>k){f.rowNumber=j+1,f.columnNumber=0;break}}break;case 2:for(var g="valueOf"+c[0],h=b[c[0]].min,i=b[c[0]].max,l="valueOf"+c[1],m=b[c[1]].min,n=b[c[1]].max,j=0;j<d.length;j++){if(""!==d[j][g].toString().trim()){var k=parseFloat(d[j][g]);if(k>i||h>k){f.rowNumber=j+1,f.columnNumber=0;break}}if(""!==d[j][l].toString().trim()){var k=parseFloat(d[j][l]);if(k>n||m>k){f.rowNumber=j+1,f.columnNumber=1;break}}}break;case 3:for(var g="valueOf"+c[0],h=b[c[0]].min,i=b[c[0]].max,l="valueOf"+c[1],m=b[c[1]].min,n=b[c[1]].max,o="valueOf"+c[2],p=b[c[2]].min,q=b[c[2]].max,j=0;j<d.length;j++){if(""!==d[j][g].toString().trim()){var k=parseFloat(d[j][g]);if(k>i||h>k){f.rowNumber=j+1,f.columnNumber=0;break}}if(""!==d[j][l].toString().trim()){var k=parseFloat(d[j][l]);if(k>n||m>k){f.rowNumber=j+1,f.columnNumber=1;break}}if(""!==d[j][o].toString().trim()){var k=parseFloat(d[j][o]);if(k>q||p>k){f.rowNumber=j+1,f.columnNumber=2;break}}}}return f},checkCharacterLimitExceed:function(a,b,c,d,e,f){var g={index:-1,rowNumber:-1,columnNumber:-1},h=a.rowModelCollection.length;if(-1!==c&&a.dataSetName.length>c)return g.index=1,g;if(-1!==d){var i,j;for(i=0;b>i;i++)if(j="tableHeader"+(i+1)+"Text",a[j].length>d)return g.index=2,g.rowNumber=0,g.columnNumber=i,g}if(-1!==e){var i,j="valueOfX",k=a.rowModelCollection;for(i=0;h>i;i++)if(k[i][j].length>e)return g.index=3,g.rowNumber=i+1,g.columnNumber=0,g}return-1!==f&&a.xAxisLabel.length>f?(g.index=4,g):void 0},DATA_SET_CHNGE_TYPE:{NO_CHANGE:0,ONLY_LABLE_CHANGE:1,ONLY_DATA_CHANGE:2,LABEL_DATA_BOTH_CHANGE:3},DATA_SET_HELP_ELEM_WIDTH:{DATA_SET_HELP_WIDTH:130,ADD_YOUR_OWN_HELP_WIDTH:230}}),b=a.Common.Components.Theme2.Models.DataSetSelectorModel}(window.MathInteractives),function(a){"use strict";a.Common.Components.Theme2.Collections.DataSetCollection=Backbone.Collection.extend({model:a.Common.Player.Models.BaseInteractive,getDataSetByCID:function(a){return this.get(a)},getUserDataSets:function(){return this.where({isUserData:!0})},getDataSetByIndex:function(a){return this.at(a)}})}(window.MathInteractives),function(){var a=Handlebars.template,b=MathInteractives.Common.Components.templates=MathInteractives.Common.Components.templates||{};b.dataSetSelectorScreen=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\ufeff<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'data-selector-step-screen" class="data-set-selector data-selector-step-screen">\r\n  <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'data-set-selector-direction-text" class="data-set-selector direction-text"></div>\r\n  <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'data-set-selector-area" class="data-set-selector data-set-selector-area">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'data-set-container" class="data-set-selector data-set-container">\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'clear-all-btn-container" class="data-set-selector clear-all-btn-container">\r\n    </div>\r\n  </div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Common.Components.templates=MathInteractives.Common.Components.templates||{};b.dataSetContainer=a(function(a,b,c,d,e){function f(a,b,d){var e,f="";return f+='\r\n<div id="'+q((e=d&&d.idPrefix,typeof e===p?e.apply(a):e))+q((e=d&&d.idSuffix,typeof e===p?e.apply(a):e))+"data-set-"+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" class="data-set-selector data-set data-set-'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" data-set-index="'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'">\r\n  <div id="'+q((e=d&&d.idPrefix,typeof e===p?e.apply(a):e))+q((e=d&&d.idSuffix,typeof e===p?e.apply(a):e))+"data-set-image-container-"+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" class="data-set-selector data-set-image-container" data-set-index="'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'">\r\n    <div id="'+q((e=d&&d.idPrefix,typeof e===p?e.apply(a):e))+q((e=d&&d.idSuffix,typeof e===p?e.apply(a):e))+"data-set-image-"+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" class="data-set-selector data-set-image data-set-image-'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" data-set-index="'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'"></div>\r\n  </div>\r\n  <div id="'+q((e=d&&d.idPrefix,typeof e===p?e.apply(a):e))+q((e=d&&d.idSuffix,typeof e===p?e.apply(a):e))+"data-set-title-container-"+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" class="data-set-selector data-set-title-container ',e=c["if"].call(a,(e=a&&a.attributes,null==e||e===!1?e:e.isUserData),{hash:{},inverse:r.noop,fn:r.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+='" data-set-index="'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'">\r\n    <div id="'+q((e=d&&d.idPrefix,typeof e===p?e.apply(a):e))+q((e=d&&d.idSuffix,typeof e===p?e.apply(a):e))+"data-set-title-"+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'" class="data-set-selector data-set-title" data-set-index="'+q((e=null==b||b===!1?b:b.index,typeof e===p?e.apply(a):e))+'">',e=a&&a.attributes,e=null==e||e===!1?e:e.dataSetName,e=typeof e===p?e.apply(a):e,(e||0===e)&&(f+=e),f+="</div>\r\n  </div>\r\n  ",e=c["if"].call(a,d&&d.showNumbers,{hash:{},inverse:r.noop,fn:r.programWithDepth(4,h,b,a),data:b}),(e||0===e)&&(f+=e),f+="\r\n  ",e=c["if"].call(a,(e=a&&a.attributes,null==e||e===!1?e:e.isUserData),{hash:{},inverse:r.noop,fn:r.programWithDepth(6,i,b,d),data:b}),(e||0===e)&&(f+=e),f+="  \r\n</div>\r\n"}function g(a,b){return"user-data-set-container"}function h(a,b,c){var d,e="";return e+='\r\n  <div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"data-set-number-container-"+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'" class="data-set-selector data-set-number-container">\r\n    <div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"data-set-number-text-"+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'" class="data-set-selector data-set-number-text">'+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+"</div>\r\n  </div>\r\n  "}function i(a,b,c){var d,e="";return e+='\r\n  <div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"data-set-delete-btn-container-"+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'" class="data-set-selector data-set-delete-btn-container" data-set-index="'+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'">\r\n    <div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"data-set-delete-btn-"+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'" class="data-set-selector data-set-delete-btn" data-set-index="'+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'">\r\n      <div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"data-set-delete-btn-icon-"+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'" class="data-set-selector data-set-delete-btn-icon" data-set-index="'+q((d=null==b||b===!1?b:b.index,typeof d===p?d.apply(a):d))+'"></div>\r\n    </div>\r\n  </div>\r\n  '}function j(a,b){var d,e,f="";return f+='\r\n<div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d),(e=c.idSuffix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idSuffix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'add-your-own" class="data-set-selector add-your-own">\r\n  <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d),(e=c.idSuffix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idSuffix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'add-your-own-text-container" class="data-set-selector add-your-own-text-container">\r\n    <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d),(e=c.idSuffix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idSuffix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'add-your-own-text" class="data-set-selector add-your-own-text">\r\n      ',(e=c.addBtnText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.addBtnText,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'\r\n      <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d),(e=c.idSuffix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idSuffix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'add-your-own-btn-container" class="data-set-selector add-your-own-btn-container">\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d),(e=c.idSuffix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idSuffix,
d=typeof e===p?e.call(a,{hash:{},data:b}):e),f+=q(d)+'add-your-own-btn" class="data-set-selector add-your-own-btn"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}function k(a,b){var d,e="";return e+="\r\n",d=c.each.call(a,a&&a.emptyDataSets,{hash:{},inverse:r.noop,fn:r.programWithDepth(11,l,b,a),data:b}),(d||0===d)&&(e+=d),e+="\r\n"}function l(a,b,c){var d,e="";return e+='\r\n<div id="'+q((d=c&&c.idPrefix,typeof d===p?d.apply(a):d))+q((d=c&&c.idSuffix,typeof d===p?d.apply(a):d))+"empty-data-set-"+q(typeof a===p?a.apply(a):a)+'" class="data-set-selector empty-data-set-'+q(typeof a===p?a.apply(a):a)+' empty-data-set">\r\n</div>\r\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n,o="",p="function",q=this.escapeExpression,r=this;return o+='\ufeff<div id="',(n=c.idPrefix)?m=n.call(b,{hash:{},data:e}):(n=b&&b.idPrefix,m=typeof n===p?n.call(b,{hash:{},data:e}):n),o+=q(m),(n=c.idSuffix)?m=n.call(b,{hash:{},data:e}):(n=b&&b.idSuffix,m=typeof n===p?n.call(b,{hash:{},data:e}):n),o+=q(m)+'delete-dataset-tooltip-container" class="data-set-selector delete-dataset-tooltip"></div>\r\n',m=c.each.call(b,b&&b.models,{hash:{},inverse:r.noop,fn:r.programWithDepth(1,f,e,b),data:e}),(m||0===m)&&(o+=m),o+="\r\n",m=c["if"].call(b,b&&b.userDataFree,{hash:{},inverse:r.noop,fn:r.program(8,j,e),data:e}),(m||0===m)&&(o+=m),o+="\r\n",m=c["if"].call(b,b&&b.showEmptyDataSets,{hash:{},inverse:r.noop,fn:r.program(10,k,e),data:e}),(m||0===m)&&(o+=m),o})}(),function(){var a=Handlebars.template,b=MathInteractives.Common.Components.templates=MathInteractives.Common.Components.templates||{};b.editSymbol=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\ufeff<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"input-box-container-",(g=c.rowNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.rowNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="-",(g=c.columnNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.columnNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+='" class="data-set-selector input-box-container"></div>\r\n<span id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"tbl-cell-text-",(g=c.rowNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.rowNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="-",(g=c.columnNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.columnNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+='" class="data-set-selector tbl-cell-text">',(g=c.defaultText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.defaultText,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+='</span>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.idSuffix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idSuffix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"edit-symbol-",(g=c.rowNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.rowNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+="-",(g=c.columnNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.columnNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),(f||0===f)&&(h+=f),h+='"  class="data-set-selector edit-symbol" rowNumber="',(g=c.rowNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.rowNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" columnNumber="',(g=c.columnNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.columnNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">\r\n</div>'})}();