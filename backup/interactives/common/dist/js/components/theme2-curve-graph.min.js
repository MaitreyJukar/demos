!function(){"use strict";MathInteractives.Common.Components.Models.CurveGraph=Backbone.Model.extend({defaults:function(){return{idPrefix:null,manager:null,filePath:null,player:null,containerId:null,canvasId:null,gridData:{maxX:10,maxY:10,scaleX:1,scaleY:1},xUnit:null,yUnit:null,skipXLabels:0,skipYLabels:0,gridLinesColor:"#A8A8A8",gridBackgroundColor:"white",gridLinesSize:1,showGridLines:!0,yLabelsPadding:10,yLabelAdjustment:5,xLabelsPadding:18,padding:{top:50,right:20,bottom:20,left:40},defaultCurveStyle:{strokeWidth:2,strokeColor:"#66CCFF"},defaultPointStyle:{radius:4},calculatedData:{height:null,width:null,numOfHorizontalLines:null,numOfVerticalLines:null,gridStepX:null,gridStepY:null,xConversion:null,yConversion:null},xTooltipPrecision:null,yTooltipPrecision:null,tooltipZIndex:null,labelStyling:{fontSize:10,isBold:!1,fontColor:"#222",fontFamily:null},highlightPoints:!0,allowClickOnGraphCurve:!1,noOfPointsToShowOnCurve:2,points:[],pixelPoints:[],clickablePointsStyling:{radius:10,fillColor:"#004376"},clickablePointsCordsPrecision:0,clickablePointsCordsStyling:{fontSize:12,isBold:!0,fontColor:"#203a41",fontFamily:"montserrat"},showTooltip:!0,filledPixelPoints:[],renderLineTicks:!1,lineTickStyle:{strokeWidth:1,color:"#A8A8A8"},gridMode:null,showTooltipOnCurve:!1,pointSnapMode:0,xAxisLabelFormat:null,yAxisLabelFormat:null,lineTickLength:5,storkeWidthForTouchDevices:30,isCustomEventBind:!1,curveHoverColor:"#674c8",curveActiveColor:"#004376",allowHoverOnCurve:!1,allowSmoothening:!0}},initialize:function(){this._initializeDefaultProps()},calculateConversionFactors:function(a,b){var c=this.get("gridData"),d=this.get("padding"),e=this.get("calculatedData");e.width=a,e.height=b,e.numOfHorizontalLines=c.maxY/c.scaleY,e.numOfVerticalLines=c.maxX/c.scaleX,e.gridStepX=(e.width-d.left-d.right)/e.numOfVerticalLines,e.gridStepY=(e.height-d.top-d.bottom)/e.numOfHorizontalLines,e.xConversion=e.gridStepX/c.scaleX,e.yConversion=e.gridStepY/c.scaleY},getGridLinesPoints:function(){var a=[],b=this.get("padding"),c=this.get("gridData"),d=this.get("calculatedData"),e=null,f=null,g=0;for(g=0;g<=d.numOfVerticalLines;g++)e=g*d.gridStepX+b.left,a.push({startPoint:{x:e,y:b.top},endPoint:{x:e,y:d.height-b.bottom},type:"vertical",value:c.scaleX*g});for(g=0;g<=d.numOfHorizontalLines;g++)f=g*d.gridStepY+b.top,a.push({startPoint:{x:b.left,y:f},endPoint:{x:d.width-b.right,y:f},type:"horizontal",value:c.maxY-c.scaleY*g});return a},getGridOutlinePoints:function(){var a=[],b=this.get("padding"),c=this.get("calculatedData");return a=[{startPoint:{x:b.left,y:b.top},endPoint:{x:c.width-b.right,y:b.top}},{startPoint:{x:c.width-b.right,y:b.top},endPoint:{x:c.width-b.right,y:c.height-b.bottom}},{startPoint:{x:c.width-b.right,y:c.height-b.bottom},endPoint:{x:b.left,y:c.height-b.bottom}},{startPoint:{x:b.left,y:c.height-b.bottom},endPoint:{x:b.left,y:b.top}}]},getPixelCoords:function(a){var b=this.get("calculatedData"),c=this.get("gridData"),d=this.get("padding"),e={};return e.x=a.x*b.xConversion+d.left,e.y=c.maxY*b.yConversion-a.y*b.yConversion+d.top,e},getGraphCoords:function(a){var b=this.get("calculatedData"),c=this.get("gridData"),d=this.get("padding"),e=a,f={};return f.x=(e.x-d.left)/b.xConversion,f.y=(c.maxY*b.yConversion-e.y+d.top)/b.yConversion,f},getTooltipPosition:function(a,b){var c=MathInteractives.Common.Components.Models.CurveGraph,d=this.get("padding"),e=this.get("calculatedData"),f=a.y-b.outerHeight()/2-c.TOP_PADDING,g=a.x+c.LEFT_PADDING,h=e.width-g-b.outerWidth();return f<d.top&&(f=d.top),0>h&&(g=g+h-d.right-c.LEFT_PADDING,f-=b.outerHeight()/2),{top:f+"px",left:g+"px"}},generatePixelPointsArray:function(){for(var a=this.get("points"),b=a.length,c=[],d=0;b>d;d++)c.push(this.getPixelCoords(a[d]));this.set("pixelPoints",c)},getNearestPixelPoint:function(b){for(var c=this.get("pixelPoints"),d=c.length,e=c[0],f=this.getDistance(c[0],b),g=0;d>g;g++){var h=this.getDistance(c[g],b);f>h&&(f=h,e=c[g],this.get("pointSnapMode")!==a.POINT_SNAP_MODE.NEAREST_POINT&&b.x<e.x&&(e=c[g-1]))}return e},getDistance:function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},checkPointAlreadyPlaced:function(a){for(var b=this.get("filledPixelPoints"),c=b.length,d=!1,e=0;c>e;e++)if(b[e].x===a.x&&b[e].y===a.y){d=!0;break}return d},_initializeDefaultProps:function(){var b=a.LABEL_FORMAT.NORMAL;null===this.get("canvasId")&&this.set("canvasId",a.DEFAULT_CANVAS_ID),null===this.get("xAxisLabelFormat")&&this.set("xAxisLabelFormat",b),null===this.get("yAxisLabelFormat")&&this.set("yAxisLabelFormat",b)},getThousandRepresentation:function(b){var c=a.THOUSAND_REPRESENTATION;return b>c.MIN_THRESHOLD&&(b=b%c.CHECK_VAL===0?b/c.CHECK_VAL+c.SYMBOL:(b/c.CHECK_VAL).toFixed(c.PRECISION)+c.SYMBOL),b}},{TOP_PADDING:10,LEFT_PADDING:10,GRID_MODE:{GRID:0,HORIZONTAL:1,VERTICAL:2},POINT_SNAP_MODE:{LOWER_POINT:0,NEAREST_POINT:1},DEFAULT_CANVAS_ID:"graph-canvas",LABEL_FORMAT:{NORMAL:0,THOUSAND_REPRESENTATION:1},THOUSAND_REPRESENTATION:{MIN_THRESHOLD:999,SYMBOL:"k",CHECK_VAL:1e3,PRECISION:1}});var a=MathInteractives.Common.Components.Models.CurveGraph}(),function(){"use strict";var a=MathInteractives.Common.Components.Models.CurveGraph;MathInteractives.Common.Components.Views.CurveGraph=MathInteractives.Common.Player.Views.Base.extend({_scope:null,_allowHoverOnPoint:!0,_graphPoints:null,_pointObject:[],_curvesGroup:null,_clickedPoints:[],_clikedPointsLabels:[],_noOfPointsClicked:0,_graphAxisLabelScope:null,currentTool1:null,graphAccPoints:null,initialize:function(){this.model;this.initializeDefaultProperties(),this.graphAccPoints=[],this.render(),this._graphPoints=[]},render:function(){var a=this.model,b=this.idPrefix,c=this.$el,d=a.get("canvasId"),e=c.width(),f=c.height(),g=b+d+"-0",h=b+d+"-1",i=$("<canvas>",{id:g})[0],j=$("<canvas>",{id:h})[0],k=new paper.PaperScope,l=new paper.PaperScope;i.width=e,i.height=f,j.width=e,j.height=f,c.append(j),c.append(i),$(j).attr("style","position:absolute;left:0px:z-index:1"),$(i).attr("style","position:absolute;left:0px;z-index:2"),k.setup(g),l.setup(h),this._scope=k,this._graphAxisLabelScope=l,a.calculateConversionFactors(e,f),this._drawGrid()},_bindMouseUpOnTool:function(){var a=this;a.currentTool1.on("mouseup",function(b){a.model.get("showTooltip")===!0&&($("body").append("<div> tool mouse up </div>"),a._mouseLeaveOnPoint(b))})},_drawGrid:function(b){this._scope.activate();var c,d,e,f,g=this.model,h=g.getGridLinesPoints(),i=h.length,j=g.get("gridMode"),k=g.get("lineTickLength"),l={color:g.get("gridLinesColor"),strokeWidth:g.get("gridLinesSize")},m=g.get("calculatedData"),n=null,o=this._scope,p=g.get("padding"),q=g.get("gridData"),r=g.get("skipXLabels")+1,s=g.get("skipYLabels")+1,t=g.get("gridBackgroundColor")||null;c=new o.Path.Rectangle({x:p.left,y:p.top},{x:m.width-p.right,y:m.height-p.bottom}),f=c.clone(),null!==t&&(f.fillColor=g.get("gridBackgroundColor")),c.bringToFront();for(var u=0;i>u;u++){if(n=h[u],d=n.startPoint,e=n.endPoint,g.get("showGridLines")===!0)switch(j){case a.GRID_MODE.GRID:this._drawLine(d,e,l);break;case a.GRID_MODE.HORIZONTAL:("horizontal"===n.type||0===u)&&this._drawLine(d,e,l);break;case a.GRID_MODE.VERTICAL:("vertical"===n.type||u===i-1)&&this._drawLine(d,e,l)}else(0===u||u===i-1)&&this._drawLine(d,e,l);switch(n.type){case MathInteractives.global.CurveGraph.ALIGN_TYPE.VERTICAL:Math.floor(n.value/q.scaleX)%r===0&&(this._renderLabel({x:e.x,y:e.y+g.get("xLabelsPadding")},n.value,"center",n.type),g.get("renderLineTicks")===!0&&0!==u&&this._renderLineTicks({x:e.x,y:e.y},{x:e.x,y:e.y+k}));break;case MathInteractives.global.CurveGraph.ALIGN_TYPE.HORIZONTAL:0!==n.value&&(Math.floor(n.value/q.scaleY)%s===0&&this._renderLabel({x:d.x-g.get("yLabelsPadding"),y:d.y+g.get("yLabelAdjustment")},n.value,"right",n.type),g.get("renderLineTicks")===!0&&u!==i-1&&this._renderLineTicks({x:d.x,y:d.y},{x:d.x-k,y:d.y}))}}this._curvesGroup=new o.Group([c]),this._curvesGroup.clipped=!0,this._scope.view.draw()},_drawLine:function(a,b,c){this._scope.activate();var d=new this._scope.Path({strokeColor:c.color,strokeWidth:c.strokeWidth});d.add(a),d.add(b)},_renderLabel:function(a,b,c,d){var e=this.model;this._graphAxisLabelScope.activate(),d===MathInteractives.global.CurveGraph.ALIGN_TYPE.VERTICAL?e.get("xAxisLabelFormat")===MathInteractives.Common.Components.Models.CurveGraph.LABEL_FORMAT.THOUSAND_REPRESENTATION&&(b=e.getThousandRepresentation(b)):e.get("yAxisLabelFormat")===MathInteractives.Common.Components.Models.CurveGraph.LABEL_FORMAT.THOUSAND_REPRESENTATION&&(b=e.getThousandRepresentation(b));var f=this.model.get("labelStyling"),g=new this._graphAxisLabelScope.PointText({position:a,content:b,justification:c,fontSize:f.fontSize,fontColor:f.fontColor});f.isBold&&(g.strokeWidth=1,g.strokeColor=f.fontColor),f.fontFamily&&(g.font=f.fontFamily),this._graphAxisLabelScope.view.draw()},drawCurve:function(a){this._scope.activate(),this._pointObject=[];var b=a.points,c=($.support.touch,a.curvePoints),d=c.length,e=b?b.length:0,f=this.model,g=this._scope,h=f.get("defaultCurveStyle"),i=f.get("defaultPointStyle"),j=(f.get("allowClickOnGraphCurve"),f.get("gridData").maxY),k=a.curveColor?a.curveColor:h.strokeColor,l=new g.Path({strokeColor:k,strokeWidth:a.curveWidth?a.curveWidth:h.strokeWidth,strokeCap:"round"}),m=null,n=0,o=null,p=a.pointRadius?a.pointRadius:i.radius,q=new g.Group,r=new g.Group,s=null;if(q.addChild(l),l.name="original-path",this._curvesGroup.addChild(q),a.dashArray&&(l.dashArray=a.dashArray),a.isAnimated){var t=this,u=0,n=0,v=null,w=null,x=(a.animationDuration/c.length,null);if(e)var y=a.animationDuration/b.length,x=setInterval(function(){w=b[u],v=f.getPixelCoords(w),l.add(v),l.smooth(),s=t._drawPoints(v,p,k,w),r.addChild(s),t._scope.view.draw(),u++,u===b.length&&(clearInterval(x),t._scope.view.draw(),t.trigger(MathInteractives.global.CurveGraph.events.END_OF_ANIMATION))},y)}else{for(n=0;d>n;n++)o=c[n],m=f.getPixelCoords(o),l.add(m);if(f.get("highlightPoints")===!0&&e)for(n=0;e>n;n++)o=b[n],o.y<=j&&(m=f.getPixelCoords(o),s=this._drawPoints(m,p,k,o),this._pointObject.push(s),r.addChild(s))}return this._scope.view.draw(),this._graphPoints[q]=r,r.curve=q,this.pointsGroup=r,f.get("isCustomEventBind")===!1&&(this._increaseCurveHitArea(q),this._bindMouseDownOnCurveGroup(q),this._bindMouseHoverEventOnCurveGroup(q),this._bindTooltipEventOnCurveGroup(q)),this._cover&&this._cover.bringToFront(),q},addPointToCurve:function(a,b,c,d){this._scope.activate();var e=this.model,f=b,g=e.get("allowSmoothening"),h=e.getPixelCoords(f);if(a.children[0].add(h),g===!0&&a.children[0].smooth(),e.get("highlightPoints")===!0){var i=this._drawPoints(h,d,c,f);this._pointObject.push(i),this.pointsGroup.addChild(i)}this._scope.view.draw()},_drawPoints:function(a,b,c,d){var e=this._scope,f=new e.Path.Circle({radius:b,position:a,fillColor:c}),g=new e.Path.Circle({radius:MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile?10:b,position:a,fillColor:new e.Color(1,1,1,0)}),h=new e.Group([f,g]);return g.coords=d,g.name="graph-point-hitarea",f.name="actual-point",this.model.get("showTooltip")===!0&&this._attachTooltipEvents(h),h},_attachTooltipEvents:function(a){var b=this;$.support.touch;a.onMouseEnter=function(a){b._allowHoverOnPoint&&b._mouseEnterOnPoint(a)},a.onMouseLeave=function(a){b._mouseLeaveOnPoint(a)},a.onMouseDown=function(a){b._allowHoverOnPoint&&(b.$tooltip&&b.$tooltip.remove(),b._mouseEnterOnPoint(a))},a.onMouseUp=function(a){b._mouseLeaveOnPoint(a)}},_mouseEnterOnPoint:function(a){if(!this.model.get("player").getModalPresent()){var b=this.model,c=$($("<div>",{id:b.get("idPrefix")+"graph-canvas-toolitp"})[0]),d=a.target,e=d.coords,f=b.get("xUnit"),g=b.get("yUnit"),h=b.get("tooltipZIndex");b.get("yTooltipPrecision")&&e.y&&(e.y=parseFloat(e.y).toFixed(b.get("yTooltipPrecision"))),b.get("xTooltipPrecision")&&e.x&&(e.x=parseFloat(e.x).toFixed(b.get("xTooltipPrecision"))),this.$el.append(c),c.addClass("curve-graph-tooltip").html(e.x+f+", "+e.y+g).css(b.getTooltipPosition(d.position,c)),h&&c.css("z-index",h),this.$tooltip=c,a.curveGroup=a.target.parent.parent.curve,this.trigger(MathInteractives.global.CurveGraph.events.MOUSE_ENTER_ON_POINT,{event:a})}},_mouseLeaveOnPoint:function(a){this.$tooltip&&(this.$tooltip.remove(),this.trigger(MathInteractives.global.CurveGraph.events.MOUSE_LEAVE_ON_POINT,{event:a}))},allowHover:function(){this._allowHoverOnPoint=!0},preventHover:function(){this._allowHoverOnPoint=!1},removeCurve:function(a){this._graphPoints[a]&&(this._graphPoints[a].onMouseEnter=null,this._graphPoints[a].onMouseLeave=null,this._graphPoints[a].onMouseDown=null,this._graphPoints[a].onMouseUp=null,this._graphPoints[a].detach(),this._graphPoints[a].remove(),this._emptyClickedPoints(),a.onMouseEnter=null,a.onMouseLeave=null,a.onMouseDown=null,a.onMouseUp=null,a.detach(),a.remove(),this._scope.view.draw(),this.model.set("filledPixelPoints",[]),this._emptyGraphAccPoints())},_emptyClickedPoints:function(){for(var a=this._clickedPoints,b=a.length,c=0;b>c;c++)a[c].detach(),a[c].remove();this._noOfPointsClicked=0,this._clickedPoints=[]},_emptyGraphAccPoints:function(){for(var a=this.graphAccPoints,b=a.length,c=0;b>c;c++)a[c].detach(),a[c].remove();this.graphAccPoints=[]},changeGraph:function(a){this.model.destroy(),this.pointsGroup&&this.removeCurve(this.pointsGroup.curve);var b=new MathInteractives.Common.Components.Models.CurveGraph(a);this._scope.project.activeLayer.removeChildren(),this._graphAxisLabelScope.project.activeLayer.removeChildren(),this.model=b,this._setGridMode(),b.calculateConversionFactors(this.$el.width(),this.$el.height()),b.generatePixelPointsArray(),this._drawGrid(),this._graphPoints=[],this._noOfPointsClicked=0,this._clickedPoints=[],this._scope.activate(),this.currentTool1=new this._scope.Tool,this.currentTool1.onMouseDrag=function(a){a.preventDefault()},this._bindMouseUpOnTool(),this._scope.view.draw()},pulsatePoints:function(a,b){var c=!0,d=this._graphPoints[a],e=d.children,b=b?b:3,f=[],g=0,h=0,i=null,j=null,d=null,k=1,l=this;for(h=0;h<e.length;h++){d=e[h].children;for(var m=0;2>m;m++)d&&d.length&&"actual-point"===d[m].name&&f.push(d[m])}this.preventHover(),i=setInterval(function(){for(j=c?1.1:1/1.1,h=0;h<f.length;h++)f[h].scale(j);paper.view.draw(),g++,g%3===0&&(c=!c,k/2===b&&(clearInterval(i),l.allowHover(),l.trigger(MathInteractives.global.CurveGraph.events.PULSATE_END)),k++)},70)},drawCover:function(a){var b=this._scope,c=new b.Point(a.left,a.top),d=new b.Size(a.width,a.height),e=new b.Path.Rectangle(c,d);e.fillColor="white",e.fillColor.alpha=0,this._cover=e},showCurve:function(a){a.visible=!0,this._scope.view.draw()},hideCurve:function(a){a.visible=!1,this._scope.view.draw()},_bindMouseDownOnCurveGroup:function(a){var b=this,c=this.model,d=this._clickedPoints,e=(this._clikedPointsLabels,c.get("noOfPointsToShowOnCurve"));c.get("allowClickOnGraphCurve")===!0&&(a.off("mousedown"),a.onMouseDown=function(f){if(!b.player.getModalPresent()){b._graphCurveMouseEnterHandler(a);var g=this.getItem(),h={pointGroup:null,success:!1},i=c.get("filledPixelPoints");if(h=b._drawClikedPoint(g.getNearestPoint(f.point),this),h.success===!0&&d.push(h.pointGroup),b._noOfPointsClicked>e&&h.success===!0){var j=d.length,k=0;j>0&&(d[k].remove(),delete d[k],d.splice(k,1),i.splice(k,1),c.set("filledPixelPoints",i),b._noOfPointsClicked--)}h.success===!0&&b.trigger(MathInteractives.global.CurveGraph.events.MAX_NO_OF_POINTS_SELECTED,{event:f,data:{pointsClicked:d,filledPixelPoints:i,currentPointData:{pointClicked:d[b._noOfPointsClicked-1],filledPixelPoint:i[b._noOfPointsClicked-1]}}})}})},_drawClikedPoint:function(a,b){if(this._scope.activate(),this.model.checkPointAlreadyPlaced(this.model.getNearestPixelPoint(a))===!0)return{pointGroup:null,success:!1};var c=this,d=this._scope,e=this.model,f=e.get("filledPixelPoints"),g=e.get("clickablePointsStyling"),h=e.getNearestPixelPoint(a),i=new d.Path.Circle({radius:g.radius,position:new d.Point(h.x,h.y),fillColor:g.fillColor}),j=null;return f.push(h),i.name="actual-point",i.coords=e.getGraphCoords(h),j=new d.Group([i]),j.on("mouseup",function(a){c._graphCurveMouseLeaveHandler(b)}),this._noOfPointsClicked++,e.get("showTooltip")===!0&&this._attachTooltipEvents(j),{pointGroup:j,success:!0}},_attachTooltipEventOnCurve:function(a){var b=this;$.support.touch;a.onMouseEnter=function(a){b.player.getModalPresent()||b._mouseEnterOnCurve(a)},a.onMouseLeave=function(a){b._mouseLeaveOnCurve(a)},a.onMouseDown=function(a){b.player.getModalPresent()||($("body").append("<div>mouse down</div>"),b.$tooltip&&b.$tooltip.remove(),b._mouseEnterOnCurve(a))},a.onMouseUp=function(a){b._mouseLeaveOnCurve(a)}},_mouseEnterOnCurve:function(a){if(!this.model.get("player").getModalPresent()){var b=this.model,c=$($("<div>",{id:b.get("idPrefix")+"graph-canvas-toolitp"})[0]),d=b.getGraphCoords(a.point),e=b.get("xUnit"),f=b.get("yUnit"),g=b.get("tooltipZIndex");b.get("yTooltipPrecision")&&d.y&&(d.y=parseFloat(d.y).toFixed(b.get("yTooltipPrecision"))),b.get("xTooltipPrecision")&&d.x&&(d.x=parseFloat(d.x).toFixed(b.get("xTooltipPrecision"))),this.$el.append(c),c.addClass("curve-graph-tooltip").html(d.x+e+", "+d.y+f).css(b.getTooltipPosition(a.point,c)),g&&c.css("z-index",g),this.$tooltip=c,this.trigger(MathInteractives.global.CurveGraph.events.MOUSE_ENTER_ON_CURVE,{event:a})}},_mouseLeaveOnCurve:function(a){this.$tooltip&&(this.$tooltip.remove(),this.trigger(MathInteractives.global.CurveGraph.events.MOUSE_LEAVE_ON_CURVE,{event:a}))},_bindTooltipEventOnCurveGroup:function(a){this.model.get("showTooltipOnCurve")===!0&&this._attachTooltipEventOnCurve(a)},_renderCoordinatesLabel:function(a,b){var c=this.model,d=c.get("clickablePointsCordsStyling"),e=new this._scope.PointText({content:"("+b.x.toFixed(c.get("clickablePointsCordsPrecision"))+","+b.y.toFixed(c.get("clickablePointsCordsPrecision"))+")",justification:"left",fontSize:d.fontSize,fontColor:d.fontColor});a.x=a.x-e.bounds.width,a.y=a.y,e.position=a,d.isBold&&(e.strokeWidth=1,e.strokeColor=d.fontColor),d.fontFamily&&(e.fontFamily=d.fontFamily),this._clikedPointsLabels.push(e)},_renderLineTicks:function(a,b){var c=this.model.get("lineTickStyle");this._drawLine(a,b,c)},_setGridMode:function(){var b=this.model,c=b.get("gridMode");null===c&&(c=a.GRID_MODE.GRID,b.set("gridMode",c))},detachMouseDownOnCurve:function(a){a.detach("mousedown")},bindMouseEventsOnCurve:function(a){this._increaseCurveHitArea(a),this._bindMouseDownOnCurveGroup(a),this._bindMouseHoverEventOnCurveGroup(a)},attachTooltipEvent:function(a){this._bindTooltipEventOnCurveGroup(a)},_graphCurveMouseEnterHandler:function(a){if(!this.player.getModalPresent()){this.trigger(MathInteractives.global.CurveGraph.events.HOVER_ON_CURVE);var b=this._scope;b.activate(),a.children[0].strokeColor=new b.Color(this.model.get("curveHoverColor")),b.view.draw()}},_graphCurveMouseLeaveHandler:function(a){if(!this.player.getModalPresent()){this.trigger(MathInteractives.global.CurveGraph.events.HOVER_REMOVED_FROM_CURVE);var b=this._scope;b.activate(),a.children[0].strokeColor=new b.Color(this.model.get("curveActiveColor")),b.view.draw()}},_bindMouseHoverEventOnCurveGroup:function(a){if(this.model.get("allowHoverOnCurve")===!0){var b=this,c=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile;a.onMouseEnter=function(c){b._graphCurveMouseEnterHandler(a)},a.onMouseLeave=function(c){b._graphCurveMouseLeaveHandler(a)},c&&(a.onMouseUp=function(c){b._graphCurveMouseLeaveHandler(a)},this.currentTool1.on("mouseup",function(c){b._graphCurveMouseLeaveHandler(a)}))}},setPixelPoints:function(a){var b=this.model;b.set("points",a),b.generatePixelPointsArray()},increaseCurveHitArea:function(a){this._increaseCurveHitArea(a)},_increaseCurveHitArea:function(a){if(MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile&&this.model.get("allowClickOnGraphCurve")===!0){this._scope.activate();var b=null;b=a.children[0].clone(),b.opacity=0,b.strokeWidth=this.model.get("storkeWidthForTouchDevices"),a.addChild(b),b.bringToFront(),b.name="dummy-path",this._scope.view.draw()}},addGraphPointsForAcc:function(){for(var a=this.model.get("pixelPoints"),b=a.length,c=MathInteractives.global.CurveGraph.POINT_RADIUS_FOR_ACC,d=0;b>d;d++)this.graphAccPoints.push(this._drawPointsForAcc(a[d],c));this._scope.view.draw()},_drawPointsForAcc:function(a,b){this._scope.activate;var c=this._scope,d=new c.Path.Circle({radius:b,position:a});return d.coords=this.model.getGraphCoords(a),d.opacity=0,d}},{generateCurveGraph:function(a){if(a){var b,c,d;return b="#"+a.idPrefix+a.containerId,c=new MathInteractives.Common.Components.Models.CurveGraph(a),d=new MathInteractives.Common.Components.Views.CurveGraph({el:b,model:c})}},events:{MOUSE_ENTER_ON_POINT:"mouse-enter",MOUSE_LEAVE_ON_POINT:"mouse-leave",END_OF_ANIMATION:"animation-ends",PULSATE_END:"pulsate-ends",MAX_NO_OF_POINTS_SELECTED:"max-no-of-points-selected",MOUSE_ENTER_ON_CURVE:"mouse-enter-on-curve",MOUSE_LEAVE_ON_CURVE:"mouse-leave-on-curve",HOVER_ON_CURVE:"hover-on-curve",HOVER_REMOVED_FROM_CURVE:"hover-removed-from-curve"},ALIGN_TYPE:{VERTICAL:"vertical",HORIZONTAL:"horizontal"},POINT_RADIUS_FOR_ACC:2.5}),MathInteractives.global.CurveGraph=MathInteractives.Common.Components.Views.CurveGraph}();