!function(){"use strict";var a;MathInteractives.Common.Components.Theme2.Views.NumberLineExtended=MathInteractives.Common.Components.Theme2.Views.NumberLine.extend({currentLayer:null,zommInOutDataStack:[],leftCloneTicksGroup:null,leftCloneLabelsGroup:null,rightCloneTicksGroup:null,trightCloneLabelsGroup:null,leftPanElmtsGrp:null,rightPanElmtsGrp:null,visibleLabelsIndexArr:[],midVal:null,zoomIn:!1,zoomOut:!1,skipTickCount:null,initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.model.off(a.Events.ZOOM_OUT_START).on(a.Events.ZOOM_OUT_START,$.proxy(this.fadeOutTicksOnLine,this)),this.model.off(a.Events.FADEOUT_COMPLETE).on(a.Events.FADEOUT_COMPLETE,$.proxy(this._startZoomingOut,this))},_renderNumberLine:function(){this.scope.activate();var b=this.model.get("animate");if(b===!0)return this.startPanning(),void(this.fadeInEffect=!0);var c,d,e,f=this.model,g=MathInteractives.Common.Utilities.Models.Utils,h=this,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,b=null,J=null,K=.1,L=null,M=null,N=null,O=null,P=null,Q=17,R=null,S=3,T=5,U=16,V=f.get("minValue"),W=f.get("maxValue"),X=f.get("color"),Y=f.get("textColor"),Z=f.get("numberOfIntervals"),$=f.get("length"),_=f.get("width"),aa=f.get("centerTickHeight"),ba=f.get("ticksClickable"),ca=f.get("partsClickable"),da=f.get("tickShape"),ea=f.get("displayWholeNumOnly"),fa=f.get("denominator"),ga=f.get("toFixedDecimal"),ha=f.get("tickColor"),ia=f.get("tickWidth"),ja=(f.get("distanceBetweenTwoSticks"),f.get("centerTickHeightBigger")),ka=f.get("tickLength"),la=f.get("textPadding"),ma=f.get("textStyle"),na=f.get("toFixedInteger"),oa=(f.get("clickedRangeStartXCoordinate"),f.get("clickedRangeEndXCoordinate"),f.get("arrowWidth")),pa=f.get("highlightData"),qa=f.get("tickHitAreaDimentions"),ra=f.get("showTicks"),sa=f.get("showLable"),ta=f.get("showBaseLine"),ua=f.get("showAlternateLableWhenOverlap"),va=f.get("showAlternateAlways"),wa=f.get("skipTickCount"),xa=f.get("customArrowSize"),ya=f.get("leftArrowTickDistance"),za=f.get("rightArrowTickDistance"),Aa=f.get("addCommaInLabel");for(wa++,this.setCanvasSize(),this.skipTickCount=wa,f.set("skipTickCount",wa),this.numberOfIntervals=Z,null===ya&&(ya=a.LEFT_ARROWHEAD_DISTANCE_FROM_MIN_VALUE),null===za&&(za=a.RIGHT_ARROWHEAD_DISTANCE_FROM_MAX_VALUE),ha||(ha=X,f.set("tickColor",ha)),E||(E=X,f.set("integerTickColor",E)),ia||(ia=_,f.set("tickWidth",ia)),la&&(U=ma&&ma.fontSize?la+(ma.fontSize-12):la+1),f.set("textPadding",U),this.tickPointsXCoordinateArray=[],this.tickPointsYCoordinateArray=[],this.tickNumbersArr=[],this.roundedTickNumbersArr=[],i=a.START_POINT_X_COORDINATE,k=a.START_POINT_Y_COORDINATE,l=a.END_POINT_Y_COORDINATE,j=$,J=new this.scope.Layer,this.currentLayer=J,this.fadeInEffect===!0&&(J.opacity=0),k===l&&(G=null!==ka?ka/2:_+S,H=ja===!0?ka?G+2:_+T:G,o=k-G,p=k+G,aa?(w=k-aa/2,x=k+aa/2):(w=k-H,x=k+H),f.set("newStartPointY",o),f.set("newEndPointY",p)),A=null!==ka?ka:p-o,oa?(j=i+$,P=i+oa-1,m=i+oa+ya,n-=oa+za,$=j-i-(ya+za+2*oa)):(oa=A-S,P=i,m=i+ya,n-=za,$=j-i-(ya+za)),f.set("firstTickPointX",m),this.startLineSegment=new this.scope.Path.Line({from:[P,k],to:[m,l],strokeColor:X,strokeWidth:_}),ta===!1&&(startLineSegment.opacity=0),t=m,u=p+U,f.set("textPaddingFromNumberLine",U),q=$/Z,this.divisionWidth=q,r=Z/2,v=(W-V)/Z,f.set("tickInterval",v),s=V,this.ticksGroup=new this.scope.Group,this.partsHitAreaGroup=new this.scope.Group,this.ticksHitAreaGroup=new this.scope.Group,this.lineSegmentGroup=new this.scope.Group,this.textGroup=new this.scope.Group,this.highlightRangeGroup=new this.scope.Group,ea===!0&&this._calculateInitailTicks(),this.visibleLabelsIndexArr=[],L=0;Z>=L;L++)va&&(sa=L%wa===0?!0:!1),L===r?(da===a.LINE?ra&&(y=new this.scope.Path.Line({from:[m,w],to:[m,x],strokeColor:ha,strokeWidth:ia})):da===a.CIRCLE&&ra&&(y=new this.scope.Path.Circle(new this.scope.Point(m,k),A/2),y.fillColor=X),this.xCoordinateOfZerothPoint=m,z=new this.scope.PointText(new this.scope.Point(t,u)),z.justification="center",z.fillColor=Y,Y||(z.fillColor=X),ma&&(z.style=ma),ea===!0?0===this.tickCounter&&(F=parseInt(s.toFixed(na)),I=Math.abs(parseInt(F,10)),0===I&&(F=I),sa&&(F=Aa===!0?this.getNumWithCommasAdded(F):this.getDisplayNumber(F),z.content=F,this.visibleLabelsIndexArr.push(L)),ra&&(y.strokeColor=E)):sa&&(F=+s.toFixed(ga),F=Aa===!0?this.getNumWithCommasAdded(F):this.getDisplayNumber(F),z.content=F,this.visibleLabelsIndexArr.push(L)),this.midVal=+s.toFixed(ga),aa||(aa=x-w),f.set("centerTickHeight",aa),B=A+5,C=aa+7,qa&&(B=qa.width,C=qa.height),D=q-B,this.tickPointsYCoordinateArray.push(w)):(da===a.LINE?ra&&(y=new this.scope.Path.Line({from:[m,o],to:[m,p],strokeColor:ha,strokeWidth:ia})):da===a.CIRCLE&&ra&&(y=new this.scope.Path.Circle(new this.scope.Point(m,k),A/2),y.fillColor=X),z=new this.scope.PointText(new this.scope.Point(t,u)),z.justification="center",z.fillColor=Y,Y||(z.fillColor=X),ma&&(z.style=ma),ea===!0?0===this.tickCounter&&(F=parseInt(s.toFixed(na)),I=Math.abs(parseInt(F,10)),0===I&&(F=I),sa&&(F=Aa===!0?this.getNumWithCommasAdded(F):this.getDisplayNumber(F),z.content=F,this.visibleLabelsIndexArr.push(L)),ra&&(y.strokeColor=E)):sa&&(F=+s.toFixed(ga),F=Aa===!0?this.getNumWithCommasAdded(F):this.getDisplayNumber(F),z.content=F,this.visibleLabelsIndexArr.push(L)),ka||(A=p-o),B=A+5,C=A+7,qa&&(B=qa.width,C=qa.height),D=q-B,this.tickPointsYCoordinateArray.push(o)),ba&&(L===r?(c=new this.scope.Path.Rectangle(m+(T-S)-B/2,k-C/2,B,C),ka&&(c=new this.scope.Path.Rectangle(m-B/2,k-C/2,B,C)),c.fillColor=new this.scope.Color(255,255,255,0)):(c=new this.scope.Path.Rectangle(m-B/2,k-C/2,B,C),c.fillColor=new this.scope.Color(255,255,255,0)),this.ticksHitAreaGroup.addChild(c)),Z>L&&(d=ra?new this.scope.Path.Line({from:[m,k],to:[m+q,l],strokeColor:X,strokeWidth:_}):new this.scope.Path.Line({from:[m,k],to:[m+q+ia,l],strokeColor:X,strokeWidth:_}),ta===!1&&(d.opacity=0),ca&&(pa&&(C=pa.height),L===r?(e=new this.scope.Path.Rectangle(m+1,k-C/2,q-2,C),e.fillColor=new this.scope.Color(255,255,255,0)):(e=new this.scope.Path.Rectangle(m+1,k-C/2,q-2,C),e.fillColor=new this.scope.Color(255,255,255,0)),this.partsHitAreaGroup.addChild(e))),this.tickNumbersArr.push(s),this.roundedTickNumbersArr.push(g.roundUpValue(s,ga)),this.tickPointsXCoordinateArray.push(m),f.set("lastTickPointX",m),m+=q,t+=q,s=(s*Math.pow(10,8)+v*Math.pow(10,8))/Math.pow(10,8),ea===!0&&(this.tickCounter++,this.tickCounter===Math.abs(fa)&&(this.tickCounter=0)),ra&&this.ticksGroup.addChild(y),this.textGroup.addChild(z),this.lineSegmentGroup.addChild(d),this.partsHitAreaGroup.bringToFront();this.ticksGroup.bringToFront(),this.ticksHitAreaGroup.bringToFront();var Ba=new this.scope.Path.Line({from:[m-q,k],to:[m-q+za,l],strokeColor:X,strokeWidth:_});if(ta===!1&&(Ba.opacity=0),R=this._isLablesOverlapping(),R===!0&ua===!0&&this._hideAlternateLables(),ba===!0&&(this.setHighlightEffectForTicks(Z,this.ticksHitAreaGroup,this.ticksGroup,X,pa),this.bindTickClick(Z,this.ticksHitAreaGroup,this.ticksGroup)),ca===!0&&(this.setHighlightEffectForParts(Z,this.partsHitAreaGroup,this.lineSegmentGroup,_,X,pa),this.bindPartClick(Z,this.partsHitAreaGroup,this.lineSegmentGroup)),xa===!0?this._drawCustomArrowHeadsAtNumberLineEnds(l,X,A,startLineSegment,Ba):this._drawArrowHeadsAtNumberLineEnds(i,k,j,l,X,A,S),N=this.scope.project.layers,O=N.length-2,this.fadeInEffect===!0)h.model.trigger(a.Events.FADEIN_START),M=setInterval(function(){if(K+=.1,K=+K.toFixed(1),J.opacity=K,h.scope.view.draw(),1===K){for(clearInterval(M);O>=0;O--)N[O].remove();h.scope.view.draw(),h.fadeInEffect=!1,h.model.trigger(a.Events.ANIMATION_COMPLETE,{zoomIn:h.zoomIn,zoomOut:h.zoomOut})}h.model.trigger(a.Events.FADEIN_PROGRESS)},Q);else for(;O>=0;O--)N[O].remove();this.loadedAcc&&this.accOn===!0&&this.canvasAcc.updatePaperItems(this.getPaperObjects(!0)),this.zommInOutDataStack.push({minVal:V,maxVal:W,midVal:this.midVal,numberOfIntervals:Z,ticksGroup:this.ticksGroup,lineSegmentGroup:this.lineSegmentGroup,textGroup:this.textGroup,tickPointsXCoordinateArray:this.tickPointsXCoordinateArray,tickPointsYCoordinateArray:this.tickPointsYCoordinateArray,tickNumbersArr:this.tickNumbersArr}),this.scope.view.draw()},addCommas:function(a){var b,c,d;a+="",b=a.split("."),c=b[0],d=b.length>1?"."+b[1]:"";for(var e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return c+d},getNumWithCommasAdded:function(a){var b,c=Number(a),d=$("<div/>").html("&#8722;").html(),e=this.addCommas(Math.abs(a));return b=b=null!==e&&void 0!==e?0>c?d+e:e:0>c?d+Math.abs(c):c},getDisplayNumber:function(a){var b,c=Number(a),d=$("<div/>").html("&#8722;").html();return b=0>c?d+Math.abs(c):c},setClickedRangeObject:function(a){var b=this,c=a,d=b.tickNumbersArr[c],e=b.tickNumbersArr[c+1],f=b.tickPointsXCoordinateArray[c],g=b.tickPointsXCoordinateArray[c+1],h=b.tickPointsYCoordinateArray[c],i={rangeStartValue:d,rangeEndValue:e,rangeStartXCoordinate:f,rangeEndXCoordinate:g,yCoordinate:h};return this.rangeStratValue=i.rangeStartValue,this.rangeEndValue=i.rangeEndValue,this.model.set("clickedRangeObject",i),i},setValuesInModel:function(a){this.isValue(a.skipTickCount)&&this.model.set("skipTickCount",a.skipTickCount),this.isValue(a.showAlternateAlways)&&this.model.set("showAlternateAlways",a.showAlternateAlways),this.isValue(a.numberOfIntervals)&&this.model.set("numberOfIntervals",a.numberOfIntervals),this.isValue(a.minValue)&&this.model.set("minValue",a.minValue),this.isValue(a.maxValue)&&this.model.set("maxValue",a.maxValue),this.isValue(a.addCommaInLabel)&&this.model.set("addCommaInLabel",a.addCommaInLabel)},isValue:function(a){return"undefined"!=typeof a&&null!==a},setCanvasSize:function(){var a=this.$("#"+this.idPrefix+"number-line-canvas"),b=this.model.get("canvasWidth"),c=this.model.get("canvasHeight");null!==b&&"undefined"!=typeof b&&null!==c&&"undefined"!=typeof c&&(a.attr("width",Number(b)),a.attr("height",Number(c)),this.scope.view.viewSize=[Number(b)-1,Number(c)],this.scope.view.viewSize=[Number(b),Number(c)])},startPanning:function(){var b,c,d,e,f,g,h,i=this.ticksGroup,j=0,k=this.textGroup,l=this,m=17,n=25,o=null,p=this.model.get("maxValue"),q=this.model.get("minValue"),r=this.model.get("toFixedDecimal"),s=this.model.get("newStartPointY"),t=this.model.get("newEndPointY"),u=this.model.get("firstTickPointX"),v=this.model.get("lastTickPointX"),w=this.model.get("tickInterval"),x=this.model.get("tickColor"),y=this.model.get("textColor"),z=this.model.get("color"),A=this.model.get("tickWidth"),B=(this.model.get("textPadding"),this.model.get("textStyle")),f=this.model.get("clickedRangeObject"),C=this.model.get("textPaddingFromNumberLine"),D=this.model.get("showAlternateAlways");this.zoomIn=!0,this.zoomOut=!1,g=f.rangeStartXCoordinate,h=f.rangeEndXCoordinate,b=(g+h)/2,o=setInterval(function(){l.disableNumberLine=!0,b>l.xCoordinateOfZerothPoint?(i.position.x=l.ticksGroup.position.x-n,k.position.x=l.textGroup.position.x-n,b-=n,h-=n,g-=n,u>l.ticksGroup.children[0].position.x&&(l.ticksGroup.children[0].remove(),l.textGroup.children[0].remove(),j>0&&(c=new l.scope.Path.Line({from:[v,s],to:[v,t],strokeColor:x,strokeWidth:A}),p+=w,d=t+C,e=new l.scope.PointText(new l.scope.Point(v,d)),e.justification="center",e.fillColor=y,y||(e.fillColor=z),B&&(e.style=B),D===!0?j%l.skipTickCount===0&&0!==l.skipTickCount&&(e.content=+q.toFixed(r)):e.content=+p.toFixed(r),l.ticksGroup.addChild(c),l.textGroup.addChild(e)),j++),b<=l.xCoordinateOfZerothPoint&&(clearInterval(o),l.startZooming({rangeStartXCoordinate:g,rangeEndXCoordinate:h}))):b<l.xCoordinateOfZerothPoint&&(i.position.x=l.ticksGroup.position.x+n,k.position.x=l.textGroup.position.x+n,b+=n,h+=n,g+=n,v<l.ticksGroup.lastChild.position.x&&(l.ticksGroup.lastChild.remove(),l.textGroup.lastChild.remove(),j>0&&(c=new l.scope.Path.Line({from:[u,s],to:[u,t],strokeColor:x,strokeWidth:A}),q-=w,d=t+C,e=new l.scope.PointText(new l.scope.Point(u,d)),e.justification="center",e.fillColor=y,y||(e.fillColor=z),B&&(e.style=B),D===!0?j%l.skipTickCount===0&&0!==l.skipTickCount&&(e.content=+q.toFixed(r)):e.content=+p.toFixed(r),l.ticksGroup.appendBottom(c),l.textGroup.appendBottom(e)),j++),b>=l.xCoordinateOfZerothPoint&&(clearInterval(o),l.startZooming({rangeStartXCoordinate:g,rangeEndXCoordinate:h}))),l.scope.view.draw(),l.model.trigger(a.Events.ANIMATION_PROGRESS,{pan:!0,zoom:!1})},m)},startPanningOutWithDefaultValues:function(b){var c=0,d=this,e=17,f=15,g=null,h=this.model.get("maxValue"),i=this.model.get("minValue"),j=(this.model.get("toFixedDecimal"),this.model.get("tickInterval"),this.model.get("showAlternateAlways"),!1);if(this.leftPanElmtsGrp=new this.scope.Group,this.rightPanElmtsGrp=new this.scope.Group,null!==b&&"undefined"!=typeof b)var k=b.zoomLineData,b=b,l=k.midVal,m=k.tickPointsXCoordinateArray.length;if(m>0){for(var n=0;n<k.tickNumbersArr.length;n++){if(k.tickNumbersArr[n]===i)var o=n;if(k.tickNumbersArr[n]===h)var p=n}var q=Math.abs(k.tickPointsXCoordinateArray[0]-k.tickPointsXCoordinateArray[1])}this.leftPanElmtsGrp.addChildren([b.currentLTickPath,b.currentLTextPath,b.leftCloneTicksGroup,b.leftCloneLabelsGroup]),this.rightPanElmtsGrp.addChildren([b.currentRTickPath,b.currentRTextPath,b.rightCloneTicksGroup,b.rightCloneLabelsGroup]),g=setInterval(function(){Math.abs(b.currentLTickPath.position.x-b.currentRTickPath.position.x)<q&&(d.leftPanElmtsGrp.position.x-=1,d.rightPanElmtsGrp.position.x+=1),l>=i&&l>=h&&j===!1?b.currentLTickPath.position.x>k.tickPointsXCoordinateArray[o]||b.currentRTickPath.position.x>k.tickPointsXCoordinateArray[p]?(d.leftPanElmtsGrp.position.x-=f,d.rightPanElmtsGrp.position.x-=f):(clearInterval(g),d.setValuesInModel({skipTickCount:4,showAlternateAlways:!0,numberOfIntervals:k.numberOfIntervals,minValue:k.minVal,maxValue:k.maxVal}),d.fadeInEffect=!0,d.scope.project.layers[0].remove(),d.scope.view.draw(),d._renderNumberLine(),j=!0):i>=l&&h>=l&&j===!1&&(b.currentLTickPath.position.x<k.tickPointsXCoordinateArray[o]||b.currentRTickPath.position.x<k.tickPointsXCoordinateArray[p]?(d.leftPanElmtsGrp.position.x+=f,d.rightPanElmtsGrp.position.x+=f):(clearInterval(g),d.setValuesInModel({skipTickCount:4,showAlternateAlways:!0,numberOfIntervals:k.numberOfIntervals,minValue:k.minVal,maxValue:k.maxVal}),d.fadeInEffect=!0,d.scope.project.layers[0].remove(),d.scope.view.draw(),d._renderNumberLine(),j=!0)),c++,d.scope.view.draw(),d.model.trigger(a.Events.ZOOMING_OUT_ANIMATION_PROGRESS,{pan:!0,zoom:!1})},e)},startPanningOutWithGivenValues:function(b){var c=0,d=this,e=17,f=15,g=null,h=this.model.get("maxValue"),i=this.model.get("minValue"),j=(this.model.get("toFixedDecimal"),this.model.get("tickInterval")),k=(this.model.get("showAlternateAlways"),this.model.get("length")),l=(this.model.get("toFixedDecimal"),!1),m=this.model.get("leftArrowTickDistance"),n=this.model.get("rightArrowTickDistance"),o=(this.model.get("addCommaInLabel"),0),p=0,q=h,r=i;if(this.leftPanElmtsGrp=new this.scope.Group,this.rightPanElmtsGrp=new this.scope.Group,null!==b&&"undefined"!=typeof b)var s=b.zoomLineData,b=b,t=s.midVal;if(m&&n)var u=Math.round((k-(m+n))/s.numberOfIntervals);else var u=Math.round((k-40)/s.numberOfIntervals);for(var j=(s.maxVal-s.minVal)/s.numberOfIntervals,v=[],w=s.minVal,x=0;x<s.numberOfIntervals;x++)w=(w*Math.pow(10,8)+j*Math.pow(10,8))/Math.pow(10,8),v.push(w);this.leftPanElmtsGrp.addChildren([b.currentLTickPath,b.currentLTextPath,b.leftCloneTicksGroup,b.leftCloneLabelsGroup]),this.rightPanElmtsGrp.addChildren([b.currentRTickPath,b.currentRTextPath,b.rightCloneTicksGroup,b.rightCloneLabelsGroup]);var y=b.rightCloneTicksGroup.children.length,z=b.leftCloneTicksGroup.children.length;g=setInterval(function(){if(Math.abs(b.currentLTickPath.position.x-b.currentRTickPath.position.x)<u&&(d.leftPanElmtsGrp.position.x-=1,d.rightPanElmtsGrp.position.x+=1),t>=i&&t>=h&&l===!1){var e=v.indexOf(h);if(b.currentLTickPath.position.x>e*u){d.leftPanElmtsGrp.position.x-=f,d.rightPanElmtsGrp.position.x-=f;var k=d.tickPointsXCoordinateArray[0],m=d.leftCloneTicksGroup.children.length;if(m>0?d.leftCloneTicksGroup.children[m-1].position.x<k&&(d.leftCloneTicksGroup.children[m-1].remove(),d.leftCloneLabelsGroup.children[m-1].remove()):(b.currentLTickPath.opacity=0,b.currentLTextPath.opacity=0),0===m){var n=d.rightCloneTicksGroup.children.length;d.rightCloneTicksGroup.children[0].position.x<k&&(d.rightCloneTicksGroup.children[0].remove(),d.rightCloneLabelsGroup.children[0].remove())}var n=d.rightCloneTicksGroup.children.length,w=d.rightCloneTicksGroup.children[n-1],x=d.rightCloneLabelsGroup.children[n-1],A=d.tickPointsXCoordinateArray[d.tickPointsXCoordinateArray.length-1];Math.abs(w.position.x-A)>u&&(w=w.clone(),x=x.clone(),w.position.x=w.position.x+u,x.position.x=w.position.x,o++,q+=j),d.addRightCloneTicksWithLabels(w,x,q,y+o)}else clearInterval(g),d.setValuesInModel({skipTickCount:4,showAlternateAlways:!0,numberOfIntervals:s.numberOfIntervals,minValue:s.minVal,maxValue:s.maxVal}),d.fadeInEffect=!0,d.scope.project.layers[0].remove(),d.scope.view.draw(),d._renderNumberLine(),l=!0}else if(i>=t&&h>=t&&l===!1){var e=v.indexOf(i);if(b.currentLTickPath.position.x<e*u){d.leftPanElmtsGrp.position.x+=f,d.rightPanElmtsGrp.position.x+=f;var k=d.tickPointsXCoordinateArray[0],A=d.tickPointsXCoordinateArray[d.tickPointsXCoordinateArray.length-1],n=d.rightCloneTicksGroup.children.length;n>0&&d.rightCloneTicksGroup.children[n-1].position.x>A&&(d.rightCloneTicksGroup.children[n-1].remove(),d.rightCloneLabelsGroup.children[n-1].remove());var m=d.leftCloneTicksGroup.children.length,B=d.leftCloneTicksGroup.children[m-1],C=d.leftCloneLabelsGroup.children[m-1],k=d.tickPointsXCoordinateArray[0];Math.abs(B.position.x-k)>u&&(B=B.clone(),C=C.clone(),B.position.x=B.position.x-u,C.position.x=B.position.x,p++,r-=j),d.addLeftCloneTicksWithLabels(B,C,r,z+p)}else clearInterval(g),d.setValuesInModel({skipTickCount:4,showAlternateAlways:!0,numberOfIntervals:s.numberOfIntervals,minValue:s.minVal,maxValue:s.maxVal}),d.fadeInEffect=!0,d.scope.project.layers[0].remove(),d.scope.view.draw(),d._renderNumberLine(),l=!0}c++,d.scope.view.draw(),d.model.trigger(a.Events.ZOOMING_OUT_ANIMATION_PROGRESS,{pan:!0,zoom:!1})},e)},addRightCloneTicksWithLabels:function(a,b,c,d){var e=this,f=this.model.get("toFixedDecimal"),g=(this.model.get("tickInterval"),this.model.get("showAlternateAlways")),f=this.model.get("toFixedDecimal"),h=this.model.get("addCommaInLabel"),i=b,j=a,c=c,d=d,k=e.tickPointsXCoordinateArray[e.tickPointsXCoordinateArray.length-1];i&&(g===!0?h===!0?(d+1)%e.skipTickCount===0&&0!==e.skipTickCount?i.content=e.getNumWithCommasAdded(+c.toFixed(f)):i.content="":(d+1)%e.skipTickCount===0&&0!==e.skipTickCount?i.content=e.getDisplayNumber(+c.toFixed(f)):i.content="":h===!0?i.content=e.getNumWithCommasAdded(+c.toFixed(f)):i.content=e.getDisplayNumber(+c.toFixed(f))),j&&j.position.x<k&&(e.rightCloneTicksGroup.addChild(j),e.rightCloneLabelsGroup.addChild(i)),e.scope.view.draw()},addLeftCloneTicksWithLabels:function(a,b,c,d){var e=this,f=this.model.get("toFixedDecimal"),g=(this.model.get("tickInterval"),this.model.get("showAlternateAlways")),f=this.model.get("toFixedDecimal"),h=this.model.get("addCommaInLabel"),i=b,j=a,c=c,d=d,k=e.tickPointsXCoordinateArray[0];i&&(g===!0?h===!0?(d+1)%e.skipTickCount===0&&0!==e.skipTickCount?i.content=e.getNumWithCommasAdded(+c.toFixed(f)):i.content="":(d+1)%e.skipTickCount===0&&0!==e.skipTickCount?i.content=e.getDisplayNumber(+c.toFixed(f)):i.content="":h===!0?i.content=e.getNumWithCommasAdded(+c.toFixed(f)):i.content=e.getDisplayNumber(+c.toFixed(f))),j&&j.position.x>k&&(e.leftCloneTicksGroup.addChild(j),e.leftCloneLabelsGroup.addChild(i)),e.scope.view.draw()},_startZoomingOut:function(b){var c,d,e,f,g,h,i,j,k,l,m=this,n=this.model,o=m.getPaperScope(),p=m.ticksGroup.children,q=m.textGroup.children,r=(n.get("firstTickPointX"),n.get("lastTickPointX"),n.get("clickedRangeObject"),n.get("numberOfIntervals")),s=n.get("length"),t=n.get("tickInterval"),u=(n.get("showAlternateAlways"),n.get("maxValue")),v=n.get("minValue"),w=n.get("toFixedDecimal"),x=(n.get("addCommaInLabel"),15),y=15,z=p[0].position.x,A=p[p.length-1].position.x,B=(z+A)/2,C=17,D=0,E=0,F=!1,G=0,H=0;if(this.zoomIn=!1,this.zoomOut=!0,this.leftCloneTicksGroup=new this.scope.Group,this.leftCloneLabelsGroup=new this.scope.Group,this.rightCloneTicksGroup=new this.scope.Group,this.rightCloneLabelsGroup=new this.scope.Group,c=p[0],d=q[0],e=p[p.length-1],f=q[q.length-1],null!==b&&"undefined"!=typeof b){var I=b;I.midVal=+((I.minVal+I.maxVal)/2).toFixed(w),l=I.isSkipTick,l===!0&&(-1===I.visibleLabelsIndexArr.indexOf(I.minValIndex)&&(d.content=""),-1===I.visibleLabelsIndexArr.indexOf(I.maxValIndex)&&(f.content=""),l=!1,m.scope.view.draw())}else{var I=this.zommInOutDataStack.pop();if(I.minVal===v&&I.maxVal===u)var I=this.zommInOutDataStack.pop()}if(I.numberOfIntervals!==r)var J=s/I.numberOfIntervals;else var J=m.divisionWidth;t=(I.maxVal-I.minVal)/I.numberOfIntervals;var K=setInterval(function(){if(B>z&&Math.abs(z-B)>x&&(c.position.x+=x,d.position.x+=x,z+=x,m.leftCloneTicksGroup.children.length>0&&(m.leftCloneTicksGroup.position.x+=x),m.leftCloneLabelsGroup.children.length>0&&(m.leftCloneLabelsGroup.position.x+=x),k=m.tickPointsXCoordinateArray[0],0===G&&Math.abs(c.position.x-k)>J&&(g=p[0].clone(),h=q[0].clone(),g.position.x=c.position.x-J,h.position.x=g.position.x,G++,D++,v-=t),g&&(Math.abs(g.position.x-k)>J&&(g=g.clone(),h=h.clone(),g.position.x=g.position.x-J,h.position.x=g.position.x,D++,v-=t),m.addLeftCloneTicksWithLabels(g,h,v,D)),m.scope.view.draw()),A>B&&Math.abs(A-B)>y){e.position.x-=y,f.position.x-=y,A-=y,m.rightCloneTicksGroup.children.length>0&&(m.rightCloneTicksGroup.position.x-=y),m.rightCloneLabelsGroup.children.length>0&&(m.rightCloneLabelsGroup.position.x-=y);var b=m.tickPointsXCoordinateArray[m.tickPointsXCoordinateArray.length-1];0===H&&Math.abs(e.position.x-b)>J&&(i=p[p.length-1].clone(),j=q[q.length-1].clone(),i.position.x=e.position.x+J,j.position.x=i.position.x,H++,E++,u+=t),i&&(Math.abs(i.position.x-b)>J&&(i=i.clone(),j=j.clone(),i.position.x=i.position.x+J,j.position.x=i.position.x,E++,u+=t),m.addRightCloneTicksWithLabels(i,j,u,E))}Math.abs(z-B)<x&&Math.abs(A-B)<y&&F===!1&&(clearInterval(K),m.model.trigger(a.Events.ZOOMING_OUT_ANIMATION_END),m.startPanningOutWithGivenValues({zoomLineData:I,leftCloneTicksGroup:m.leftCloneTicksGroup,leftCloneLabelsGroup:m.leftCloneLabelsGroup,rightCloneTicksGroup:m.rightCloneTicksGroup,rightCloneLabelsGroup:m.rightCloneLabelsGroup,currentLTickPath:c,currentLTextPath:d,currentRTickPath:e,currentRTextPath:f}),F=!0),o.view.draw(),m.model.trigger(a.Events.ZOOMING_OUT_ANIMATION_PROGRESS,{pan:!1,zoom:!0})},C)},fadeOutTicksOnLine:function(b){var c=this,d=1,e=this.ticksGroup.children,f=this.textGroup.children,g=17,h=null,i=null;this.model.trigger(a.Events.FADEOUT_START),h=setInterval(function(){for(d-=.1,d=+d.toFixed(1),i=0;i<e.length;i++)e[i].opacity=d,f[i].opacity=d;c.scope.view.draw(),0===d&&(clearInterval(h),e[0].opacity=1,e[e.length-1].opacity=1,f[0].opacity=1,f[e.length-1].opacity=1,c.scope.view.draw(),c.model.trigger(a.Events.FADEOUT_COMPLETE,b)),c.model.trigger(a.Events.FADEOUT_PROGRESS)},g)}},{START_POINT_X_COORDINATE:15,START_POINT_Y_COORDINATE:20,END_POINT_Y_COORDINATE:20,LEFT_ARROWHEAD_DISTANCE_FROM_MIN_VALUE:32,RIGHT_ARROWHEAD_DISTANCE_FROM_MAX_VALUE:32,NUMBER_OF_POLYGON_SIDES:3,LINE:"line",CIRCLE:"circle",Events:{NUMBERLINE_VALUES_CHANGED:"numberline-values-changed",TICK_CLICK:"tick-click",RANGE_CLICK:"range-click",ANIMATION_COMPLETE:"animation-complete",ANIMATION_PROGRESS:"animation-progress",FADEIN_PROGRESS:"fade-in-progress",FADEIN_START:"fade-in-start",RANGE_TAB:"range-tab",FOCUS_OUT:"focus-out",ZOOM_OUT_START:"zoom-out-start",FADEOUT_START:"fade-out-start",FADEOUT_PROGRESS:"fade-out-progress",FADEOUT_COMPLETE:"fade-out-complete",ZOOMING_OUT_ANIMATION_PROGRESS:"zooming-out-animation-progress"},generateNumberLine:function(a){var b="",c=null,d=null;return a&&(b=a.containerId,c=new MathInteractives.Common.Components.Theme2.Models.NumberLine(a),d=new MathInteractives.Common.Components.Theme2.Views.NumberLineExtended({el:b,model:c})),d}}),MathInteractives.global.Theme2.NumberLineExtended=MathInteractives.Common.Components.Theme2.Views.NumberLineExtended,a=MathInteractives.Common.Components.Theme2.Views.NumberLineExtended}(window.MathInteractives);