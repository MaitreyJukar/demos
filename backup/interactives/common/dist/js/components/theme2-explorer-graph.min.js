!function(){"use strict";MathInteractives.Common.Components.Models.ExplorerGraph=MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{canvasParentHeight:599,canvasParentWidth:928,canvasHeight:599,canvasWidth:928,gridSizeXAxis:15,gridSizeYAxis:15,xAxisLength:928,yAxisLength:599,xUnitsPerGrid:1,yUnitsPerGrid:1,toolTipMarginTop:15,toolTipMarginLeft:-15,xAxisColor:"#777777",yAxisColor:"#777777",xAxisGridColor:"#c8c5c0",yAxisGridColor:"#c8c5c0",canvasBackgroundColor:"#FFFCF5",toggleGridColor:null,secondXAxisGridColor:"#C8C5C0",secondYAxisGridColor:"#C8C5C0",showToolTip:!0,originPosition:{x:479,y:328},snappedX:0,snappedY:0,actualSnappedPointX:0,actualSnappedPointY:0,cannvasMargin:{top:0,right:0,bottom:0,left:0}}},initialize:function(){this.setActualSnappingPointValues()},setActualSnappingPointValues:function(){var a=this.get("originPosition");this.set("actualSnappedPointX",a.x),this.set("actualSnappedPointY",a.y)},getCanvasParentHeight:function(){return this.get("canvasParentHeight")},setCanvasParentHeight:function(a){this.set("canvasParentHeight",a)},getCanvasParentWidth:function(){return this.get("canvasParentWidth")},setCanvasParentWidth:function(a){this.set("canvasParentWidth",a)},getCanvasWidth:function(){return this.get("canvasWidth")},setCanvasWidth:function(a){return this.set("canvasWidth",a)},getCanvasHeight:function(){return this.get("canvasHeight")},setCanvasHeight:function(a){return this.set("canvasHeight",a)},getCannvasMargin:function(){return this.get("cannvasMargin")},getGridSizeXAxis:function(){return this.get("gridSizeXAxis")},setGridSizeXAxis:function(a){this.set("gridSizeXAxis",a)},getGridSizeYAxis:function(){return this.get("gridSizeYAxis")},setGridSizeYAxis:function(a){this.set("gridSizeYAxis",a)},getXUnitsPerGrid:function(){return this.get("xUnitsPerGrid")},setXUnitsPerGrid:function(a){this.set("xUnitsPerGrid",a)},getYUnitsPerGrid:function(){return this.get("yUnitsPerGrid")},setYUnitsPerGrid:function(a){this.set("yUnitsPerGrid",a)},getXAxisLength:function(){return this.get("xAxisLength")},setXAxisLength:function(a){this.set("xAxisLength")},getYAxisLength:function(){return this.get("yAxisLength")},setYAxisLength:function(a){this.set("yAxisLength")},getcanvasBackgroundColor:function(){return this.get("canvasBackgroundColor")},setCanvasBackgroundColor:function(a){this.set("canvasBackgroundColor",a)},getXAxisColor:function(){return this.get("xAxisColor")},setXAxisColor:function(a){this.set("xAxisColor",a)},getYAxisColor:function(){return this.get("yAxisColor")},setYAxisColor:function(a){this.set("yAxisColor",a)},getXAxisGridColor:function(){return this.get("xAxisGridColor")},setXAxisGridColor:function(a){this.set("xAxisGridColor",a)},getYAxisGridColor:function(){return this.get("yAxisGridColor")},setYAxisGridColor:function(a){this.set("yAxisGridColor",a)},getSecondXAxisGridColor:function(){return this.get("secondXAxisGridColor")},setSecondXAxisGridColor:function(a){this.set("secondXAxisGridColor",a)},getSecondYAxisGridColor:function(){return this.get("secondYAxisGridColor")},setSecondYAxisGridColor:function(a){this.set("secondYAxisGridColor",a)},getOriginPosition:function(){return this.get("originPosition")},setOriginPosition:function(a){this.set("originPosition",a)},setCanvasMargin:function(){var a=arguments.length,b=this.getCannvasMargin(),c=null;(a=1)?(c=arguments[0],b.left=c,b.right=c,b.top=c,b.bottom=c):2===a?(c=arguments[0],b.top=c,b.bottom=c,c=arguments[1],b.right=c,b.left=c):3===a?(b.top=arguments[0],b.right=arguments[1],b.bottom=arguments[2]):4===a&&(b.top=arguments[0],b.right=arguments[1],b.bottom=arguments[2],b.left=arguments[3])},isToggleGridColor:function(){return this.get("toggleGridColor")},getToolTipMarginTop:function(){return this.get("toolTipMarginTop")},setToolTipMarginTop:function(a){this.set("toolTipMarginTop",a)},getToolTipMarginLeft:function(){return this.get("toolTipMarginLeft")},setToolTipMarginLeft:function(a){this.set("toolTipMarginLeft",a)},getShowToolTip:function(){return this.get("showToolTip")},setShowToolTip:function(a){this.set("showToolTip",a)}},{CUSTOM_EVENTS:{},createExplorerGraphModel:function(a){return new MathInteractives.Common.Components.Models.ExplorerGraph(a)}})}(),function(){"use strict";MathInteractives.Common.Components.Views.ExplorerGraph=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,manager:null,filePath:null,player:null,staticDataholderView:null,paperScope:null,currentTool:null,snappedX:null,snappedY:null,origin:null,actualSnappedPointX:null,actualSnappedPointY:null,initialize:function(){var a=this.model;this.idPrefix=a.get("idPrefix"),this.manager=a.get("manager"),this.filePath=a.get("filePath"),this.player=a.get("player"),this.staticDataholderView=MathInteractives.Common.Components.Views.ExplorerGraph,this._renderGraph(),this._bindEvents()},_renderGraph:function(){var a=this;a.model;a._appendCanvas(),a._setPaperScope(),a._setCanvasStyle(),a._setMarginToCanvas(),a._drawGrid(),a._hideToolTip()},_bindEvents:function(){var a=this.currentTool,b=this;a.onMouseDown=function(a){b._setSnappedpoints(a)},a.onMouseUp=function(a){b._setSnappedpoints(a)}},_showMousemoveFeatures:function(a){var b=this.model,c=b.getShowToolTip();this._setSnappedpoints(a),c&&this._showTooltip(a)},_appendCanvas:function(){var a=this.$el,b=this.el.id,c=this.model,d=c.getCanvasHeight(),e=c.getCanvasWidth(),f=MathInteractives.Common.Components.templates.explorerGraph({idPrefix:this.idPrefix,height:d,width:e}).trim();a.html("").append(f),a.find(".canvas-holder").attr("id",b+"-canvas-holder"),a.find(".canvas-element").attr("id",b+"-canvas-element"),a.find(".canvas-tooltip").attr("id",b+"-canvas-tooltip")},_setPaperScope:function(){var a=this.paperScope=new paper.PaperScope;a.setup(this.el.id+"-canvas-element"),this.currentTool=new a.Tool,a.activate()},_setCanvasStyle:function(){var a=this.$el,b=this.el.id,c=a.find("#"+b+"-canvas-holder"),d=c.find("#"+b+"-canvas-element"),e=this.model,f=e.getCanvasParentHeight(),g=e.getCanvasParentWidth(),h=(e.getCanvasHeight(),e.getcanvasBackgroundColor());e.getCanvasWidth();c.css({height:f,width:g}),d.css({"background-color":h})},_setMarginToCanvas:function(){var a=this.model,b=a.getCannvasMargin(),c=this.$el,d=c.attr("id"),e=c.find("#"+d+"-canvas-element");0!==b.left&&e.css({"margin-left":b.left}),0!==b.right&&e.css({"margin-right":b.right}),0!==b.top&&e.css({"margin-top":b.top}),0!==b.bottom&&e.css({"margin-bottom":b.bottom})},_drawGrid:function(){var a=this;a._drawCenterPostionGrid()},_drawCenterPostionGrid:function(){var a=this.model,b=this.paperScope,c=a.getCanvasHeight(),d=a.getCanvasWidth(),e=a.getGridSizeXAxis(),f=a.getGridSizeYAxis(),g=(a.getXUnitsPerGrid(),a.getYUnitsPerGrid(),a.getXAxisLength()),h=a.getYAxisLength(),i=a.getOriginPosition(),j=(d-g)/2,k=(c-h)/2,l=j+g,m=k+h,n=null,o=null,p=0,q=0,r=null,s=null,t=[2,1],u=i.x,v=i.y,w=a.getXAxisColor(),x=a.getYAxisColor(),y=a.getXAxisGridColor(),z=a.getYAxisGridColor(),A=a.isToggleGridColor(),B=a.getSecondXAxisGridColor(),C=a.getSecondYAxisGridColor();for(this.origin=i,s=y,p=v+f,q=v-f;m>p||q>k;)A===!0?(A=!1,s=y,t=[3,1]):A===!1&&(A=!0,s=B,t=[4,1]),m>p&&(r=new b.Path({segments:[[j,p],[l,p]],strokeColor:s,strokeWidth:1}),r.dashArray=t),q>k&&(r=new b.Path({segments:[[j,q],[l,q]],strokeColor:s,strokeWidth:1}),r.dashArray=t),p+=f,q-=f;for(p=u+e,q=u-e,A=a.isToggleGridColor(),s=z;l>p||q>j;)A===!0?(A=!1,s=z,t=[3,1]):A===!1&&(A=!0,s=C,t=[4,1]),l>p&&(r=new b.Path({segments:[[p,k],[p,m]],strokeColor:s,strokeWidth:1}),r.dashArray=t),q>j&&(r=new b.Path.Line({segments:[[q,k],[q,m]],strokeColor:s,strokeWidth:1}),r.dashArray=t),p+=e,q-=e,n=new b.Path({segments:[[j,v],[l,v]],strokeColor:w,strokeWidth:1}),o=new b.Path({segments:[[u,k],[u,m]],strokeColor:x,strokeWidth:.2})},_hideToolTip:function(){var a=this.el.id;this.$("#"+a+"-canvas-tooltip").hide()},_showTooltip:function(a){var b=(this.origin,this.model),c=b.getCanvasHeight(),d=b.getCanvasWidth(),e=this.el.id,f=this.$("#"+e+"-canvas-tooltip"),g=a.point,h=g.x,i=g.y,j=b.getToolTipMarginTop(),k=b.getToolTipMarginLeft();d>h&&h>0&&c>i&&i>0?(f.css({top:i+j,left:h+k}).show(),f.html(this.snappedX+" "+this.snappedY)):this._hideToolTip()},_setSnappedpoints:function(a){var b=this.model,c=a.point,d=c.x,e=c.y,f=b.get("originPosition"),g=f.x,h=f.y,i=null,j=null,k=null,l=null,m=b.getGridSizeXAxis(),n=b.getGridSizeYAxis(),o=b.getXUnitsPerGrid(),p=b.getYUnitsPerGrid(),q=null;q=d-g,i=Math.round(Math.abs(q)/m)*o,k=g+i*m,g>d&&(k=g-i*m,i=-i),q=e-h,j=Math.round(Math.abs(q)/n)*p,l=h-j*n,e>h&&(l=h+j*n,j=-j),this.snappedX=i,this.snappedY=j,this.actualSnappedPointX=k,this.actualSnappedPointY=l,b.set("snappedX",i),b.set("snappedY",i),b.set("actualSnappedPointX",k),b.set("actualSnappedPointY",l)},_calculateSnappedpoints:function(a){var b=this.model,c=a,d=c.x,e=c.y,f=b.get("originPosition"),g=f.x,h=f.y,i=null,j=null,k=b.getGridSizeXAxis(),l=b.getGridSizeYAxis(),m=b.getXUnitsPerGrid(),n=b.getYUnitsPerGrid(),o=null,p=null;return p=d-g,i=Math.round(Math.abs(p)/k)*m,g>d&&(i=-i),p=e-h,j=Math.round(Math.abs(p)/l)*n,e>h&&(j=-j),o={x:i,y:j}},_callBaseViewInitialize:function(){MathInteractives.Common.Components.Views.ExplorerGraph.prototype.initialize.call(this)}},{CUSTOM_EVENTS:{},createExplorerGraphView:function(a){var b=a.model,c="#"+a.contanierId,d=new MathInteractives.Common.Components.Views.ExplorerGraph({el:c,model:b});return d}})}(),function(){var a=Handlebars.template,b=MathInteractives.Common.Components.templates=MathInteractives.Common.Components.templates||{};b.explorerGraph=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\ufeff<div class="explore-graph-acc-container"></div>\r\n<div class="canvas-holder">\r\n  <canvas class="canvas-element" height="',(g=c.height)?f=g.call(b,{hash:{},data:e}):(g=b&&b.height,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" width="',(g=c.width)?f=g.call(b,{hash:{},data:e}):(g=b&&b.width,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"></canvas>\r\n  <div class="canvas-tooltip"></div>\r\n</div>\r\n'})}();