!function(a){"use strict";a.Interactivities.MiniGolf={},a.Interactivities.MiniGolf.Models={},a.Interactivities.MiniGolf.Views={}}(window.MathInteractives),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Models.Ball=MathInteractives.Common.Player.Models.Base.extend({defaults:function(){return{position:null,isSnapped:null,isSnappedTo:null,stickySliderAngle:null,speed:null,prevBallAngle:null,nextBallAngle:null,ghostBallVisible:null,shadowVisible:null,stickySliderVisible:null,snapPoint:null,mirrorPoint:null}},initialize:function(){}},{EVENTS:{NEW_HOLE_CLICKED:"newHoleBtnClicked"}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Models.Obstacle=MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{courseNumber:null,obstacleNumber:null,initialPosition:null,position:null,angle:null,currentAngle:null,isDraggable:!0,numberOfBallsAttached:0,eventPoint:null,lastCorrectPosition:null,bridgeRasterPosition:null,isInDispenser:!0,isObstacleDropped:!0,focusRectHeight:null,focusRectWidth:null}},initialize:function(){this.on("change:numberOfBallsAttached",function(a,b){this.log(b)}),this.set("position",this.get("position")||this.get("intialPosition")),this.set("angle",this.get("angle")||0),this.set("currentAngle",this.get("currentAngle")||this.get("angle"))}},{generateObstacleOfType:function(a){var b=this.TYPES,c=a.type,d=null,e=MathInteractives.Interactivities.MiniGolf.Views.Obstacle,f=b.LEFT_BRIDGE_WALL,g=b.RIGHT_BRIDGE_WALL,h=b.LEFT_RIVER,i=b.RIGHT_RIVER,j=null;switch(c){case b.LEFT_FIXED:case b.RIGHT_FIXED:case b.FIXED:d=MathInteractives.Interactivities.MiniGolf.Views.ObstacleFixed||e,j=new d(a.viewProperties),j.render(a.viewProperties);break;case h:case i:a.viewProperties.type=c,d=MathInteractives.Interactivities.MiniGolf.Views.RiverObstacle||e,j=new d(a.viewProperties);break;case f:case g:break;case b.DEFAULT:default:d=e,j=new d(a.viewProperties),j.addObstacleImages()}return j},RIGHT_SIDE_RIVER_POINTS:{START_POINT:{x:767,y:149},END_POINT:{x:768,y:180}},LEFT_SIDE_RIVER_POINT:{START_POINT:{x:397,y:264},END_POINT:{x:425,y:282}},TYPES:{DEFAULT:"default",FIXED:"fixed",RIGHT_BRIDGE_WALL:"right_bridge_wall",LEFT_BRIDGE_WALL:"left-bridge-wall",LEFT_RIVER:"left-river",RIGHT_RIVER:"right-river",LEFT_FIXED:"left-fixed",RIGHT_FIXED:"right-fixed"},OBSTACLE_DROPSLOT_INTERSECTION_AREA_TOLERANCE:3,OBSTACLE_HOLE_INTERSECTION_AREA_TOLERANCE:4,DRAG_DISTANCE_ACC:3,ACC_ROTATION_ANGLE:2,Obstacles:Backbone.Collection.extend({model:this,initialize:function(){this.model=MathInteractives.Interactivities.MiniGolf.Models.Obstacle}})})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Models.Course=MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{state:"unlocked",timesPlayed:null,holesInOne:null,courseBoundaries:null,matBoundaries:null,obstaclesData:null,holeRadius:null,holePosition:null,rotationHandlePosition:null,rotationHandleAngle:null,endBallPosition:null,balls:null,directionTextView:null,levelId:null,resetCourseButton:null,jsonData:null,invalidPathIndex:null,modelStaticData:null,bridgeGroupPosition:null,initialBridgePosition:{x:586,y:215},bridgeRasterPosition:{x:586,y:215},eventPoint:{x:586,y:215},eventDelta:{x:0,y:0},toResetCourse:null,isBridgeDraggable:!0,customImageCountObject:null,customPopupShown:null,invalidPathStartPoint:null,invalidPathEndPoint:null}},initialize:function(){this.set("resetCourseButton",!!this.get("resetCourseButton"));var a=this.get("obstaclesData"),b=this.get("balls"),c=MathInteractives.Interactivities.MiniGolf.Models;if(null===b||"undefined"==typeof b?this.set("balls",[]):this._createBalls(),a){for(var d in a)a[d].jsonData=this.get("jsonData"),a[d].numberOfBallsAttached=0;a=new c.Obstacle.Obstacles(a),this.set("obstaclesData",a)}else this._createObstacles();null===this.get("toResetCourse")&&this.set("toResetCourse",!1)},_attachEvents:function(){},addBall:function(a){{var b=this.get("balls");a.get("position")}b.push(a),this.set("balls",b)},deleteBall:function(a){for(var b,c=this.get("balls"),d=0;d<c.length;d++)if(c[d].cid===a.cid){b=c.splice(d,1);break}return this.set("balls",c),b},_createObstacles:function(){var a,b,c,d,e=this.get("levelId"),f=MathInteractives.Interactivities.MiniGolf.Models,g=f.MiniGolfData.OBSTACLES["COUESE_"+e],h=new f.Obstacle.Obstacles,i=this.get("jsonData");if(g){a=g.length;for(var b=0;a>b;b++)d=g[b],d.jsonData=i,c=new f.Obstacle(d),h.push(c)}this.set("obstaclesData",h)},_createBalls:function(){for(var a=MathInteractives.Interactivities.MiniGolf.Models.Ball,b=[],c=this.get("balls"),d=0;d<c.length;d++){var e=new a(c[d]);b.push(e)}this.set("balls",b)}},{COURSE_TYPE:{TYPE_1:"won",TYPE_2:"unlocked",TYPE_3:"locked"},BRIDGE_PATH_DATA:{RASTER_COUNT:3,BRIDGE_RASTER_NAME:"bridgeRaster",BRIDGE_RASTER_RIGHT_BUTTON:"bridgeRasterRightButton",BRIDGE_RASTER_LEFT_BUTTON:"bridgeRasterLeftButton",BEIDGE_WALL_WIDTH:9,BRIDGE_PATH_WIDTH:60,BRIDGE_PATH_HEIGHT:96,ROTATING_ANGLE:14,RIVER_LINE:{FROM:[485,261],TO:[701,199]},BUTTON_DATA:{HEIGHT:29,WIDTH:25,RIGHT_TRANSLATE:[54,-17],LEFT_TRANSLATE:[-46,14],BG_COLOR:"#4F1689"}},KEYCODE:{TAB:9},CUSTOM_IMAGE_COUNT:{COURSE_1:[{imageNumber:1},{imageNumber:2},{imageNumber:3},{imageNumber:4,textDiv:!0}],COURSE_2:[{imageNumber:1},{imageNumber:2}]}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData=MathInteractives.Common.Player.Models.BaseInteractive.extend({courseModelClassName:null,defaults:function(){return{currentView:null,currentCourseLevel:null,scoreCardVisible:null,helpElements:null,courses:null,clearScoreCard:null,animationPlaying:!1,allowSlideSelfFocus:!0,showCourseHowToPopUp:[!0,!0]}},initialize:function(){this.set("helpElements",[]);var a=null,b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;this.courseModelClassName=a=MathInteractives.Interactivities.MiniGolf.Models.Course,null===this.get("currentView")&&this.set("currentView",b.CURRENT_VIEW.CAROUSEL),null===this.get("currentCourseLevel")&&this.set("currentCourseLevel",0),null===this.get("clearScoreCard")&&this.set("clearScoreCard",!1),this.set("scoreCardVisible",!!this.get("scoreCardVisible")),this.createCourseModels()},createCourseModels:function(){var a=this.get("courses"),b=null,c=this.courseModelClassName,d=c.CUSTOM_IMAGE_COUNT,e=c.COURSE_TYPE,f={player:this.get("player"),manager:this.get("manager"),path:this.get("path"),jsonData:this.get("jsonData")},g=[],h=null,i=null;for(i=0;i<MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.NUMBER_OF_COURSES;i++)b=null,f.levelId=i,a?b=$.extend(!0,{},f,a[i]):(0===i?(f.state=e.TYPE_2,f.customImageCountObject=d.COURSE_1,f.customPopupShown=!1):(1===i?(f.customImageCountObject=d.COURSE_2,f.customPopupShown=!1):f.customPopupShown=null,f.state=e.TYPE_3),b=$.extend(!0,{},f)),g[i]=h=new MathInteractives.Interactivities.MiniGolf.Models.Course(b),this.bindEventOnCourseModel(h);this.set("courses",g)},bindEventOnCourseModel:function(a){var b=this;a.on("change:holesInOne",function(){b.setNextSlideState(this)})},setNextSlideState:function(a){var b=this.get("courses"),c=b.length,d=this.courseModelClassName.COURSE_TYPE,e=null,f=a.get("levelId"),g=f+1,h=null;a.get("holesInOne")&&c>g&&(e=b[g],h=e.get("state"),h!==d.TYPE_1&&e.set("state",d.TYPE_2))},getCourseModel:function(a){var b=this.get("courses");return b?b[a]:!1},getCurrentStateData:function(){var a=JSON.stringify(this,this.getJSONAttributes);return a},getJSONAttributes:function(a,b){var c=b;switch(a){case"path":case"filePath":case"manager":case"player":case"idPrefix":case"nextBallModel":case"previousBallModel":case"jsonData":case"helpElements":c=void 0}return c}},{CURRENT_VIEW:{CAROUSEL:"carousel",COURSE:"course"},EVENTS:{NEW_HOLE_CLICKED:"newHoleBtnClicked",SCORECARD_BTN_CLICKED:"scoreCardBtnClicked",SCORECARD_CLEARED:"scoreCardCleared",SCORECARD_CLOSED:"scoreCardClosed",CURRENT_SLIDE_CLICKED:"currentCarouselSlideClicked",ENABLE_CLEAR_BUTTON:"enableClearBtn",OBSTACLE_DRAG_START:"obstacleDragStart",OBSTACLE_DRAG_STOP:"obstacleDragStop",OBSTACLE_ROTATE_START:"obstacleRotationHandleMouseDown",OBSTACLE_ROTATE_END:"obstacleRotationHandleMouseUp",OBSTACLE_DRAG_EVENT:"obstacle-drag-event",UNLOCK_NEXT_COURSE:"unlockNextCourse",NEXT_HOLE:"nextHoleClicked",OBSTACLE_RENDERED:"obstacleRendered",STICKY_SLIDER_ATTACHED_TO_OBSTACLE:"sticky-slider-attached-to-obstacle"},NUMBER_OF_COURSES:4,BOUNDRIES:{COUESE_0:[{x:48,y:49},{x:882,y:49},{x:882,y:452},{x:572,y:452},{x:572,y:253},{x:48,y:253}],COUESE_1:[{x:38,y:47},{x:758,y:47},{x:758,y:190},{x:889,y:190},{x:889,y:448},{x:481,y:448},{x:481,y:248},{x:38,y:248}],COUESE_2:[{x:34,y:48},{x:691,y:48},{x:755,y:100},{x:755,y:243},{x:886,y:243},{x:886,y:450},{x:515,y:450},{x:433,y:382},{x:433,y:251},{x:34,y:251}],COUESE_3:[{x:34,y:48},{x:652,y:48},{x:652,y:132},{x:757,y:132},{x:757,y:243},{x:888,y:243},{x:888,y:450},{x:529,y:450},{x:435,y:369},{x:433,y:252},{x:34,y:252}]},PHYSICAL_BOUNDRIES:{COURSE_0:[{x:38,y:39},{x:892,y:39},{x:892,y:462},{x:562,y:462},{x:562,y:263},{x:38,y:263}],COURSE_1:[{x:28,y:37},{x:768,y:37},{x:768,y:180},{x:899,y:180},{x:899,y:458},{x:471,y:458},{x:471,y:258},{x:28,y:258}],COURSE_2:[{x:24,y:38},{x:693,y:38},{x:765,y:95},{x:765,y:233},{x:896,y:233},{x:896,y:460},{x:513,y:460},{x:423,y:387},{x:423,y:261},{x:24,y:261}],COURSE_3:[{x:24,y:38},{x:662,y:38},{x:662,y:122},{x:767,y:122},{x:767,y:233},{x:898,y:233},{x:898,y:460},{x:529,y:460},{x:425,y:369},{x:423,y:262},{x:24,y:262}]},MAT_BOUNDRIES:{COUESE_0:[{x:124,y:125},{x:200,y:125},{x:200,y:180},{x:124,y:180}],COUESE_1:[{x:112,y:121},{x:186,y:121},{x:186,y:174},{x:112,y:174}],COUESE_2:[{x:109,y:123},{x:184,y:123},{x:184,y:177},{x:109,y:177}],COUESE_3:[{x:109,y:123},{x:187,y:123},{x:187,y:180},{x:109,y:180}]},PHYSICAL_MAT_BOUNDRIES:{COURSE_0:[{x:114,y:115},{x:210,y:115},{x:210,y:190},{x:114,y:190}],COURSE_1:[{x:102,y:111},{x:196,y:111},{x:196,y:184},{x:102,y:184}],COURSE_2:[{x:99,y:113},{x:194,y:113},{x:194,y:187},{x:99,y:187}],COURSE_3:[{x:99,y:113},{x:197,y:113},{x:197,y:190},{x:99,y:190}]},HOLES:{COURSE_0:{POSITION:{x:661,y:406},RADIUS:15},COURSE_1:{POSITION:{x:617,y:421},RADIUS:15},COURSE_2:{POSITION:{x:489,y:337},RADIUS:15},COURSE_3:{POSITION:{x:801,y:323},RADIUS:15}},MATBALL_POSITIONS:{COURSE_0:{x:162,y:155},COURSE_1:{x:151,y:149},COURSE_2:{x:146,y:153},COURSE_3:{x:148,y:152}},OBSTACLES:{COUESE_1:[{courseNumber:1,obstacleNumber:0,initialPosition:{x:373,y:148},rectangleData:{height:95,width:15},isDraggable:!1,type:"fixed"},{courseNumber:1,obstacleNumber:1,rotationHandle1Vertex:1,rotationHandle2Vertex:4,initialPosition:{x:300,y:338},focusRectHeight:120,focusRectWidth:108,type:"default"},{courseNumber:1,obstacleNumber:2,rotationHandle1Vertex:2,rotationHandle2Vertex:4,initialPosition:{x:403,y:337},focusRectHeight:110,focusRectWidth:84,type:"default"},{courseNumber:1,obstacleNumber:3,rotationHandle1Vertex:0,rotationHandle2Vertex:2,initialPosition:{x:344,y:433},focusRectHeight:80,focusRectWidth:170,type:"default"},{courseNumber:1,obstacleNumber:4,initialPosition:{x:707,y:276},rectangleData:{height:95,width:15},isDraggable:!1,type:"fixed"}],COUESE_2:[{courseNumber:2,obstacleNumber:0,initialPosition:{x:417,y:172},rectangleData:{height:85,width:15},isDraggable:!1,type:"fixed"},{courseNumber:2,obstacleNumber:1,rotationHandle1Vertex:1,rotationHandle2Vertex:4,initialPosition:{x:317,y:418},focusRectHeight:110,focusRectWidth:120,type:"default"},{courseNumber:2,obstacleNumber:2,rotationHandle1Vertex:2,rotationHandle2Vertex:4,initialPosition:{x:316,y:325},focusRectHeight:90,focusRectWidth:100,type:"default"}],COUESE_3:[{courseNumber:3,obstacleNumber:0,type:"left-river",ignoreBallSnap:!0,ignoreOnBridgeDrag:!0},{courseNumber:3,obstacleNumber:1,type:"right-river",ignoreBallSnap:!0,ignoreOnBridgeDrag:!0},{courseNumber:3,obstacleNumber:2,initialPosition:{x:586,y:213},rectangleData:{height:98,width:12},translateX:-36,translateY:10,isDraggable:!1,type:"left-fixed",rotatingAngle:-14,ignoreOnBridgeDrag:!0},{courseNumber:3,obstacleNumber:3,initialPosition:{x:586,y:213},rectangleData:{height:98,width:12},translateX:34,translateY:-7,isDraggable:!1,type:"right-fixed",rotatingAngle:-14,ignoreOnBridgeDrag:!0},{courseNumber:3,obstacleNumber:4,rotationHandle1Vertex:0,rotationHandle2Vertex:3,initialPosition:{x:274,y:406},focusRectHeight:110,focusRectWidth:120,type:"default"},{courseNumber:3,obstacleNumber:5,rotationHandlesNotAtVertex:!0,rotationHandle1Vertex:[1,2],rotationHandle2Vertex:[0,3],initialPosition:{x:362,y:352},focusRectHeight:84,focusRectWidth:74,type:"default"}]},DRAGGABLE:"draggble",ROTATION_ANGLE:1,PAPER_OBJECT_UNIQUE_NAME:{MAT_BALL:"mat-ball",START_BALL:"start-ball",BALL:"ball",LAST_BALL:"last-ball",STICKY_SLIDER:"sticky-slider",STICKY_SLIDER_START:"sticky-slider-start",OBSTACLE:"obstacle",BRIDGE:"bridge"},SPRITE_POSITIONS:{SLIDES_BG_IMAGE:{COURSE_0:{LEFT:10,TOP:10,WIDTH:616,HEIGHT:366},COURSE_1:{LEFT:10,TOP:386,WIDTH:616,HEIGHT:366},COURSE_2:{LEFT:10,TOP:762,WIDTH:616,HEIGHT:366},COURSE_3:{LEFT:10,TOP:1138,WIDTH:616,HEIGHT:366},LOCKED_COURSE:{LEFT:10,TOP:1514,WIDTH:616,HEIGHT:366}},OBSTACLE_1_1:{LEFT:720,TOP:194,WIDTH:101,HEIGHT:102},OBSTACLE_1_2:{LEFT:720,TOP:194,WIDTH:101,HEIGHT:102},OBSTACLE_1_3:{LEFT:720,TOP:304,WIDTH:101,HEIGHT:102},OBSTACLE_3_0:{LEFT:720,TOP:194,WIDTH:101,HEIGHT:102},OBSTACLE_3_1:{LEFT:720,TOP:194,WIDTH:101,HEIGHT:102},OBSTACLE_3_2:{LEFT:720,TOP:304,WIDTH:101,HEIGHT:102}},SLIDE_DISTANCE:644,ACC_DATA:{BALL_ACC_DATA:{HEIGHT:28,WIDTH:28},STICKY_SLIDER_ACC_DATA:{HEIGHT:42,WIDTH:35},BRIDGE_ACC_DATA:{HEIGHT:126,WIDTH:140},DASH_ARRAY:[3,3],STROKE_COLOR:"#ffffff",STROKE_WIDTH:3}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Models.Carousel=MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{slidesData:null,defaultSlideNumber:0}},initialize:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.Carousel;this.get("slidesData")?this.set("slidesData",new a.Slides(this.get("slidesData"))):this.set("slidesData",new a.Slides)}},{Slide:MathInteractives.Common.Player.Models.BaseInteractive.extend({defaults:function(){return{template:null,templateName:null,templateModule:null,data:null,isCurrentSlide:!1,defaultSlideNumber:null}},initialize:function(){this._getTemplateFromNamespace(),this.on("change:templateModule",$.proxy(this._getTemplateFromNamespace,this)),this.on("change:templateName",$.proxy(this._getTemplateFromNamespace,this))},_getTemplateFromNamespace:function(){var a,b,c=this.get("templateModule"),d=!!this.get("isCommon"),e=this.get("templateName");a=d?MathInteractives.Common.Interactivities:MathInteractives.Interactivities,a=a[c].templates,b=a[e],this.set("template",b)}}),Slides:Backbone.Collection.extend({initialize:function(){this.model=MathInteractives.Interactivities.MiniGolf.Models.Carousel.Slide}}),EVENTS:{SLIDE_CLICK_EVENT:"slideClicked",CAROUSEL_SLIDE_CLICK_EVENT:"slideClicked",SLIDE_CHANGE_ANIMATION_START:"slideChangeAnimationStart",SLIDE_CHANGE_ANIMATION_END:"slideChangedAnimationEnd",UPDATE_SLIDE:"updateSlide",ALREADY_AT_END:"alreadyAtEndOfCarousel"}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.OverviewTab=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,filePath:null,manager:null,player:null,initialize:function(){this.filePath=this.model.get("path"),this.manager=this.model.get("manager"),this.player=this.model.get("player"),this.idPrefix=this.player.getIDPrefix(),this.render()},render:function(){this.loadScreen("title-screen"),this.listenTo(this.player,MathInteractives.Common.Components.Theme2.Views.OverviewTab.GO_BUTTON_CLICKED,this.onGoButtonClicked)},onGoButtonClicked:function(){this.player.switchToTab(1)}})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.overviewTab=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'overview-tab-container" class="overview-tab-container"></div>'})}();