!function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.LineUtility=Backbone.View.extend({},{AngleBetweenLineAndPointF:function(a,b,c){var d=this.GetDistBetweenPointFs(a,b),e=this.GetDistBetweenPointFs(a,c),f=this.GetDistBetweenPointFs(b,c);return Math.acos((e*e+f*f-d*d)/(2*e*f))*(180/Math.PI)},GetDistBetweenPointFs:function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},GetvarOnLineUsingDistance:function(a,b,c,d,e){var f=this.GetDistBetweenPointFs(a,b),g=c/f;e||(g=1-g);var h=this.GetvarOnLineUsing_U_Value(a,b,g);return this.GetRotatedvar(h,e?a:b,d)},GetvarOnLineUsing_U_Value:function(a,b,c){var d=a.x,e=a.y,f=b.x,g=b.y,h=f-d,i=g-e;if(0==h&&0==i)return a;var j=d+c*h,k=e+c*i;return{x:j,y:k}},GetRotatedvar:function(a,b,c){var d={x:0,y:0},e=c*Math.PI/180;return d.x=Math.cos(e)*(a.x-b.x)-Math.sin(e)*(a.y-b.y)+b.x,d.y=Math.sin(e)*(a.x-b.x)+Math.cos(e)*(a.y-b.y)+b.y,d},getAngleWithXAxis:function(a,b){var c=b.x,d=b.y,e=a.x,f=a.y,g=e-c,h=f-d;if(0==g&&0==h)return 360;var i=Math.sqrt(g*g+h*h),j=180*Math.acos(Math.abs(g)/i)/Math.PI;return j=c>e&&f>=d?180-j:j,j=c>=e&&d>f?180+j:j,j=e>c&&d>f?360-j:j},ReflectvarToTheLine:function(a,b,c){var d={x:0,y:0},e=this.GetNormalvar(a,b,c),f=this.GetDistBetweenvars(e,a);return d=this.GetvarOnLineUsingDistance(e,a,-f,0,!0)},GetNormalvar:function(a,b,c){var d=a.x,e=a.y,f=b.x,g=b.y,h=c.x,i=c.y,j=h-f,k=i-g,l=j*j+k*k,m=((d-f)*j+(e-g)*k)/l,n=f+m*j,o=g+m*k;return{x:n,y:o}},GetDistBetweenvars:function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},getMidPoint:function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},GetInterSectionOfTwoLines:function(a,b,c,d,e,f){var g=a.x,h=a.y,i=c.x,j=c.y,k=a.x-b.x,l=a.y-b.y,m=c.x-d.x,n=c.y-d.y;if(0==k&&0==l||0==m&&0==n)return null;var o;if(m1=0==k?1e6:l/k,o=0==m?1e6:n/m,m1==o)return null;var p=(m1*g-h-(o*i-j))/(m1-o),q=m1*(p-g)+h;p=0==k?g:0==m?i:p,q=0==l?h:0==n?j:q;var r={x:p,y:q},s=!0;if(e){var t=this.Get_LineU_ForPointF(a,b,r);(0>t||t>1)&&(s=!1)}if(f){var t=this.Get_LineU_ForPointF(c,d,r);(0>t||t>1)&&(s=!1)}return s?r:null},Get_LineU_ForPointF:function(a,b,c){var d=a.x,e=a.y,f=b.x,g=b.y,h=c.x,i=c.y,j=f-d,k=g-e;if(0==j&&0==k)return 0;var l=j*j+k*k,m=((h-d)*j+(i-e)*k)/l;return m}})}(),function(){"use strict";MathInteractives.Common.Player.Views.CanvasAccExt=MathInteractives.Common.Player.Views.CanvasAcc.extend({_setSelfFocuse:function(){if(!this.player.getModalPresent()){var a=this.model.get("selfFocusDisableEvents");if(a&&this.lastTriggeredEvent)for(var b=a.length,c=0;b>c;c++)if(this.lastTriggeredEvent===a[c])return void(this.lastTriggeredEvent=null);this.lastTriggeredEvent=null;var d=this.el.id,e=this.model.get("canvasHolderID"),f=this.$("#"+d+"-acc-elem");if(f.length>0){var g=f.text(),h=d.replace(this.idPrefix,"");g===this.prevText&&""!==g?(this.prevText=g+" ",this.setAccMessage(h,this.prevText)):this.prevText=g}this.setFocus(e.replace(this.idPrefix,"")+"temp-focus-div")}}},{intializeCanvasAcc:function(a){var b=a.model||null,c=null,d="#"+a.canvasHolderID;return null===b&&(b=new MathInteractives.Common.Player.Models.CanvasAcc(a)),c=new MathInteractives.Common.Player.Views.CanvasAccExt({model:b,el:d})}}),MathInteractives.global.CanvasAccExt=MathInteractives.Common.Player.Views.CanvasAccExt}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=(a.Obstacle,a.MiniGolfData);MathInteractives.Interactivities.MiniGolf.Views.Obstacle=MathInteractives.Common.Player.Views.Base.extend({paperScope:null,obstacleOnPaper:null,obstacleBase64URL:null,obstacleRaster:null,actualObstaclePath:null,reflectionPath:null,dropSlot:null,rotationHandle1:null,rotationHandle1InitialAngle:null,rotationHandle2:null,rotationHandle2InitialAngle:null,obstacleFocusRect:null,initialize:function(a){this.initializeDefaultProperties(),this.paperScope=a.paperScope},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},addObstacleImages:function(){this._initializeURLs(),this._asyncImageLoader()},incrementSnappedBallCount:function(){this.model.set("numberOfBallsAttached",Number(this.model.get("numberOfBallsAttached"))+1)},decrementSnappedBallCount:function(){var a=Number(this.model.get("numberOfBallsAttached"));a>0&&this.model.set("numberOfBallsAttached",a-1)},resetSnappedBallCount:function(){this.model.set("numberOfBallsAttached",0)},_initializeURLs:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=(a.SPRITE_POSITIONS,this.model.get("courseNumber")),c=this.model.get("obstacleNumber"),d=this.getJson("baseURL");this.obstacleBase64URL=d["obstacle_"+b+"_"+c]},_asyncImageLoader:function(){var a=this,b=0,c=1,d=this.paperScope;this.obstacleRaster=new d.Raster({source:this.obstacleBase64URL}),this.obstacleRaster.onLoad=function(){b++,a._triggerRender(b,c)}},_triggerRender:function(a,b){b===a&&(this.getObstaclePathsFromSVG(),this.render(),this.attachEventHandlers())},render:function(){this.obstacleOnPaper.rotate(this.model.get("angle")),this.model.set("position",this.model.get("position")||this.model.get("initialPosition")),this.obstacleOnPaper.position=this.model.get("position"),this.model.trigger(b.EVENTS.OBSTACLE_RENDERED)},rotate:function(a){this.obstacleOnPaper.rotate(a),this.model.set("currentAngle",a+this.model.get("currentAngle"))},positionObstacle:function(a){this.obstacleOnPaper.position=a},placeObstacle:function(a){this.positionObstacle(a),this.model.set("position",{x:a.x,y:a.y}),this.model.set("isObstacleDropped",!0)},sendObstacleToBack:function(){var a=this.dropSlot||null;this.obstacleOnPaper.sendToBack(),a&&a.sendToBack()},storeCurrentOrientation:function(){this.model.set("angle",this.model.get("currentAngle"))},revertToLastOrientation:function(a){var b,a=a||{};a.animate&&(b=a.duration||2e3),this.obstacleOnPaper.rotate(-this.model.get("currentAngle")+this.model.get("angle")),this.model.set("currentAngle",this.model.get("angle"))},revertToLastPosition:function(a){var b,a=a||{};a.animate&&(b=a.duration||2e3),this.placeObstacle(this.model.get("position"))},revertToInitialPosition:function(a){var b,a=a||{},c=this.model,d=c.get("initialPosition");a.animate&&(b=a.duration||2e3),this.rotate(-Number(this.model.get("currentAngle"))),this.model.set("angle",0),this._setObstacleInitialPosition(),c.set("position",{x:d.x,y:d.y}),this.isInDispenser(),this.obstacleOnPaper.bringToFront(),this.showHideRotationDragHandle(!1)},getObstaclePathsFromSVG:function(){var a=this.paperScope,c=this.model,d=c.get("obstacleNumber"),e=c.get("courseNumber"),f=b.ACC_DATA,g=this.getJson("baseURL"),h=new a.Path,i=new a.Path;h.pathData=g["obstacle_"+e+"_"+d+"Path1"],i.pathData=g["obstacle_"+e+"_"+d+"Path2"];var j=new a.Group(h,i);j.name=b.DRAGGABLE,this.obstacleOnPaper=j,this._setObstacleInitialPosition(),this.reflectionPath=this.obstacleOnPaper.children[0],this.actualObstaclePath=this.obstacleOnPaper.children[1],this.obstacleRaster.position=this.actualObstaclePath.position,"default"===c.get("type")&&(this.obstacleFocusRect=new a.Path.Rectangle({strokeColor:f.STROKE_COLOR,strokeWidth:f.STROKE_WIDTH,dashArray:f.DASH_ARRAY,position:i.position,height:c.get("focusRectHeight"),width:c.get("focusRectWidth"),visible:!1}),this.obstacleOnPaper.addChild(this.obstacleFocusRect)),(5!=d||3!=e)&&this.obstacleRaster.translate(2.1,3.5),j.addChild(this.obstacleRaster),this.actualObstaclePath.bringToFront(),this.actualObstaclePath.closed=!0,this.reflectionPath.closed=!0;var k=new a.Color(0,0,0,0);this.actualObstaclePath.fillColor=k,this.reflectionPath.fillColor=k,this.dropSlot=this.actualObstaclePath.copyTo(a.project.activeLayer),this.dropSlot.position=this.actualObstaclePath.position,this.dropSlot.sendToBack(),this._addRotationHandlesOnObstacle()},setFocusRectPosition:function(){this.obstacleFocusRect.position=this.obstacleOnPaper.position,this.obstacleFocusRect.bringToFront(),this.obstacleOnPaper.bringToFront()},_setObstacleInitialPosition:function(){var a=this.obstacleOnPaper,b=this.model.get("initialPosition");a.bounds.x=0,a.bounds.y=0,a.position=b,this.model.set("isObstacleDropped",!0)},_addRotationHandlesOnObstacle:function(){var a,b,c,d,e,f,g,h,i,j=this.paperScope,k=(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,MathInteractives.Interactivities.MiniGolf.Views.LineUtility),l=this.actualObstaclePath,m=this.obstacleOnPaper,n=this.getJson("baseURL");if(f=new j.Raster(n.rotationHandle),g=new j.Raster(n.rotationHandle),a=l.segments,b=this.model.get("rotationHandle1Vertex"),c=this.model.get("rotationHandle2Vertex"),this.model.get("rotationHandlesNotAtVertex")){var o=a[b[0]].getPoint(),p=a[b[1]].getPoint();d=k.getMidPoint(o,p),o=a[c[0]].getPoint(),p=a[c[1]].getPoint(),e=k.getMidPoint(o,p)}else d=a[b].getPoint(),e=a[c].getPoint();f.position=d,g.position=e,f.opacity=0,f.visible=!1,g.opacity=0,g.visible=!1,h=new j.Path.Circle({center:d,radius:10,fillColor:new j.Color(0,0,0,0),opacity:0,visible:!1}),i=new j.Path.Circle({center:e,radius:10,fillColor:new j.Color(0,0,0,0),opacity:0,visible:!1}),m.addChild(f),m.addChild(g),m.addChild(h),m.addChild(i),this.rotationHandle1=h,this.rotationHandle2=i,this.rotation1Raster=f,this.rotation2Raster=g,j.view.draw(),this.rotationHandle1InitialAngle=360-k.getAngleWithXAxis(h.position,l.position),this.rotationHandle2InitialAngle=360-k.getAngleWithXAxis(i.position,l.position)},_addDragHandle:function(){var a,b=this.paperScope,c=this.obstacleOnPaper;a=new b.Path.Circle({center:c.position,radius:20,fillColor:"green"}),c.addChild(a),this.dragHandle=a,b.view.draw()},isInDispenser:function(){var a=!1,b=this.model,c=MathInteractives.Interactivities.MiniGolf.Models.Obstacle;if(this.model.get("type")==c.TYPES.DEFAULT){var d=this.actualObstaclePath.getPosition().getDistance(this.dropSlot.getPosition());Math.abs(d)<c.OBSTACLE_DROPSLOT_INTERSECTION_AREA_TOLERANCE?(a=!0,b.set("isInDispenser",!0)):b.set("isInDispenser",!1)}return a},attachEventHandlers:function(a){var c=this,d=this.model;a===!1?(this.actualObstaclePath.detach("mousedrag"),this.actualObstaclePath.detach("mousedown")):(this.paperScope.view.draw(),this.actualObstaclePath.onMouseDrag=$.proxy(this.onObstacleMouseDrag,this),this.actualObstaclePath.onMouseDown=$.proxy(this.onObstacleMouseDown,this)),this.attachObstacleGroupEventHandlers(a),this.attachRotationHandleEventHandlers(a),d.on("change:numberOfBallsAttached",function(a,e){!c.isInDispenser()&&0>=e?d.set("isObstacleDropped",!0):1===e&&c.trigger(b.EVENTS.STICKY_SLIDER_ATTACHED_TO_OBSTACLE)})},attachObstacleGroupEventHandlers:function(a){this.isMobile||(a===!1?(this.obstacleOnPaper.detach("mouseenter"),this.obstacleOnPaper.detach("mouseleave")):(this.obstacleOnPaper.onMouseEnter=$.proxy(this.onObstacleMouseEnter,this),this.obstacleOnPaper.onMouseLeave=$.proxy(this.onObstacleMouseLeave,this)))},attachRotationHandleEventHandlers:function(a){a===!1?(this.rotationHandle1.detach("mousedrag"),this.rotationHandle2.detach("mousedrag"),this.rotationHandle1.detach("mousedown"),this.rotationHandle2.detach("mousedown")):(this.rotationHandle1.onMouseDrag=$.proxy(this.onRotationHandle1Drag,this),this.rotationHandle2.onMouseDrag=$.proxy(this.onRotationHandle2Drag,this),this.rotationHandle1.onMouseDown=$.proxy(this.onRotationHandle1MouseDown,this),this.rotationHandle2.onMouseDown=$.proxy(this.onRotationHandle2MouseDown,this))},onObstacleMouseDrag:function(a){if(a.preventDefault&&a.preventDefault(),0==this.model.get("numberOfBallsAttached")){this.showHideRotationDragHandle(!1),this._closedHandCursor(a);var b=this.obstacleOnPaper,c=this._getDifference(a.point,this.mouseDownOffset);b.position=this._fitInBounds(b,c),this.model.set("isObstacleDropped",!1),this.obstacleOnPaper.bringToFront()}else{var d={manager:this.manager,path:this.filePath,player:this.player,idPrefix:this.idPrefix,containsTts:!0,title:this.getMessage("obstacle-drag-pop-up-text","title"),accTitle:this.getAccMessage("obstacle-drag-pop-up-text","title"),text:this.getMessage("obstacle-drag-pop-up-text","body-text"),accText:this.getAccMessage("obstacle-drag-pop-up-text","body-text"),type:MathInteractives.global.Theme2.PopUpBox.CONFIRM,buttons:[{id:"okay-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("reset-pop-up-text","okay-btn"),response:{isPositive:!0,buttonClicked:"okay-button"}}],closeCallback:{fnc:function(){this.obstacleDragPopUp=null},scope:this}};this.stopReading(),this.obstacleDragPopUp||(this.obstacleDragPopUp=MathInteractives.global.Theme2.PopUpBox.createPopup(d))}},_fitInBounds:function(a,b){var c=a.position,d=this._getDifference(b,c),e=a.bounds.topCenter.y+d.y,f=a.bounds.bottomCenter.y+d.y,g=a.bounds.leftCenter.x+d.x,h=a.bounds.rightCenter.x+d.x,i=this.paperScope,j=i.view.getSize(),k=j.getWidth(),l=j.getHeight(),m=0,n=0;return n>e?b.y=n+(c.y-a.bounds.top):f>l&&(b.y=l-(a.bounds.bottom-c.y)),m>g?b.x=m+(c.x-a.bounds.left):h>k&&(b.x=k-(a.bounds.right-c.x)),b},_getDifference:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},onRotationHandle1Drag:function(a){if(0==this.model.get("numberOfBallsAttached")){a.preventDefault&&a.preventDefault();var b=this.obstacleOnPaper.position,c=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,d=c.getAngleWithXAxis(a.point,b)+this.rotationHandle1InitialAngle;this._closedHandCursor(a),this.obstacleOnPaper.rotate(d-this.model.get("currentAngle"),b),this.model.set("currentAngle",d)}},onRotationHandle2Drag:function(a){if(0==this.model.get("numberOfBallsAttached")){a.preventDefault&&a.preventDefault();var b=this.obstacleOnPaper.position,c=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,d=c.getAngleWithXAxis(a.point,b)+this.rotationHandle2InitialAngle;this._closedHandCursor(a),this.obstacleOnPaper.rotate(d-this.model.get("currentAngle"),b),this.model.set("currentAngle",d)}},onRotationHandle1MouseDown:function(a){0==this.model.get("numberOfBallsAttached")&&(this.stopReading(),this._closedHandCursor(a),this.attachObstacleGroupEventHandlers(!1),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.OBSTACLE_ROTATE_START,this,1))},onRotationHandle2MouseDown:function(a){0==this.model.get("numberOfBallsAttached")&&(this.stopReading(),this._closedHandCursor(a),this.attachObstacleGroupEventHandlers(!1),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.OBSTACLE_ROTATE_START,this,2))},onObstacleMouseDown:function(a){0==this.model.get("numberOfBallsAttached")?(this.showHideRotationDragHandle(!1),this.play("obstacle-drop-loofa-sound"),this.mouseDownOffset=this._getDifference(a.point,this.obstacleOnPaper.position),this._closedHandCursor(a),this.stopReading(),this.obstacleOnPaper.bringToFront(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.OBSTACLE_DRAG_START,this)):a.preventDefault&&a.preventDefault()},onObstacleMouseEnter:function(a){0==this.model.get("numberOfBallsAttached")&&(this._openHandCursor(a),this.isInDispenser()||this.showHideRotationDragHandle())},onObstacleMouseLeave:function(){this._defaultCursor(),this.showHideRotationDragHandle(!1)},showHideRotationDragHandle:function(a){if(this.rotationHandle2){a=!(a===!1);var b=a?1:0;this.player.getModalPresent()===!0&&(a=0),this.rotationHandle1.opacity=b,this.rotationHandle2.opacity=b,this.rotation1Raster.opacity=b,this.rotation2Raster.opacity=b,this.rotationHandle1.visible=a,this.rotationHandle2.visible=a,this.rotation1Raster.visible=a,this.rotation2Raster.visible=a}},_openHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("courseNumber")).css({cursor:'url("'+this.filePath.getImagePath("open-hand")+'"), move'})},_closedHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("courseNumber")).css({cursor:'url("'+this.filePath.getImagePath("closed-hand")+'"), move'})},_defaultCursor:function(){this.isMobile||$("#"+this.idPrefix+"game-canvas-"+this.model.get("courseNumber")).css({cursor:"default"})}},{})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Obstacle,c=a.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.RiverObstacle=MathInteractives.Interactivities.MiniGolf.Views.Obstacle.extend({leftRiverObstacle:null,rightRiverObstacle:null,bridgeRasterActualPath:null,type:null,startPointLine:null,endPointLine:null,actualObstaclePath:null,reflectionPath:null,obstacleOnPaper:null,initialize:function(a){this._superwrapper("initialize",arguments),this._initializeSlidingObstacleProp(a),this._render(),this._bindEvents()},_initializeSlidingObstacleProp:function(a){this.bridgeRasterActualPath=a.bridgeRasterActualPath,this.type=a.type},_render:function(){this.model.set("isInDispenser",!1),this._createJoiningLines(),this._createRiverObs(),this.model.trigger(c.EVENTS.OBSTACLE_RENDERED)},_createRiverObs:function(){var a=this.type,c=b.TYPES;a===c.LEFT_RIVER?this._createLeftRiver():a===c.RIGHT_RIVER&&this._createRightRiver()},_createJoiningLines:function(){var a=this.paperScope,c=b.LEFT_SIDE_RIVER_POINT,d=b.RIGHT_SIDE_RIVER_POINTS;this.startPointLine=new a.Path.Line({from:d.START_POINT,to:c.START_POINT}),this.endPointLine=new a.Path.Line({from:d.END_POINT,to:c.END_POINT})},_bindEvents:function(){var a=this.model,b=this;a.on("change:lastCorrectPosition",function(){b._createRiverObs()})},_createLeftRiver:function(){this._resetCurrentObsPath();var a=this.paperScope,c=this.bridgeRasterActualPath,d=this.endPointLine,e=this.startPointLine,f=null,g=null,h=b.LEFT_SIDE_RIVER_POINT,i=h.START_POINT,j=h.END_POINT;f=e.getIntersections(c)[0].point,g=d.getIntersections(c)[0].point,this.actualObstaclePath=new a.Path({segments:[h.START_POINT,f,g,h.END_POINT],closed:!0}),this.reflectionPath=new a.Path({segments:[[i.x-14,i.y-2],[f.x-2,f.y-11],[g.x+3,g.y+9],[j.x,j.y+10]],closed:!0}),this._setBaseViewProp()},_createRightRiver:function(){this._resetCurrentObsPath();var a=this.paperScope,c=this.bridgeRasterActualPath,d=this.endPointLine,e=this.startPointLine,f=null,g=null,h=b.RIGHT_SIDE_RIVER_POINTS,i=h.START_POINT,j=h.END_POINT;f=e.getIntersections(c)[1].point,g=d.getIntersections(c)[1].point,this.actualObstaclePath=new a.Path({segments:[i,f,g,j],closed:!0}),this.reflectionPath=new a.Path({segments:[[i.x,i.y-8],[f.x-1,f.y-8],[g.x+2,g.y+8],[j.x,j.y+10]],closed:!0}),this._setBaseViewProp()},_resetCurrentObsPath:function(){null!==this.actualObstaclePath&&(this.obstacleOnPaper.removeChildren(),this.obstacleOnPaper.remove(),this.actualObstaclePath.removeChildren(),this.actualObstaclePath.remove(),this.reflectionPath.removeChildren(),this.reflectionPath.remove(),delete this.reflectionPath,delete this.actualObstaclePath,delete this.obstacleOnPaper,this.reflectionPath=null,this.actualObstaclePath=null,this.obstacleOnPaper=null)},_setBaseViewProp:function(){this.obstacleOnPaper=new this.paperScope.Group([this.actualObstaclePath,this.reflectionPath]),this.obstacleOnPaper.sendToBack()},revertToInitialPosition:function(){this._createRiverObs()}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Obstacle,c=a.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.ObstacleFixed=MathInteractives.Interactivities.MiniGolf.Views.Obstacle.extend({actualObstaclePath:null,reflectionPath:null,obstacleOnPaper:null,render:function(){this._renderRectangles(),this._setBaseViewProp(),this._bindEvents(),this._setObstaclePosition(),this.model.trigger(c.EVENTS.OBSTACLE_RENDERED)},_renderRectangles:function(){var a=null,c=null,d=this.paperScope,e=this.model,f=e.get("rectangleData"),g=f.height,h=f.width,i=e.get("type"),j=b.TYPES;this.actualObstaclePath=a=new d.Path.Rectangle(0,0,h,g),this.reflectionPath=c=i===j.LEFT_FIXED||i===j.RIGHT_FIXED?new d.Path.Rectangle(0,0,h+18,g+15):new d.Path.Rectangle(0,0,h+20,g+20),c.position=a.position,e.set("isInDispenser",!1)},_setBaseViewProp:function(){var a=null,d=null,e=this.model,f=e.get("type"),g=b.TYPES,d=e.get("rotatingAngle");this.obstacleOnPaper=a=new this.paperScope.Group([this.reflectionPath,this.actualObstaclePath]),a.name=c.DRAGGABLE,(f===g.LEFT_FIXED||f===g.RIGHT_FIXED)&&(a.rotate(d),this._setTranslatePosition())},_bindEvents:function(){var a=this.model,b=this;a.on("change:lastCorrectPosition",function(){b._setObstaclePosition()})},_setObstaclePosition:function(){var a=this.obstacleOnPaper;a.position=this.model.get("lastCorrectPosition"),this._setTranslatePosition()},_setTranslatePosition:function(){var a=this.model,c=a.get("type"),d=b.TYPES,e=(a.get("rotatingAngle"),a.get("translateX")),f=a.get("translateY"),g=this.obstacleOnPaper;g.detach("mousedown"),g.detach("mouseenter"),g.detach("mouseleave"),(c===d.LEFT_FIXED||c===d.RIGHT_FIXED)&&g.translate(e,f)},revertToInitialPosition:function(){var a=this.model;a.set("lastCorrectPosition",a.get("initialPosition")),this._setObstaclePosition()}},{})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas=MathInteractives.Common.Player.Views.Base.extend({paperScope:null,paperScope2:null,rotationHandleView:null,rootBall:null,startBallView:null,matBallView:null,courseBounds:null,matBounds:null,obstacles:[],ballViewList:null,tool:null,hole:null,arrow:null,initialize:function(){this.ballViewList=[],this.initializeDefaultProperties(),this._setUpCanvas(),this._attachToolEvents(),this.render(),this._snapBoundary={path:this.courseBounds,isObstacle:!1}},clearCanvas:function(){this.paperScope.project.activeLayer.removeChildren(),this.paperScope2.project.activeLayer.removeChildren()},_loadSaveState:function(){var a,b,c,d=this,e=d.model,f=e.get("balls"),g=e.get("invalidPathIndex"),h={};if(this.model.get("toResetCourse")===!1)return this.reset(),this.model.set("toResetCourse",!0),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.ENABLE_RESET,!1),void this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.READY);if(this._isNullOrUndefined(f)||f.length<3)return void this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.READY);var i=f.splice(0,f.length-2);this.rotationHandleView.setRotationHandlePosition(i[0].get("position")),h.point=i[1].get("position"),c=e.get("resetCourseButton"),this.ballViewList[0].view.connectorLine&&this.ballViewList[0].view.connectorLine.bringToFront(),this._onStartBallDrag(h),i[1].attributes.stickySliderAngle=null,this.ballViewList[this.ballViewList.length-1].view.ballModel.set(i[1].attributes),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.ENABLE_RESET,c);for(var j=2;j<i.length;j++)a=i[j],b=this._getBallViewAtListIndex(j-1).view,h.point=b.getBallPosition(),h.saveResume=!0,this._onBallDragFinished(b,h),this.ballViewList[this.ballViewList.length-1].view.setBallPosition(i[j].get("position")),a.attributes.stickySliderAngle=null,this.ballViewList[this.ballViewList.length-1].view.ballModel.set(a.attributes);var k=this._isLastBallThroughHole();this._isNullOrUndefined(g)?this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==k):this.highLightIncorrectPath(g),d.rotationHandleView._resetCursor(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.READY),this.enableDisableObstacleDispenserHelpElements&&this.enableDisableObstacleDispenserHelpElements(),this.hideHole(!0),this.currentObject=null},_setUpCanvas:function(){{var a=new paper.PaperScope,b=new paper.PaperScope;MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES}a.setup(this.idPrefix+this.options.canvasId),b.setup(this.idPrefix+this.options.canvasId+"-2"),this.paperScope2=b,this.paperScope=a,this.paperScope.activate(),this.clearCanvas()},_attachToolEvents:function(){var b,c=this.paperScope,d=(this.paperScope2,MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES),e=this;this.tool=new c.Tool,this.tool.onMouseDrag=function(a){a.event.preventDefault()},this.tool.onMouseUp=function(c){e.rotationHandleView._resetCursor();var f=e.currentObject;if(!e._isNullOrUndefined(f)){switch(f.name){case d.BALL:b=e._getBallViewAtIndex(f.cid),e._onBallDragFinished(b.view,c),e._onBallMouseUp(c,f.cid);break;case d.STICKY_SLIDER:b=e._getBallViewAtIndex(f.cid),e._stickySliderDragFinished(b.view,c);var g=e._getBallViewListIndex(f.cid),h=0===g?-1:g-1,i=e._getBallViewAtListIndex(h),j=i?i.view:null,k=-1===g?g:g+1,l=e._getBallViewAtListIndex(k),m=l?l.view:null;m&&m.getBallSnap()&&(c.point=m.stickySliderRaster.position,m.stickySliderRaster&&e.sendPaperItemToBack(m.stickySliderRaster.parent),e._stickySliderDragFinished(m,c)),i&&j.getBallSnap()&&(c.point=j.stickySliderRaster.position,e._stickySliderDragFinished(j,c),j.stickySliderRaster&&e.sendPaperItemToBack(j.stickySliderRaster.parent)),b.view.stickySliderRaster&&b.view.stickySliderRaster.parent.bringToFront(),m&&(m.arcWithNextBall&&e.sendPaperItemToBack(m.arcWithNextBall),m.arcWithPrevBall&&e.sendPaperItemToBack(m.arcWithPrevBall)),b.arcWithNextBall&&e.sendPaperItemToBack(b.arcWithNextBall),b.arcWithPrevBall&&e.sendPaperItemToBack(b.arcWithPrevBall),j&&(j.arcWithNextBall&&e.sendPaperItemToBack(j.arcWithNextBall),j.arcWithPrevBall&&e.sendPaperItemToBack(j.arcWithPrevBall));var n=e._isLastBallThroughHole();-1!==n&&(e._holeEncountered(n),e.hideHole(!0));break;case d.ROTATION_HANDLE:e.rotationHandleView.onRotationHandleRotate(c),e.rotationHandleView._resetCursor()}e.arrow&&e.arrow.removeChildren(),c&&c.getItem&&c.getItem()&&c.getItem().name===a.DRAGGABLE?e.rotationHandleView._openHandCursor(c):e.rotationHandleView._resetCursor(),e.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.TOOL_UP_EVENT),e.model.set("invalidPathIndex",null),setTimeout(function(){e.paperScope.view.draw(),e.paperScope2.view.draw()},1)}}},_onBallMouseUp:function(a,b){var c=this._getBallViewListIndex(b),d=-1===c?c:c+1,e=this._getBallViewAtListIndex(d),f=e?e.view:null;f&&f.getBallSnap()&&1===d&&(a.point=f.stickySliderRaster.position,this._stickySliderDragFinished(f,a)),this._bringBallBack()},render:function(){this.renderBoundry(),this._renderStartBall(),this.arrow=new this.paperScope.Group},_renderHole:function(){var a=this.paperScope,b=Number(this.model.get("holeRadius")),c=this.rootBall.ballInnerRaster.bounds.width/2,d=.4,e=this.model.get("holePosition");a.activate(),this.hole=new a.CompoundPath({children:[new a.Path.Circle({center:new a.Point(e),radius:b+c/2}),new a.Path.Circle({center:new a.Point(e),radius:b})],fillColor:"green",opacity:d}),this.hideHole(!0)},renderBoundry:function(){this.courseBounds=this._getPathFromStoredPointsArray(this.model.get("courseBoundaries")),this.matBounds=this._getPathFromStoredPointsArray(this.model.get("matBoundaries"));var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;this.actualCourseBounds=this._getPathFromStoredPointsArray(a.PHYSICAL_BOUNDRIES["COURSE_"+this.model.get("levelId")]),this.actualMatBounds=this._getPathFromStoredPointsArray(a.PHYSICAL_MAT_BOUNDRIES["COURSE_"+this.model.get("levelId")])},_getPathFromStoredPointsArray:function(a){var b,c,d,e;for(d=this.paperScope,b=new d.Path,e=a.length,c=0;e>c;c++)b.add(new d.Point(a[c]));return b.closed=!0,b.selected=!1,b},_renderRotationHandle:function(){this.rotationHandleView=new MathInteractives.Interactivities.MiniGolf.Views.RotationHandle({paperScope:this.paperScope,model:this.model,dragBallView:this.startBallView,matBallView:this.matBallView,courseBounds:this.courseBounds});var a=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.EVENTS;this.rotationHandleView.on(a.ROTATION_HANDLE_ROTATED,$.proxy(this._rotationHandleRotating,this,this.matBallView.cid)).on(a.ROTATION_HANDLE_ROTATION_ENDED,$.proxy(this._rotationHandleRotated,this,this.matBallView.cid)).on(a.ROTATION_HANDLE_SELECTED,$.proxy(this._rotationHandleSelected,this)).on(a.ROTATION_HANDLE_RENDERED,$.proxy(this._loadSaveState,this)),this._bindEventOnHandleBalls(),this.rootBall.setBallPosition(new this.paperScope.Point(-200,-200)),this.rootBall.rectangleCover.position=this.rootBall.getBallPosition()},_renderStartBall:function(){var a=new MathInteractives.Interactivities.MiniGolf.Models.Ball;this.rootBall=new MathInteractives.Interactivities.MiniGolf.Views.Ball({paperScope:this.paperScope,model:this.model,ballModel:a}),this.rootBall.on(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.RASTERS_LOADED,$.proxy(this._onRastersLoaded,this))},_onRastersLoaded:function(){this._renderMatBall(),this._renderRotationHandle(),this._renderHole()},_renderMatBall:function(){this.matBallView=this._createNewBall(),this.startBallView=this._createNewBall(),this.matBallView.rectangleCover.opacity=0,this.startBallView.rectangleCover.opacity=0},_bindEventOnHandleBalls:function(){var a=MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS;this.startBallView.off(a.BALL_DRAGGED).on(a.BALL_DRAGGED,$.proxy(this._onStartBallDrag,this)),this.startBallView.on(a.STICKYSLIDER_DRAGGED,$.proxy(this.rotationHandleView._startBallStickySliderDragged,this.rotationHandleView)),this.matBallView.off(a.BALL_DRAGGED).on(a.BALL_DRAGGED,$.proxy(this._onMatBallDrag,this)),this.matBallView.off(a.BALL_DRAGGING_FINISHED),this.matBallView.off(a.STICKYSLIDER_DRAGGED),this.matBallView.off(a.STICKYSLIDER_DRAGGING_FINISHED)},_createNewBall:function(){var a=MathInteractives.Interactivities.MiniGolf.Views.Ball,b=new MathInteractives.Interactivities.MiniGolf.Models.Ball,c=new MathInteractives.Interactivities.MiniGolf.Views.Ball({paperScope:this.paperScope,model:this.model,ballModel:b,ball:this.rootBall});return this.model.addBall(b),c.on(a.EVENTS.BALL_SELECTED,$.proxy(this._onBallSelected,this,c)),c.on(a.EVENTS.BALL_DRAGGED,$.proxy(this._onBallDrag,this,c)),c.on(a.EVENTS.BALL_DRAGGING_FINISHED,$.proxy(this._onBallDragFinished,this,c)),c.on(a.EVENTS.STICKYSLIDER_SELECTED,$.proxy(this._stickySliderSelected,this,c)),c.on(a.EVENTS.STICKYSLIDER_DRAGGED,$.proxy(this._stickySliderDragged,this,c)),c.on(a.EVENTS.STICKYSLIDER_DRAGGING_FINISHED,$.proxy(this._stickySliderDragFinished,this,c)),c.listenTo(b,"change:position",$.proxy(this._currentBallMoved,this,c.cid)),this.ballViewList.push({view:c,model:b}),c},deleteBall:function(a){var b=this._getBallViewListIndex(a.cid);if(!(0>b)){var c,d,e,f=this.ballViewList.splice(b,1),g=this._getSiblingBalls(b),h=g.previous.view,i=this._getSiblingBalls(b-1).next,j=i.view,k=this.obstacles,l=null;if(f.length>0)for(var m=0;m<f.length;m++){if(f[m].view.remove(),c=f[m].model,l=c.get("isSnappedTo"),null!==l)for(d in k)e=k[d],e.model.get("obstacleNumber")==l&&e.decrementSnappedBallCount();this.model.deleteBall(c)}h&&this._currentBallMoved(h.cid),j&&this._currentBallMoved(j.cid),1===b&&i&&(this.startBallView=i.view,this._bindEventOnHandleBalls(),this.rotationHandleView.replaceDragball(this.startBallView))}},_currentBallMoved:function(a){var b=this._getBallViewListIndex(a);0>b||this.updateConnections(b)},_getBallViewAtListIndex:function(a){for(var b=this.ballViewList,c=0;c<b.length;c++)if(a===c)return b[c];return null},_getBallViewAtIndex:function(a){for(var b=this.ballViewList,c=0;c<b.length;c++)if(b[c].view.cid===a)return b[c];return null},_getBallViewListIndex:function(a){for(var b=this.ballViewList,c=0;c<b.length;c++)if(b[c].view.cid===a)return c;return-1},updateConnections:function(a){var b=this,c=(b.ballViewList,b._getSiblingBalls(a)),d=c.current?c.current.view:null,e=c.next?c.next.view:null,f=c.previous?c.previous.view:null;b._drawLine(f,d),b._drawLine(d,e),b._renderAngle(d,f,e)},_getSiblingBalls:function(a){var b=this.ballViewList,c=a+1,d=a-1,e=a>=0?b[a]:null,f=c>=0&&c<b.length?b[c]:null,g=d>=0?b[d]:null;return{previous:g,current:e,next:f}},_drawLine:function(a,b){if(!(this._isNullOrUndefined(b)||this._isNullOrUndefined(a)||this._isNullOrUndefined(b.getBallPosition())||this._isNullOrUndefined(a.getBallPosition()))){var c=a.connectorLine,d=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas,e=MathInteractives.Interactivities.MiniGolf.Views.Ball,f=a.getBallPosition(),g=b.getBallPosition(),h=MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS,i=this.paperScope;
this._isNullOrUndefined(c)&&(c=new i.Path,c.add(0,0),c.add(0,0),c.strokeColor=h.ARC_COLOR,c.strokeWidth=2,d.CONSTANTS.SHOW_SHADOW&&(c.shadowColor=new this.paperScope.Color(0,0,0,.55),c.shadowBlur=3,c.shadowOffset=new this.paperScope.Point(2,2)));var j=c.segments;j[0].point=f,j[1].point=g,a.connectorLine=c,a.ballGroup.bringToFront(),b.ballGroup.bringToFront(),d.CONSTANTS.SHOW_SHADOW&&(c.shadowColor=new this.paperScope.Color(0,0,0,.55)),c.dashArray=b.getBallSnap()===!1||this._isNullOrUndefined(b.getBallSnap())?e.CONSTANTS.DASH_ARRAY:null}},snapLine:function(a){return},_renderAngle:function(a,b,c){this._renderPrevBallAngle(a,b),this._renderPrevBallAngle(c,a),this._renderNextBallAngle(a,c),this._renderNextBallAngle(b,a)},_renderPrevBallAngle:function(a,b){if(!this._isNullOrUndefined(a)&&!this._isNullOrUndefined(b)&&a.ballModel.get("isSnapped")){var c,d,e,f,g=a.ballModel,h=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS,i=MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS,j=(a.getBallPosition(),b.getBallPosition()),k=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,l=i.PREV_ANGLE_SLICE,m=i.ANGLE_ARC_RADIUS,n=l.RADIUS,o=g.get("snapPoint"),p=k.GetvarOnLineUsingDistance(o,j,m,0,!0),q=g.get("mirrorPoint"),r=a.arcWithPrevBall,s=this.paperScope,t=a.prevAngleText;p=new s.Point(p),r&&r.remove(),t&&t.remove(),c=k.GetvarOnLineUsingDistance(o,j,n,0,!0),e=k.GetvarOnLineUsingDistance(o,q,n,0,!0),d=k.GetvarOnLineUsingDistance(o,this._getMidPoint(c,e),n,0,!0),q=k.GetvarOnLineUsingDistance(o,q,m,0,!0),f=k.GetvarOnLineUsingDistance(o,this._getMidPoint(p,q),m,0,!0),q=new s.Point(q),c=new s.Point(c),d=new s.Point(d),e=new s.Point(e),this._equalX(c,d)||this._equalX(c,e)||this._equalX(d,e)||this._equalY(c,d)||this._equalY(c,e)||this._equalY(d,e)||(r=new s.Path.Arc(c,d,e),r.add(new s.Point(o)),r.closed=!0,r.strokeWidth=l.STROKE_WIDTH,r.strokeColor=l.STROKE_COLOR,r.fillColor=l.FILL_COLOR,r.fillColor.alpha=l.FILL_ALPHA,r.shadowColor=new s.Color(0,0,0,0),r.guide=!0,r.miterLimit=1,this.sendPaperItemToBack(r),a.mirrorLine&&a.mirrorLine.bringToFront(),a.arcWithPrevBall=r);var u=this._calculateAngle(p,o,q);t=new s.PointText({content:u+""+h.DEGREE_SYMBOL}),this._applyCSSToAngleText(t),f=k.GetvarOnLineUsingDistance(o,f,i.INCIDENCE_ANGLE_LABEL_ARC_RAIDUS,0,!0),t.position=new s.Point(f),a.prevAngleText=t,a.ballModel.set("prevBallAngle",u)}},_renderNextBallAngle:function(a,b){if(!this._isNullOrUndefined(a)&&!this._isNullOrUndefined(b)&&a.ballModel.get("isSnapped")){var c,d,e,f,g=a.ballModel,h=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS,i=b.getBallPosition(),j=MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS,k=(a.getBallPosition(),MathInteractives.Interactivities.MiniGolf.Views.LineUtility),l=j.NEXT_ANGLE_SLICE,m=j.ANGLE_ARC_RADIUS,n=l.RADIUS,o=g.get("snapPoint"),p=k.GetvarOnLineUsingDistance(o,i,j.ANGLE_ARC_RADIUS,0,!0),q=g.get("mirrorPoint"),r=a.arcWithNextBall,s=this.paperScope,t=a.nextAngleText;r&&r.remove(),t&&t.remove(),c=k.GetvarOnLineUsingDistance(o,i,n,0,!0),e=k.GetvarOnLineUsingDistance(o,q,n,0,!0),d=k.GetvarOnLineUsingDistance(o,this._getMidPoint(c,e),n,0,!0),q=k.GetvarOnLineUsingDistance(o,q,m,0,!0),f=k.GetvarOnLineUsingDistance(o,this._getMidPoint(p,q),m,0,!0),q=new s.Point(q),c=new s.Point(c),d=new s.Point(d),e=new s.Point(e),this._equalX(c,d)||this._equalX(c,e)||this._equalX(d,e)||this._equalY(c,d)||this._equalY(c,e)||this._equalY(d,e)||(r=new s.Path.Arc(c,d,e),r.add(new s.Point(o)),r.closed=!0,r.strokeWidth=l.STROKE_WIDTH,r.strokeColor=l.STROKE_COLOR,r.fillColor=l.FILL_COLOR,r.fillColor.alpha=l.FILL_ALPHA,r.shadowColor=new s.Color(0,0,0,0),r.guide=!0,r.miterLimit=1,this.sendPaperItemToBack(r),a.mirrorLine.bringToFront(),a.arcWithNextBall=r);var u=this._calculateAngle(p,o,q);t=new s.PointText({content:u+""+h.DEGREE_SYMBOL}),this._applyCSSToAngleText(t),f=k.GetvarOnLineUsingDistance(o,f,j.REFLECTION_ANGLE_LABEL_ARC_RAIDUS,0,!0),t.position=new s.Point(f),a.nextAngleText=t,a.ballModel.set("nextBallAngle",u)}},_calculateAngle:function(a,b,c){var d=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,e=d.AngleBetweenLineAndPointF(a,c,b);return e=Math.round(1e3*e)/1e3,e=isNaN(e)?0:e,Number(e.toFixed(0))},_applyCSSToAngleText:function(a){if(!this._isNullOrUndefined(a)){var b=MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS,c=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS;a.strokeWidth=b.ANGLE_TEXT_STROKE_WIDTH,a.fontSize=b.ANGLE_TEXT_FONT_SIZE,a.fontFamily=b.ANGLE_TEXT_FONT_FAMILY,a.strokeColor=b.ARC_COLOR,a.fillColor=b.ARC_COLOR,c.SHOW_SHADOW&&(a.shadowColor=new this.paperScope.Color(0,0,0),a.shadowBlur=3,a.shadowOffset=new this.paperScope.Point(1,1),a.characterStyle={fontSize:b.ANGLE_TEXT_FONT_SIZE,font:"Montserrat"})}},_onStartBallDrag:function(a){var b=this._restrictBallOnDrag(a.point,{ballView:this.startBallView});a.point=b,this.rotationHandleView.startBallDragged(a),this.currentObject=this.startBallView.ball,this.trivializeIncorrectPath(this.model.get("invalidPathIndex")),this.model.set("invalidPathIndex",null),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.DISABLE_RESET)},_onMatBallDrag:function(a){var b=this._simpleBallDragRestrict(a.point,this.matBounds);this.rotationHandleView.setRotationHandlePosition(b),this.currentObject=this.matBallView.ball,this._isLineThroughHole(this.matBallView.cid),this.trivializeIncorrectPath(this.model.get("invalidPathIndex")),this.model.set("invalidPathIndex",null);this._isLastBallThroughHole();this.ballViewList[0].view.connectorLine&&(this.ballViewList[0].view.connectorLine.bringToFront(),this.ballViewList[0].view.ball.parent.bringToFront(),this.ballViewList[1].view.ball.parent.bringToFront()),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.DISABLE_RESET)},_onBallSelected:function(a){this.ballViewList.length<3||(this.trivializeIncorrectPath(this.model.get("invalidPathIndex")),this.model.set("invalidPathIndex",null),this._transferStaticObject(a),this.currentObject=a.ball)},_stickySliderSelected:function(a){this.ballViewList.length<3,this.trivializeIncorrectPath(this.model.get("invalidPathIndex")),this.model.set("invalidPathIndex",null),this._transferStaticObject(a),this.currentObject=a.stickySliderRaster},_transferStaticObject:function(a){var b,c=this._getBallViewListIndex(a.cid),d=this._getSiblingBalls(c),e=a.getActivePaperChildren(),f=e.length,g=this.paperScope.project.activeLayer.removeChildren(),h=g.length,i=[];if(this._isNullOrUndefined(d.previous))e=e.concat([this.rotationHandleView.handleGroup.id]);else{var j=d.previous.view,k=j.getBallSnap();e=e.concat(k?j.getPaperItemsWhenSnapped(!1,!0):j.getActivePaperChildren())}if(!this._isNullOrUndefined(d.next)){var l=d.next.view,k=l.getBallSnap();e=e.concat(k?l.getPaperItemsWhenSnapped(!0,!1):l.getActivePaperChildren())}e.push(this.hole.id),f=e.length;for(var m=0;f>m;m++)for(var n=0;h>n;n++){if(g[n].id===e[m]){b=g.splice(n,1);for(var o=0;o<b.length;o++)i.push(b[o]),h--;break}var p=g[n].children;if(!this._isNullOrUndefined(p))for(var q=0;q<p.length;q++)if(p[q].id===e[m]){b=g.splice(n,1);for(var o=0;o<b.length;o++)i.push(b[o]),h--;break}}this.paperScope.project.activeLayer.addChildren(i),this.paperScope2.project.activeLayer.addChildren(g),j&&this.sendPaperItemToBack(j.connectorLine),l&&l.arcWithPrevBall&&this.sendPaperItemToBack(l.arcWithPrevBall),a.arcWithNextBall&&this.sendPaperItemToBack(a.arcWithNextBall),a.arcWithPrevBall&&this.sendPaperItemToBack(a.arcWithPrevBall),j&&j.arcWithNextBall&&this.sendPaperItemToBack(j.arcWithNextBall),this.paperScope.view.draw(),this.paperScope2.view.draw(),this.paperScope.activate()},sendPaperItemToBack:function(a){a&&a.isInserted()&&a.sendToBack()},_reverseTransfer:function(){this.paperScope.project.activeLayer.insertChildren(0,this.paperScope2.project.activeLayer.removeChildren()),this.paperScope2.view.draw(),this.paperScope.view.draw(),this.paperScope.activate(),this.currentObject=null,this.ballViewList[0].view.ball.parent.bringToFront(),this.ballViewList[this.ballViewList.length-1].view.ball.parent.bringToFront()},_onBallDrag:function(a,b){var c,d;c=null,d=this._restrictBallOnDrag(b.point,{ballView:a}),a.setBallPosition(d),this.currentObject=a.ball,this._isLineThroughHole(a.cid)},_restrictBallOnDrag:function(a,b){b=b||{},b.boundingPath||(b.boundingPath=this.courseBounds);var c,d,e,f=0,g=this.obstacles;if(c=this._simpleBallDragRestrict(a,b.boundingPath),b.checkForObstacles){for(;-1!=(f=this.getNextObstacleIndex(f,-1,["ignoreBallSnap"]));){if(d=g[f],d.reflectionPath.contains(c))return e=d.reflectionPath.getNearestPoint(c),b.boundingPath.contains(e)?(this._snapBoundary={path:d.reflectionPath,isObstacle:!0},e):(this._snapBoundary={path:this.courseBounds,isObstacle:!1},b.boundingPath.getNearestPoint(e));f++}return this._snapBoundary={path:this.courseBounds,isObstacle:!1},c}return this._snapBoundary={path:this.courseBounds,isObstacle:!1},c},_simpleBallDragRestrict:function(a,b){return b.contains(a)?a:b.getNearestPoint(a)},_onBallDragFinished:function(a,b,c){if(!this._isNullOrUndefined(a)&&!this._isNullOrUndefined(b)){c=c||{};var d,e,f,g=a.getBallPosition(),h=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,i=this._snapBoundary.path.getNearestPoint(g),j=this._getSiblingBalls(this._getBallViewListIndex(a.cid)).previous,k=j?j.view:null,l=k?k.getBallPosition():null,m=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas,n=m.CONSTANTS.BALL_REFLECTION,o=m.CONSTANTS.SNAP_TOLERANCE,p=this._isLineThroughHole(a.cid);if(-1!==p)this._holeEncountered(p);else if(h.GetDistBetweenvars(g,i)<o){if(a.setBallPosition(i),this.snapLine(a),g=a.getBallPosition(),i=this._snapBoundary.path.getNearestPoint(g),d=this._createNewBall(),f=this._getTangent(this._snapBoundary.path,i,{isObstacle:this._snapBoundary.isObstacle,sourcePoint:l}),e=h.GetvarOnLineUsingDistance(i,f.mirrorPoint,n,0,!0),e=new this.paperScope.Point(e),!this.courseBounds.contains(e)){var q=this._getDummyLine(g,e),r=this.courseBounds.getIntersections(q);q.remove(),r.length>0&&(e=r[0].point)}d.setBallPosition(e),a.setBallSnap(!0,f.snapPoint,f.mirrorPoint),a.ballModel.set("isSnappedTo",c.obstacleNumber),this._currentBallMoved(a.cid)}this._reverseTransfer();var s=this.ballViewList[this.ballViewList.length-2].view.cid,t=this._isLastBallThroughHole();return this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==t),{holeEncountered:-1!==t&&t!==s}}},_getTangent:function(a,b,c){var d=a._getOffset(a.getLocationOf(b)),e=a.getNormalAt(d);e.length=-MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS.MIRROR_LINE_LENGTH,c&&c.isObstacle&&(e.length*=-1);var f={snapPoint:b,mirrorPoint:this._addPoints(b,e)};if(-1!==this._isSegmentPoint(a,b)&&c&&c.sourcePoint){var g=this._subtractPoints(f.snapPoint,c.sourcePoint);g.length=-MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS.MIRROR_LINE_LENGTH,f.mirrorPoint=this._addPoints(f.snapPoint,g)}return f},isRendered:!0,_stickySliderDragged:function(a,b,c){if(this.isRendered){this.isRendered=!1;var d,e,f,g=this.obstacles,h=this._restrictBallOnDrag(b.point,{checkForObstacles:g.length>0}),i=this._getSiblingBalls(this._getBallViewListIndex(a.cid)).previous,j=i?i.view:null,k=j?j.getBallPosition():null,l=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,m=this._getTangent(this._snapBoundary.path,h,{sourcePoint:k,isObstacle:this._snapBoundary.isObstacle}),n=0,o=(this._subtractPoints(a.getBallPosition(),a.stickySliderRaster.position),l.GetDistBetweenvars(b.point,h));if(this._snapBoundary.isObstacle)for(;-1!=(n=this.getNextObstacleIndex(n,-1,["ignoreBallSnap"]));)f=this.obstacles[n],this._snapBoundary.path.contains(f.actualObstaclePath.position)&&(d=a.ballModel.get("isSnappedTo"),e=f.model.get("obstacleNumber"),d!=e&&(this.decrementBallsAttachedCountOfObstacle(d),f.incrementSnappedBallCount()),a.ballModel.set("isSnappedTo",e)),n++;else g.length&&(d=a.ballModel.get("isSnappedTo"),this.decrementBallsAttachedCountOfObstacle(d),a.ballModel.set("isSnappedTo",null));0!==o||c||(h=this._addValueInPoint(h,0,30),m.snapPoint=this._addValueInPoint(m.snapPoint,0,30),m.mirrorPoint=this._addValueInPoint(m.mirrorPoint,0,30)),a.setBallPosition(h),a.setBallSnapPoint(m.snapPoint,m.mirrorPoint),this.currentObject=a.stickySliderRaster,this._isLineThroughHole(a.cid),this._isLastBallThroughHole(),this._currentBallMoved(a.cid),a.rectangleCover.opacity=.4,this.isRendered=!0}},_stickySliderDragFinished:function(a,b){var c,d=this._restrictBallOnDrag(b.point,{ballView:a,checkForObstacles:this.obstacles.length>0}),e=this._getSiblingBalls(this._getBallViewListIndex(a.cid)).previous,f=e?e.view:null,g=f?f.getBallPosition():null,h=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,i=h.GetDistBetweenvars(b.point,d),j=!1;a.rectangleCover.opacity=.4,c=this._getTangent(this._snapBoundary.path,a.ball.position,{sourcePoint:g,isObstacle:this._snapBoundary.isObstacle}),this._reverseTransfer();var k=this._isLineThroughHole(a.cid);-1!==k&&(a.setBallSnapPoint(c.snapPoint,c.mirrorPoint),this._currentBallMoved(a.cid),this._holeEncountered(k),j=!0),2===this.ballViewList.length&&(b.point=this.ballViewList[this.ballViewList.length-1].view.getBallPosition(),this._onStartBallDrag(b)),0!==i||this._snapBoundary.isObstacle?j||(this.snapLine(a),a.setBallSnapPoint(c.snapPoint,c.mirrorPoint),this._currentBallMoved(a.cid)):this.deleteBall(a,b);var l=this._isLastBallThroughHole();this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==l)},_rotationHandleRotating:function(a){this.ballViewList[0].view.connectorLine&&(this.ballViewList[0].view.connectorLine.bringToFront(),this.ballViewList[0].view.ball.parent.bringToFront(),this.ballViewList[1].view.ball.parent.bringToFront());this._isLineThroughHole(a)},_bringBallBack:function(){var a=this.ballViewList;if(a.length<3&&!this.courseBounds.contains(a[1].view.getBallPosition())){var b=this._getDummyLine(a[0].view.getBallPosition(),a[1].view.getBallPosition()),c=b.getIntersections(this.courseBounds);c.length>0&&a[1].view.setBallPosition(c[0].point),b.remove()}},_rotationHandleRotated:function(a){{var b=this._isLineThroughHole(a);this.ballViewList}if(this._bringBallBack(),-1!==b&&(this._holeEncountered(b),2===this.ballViewList.length)){var c={};c.point=this.ballViewList[1].view.getBallPosition(),this._onStartBallDrag(c)}var d=this._isLastBallThroughHole();this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==d),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.DISABLE_RESET),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.TOOL_UP_EVENT)},_rotationHandleSelected:function(a){this.currentObject={name:MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES.ROTATION_HANDLE,handle:a},this.arrow&&(this.arrow.removeChildren(),this.trivializeIncorrectPath(this.model.get("invaildPathIndex")),this.model.set("invalidPathIndex",null))},hideHole:function(a){var b=a?0:.4,c=this.hole;return this.currentObject&&0===this._getBallViewListIndex(this.currentObject.cid)?!1:void(b!==c.opacity&&(c.opacity=b))},_holeEncountered:function(a){for(var b=this._getBallViewListIndex(a),c=this.ballViewList,d=c[b+1].view.getBallPosition(),e=[],f=b+1;f<c.length-1;f++)e.push(c[f].view.cid);for(var f=0;f<e.length;f++){var g=this._getBallViewAtIndex(e[f]);this.deleteBall(g.view)}this._retractball(d)},_retractball:function(a){var b=this.ballViewList,c=b.length,d=this.model.get("holePosition"),e=b[c-1].view,f=b[c-2].view,g=f.getBallPosition(),h=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,i=h.GetNormalvar(d,a,g),j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,d=null,r=this.hole,s=null,t=null,u=null;if(r&&(s=r.getBounds().getHeight()/2,t=r.getPosition().getDistance(e.ball.getPosition())),0!==this.hole.opacity&&s>=t)for(o=e.ballInnerRaster.bounds.height/2,j=this.defaultObstacles||[],k=j.length,u=0;k>u;u++)if(n=j[u],p=n.actualObstaclePath,l=p.getNearestLocation(i),m=l.getDistance(i),o>m){i=e.ball.getPosition(),q=f.connectorLine.getIntersections(n.reflectionPath),(p.contains(i)||q.length>0)&&(i=q[0].getPoint());break}e.setBallPosition(new this.paperScope.Point(i))},_isLastBallThroughHole:function(){var a,b=this.ballViewList.length-2,c=this._getSiblingBalls(b),d=c.previous,e=c.current,f=(c.next,this.hole);return this.model.get("isHoleCovered")?-1:!this._isNullOrUndefined(d)&&!this._isNullOrUndefined(d.view.connectorLine)&&(a=d.view.connectorLine.getIntersections(f),a.length>0)?(this.hideHole(!(a.length>0)),d.view.cid):!this._isNullOrUndefined(e)&&!this._isNullOrUndefined(e.view.connectorLine)&&(a=e.view.connectorLine.getIntersections(f),a.length>0)?(this.hideHole(!(a.length>0)),e.view.cid):-1},_isLineThroughHole:function(a){if(this.model.get("isHoleCovered"))return-1;var b,c=this._getBallViewListIndex(a),d=this._getSiblingBalls(c),e=d.previous,f=d.current,g=d.next,h=this.hole;return!this._isNullOrUndefined(e)&&!this._isNullOrUndefined(e.view.connectorLine)&&(b=e.view.connectorLine.getIntersections(h),this.hideHole(!(b.length>0)),b.length>0)?e.view.cid:!this._isNullOrUndefined(f)&&!this._isNullOrUndefined(f.view.connectorLine)&&(b=f.view.connectorLine.getIntersections(h),this.hideHole(!(b.length>0)),b.length>0)?f.view.cid:!this._isNullOrUndefined(g)&&!this._isNullOrUndefined(g.view.connectorLine)&&(b=g.view.connectorLine.getIntersections(h),this.hideHole(!(b.length>0)),b.length>0)?g.view.cid:-1},trivializeIncorrectPath:function(a){0>a&&(a=this.model.get("invalidPathIndex"));var b=this._getBallViewAtListIndex(a),c=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas,d="black";if(!this._isNullOrUndefined(b)&&c.CONSTANTS.SHOW_SHADOW){var e=b.view;this._isNullOrUndefined(e)||(this._isNullOrUndefined(e.connectorLine)||(e.connectorLine.shadowColor=d),this._isNullOrUndefined(e.arcWithNextBall)||(e.arcWithNextBall.shadowColor=d),this._isNullOrUndefined(e.nextAngleText)||(e.nextAngleText.shadowColor=d),this.model.set("invalidPathIndex",null))}},highLightIncorrectPath:function(a){var b=this._getBallViewAtListIndex(a),c=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas,d=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS.INVALID_LINE_COLOR;if(!this._isNullOrUndefined(b)&&c.CONSTANTS.SHOW_SHADOW){var e=b.view;this._isNullOrUndefined(e)||(this._isNullOrUndefined(e.connectorLine)||(e.connectorLine.shadowColor=d),this._isNullOrUndefined(e.arcWithNextBall)||(e.arcWithNextBall.shadowColor=d),this._isNullOrUndefined(e.nextAngleText)||(e.nextAngleText.shadowColor=d),this._renderArrow(e),this.model.set("invalidPathIndex",a))}},_renderArrow:function(a){if(!this._isNullOrUndefined(a)){this.arrow&&this.arrow.removeChildren();var b=a.ballModel,c=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANGLE_TOLERANCE,d=b.get("prevBallAngle"),e=b.get("nextBallAngle");if(this._isNullOrUndefined(d)||this._isNullOrUndefined(e)||(d=Number(d.toFixed(0)),e=Number(e.toFixed(0)),!(e>=d-c&&d+c>=e))){this._isNullOrUndefined(this.arrow)&&(this.arrow=new this.paperScope.Group);var f=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS,g=a.ballModel.get("snapPoint"),h=a.ballModel.get("mirrorPoint");if(!this._isNullOrUndefined(g)&&!this._isNullOrUndefined(h)){var i=this._subtractPoints(h,g),j=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,k=a.nextAngleText;if(null!==a.nextAngleText){i.length=7+a.nextAngleText.bounds.height/2;var l=this._addPoints(k.position,i),m=new this.paperScope.Path;m.add(l),i.length=f.INVALID_ARROW_LENGTH;var n=this._addPoints(l,i);m.add(n),i.angle=-30;var o=j.GetvarOnLineUsingDistance(l,n,f.INVALID_ARROW_POINTER_LENGTH,-f.INVALID_ARROW_POINTER_ANGLE,!0);i.angle=30;var p=j.GetvarOnLineUsingDistance(l,n,f.INVALID_ARROW_POINTER_LENGTH,f.INVALID_ARROW_POINTER_ANGLE,!0),q=new this.paperScope.Path;q.add(o),q.add(l),q.add(p),m.strokeWidth=f.INVALID_LINE_STROKE,m.strokeColor="white",m.shadowColor="red",m.shadowBlur=3,q.strokeWidth=f.INVALID_LINE_STROKE,q.strokeColor="white",q.shadowColor="red",q.shadowBlur=3,this.arrow.addChildren([m,q])}}}}},_addValueInPoint:function(a,b,c){return a?new this.paperScope.Point(a.x+b,a.y+c):"NaN"},_addPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x+b.x,a.y+b.y):"NaN"},_subtractPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x-b.x,a.y-b.y):"NaN"},_getMidPoint:function(a,b){return a&&b?new this.paperScope.Point((a.x+b.x)/2,(a.y+b.y)/2):"NaN"},_isNullOrUndefined:function(a){return null===a||"undefined"==typeof a},_equalX:function(a,b){return Number(a.x.toFixed(4))===Number(b.x.toFixed(4))},_equalY:function(a,b){return Number(a.y.toFixed(4))===Number(b.y.toFixed(4))},_getDummyLine:function(a,b){var c=new this.paperScope.Path;return c.add(a),c.add(b),c},reset:function(){for(var a=this.model,b=this.ballViewList,c=b.length,d=b.slice(1,c-1),e=0;e<d.length;e++)this.deleteBall(d[e].view,null,!1);{var f=a.get("balls");f.splice(0,f.length-2)}this.rotationHandleView.setInitialPosition(),this.arrow&&(this.arrow.removeChildren(),this.model.set("invalidPathIndex",null)),this.paperScope.view.draw(),this.paperScope2.view.draw(),this.currentObject=null},onAnimationStarted:function(){for(var a,b=this.ballViewList,c=0;c<b.length;c++)a=b[c].view,a.setDisable(!0),a.hideStickySlider(!0);this.rotationHandleView.setDisable(!0),this.paperScope.view.draw(),this.paperScope2.view.draw()},onAnimationEnded:function(){this.paperScope.activate();for(var a,b=this.ballViewList,c=0;c<b.length;c++)a=b[c].view,a.setDisable(!1),c!==b.length-1&&a.hideStickySlider(!1);this.rotationHandleView.setDisable(!1),this.paperScope.view.draw(),this.paperScope2.view.draw()},_isSegmentPoint:function(a,b){if(!this._isNullOrUndefined(a)&&!this._isNullOrUndefined(b)){for(var c=a.segments,d=0;d<c.length;d++)if(this._isPointEqual(c[d].point,b,0))return d;return-1}},_isPointEqual:function(a,b,c){c=c?c:0;var d=this._setNumberPrecision(a,c),e=this._setNumberPrecision(b,c);return d.x===e.x&&d.y===e.y},_setNumberPrecision:function(a,b){var c=Math.round(100*a.x)/100,d=Math.round(100*a.y)/100;return new this.paperScope.Point(Number(c.toFixed(b)),Number(d.toFixed(b)))},_forwardTransfer:function(){this.paperScope2.project.activeLayer.addChildren(this.paperScope.project.activeLayer.removeChildren())},getNextObstacleIndex:function(a,b,c){c=c||[];var d=this.obstacles.length,e=null,f=-1,g=c.length,h=null,i=!1;if(-1!==a&&d>a)for(var j=a;d>j;j++){e=this.obstacles[j],h=e.model;for(var k=0;g>k;k++)if(i=!1,h.get(c[k])===!0){i=!0;break}if(!i&&b!==h.get("obstacleNumber")&&!h.get("isInDispenser")){f=j;break}}return f}},{EVENTS:{BALL_ENCOUNTERED_HOLE:"ball-encountered-hole",HOLE_ENCOUNTERED:"hole-encountered",DISABLE_RESET:"disable-reset",ENABLE_RESET:"enable-reset",TOOL_UP_EVENT:"tool-up-on-canvas",READY:"canvas-ready",HIDE_TAKE_SHOT_BUTTON:"hide-take-shot-button"},CONSTANTS:{BALL_REFLECTION:100,MIRROR_LINE_LENGTH:70,SNAP_TOLERANCE:10,DEGREE_SYMBOL:"",INVALID_LINE_COLOR:"red",INVALID_LINE_STROKE:2,INVALID_ARROW_LENGTH:15,INVALID_ARROW_OFFSET:10,INVALID_ARROW_POINTER_LENGTH:8,INVALID_ARROW_POINTER_ANGLE:45,SHOW_SHADOW:!0}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.MiniGolfData,c=a.Course,d=a.Obstacle;MathInteractives.Interactivities.MiniGolf.Views.BaseCanvasAcc=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.extend({prevFocusRect:null,canvasAccModel:null,canvasAcc:null,_isAccUsed:!1,draggableObstaclesArray:[],initialize:function(){this._superwrapper("initialize",arguments)},_loadSaveState:function(){this._superwrapper("_loadSaveState",arguments),this._initAccessiblity(),this._bindAccessibilityListeners(),this._resetCanvasAccHolderText()},_initAccessiblity:function(){this.loadScreen("canvas-text-screen");var a={canvasHolderID:this.idPrefix+"canvas-holder-"+this.model.get("levelId")+"-acc-container",paperItems:[],paperScope:this.paperScope,manager:this.manager,player:this.player},b=null,c=new MathInteractives.Common.Player.Models.CanvasAcc(a);a.model=c,this.canvasAcc=MathInteractives.global.CanvasAccExt.intializeCanvasAcc(a),this.canvasAccModel=c,b=this._setActivePaperObjects(),this._updatePaperItems(b)},_bindAccessibilityListeners:function(){var a=this,b=MathInteractives.Common.Player.Models.CanvasAcc,c=b.CANVAS_KEY_EVENTS,d=b.CANVAS_KEYUP_EVENTS,e=this.$("#"+this.idPrefix+"canvas-holder-"+this.model.get("levelId")+"-acc-container");e.on(c.TAB,function(b,c){b.isAccessibility=!0,a._handleTabOnPaperItem(b,c)}),e.off(b.ITEM_EVENTS.ITEM_FOCUS_OUT).on(b.ITEM_EVENTS.ITEM_FOCUS_OUT,function(b,c){var d=!0;b.isAccessibility=!0,a._handleSpaceAndFocusOutOnObject(b,c,d)}),e.off(c.SPACE).on(c.SPACE,function(b,c){b.isAccessibility=!0,a._handleSpaceAndFocusOutOnObject(b,c)}),e.off(b.CANVAS_EVENTS.FOCUS_OUT).on(b.CANVAS_EVENTS.FOCUS_OUT,function(b,c){b.isAccessibility=!0,a._canvasFocusOut(b,c)}),e.off(c.ARROW+" "+c.ROTATE_CLOCKWISE+" "+c.ROTATE_ANTI_CLOCKWISE).on(c.ARROW+" "+c.ROTATE_CLOCKWISE+" "+c.ROTATE_ANTI_CLOCKWISE,function(b,c){b.isAccessibility=!0,a._handleDraggingOnKeyDown(b,c)}),e.off(d.ANY_KEYUP).on(d.ANY_KEYUP,function(b,c,d,e){c.isAccessibility=!0,a._handleAccOnKeyUp(b,c,d,e)}),e.on(d.DELETE_KEYUP,function(b,c,d,e){c.isAccessibility=!0,a._handleDeleteOnItem(b,c,d,e)})},_setActivePaperObjects:function(){var a=this.ballViewList,c=a.length,d=this.startBallView,e=(this.canvasAcc,0),f=b.PAPER_OBJECT_UNIQUE_NAME,g=[];for(this._addMatBallToCanvasItems(),this._addBallViewToCanvasItems(),d.uniquePaperObjectName=2>=c?f.START_BALL:f.STICKY_SLIDER_START,e=0;c>e;e++)g.push(a[e].view);return g},_updatePaperItems:function(a,b){this.canvasAcc.updatePaperItems(a,b)},_addBallViewToCanvasItems:function(){var a=this.ballViewList,c=a.length,d=(this.startBallView,a[c-1].view,0),e=null,f=b.PAPER_OBJECT_UNIQUE_NAME,g=(f.BALL,!0);for(d=c-1;d>1;d--)e=a[d].view,d===c-1?(g=!1,e.uniquePaperObjectName=f.LAST_BALL):e.uniquePaperObjectName=f.STICKY_SLIDER},_addMatBallToCanvasItems:function(){var a=this.matBallView,c=b.PAPER_OBJECT_UNIQUE_NAME;a.uniquePaperObjectName=c.MAT_BALL},_handleTabOnPaperItem:function(a,c){{var d=b.PAPER_OBJECT_UNIQUE_NAME,e=c.item.uniquePaperObjectName;"canvas-holder-"+this.model.get("levelId")+"-acc-container",this.canvasAccModel}switch(e){case d.MAT_BALL:this._onTabOfMatBall(a,c);break;case d.START_BALL:case d.LAST_BALL:this._onTabOfLastBall(a,c);break;case d.STICKY_SLIDER:case d.STICKY_SLIDER_START:this._onTabOfSlider(a,c)}this._drawView()},_onTabOfMatBall:function(a,b){var c=b.item,d="canvas-holder-"+this.model.get("levelId")+"-acc-container",e={elementId:d};a&&(a.event={which:1},c._ballSelected(a)),this._isAccUsed=!0,this._showHideFocusRect(c.ballFocusRect),e.strMessage=this.getMessage("mat-ball",0),this.canvasAccModel.set({setAccMessageObject:null},{silent:!0}),this.canvasAccModel.set("setAccMessageObject",e)},_onTabOfLastBall:function(a,b){var c=b.item;if(a&&(a.event={which:1},c._ballSelected(a)),a&&!a.shiftKey){var d=this._setActivePaperObjects();this._updatePaperItems(d,!0)}this.currentObject=c.ball,this._showHideFocusRect(c.ballFocusRect),this._setLastBallMessage(c)},_setLastBallMessage:function(a){var b="canvas-holder-"+this.model.get("levelId")+"-acc-container",c={elementId:b},d=this.canvasAccModel;c.strMessage=a===!0?this.getMessage("destination-ball",1):this.getMessage("destination-ball",0),d.set({setAccMessageObject:null},{silent:!0}),d.set("setAccMessageObject",c)},_onTabOfSlider:function(a,b){var c=b.item;a&&(a.event={which:1},this._reverseTransfer(),c._stickySliderSelected(a)),c.setStickySliderFocusRectPosition(),this._showHideFocusRect(c.stickySliderFocusRect),this._setSliderAccMessage(c,b)},_setSliderAccMessage:function(a,b){var c=a.ballModel,d=null,e=null,f=null,g=null,h="canvas-holder-"+this.model.get("levelId")+"-acc-container",i={elementId:h},j=null,k=b.isNewSlider||!1;d=this._getBallViewListIndex(a.cid),e=c.get("nextBallAngle")||0,f=c.get("prevBallAngle")||0,k===!0?(g=this.getMessage("sticky-slider-text",1,[d]),j=1===f?"one-deg-incident":1===e?"one-deg-reflection":2,g+=this.getMessage("sticky-slider-text",j,[f,e])):b.isMoved?(j=1===f?"new-one-deg-incident":1===e?"new-one-deg-reflection":4,g=this.getMessage("sticky-slider-text",j,[f,e])):(g=this.getMessage("sticky-slider-text",0,[d]),j=1===f?"one-deg-incident":1===e?"one-deg-reflection":2,g+=this.getMessage("sticky-slider-text",j,[f,e]),g+=this.getMessage("sticky-slider-text",3)),i.strMessage=g,this.canvasAccModel.set("setAccMessageObject",i)},_drawView:function(){this.paperScope.view.draw(),this.paperScope2.view.draw()},_showHideFocusRect:function(a){if(this._isAccUsed===!0){var b=this.prevFocusRect||null;a=a||null,null!==b&&(b.visible=!1),null!==a&&(a.visible=!0,this.prevFocusRect=a)}},_handleDraggingOnKeyDown:function(a,c){var d=b.PAPER_OBJECT_UNIQUE_NAME,e=c.item,f=e.uniquePaperObjectName,g=a.type,h=MathInteractives.Common.Player.Models.CanvasAcc,i=!1,j=null,k=h.CANVAS_KEY_EVENTS;if(g===k.ARROW)switch(f){case d.START_BALL:this._handleStartBallDragOnArraow(a,c);break;case d.MAT_BALL:this._handleMatBallDrag(a,c);break;case d.LAST_BALL:this._handleLastBallDrag(a,c);break;case d.STICKY_SLIDER:i=!1,this._handleStickySliderDrag(a,c,i);break;case d.STICKY_SLIDER_START:i=!0,this._handleStickySliderDrag(a,c,i)}else g===k.ROTATE_CLOCKWISE?(this._reverseTransfer(),f===d.MAT_BALL&&(a.event={which:1},j=this.rotationHandleView,j.onRotationHandleMouseDown(j.handle1,a),this._rotateHandleClockWise(a))):g===k.ROTATE_ANTI_CLOCKWISE&&(this._reverseTransfer(),f===d.MAT_BALL&&(a.event={which:1},j=this.rotationHandleView,j.onRotationHandleMouseDown(j.handle1,a),this._rotateHandleAntiClockWise(a)));this._drawView()},_handleDeleteOnItem:function(a,c,d,e){var f=b.PAPER_OBJECT_UNIQUE_NAME,g=e.uniquePaperObjectName;(g===f.STICKY_SLIDER||g===f.STICKY_SLIDER_START)&&(c.point=b.MATBALL_POSITIONS.COURSE_0,this.currentObject=e.stickySliderRaster,this._deleteCurrentSliderAndUpdateFocus(c),this._drawView())},_handleStartBallDragOnArraow:function(a,b){var c=b.item,e=c.ball,f=e.position,g=d.DRAG_DISTANCE_ACC,h={point:{x:f.x+b.directionX*g,y:f.y+b.directionY*g},isAccessibility:a.isAccessibility};this._onStartBallDrag(h,c)},_handleMatBallDrag:function(a,b){var c=b.item.ball,e=c.position,f=d.DRAG_DISTANCE_ACC,g={point:{x:e.x+b.directionX*f,y:e.y+b.directionY*f},isAccessibility:a.isAccessibility};this._onMatBallDrag(g)},_handleLastBallDrag:function(a,b){var c=b.item,e=c.ball,f=e.position,g=d.DRAG_DISTANCE_ACC,h={point:{x:f.x+b.directionX*g,y:f.y+b.directionY*g},isAccessibility:a.isAccessibility};this._onBallDrag(c,h)},_rotateHandleClockWise:function(a){var c=b.ROTATION_ANGLE;this.rotationHandleView.rotate(-c,a)},_rotateHandleAntiClockWise:function(a){var c=b.ROTATION_ANGLE;this.rotationHandleView.rotate(c,a)},_handleStickySliderDrag:function(a,b,c){if(b.item.stickySliderRaster){var e=b.item,f=e.ball,g=e.stickySliderRaster,h=g.bounds.height,i=g.bounds.width,j=e.getBallPosition(),k=f.position,l=d.DRAG_DISTANCE_ACC-1,m=j.x+b.directionX*l,n=j.y+b.directionY*l,o=this.courseBounds,p={x:m,y:n},q=null,r={point:p,isAccessibility:!0};o.contains(p)||(q=this._simpleBallDragRestrict(p,this.courseBounds),Math.round(q.x)===Math.round(k.x)&&Math.round(q.y)===Math.round(k.y)&&(r.point={x:m+b.directionX*i,y:n+b.directionY*h})),this._stickySliderDragged(e,r,!0),e.setStickySliderFocusRectPosition(),c&&this.rotationHandleView._startBallStickySliderDragged(r),b.isMoved=!0,this._setSliderAccMessage(e,b)}},_stickySliderDragFinished:function(a,b){if(!b.point){var c=(a.ball,Math.round(a.ballInnerRaster.bounds.width/2)),d=a.getBallPosition(),e=this.actualCourseBounds.getNearestPoint(d),f=Math.round(e.getDistance(d));b.point=f>c?a.getBallPosition():a.stickySliderRaster.position}this._superwrapper("_stickySliderDragFinished",arguments)},_onBallMouseUp:function(a){var c=null,d=null,e=null,f=b.PAPER_OBJECT_UNIQUE_NAME,g=!1,h=null;this._superwrapper("_onBallMouseUp",arguments),this._updatePaperItemsOnBallMosueup(!0),c=this.canvasAcc.getCurrentPaperItem(),d=c.uniquePaperObjectName,a.isAccessibility&&(d===f.STICKY_SLIDER||d===f.STICKY_SLIDER_START?(this._showHideFocusRect(c.stickySliderFocusRect),e={item:c,isNewSlider:!0},this._onTabOfSlider(a,e)):d!==f.MAT_BALL&&(h=this._isLastBallThroughHole(),-1!==h?(g=!0,this._setLastBallMessage(g)):this._setLastBallMessage(g)))
},_updatePaperItemsOnBallMosueup:function(a){var b=(this.canvasAcc,this.ballViewList),c=(b.length,null);c=this._setActivePaperObjects(),this._updatePaperItems(c,a)},_onBallDragFinished:function(a){var c=b.PAPER_OBJECT_UNIQUE_NAME,d=a.uniquePaperObjectName;d===c.START_BALL||d===c.LAST_BALL||d===c.MAT_BALL?this._showHideFocusRect(a.ballFocusRect):(d===c.STICKY_SLIDER||d===c.STICKY_SLIDER_START)&&this._showHideFocusRect(a.stickySliderFocusRect),this._superwrapper("_onBallDragFinished",arguments)},_handleAccOnKeyUp:function(a,c,d,e){var f=b.PAPER_OBJECT_UNIQUE_NAME,g=e.uniquePaperObjectName;(g===f.START_BALL||g===f.LAST_BALL||g===f.MAT_BALL)&&(this.tool.trigger("mouseup",c),this._drawView())},_handleSpaceAndFocusOutOnObject:function(a,c){var d=b.PAPER_OBJECT_UNIQUE_NAME,e=c.item.uniquePaperObjectName;switch(e){case d.STICKY_SLIDER:case d.STICKY_SLIDER_START:this._deleteCurrentSliderAndUpdateFocus(a,c);break;case d.MAT_BALL:this.tool.trigger("mouseup",a),this._drawView()}},_deleteCurrentSliderAndUpdateFocus:function(a,b){b&&b.event&&(a.shiftKey=b.event.shiftKey),this.tool.trigger("mouseup",a)},reset:function(){this._superwrapper("reset"),this._showHideFocusRect()},deleteBall:function(a,b,c){var d=this._getBallViewListIndex(a.cid),e=null;if(!(0>d)){var f=null;this._superwrapper("deleteBall",arguments),e=b&&b.shiftKey===!0?this.ballViewList[d-1].view:this.ballViewList[d].view,f=this._setActivePaperObjects(),this._updatePaperItems(f),c!==!1&&(this.canvasAcc.setCurrentPaperItem(e,!0),this._showHideFocusRect(e.ballFocusRect),this._setNewMessageOnDeleteBall(b,e))}},_setNewMessageOnDeleteBall:function(a,c){var d=b.PAPER_OBJECT_UNIQUE_NAME,e=c.uniquePaperObjectName,f={item:c};e===d.MAT_BALL?this._onTabOfMatBall(a,f):e===d.LAST_BALL||e===d.START_BALL?this._onTabOfLastBall(a,f):(e===d.STICKY_SLIDER||e===d.STICKY_SLIDER_START)&&this._onTabOfSlider(a,f)},_canvasFocusOut:function(){this._setActivePaperObjects();this._showHideFocusRect(),this._isAccUsed=!1,this._drawView(),this._resetCanvasAccHolderText(),this.currentObject=null},_resetCanvasAccHolderText:function(){var a=null,b=this.model.get("levelId"),d=(c.KEYCODE,null),e=null;a=this.getAccMessage("carousel-view-slide-"+b+"-title",0),e=this.getMessage("canvas-acc-cont-text",0,[a]),Math.abs(this.ballViewList.length-2)>0&&(e+=this.getMessage("canvas-acc-cont-text",1)),d=this.draggableObstaclesArray.length,d>0&&(e+=this.getMessage("canvas-acc-cont-text",2,[d])),e+=this.getMessage("canvas-acc-cont-text",4),this.setAccMessage("canvas-holder-"+b+"-acc-container",e)}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.Ball=MathInteractives.Common.Player.Views.Base.extend({paperScope:null,ball64URL:null,stickySliderbase64URL:null,stickySliderRaster:null,ball:null,ballBase64URL:null,ballInnerRaster:null,ballShadowBase64URL:null,ballShadowRaster:null,ballTextureBase64URL:null,ballTextureRaster:null,ballGroup:null,ballModel:null,connectorLine:null,mirrorLine:null,arcWithPrevBall:null,arcWithNextBall:null,prevAngleText:null,nextAngleText:null,ghostBall:null,purpleBorder:null,rectangleCover:null,isDisabled:null,ballFocusRect:null,stickySliderFocusRect:null,dummyPath:null,initialize:function(){this.initializeDefaultProperties(),this._readProperties()},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},_initializeURLS:function(){var a=this.getJson("baseURL");this.stickySliderbase64URL=a.stickySliderbase64URL,this.ballBase64URL=a.ballBase64URL,this.ballShadowBase64URL=a.ballShadowBase64URL,this.ballTextureBase64URL=a.ballTextureBase64URL,this.ballTexureSmall=a.ballTexureSmall},_asyncImageLoader:function(){var a=this,b=0,c=4,d=this.paperScope;this.stickySliderRaster=new d.Raster({source:this.stickySliderbase64URL}),this.ballInnerRaster=new d.Raster({source:this.ballBase64URL}),this.ballShadowRaster=new d.Raster({source:this.ballShadowBase64URL}),this.ballTextureRaster=new d.Raster({source:this.ballTexureSmall}),this.stickySliderRaster.onLoad=function(){b++,a._triggerRender(b,c)},this.ballInnerRaster.onLoad=function(){b++,a._triggerRender(b,c)},this.ballShadowRaster.onLoad=function(){b++,this.size=[28,28],a._triggerRender(b,c)},this.ballTextureRaster.onLoad=function(){b++,a._triggerRender(b,c)}},_triggerRender:function(a,b){b===a&&this.render()},_readProperties:function(){var a=this.options||{};this.paperScope=a.paperScope,this.ballModel=a.ballModel,a.ball?this._clone(a.ball):(this._initializeURLS(),this._asyncImageLoader())},_attachEvents:function(){var a=this.dummyPath,b=this.stickySliderRaster;a.onMouseDown=$.proxy(this._ballSelected,this),a.onMouseDrag=$.proxy(this._ballDragged,this),a.onMouseUp=$.proxy(this._ballDragFinished,this),a.onMouseEnter=$.proxy(this._onBallEnter,this),a.onMouseLeave=$.proxy(this._onBallLeave,this),b.onMouseDown=$.proxy(this._stickySliderSelected,this),b.onMouseDrag=$.proxy(this._stickySliderDragged,this),b.onMouseUp=$.proxy(this._stickySliderDragFinished,this),b.on("mouseenter",$.proxy(this._onSliderEnter,this)),b.on("mouseleave",$.proxy(this._onSliderLeave,this)),this.listenTo(this.ballModel,"change:isSnapped",$.proxy(this.ballSnapped,this))},_clone:function(a){var b=a;this.paperScope=b.paperScope,this.ball=b.ball.clone(),this.stickySliderRaster=b.stickySliderRaster.clone(),this.ballShadowRaster=b.ballShadowRaster.clone(),this.ballInnerRaster=b.ballInnerRaster.clone(),this.ballTextureRaster=b.ballTextureRaster.clone(),this.render(),this.hideGhostBall(!0)},render:function(){var b=null,c=null;this._createStickySliderFocusRect(),this.ball=this._clipBallBackground(),c=this.stickySliderRaster,this.ballGroup=b=new this.paperScope.Group(c,this.ball),b.name=a.DRAGGABLE,c.position=new this.paperScope.Point(-200,-200),b.position=new this.paperScope.Point(-100,-100),this.rectangleCover=new this.paperScope.Path.Rectangle({point:[0,0],size:[2*this.ghostBall.bounds.width,this.ghostBall.bounds.width],strokeColor:"black",opacity:.4}),this._attachEvents(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.RASTERS_LOADED),this.hideGhostBall(!0),this.hideStickySlider(!0),this.hideBallShadow(!0),this._assignIds(),this.setDisable(!1)},_createStickySliderFocusRect:function(){var b=a.ACC_DATA,c=b.STICKY_SLIDER_ACC_DATA;this.stickySliderFocusRect=new this.paperScope.Path.Rectangle({height:c.HEIGHT,width:c.WIDTH,strokeWidth:b.STROKE_WIDTH,strokeColor:b.STROKE_COLOR,dashArray:b.DASH_ARRAY,visible:!1}),this.setStickySliderFocusRectPosition()},_assignIds:function(){var a=MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES;this.ball.name=a.BALL,this.stickySliderRaster.name=a.STICKY_SLIDER,this.ball.cid=this.cid,this.stickySliderRaster.cid=this.cid},_renderMirrorLine:function(){var a=this.ballModel,b=(this.paperScope,this.mirrorLine),c=MathInteractives.Interactivities.MiniGolf.Views.Ball,d=a.get("isSnapped");if(b&&b.remove(),d){this._isNullOrUndefined(b)&&(b=new this.paperScope.Path,b.add(0,0),b.add(0,0));var e=b.segments;e[0].point=a.get("snapPoint"),e[1].point=a.get("mirrorPoint"),b.strokeColor=c.CONSTANTS.LINE_COLOR,b.strokeWidth=c.CONSTANTS.LINE_SHADOW,b.dashArray=c.CONSTANTS.DASH_ARRAY,this.mirrorLine=b,this.setStickySliderPositionOnSnap(),this.ballGroup.addChild(this.mirrorLine)}this.hideStickySlider(!d),this.ball&&this.ball.bringToFront()},_clipBallBackground:function(){var b=this.paperScope,c=MathInteractives.Interactivities.MiniGolf.Views.Ball,d=this.ballInnerRaster.bounds,e=this.ballTextureRaster.position,f=a.ACC_DATA,g=f.BALL_ACC_DATA,h=new b.Path.Circle({center:e,radius:d.width/2,fillColor:"white",strokeColor:"white"}),i=h.clone(),j=new b.Group(h,this.ballTextureRaster);return j.clipped=!0,this.ballShadowRaster.position=this._addPoints(i.position,c.CONSTANTS.SHADOW_OFFSET),this.ghostBall=new b.Path.Circle({center:e,radius:d.width/2,strokeColor:c.CONSTANTS.GHOST_BALL_COLOR,fillColor:c.CONSTANTS.GHOST_BALL_COLOR}),this.purpleBorder=new b.Path.Circle({center:e,radius:d.width/2,strokeColor:c.CONSTANTS.COLOR,strokeWidth:c.CONSTANTS.PURPLE_BORDER_THICKNESS}),this.dummyPath=new b.Path.Circle({center:e,radius:d.width/2,fillColor:"white",opacity:.01}),this.ballFocusRect=new b.Path.Rectangle({position:this.ballShadowRaster.position,height:g.HEIGHT,width:g.WIDTH,visible:!1,dashArray:f.DASH_ARRAY,strokeColor:f.STROKE_COLOR,strokeWidth:f.STROKE_WIDTH}),new b.Group(this.ballShadowRaster,i,j,this.ballInnerRaster,this.purpleBorder,this.dummyPath,this.ballFocusRect)},ballSnapped:function(){var a=this.ballModel,b=(this.paperScope,this.mirrorLine),c=(MathInteractives.Interactivities.MiniGolf.Views.Ball,a.get("isSnapped"));b&&(this.ballGroup.removeChildren([this.mirrorLine]),b.remove()),this.hideBall(c),this.hideBallShadow(c),this.hideGhostBall(!c),this._renderMirrorLine()},setBallPosition:function(a){a=new this.paperScope.Point(a);var b=this.ball.position.clone(),c=this._subtractPoints(a,b);this.ballGroup.translate(c),this.ballInnerRaster.position=a.clone(),this.ghostBall.position=a.clone(),this.rectangleCover.position=a.clone(),this.ballModel.set("position",{x:a.x,y:a.y})},setStickySliderPosition:function(a){return},setStickySliderPositionOnSnap:function(){var a=this.ballModel,b=MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS.SLIDER_HEIGHT,c=this.ballInnerRaster.bounds.width/2+b/2,d=a.get("snapPoint"),e=a.get("mirrorPoint"),f=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,g=f.GetvarOnLineUsingDistance(this.ball.position,e,-c,0,!0),h=f.getAngleWithXAxis(e,d),i=a.get("stickySliderAngle");return this.stickySliderRaster.position=new this.paperScope.Point(g),null===i||"undefined"==typeof i?(this.stickySliderRaster.rotate(h-90),this.rectangleCover.rotate(h-90),a.set("stickySliderAngle",h),void this.setStickySliderFocusRectPosition()):void(i!==h&&(this.stickySliderRaster.rotate(h-i),this.rectangleCover.rotate(h-i),this.setStickySliderFocusRectPosition(),a.set("stickySliderAngle",h)))},setBallSnap:function(a,b,c){var d=this.ballModel;d.set("snapPoint",{x:b.x,y:b.y}),d.set("mirrorPoint",{x:c.x,y:c.y}),d.set("isSnapped",a),a&&this.ballTextureRaster.remove()},getBallSnap:function(){return this.ballModel.get("isSnapped")},setBallSnapPoint:function(a,b){var c=this.ballModel;c.set("snapPoint",{x:a.x,y:a.y}),c.set("mirrorPoint",{x:b.x,y:b.y}),this._renderMirrorLine()},getBallPosition:function(){return this.ballModel.get("position")},hideBall:function(a){var b=a?0:1,c=this.ball;b!==c.opacity&&(c.opacity=b)},hideBallShadow:function(a){var b=a?0:1,c=this.ballShadowRaster;b!==c.opacity&&(c.opacity=b)},hideStickySlider:function(a){var b=a?0:1,c=this.stickySliderRaster;this._isNullOrUndefined(c)||(c.visible=!a,b!==c.opacity&&(c.opacity=b))},hideGhostBall:function(a){var b=a?0:MathInteractives.Interactivities.MiniGolf.Views.Ball.CONSTANTS.GHOST_BALL_OPACITY,c=this.ghostBall;this._isNullOrUndefined(c)||b===c.opacity||(c.opacity=b),this.rectangleCover.opacity=b},hidePurpleBorder:function(a){var b=a?0:1,c=this.purpleBorder;this._isNullOrUndefined(c)||b===c.opacity||(c.opacity=b)},_islfLeftClick:function(a){var b=a.event.which;return 0===b||1===b?!0:!1},_ballSelected:function(a){if(this._islfLeftClick(a)){if(0===this.ball.opacity)return;this._closedHandCursor(a);var b=this.ballModel.get("isSnapped");b||this.isDisabled||(this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.BALL_SELECTED,a)),a.preventDefault&&a.preventDefault()}},_ballDragged:function(a){if(this.stopReading(),this._islfLeftClick(a)){var b=this.ballModel.get("isSnapped");b||this.isDisabled||this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.BALL_DRAGGED,a),this._closedHandCursor(a),a.preventDefault()}},_ballDragFinished:function(a){if(this._islfLeftClick(a)){if(0===this.ball.opacity)return;this._openHandCursor(a);{this.ballModel.get("isSnapped")}a.preventDefault()}},_onBallEnter:function(a){0!==this.ball.opacity&&this._openHandCursor(a)},_onBallLeave:function(){this._defaultCursor()},_onSliderEnter:function(a){this._openHandCursor(a)},_onSliderLeave:function(){this._defaultCursor()},_stickySliderSelected:function(a){this._islfLeftClick(a)&&(this._closedHandCursor(a),this.rectangleCover.opacity=0,this.isDisabled||(this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.STICKYSLIDER_SELECTED,a)),this.setStickySliderFocusRectPosition(),a.preventDefault())},_stickySliderDragged:function(a){this._islfLeftClick(a)&&(this.isDisabled||(this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Ball.EVENTS.STICKYSLIDER_DRAGGED,a)),this._closedHandCursor(a),this.setStickySliderFocusRectPosition(),a.preventDefault())},setStickySliderFocusRectPosition:function(){var a=this.stickySliderFocusRect;a.position=this.stickySliderRaster.getPosition(),a.bringToFront()},_stickySliderDragFinished:function(a){this._islfLeftClick(a)&&(this._openHandCursor(a),this.setStickySliderFocusRectPosition())},_openHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.filePath.getImagePath("open-hand")+'"), move'})},_closedHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.filePath.getImagePath("closed-hand")+'"), move'})},_defaultCursor:function(){this.isMobile||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:"default"})},_addPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x+b.x,a.y+b.y):"NaN"},_subtractPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x-b.x,a.y-b.y):"NaN"},_getMidPoint:function(a,b){return a&&b?new this.paperScope.Point((a.x+b.x)/2,(a.y+b.y)/2):"NaN"},_equalX:function(a,b){return Number(a.x.toFixed(4))===Number(b.x.toFixed(4))},_equalY:function(a,b){return Number(a.y.toFixed(4))===Number(b.y.toFixed(4))},_isNullOrUndefined:function(a){return null===a||"undefined"==typeof a},remove:function(){var a=this,b=MathInteractives.Common.Utilities.Models.BrowserCheck,c=.1;return(b.isIE||b.isFirefox||b.isNexus||b.isMobile)&&(c=1),void a._removePaperItems()},setOpacity:function(a){var b=this;b._isNullOrUndefined(b.mirrorLine)||(b.mirrorLine.opacity=a),b.ballTextureRaster.opacity=a,b.ballShadowRaster.opacity=a,b._isNullOrUndefined(b.ballInnerRaster)||(b.ballInnerRaster.opacity=a),b._isNullOrUndefined(b.stickySliderRaster)||(b.stickySliderRaster.opacity=a),b._isNullOrUndefined(b.ballGroup)||(b.ballGroup.opacity=a),b._isNullOrUndefined(b.arcWithNextBall)||(b.arcWithNextBall.opacity=a),b._isNullOrUndefined(b.arcWithPrevBall)||(b.arcWithPrevBall.opacity=a),b._isNullOrUndefined(b.prevAngleText)||(b.prevAngleText.opacity=a),b._isNullOrUndefined(b.nextAngleText)||(b.nextAngleText.opacity=a),b._isNullOrUndefined(b.connectorLine)||(b.connectorLine.opacity=a),b._isNullOrUndefined(b.ghostBall)||(b.ghostBall.opacity=.4*a),b._isNullOrUndefined(b.rectangleCover)||(b.rectangleCover.opacity=a)},_removePaperItems:function(){var a=this;a.ballTextureRaster.remove(),a.ballShadowRaster.remove(),a.ballInnerRaster.remove(),a.deleteStickySlider(),a.ballGroup.remove(),a.deleteAngles(),a.deleteConnectorLine(),a.ghostBall.remove(),a.deleteRectangleCover()},deleteRectangleCover:function(){var a=this.rectangleCover;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.rectangleCover=null)},deleteBall:function(){var a=this.ball;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.ball=null)},deleteStickySlider:function(){var a=this.stickySliderRaster;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.stickySliderRaster=null)},deleteMirrorLine:function(){var a=this.mirrorLine;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.mirrorLine=null)},deletePurpleBorder:function(){var a=this.purpleBorder;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.purpleBorder=null)},deleteConnectorLine:function(){var a=this.connectorLine;this._isNullOrUndefined(a)||(a.detach(),a.remove(),this.connectorLine=null)},getPaperItemsWhenSnapped:function(a,b){var c=this,d=[],e=c.ballModel;return e.get("isSnapped")&&(a&&(this._isNullOrUndefined(c.arcWithPrevBall)||d.push(c.arcWithPrevBall.id),this._isNullOrUndefined(c.prevAngleText)||d.push(c.prevAngleText.id)),b&&(this._isNullOrUndefined(c.arcWithNextBall)||d.push(c.arcWithNextBall.id),this._isNullOrUndefined(c.nextAngleText)||d.push(c.nextAngleText.id),this._isNullOrUndefined(c.connectorLine)||d.push(c.connectorLine.id)),this._isNullOrUndefined(c.mirrorLine)||d.push(c.mirrorLine.id)),d},getActivePaperChildren:function(){return this.getPaperChildren()},getPaperChildren:function(){var a=[],b=this;return this._isNullOrUndefined(b.stickySliderRaster)||a.push(b.stickySliderRaster.id),this._isNullOrUndefined(b.ghostBall)||a.push(b.ghostBall.id),this._isNullOrUndefined(b.mirrorLine)||a.push(b.mirrorLine.id),this._isNullOrUndefined(b.arcWithNextBall)||a.push(b.arcWithNextBall.id),this._isNullOrUndefined(b.arcWithPrevBall)||a.push(b.arcWithPrevBall.id),this._isNullOrUndefined(b.nextAngleText)||a.push(b.nextAngleText.id),this._isNullOrUndefined(b.prevAngleText)||a.push(b.prevAngleText.id),this._isNullOrUndefined(b.connectorLine)||a.push(b.connectorLine.id),this._isNullOrUndefined(b.ball)||a.push(b.ball.id),a},deleteAngles:function(){this._isNullOrUndefined(this.prevAngleText)||this.prevAngleText.remove(),this._isNullOrUndefined(this.arcWithPrevBall)||this.arcWithPrevBall.remove(),this._isNullOrUndefined(this.nextAngleText)||this.nextAngleText.remove(),this._isNullOrUndefined(this.arcWithNextBall)||this.arcWithNextBall.remove()},setDisable:function(a){this.isDisabled=a}},{EVENTS:{RASTERS_LOADED:"rastersloaded",BALL_DRAGGED:"balldragged",BALL_DRAGGING_FINISHED:"balldraggingFinished",STICKYSLIDER_DRAGGED:"stickySliderdragged",STICKYSLIDER_DRAGGING_FINISHED:"stickySliderdraggingFinished",BALL_SELECTED:"ballSelected",STICKYSLIDER_SELECTED:"stickysliderSelected"},CONSTANTS:{SHADOW_OFFSET:{x:0,y:0},LINE_COLOR:"white",LINE_SHADOW:2,DASH_ARRAY:[2,1],PREV_ANGLE_SLICE:{RADIUS:45,FILL_COLOR:"#FC00FF",FILL_ALPHA:.7,STROKE_COLOR:"#AC2AA9",STROKE_WIDTH:2},NEXT_ANGLE_SLICE:{RADIUS:60,FILL_COLOR:"#00CCFF",FILL_ALPHA:.7,STROKE_COLOR:"#0594AE",STROKE_WIDTH:2},ANGLE_ARC_RADIUS:40,ANGLE_TEXT_FONT_SIZE:16,ANGLE_TEXT_FONT_FAMILY:"montserrat",ANGLE_TEXT_STROKE_WIDTH:.1,INCIDENCE_ANGLE_LABEL_ARC_RAIDUS:56,REFLECTION_ANGLE_LABEL_ARC_RAIDUS:74,ARC_COLOR:"white",GHOST_BALL_COLOR:"white",GHOST_BALL_OPACITY:.4,PURPLE_BORDER_THICKNESS:3,COLOR:"#321066",SLIDER_HEIGHT:33},NAMES:{BALL:"ball",ROTATION_HANDLE:"rotationHandle",STICKY_SLIDER:"stickyslider",OBSTACLE:"obstacle",OBSTACLE_ROTATION_HANDLE:"obstacleRotationHandle"}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.RotationHandle=MathInteractives.Common.Player.Views.Base.extend({curvedArrow64URL:null,curvedArrowRaster:null,handle1:null,handle2:null,paperScope:null,handleGroup:null,currentAngle:90,dragBallView:null,matBallView:null,triangleGroup:null,courseBounds:null,isDisabled:null,initialize:function(){this.initializeDefaultProperties(),this._readProperties(),this._initializeURLS(),this._asyncImageLoader(),this.setDisable(!1)},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},_readProperties:function(){var a=this.options;this.paperScope=a.paperScope,this.courseBounds=a.courseBounds,this.dragBallView=a.dragBallView,this.matBallView=a.matBallView,this.matBallView.deleteStickySlider(),this.matBallView.hidePurpleBorder(!0),this.matBallView.hideBallShadow(!1),this.matBallView.hideGhostBall(!0)},_initializeURLS:function(){var a=this.getJson("baseURL");this.curvedArrow64URL=a.curvedArrow64URL},_asyncImageLoader:function(){var a=this,b=this.paperScope;this.curvedArrowRaster=new b.Raster({source:this.curvedArrow64URL}),this.curvedArrowRaster.onLoad=function(){this.opacity=0,a.render()}},render:function(){this._renderHandleGroup(),this._attachHandleEvents(),this._attachBallEvents(),this._loadSaveState(),this._freshRun(),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.EVENTS.ROTATION_HANDLE_RENDERED)},_loadSaveState:function(){},_freshRun:function(){this.setInitialPosition()},setInitialPosition:function(){var a=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle,b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,c=b.MATBALL_POSITIONS["COURSE_"+this.model.get("levelId")],d=a.CONSTANTS,e={},f=MathInteractives.Interactivities.MiniGolf.Views.LineUtility;this.setRotationHandlePosition(c),(this.currentAngle+360)%360!=90&&this.rotate(-this.currentAngle+90),this.rotate(d.INITIAL_ANGLE);var g=new this.paperScope.Point(f.GetvarOnLineUsingDistance(this.handleGroup.position,this.dragBallView.ball.position,100,0,!0));e.point=g,this.startBallDragged(e),this._defaultCursor()},_startBallStickySliderDragged:function(a){a.point=this.dragBallView.getBallPosition(),this.startBallDragged(a)},_renderHandleGroup:function(){var b=this.paperScope,c=null,d=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.ROTATION_HANDLE;this.handle1=this._renderHandle(),this.handle2=this.handle1.clone(),this.handle1.name="handle1",this.handle2.name="handle2",this.handle1.position=new b.Point(0,-d.LENGTH/2),this.handle2.rotate(180),this.handle2.position=new b.Point(0,d.LENGTH/2);var e=this._renderTriangleGroup();this.handleGroup=c=new b.Group(this.handle1,this.handle2),c.name=a.DRAGGABLE,this.handleGroup.position=new b.Point(d.GROUP_POSITION),e.position=this._addValueInPoint(c.position,(e.bounds.width+this.handle1.bounds.width)/2+5,0),this.matBallView.setBallPosition(this._addPoints(c.position,d.MATBALL_OFFSET)),c.addChildren([e,this.matBallView.ball]),this.handle1.bringToFront(),this.handle2.bringToFront()},_renderHandle:function(){var a=this.paperScope,b=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.ROTATION_HANDLE,c=b.SIZE,d=b.COLOR,e=new a.Path.Rectangle(0,0,c.width,c.height),f=this.curvedArrowRaster.clone();e.fillColor=d,f.rotate(-60),f.opacity=1,e.position=new a.Point(b.ARROW_OFFSET),f.position=new a.Point(b.ARROW_OFFSET);var g=new a.Group(e,f);return g.shadowColor=new this.paperScope.Color(0,0,0),g.shadowBlur=3,g.shadowOffset=new this.paperScope.Point(2,2),g},_renderTriangleGroup:function(){for(var a,b=this._renderTriangle(),c=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.ROTATION_HANDLE,d=c.TRIANGLE_COUNT,e=c.TRIANGLE_SPACING,f=new this.paperScope.Group,g=0;d>g;g++)a=b.clone(),a.position.x+=g*(b.bounds.width+e),f.addChild(a);return b.remove(),f},_renderTriangle:function(){var a=this.paperScope,b=MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.ROTATION_HANDLE,c=b.TRIANGLE_BASE,d=b.TRIANGLE_HEIGHT,e=new a.Path;return e.add(new a.Point(0,d)),e.add(new a.Point(-c/2,0)),e.add(new a.Point(c/2,0)),e.closed=!0,e.strokeColor=b.TRIANGLE_COLOR,e.opacity=b.TRIANGLE_OPACITY,e.rotate(-90),e.strokeWidth=2,e.shadowColor=new this.paperScope.Color(0,0,0),e.shadowBlur=3,e.shadowOffset=new this.paperScope.Point(2,2),e},_attachHandleEvents:function(a){if(a===!1)return this.handle1.detach("mousedrag"),void this.handle2.detach("mousedrag");{var b=(MathInteractives.Interactivities.MiniGolf.Views.LineUtility,this);this.handleGroup,this._getMidPoint(this.handle1.position,this.handle2.position)}this.handle1.onMouseDrag=function(a){b._onHandle1Rotate(a)},this.handle2.onMouseDrag=function(a){b._onHandle2Rotate(a)},this.handle1.onMouseDown=$.proxy(this.onRotationHandleMouseDown,this,this.handle1),this.handle2.onMouseDown=$.proxy(this.onRotationHandleMouseDown,this,this.handle2),this._bindMouseEvents()},_onHandle2Rotate:function(a){var b=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,c=this,d=this.handleGroup,e=this._getMidPoint(this.handle1.position,this.handle2.position);if(!c.isDisabled){if(this._islfLeftClick(a)){c._closedHandCursor(a),e=c._getMidPoint(c.handle1.position,c.handle2.position);var f=b.GetvarOnLineUsingDistance(e,a.point,20,0,!0),g=b.getAngleWithXAxis(f,e);d.rotate(-c.currentAngle,e),c.currentAngle=g,d.rotate(c.currentAngle,e),c._onHandleRotated(a)}a.event.preventDefault&&a.event.preventDefault()}},_islfLeftClick:function(a){var b=a.event.which;return 0===b||1===b?!0:!1},_onHandle1Rotate:function(a){var b=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,c=this,d=this.handleGroup,e=this._getMidPoint(this.handle1.position,this.handle2.position);if(!c.isDisabled){if(this._islfLeftClick(a)){c._closedHandCursor(a),e=c._getMidPoint(c.handle1.position,c.handle2.position);var f=b.GetvarOnLineUsingDistance(e,a.point,20,0,!0),g=b.getAngleWithXAxis(f,e);d.rotate(-c.currentAngle,e),c.currentAngle=g-180,d.rotate(c.currentAngle,e),c._onHandleRotated(a)}a.event.preventDefault&&a.event.preventDefault()}},onRotationHandleMouseDown:function(a,b){this.isdisabled||this._islfLeftClick(b)&&(this.stopReading(),a.detach("mouseenter"),a.detach("mouseleave"),this._closedHandCursor(b),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.EVENTS.ROTATION_HANDLE_SELECTED,[a]))},onRotationHandleRotate:function(a){this.isDisabled||(this._openHandCursor(a),this.snapAngle(this.currentAngle),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.EVENTS.ROTATION_HANDLE_ROTATION_ENDED))},_onMouseEnterHandle1:function(a){this.isDisabled||this._openHandCursor(a)},_onMouseEnterHandle2:function(a){this.isDisabled||this._openHandCursor(a)},_openHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.filePath.getImagePath("open-hand")+'"), move'})},_closedHandCursor:function(a){this.isMobile||a.isAccessibility||a.manualEvent===!0||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.filePath.getImagePath("closed-hand")+'"), move'})},_onMouseLeaveHandle1:function(){this.isDisabled||this._defaultCursor()},_onMouseLeaveHandle2:function(){this.isDisabled||this._defaultCursor()},_resetCursor:function(){this._defaultCursor(),this._bindMouseEvents()},_defaultCursor:function(){this.isMobile||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:"default"})},_bindMouseEvents:function(){this.handle1.onMouseEnter=$.proxy(this._onMouseEnterHandle1,this),this.handle2.onMouseEnter=$.proxy(this._onMouseEnterHandle2,this),this.handle1.onMouseLeave=$.proxy(this._onMouseLeaveHandle1,this),this.handle2.onMouseLeave=$.proxy(this._onMouseLeaveHandle2,this)},_attachBallEvents:function(){var a=this;this.listenTo(this.matBallView.ballModel,"change:position",function(){a.model.set("rotationHandlePosition",a.matBallView.getBallPosition())})},rotate:function(a,b){var c=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,d=this._getMidPoint(this.handle1.position,this.handle2.position),e=c.GetvarOnLineUsingDistance(d,this.handle1.position,20,a,!0),b=b||{};b.point=new this.paperScope.Point(e),b.event={},b.event.which=1,this.handle1.trigger("mousedrag",b)},snapAngle:function(a){return},_onHandleRotated:function(a){var b=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,c=this._getMidPoint(this.handle1.position,this.handle2.position),d=b.GetDistBetweenPointFs(c,this.dragBallView.ballInnerRaster.position),e=this.paperScope,f=b.GetvarOnLineUsingDistance(c,this.handle1.position,d,90,!0);this.dragBallView.getBallSnap()?this._isNullOrUndefined(a.manualEvent)&&this._adjustDragBallPosition():this.dragBallView.setBallPosition(new e.Point(f)),this.model.set("rotationHandleAngle",this.currentAngle),this.trigger(MathInteractives.Interactivities.MiniGolf.Views.RotationHandle.EVENTS.ROTATION_HANDLE_ROTATED)},_adjustDragBallPosition:function(){var a=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,b=this._getMidPoint(this.handle1.position,this.handle2.position),c=a.GetDistBetweenPointFs(b,this.dragBallView.ballInnerRaster.position),d=this.paperScope,e=a.GetvarOnLineUsingDistance(b,this.handle1.position,c,90,!0);e=a.GetvarOnLineUsingDistance(b,e,900,0,!0);var f=new d.Path([b,e]),g=this.courseBounds.getIntersections(f);if(g.length>0){var h=g[g.length-1],i=this._getTangent(this.courseBounds,h.point);this.dragBallView.setBallSnapPoint(i.snapPoint,i.mirrorPoint),this.dragBallView.setBallPosition(h.point),this.dragBallView.setBallSnapPoint(i.snapPoint,i.mirrorPoint)}},startBallDragged:function(a){var b=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,c=this._getMidPoint(this.handle1.position,this.handle2.position),d=b.GetvarOnLineUsingDistance(c,a.point,20,-90,!0);this.dragBallView.setBallPosition(a.point),a.point=new this.paperScope.Point(d),a.manualEvent=!0,a.event={},a.event.which=1,this.handle1.trigger("mousedrag",a),this.handleGroup.bringToFront()},setRotationHandlePosition:function(a){var b,c,d=this.matBallView.ballInnerRaster.position,e=this._subtractPoints(a,d);if(this.handleGroup.translate(e),this.matBallView.setBallPosition(this.matBallView.ballInnerRaster.position),this.matBallView.ball.position=this._getMidPoint(this.handle1.position,this.handle2.position),b=this.dragBallView.getBallPosition(),c=this._addPoints(b,e),c=new this.paperScope.Point(c),this.dragBallView.getBallSnap()){var f={};f.point=this.dragBallView.getBallPosition(),this.startBallDragged(f)}else this.dragBallView.setBallPosition(c);this.matBallView.ball.bringToFront(),this.matBallView.connectorLine.sendToBack()},_addValueInPoint:function(a,b,c){return a?new this.paperScope.Point(a.x+b,a.y+c):"NaN"},replaceDragball:function(a){this.dragBallView=a;var b={};b.point=this.dragBallView.getBallPosition(),this.startBallDragged(b)},_addPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x+b.x,a.y+b.y):"NaN"},_subtractPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x-b.x,a.y-b.y):"NaN"},_getMidPoint:function(a,b){return a&&b?new this.paperScope.Point((a.x+b.x)/2,(a.y+b.y)/2):"NaN"},_isNullOrUndefined:function(a){return null===a||"undefined"==typeof a},_getTangent:function(a,b){var c=a._getOffset(this.courseBounds.getLocationOf(b)),d=a.getNormalAt(c);return d.length=-MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS.MIRROR_LINE_LENGTH,{snapPoint:b,mirrorPoint:this._addPoints(b,d)}},setDisable:function(a){this.handle1&&this.handle2&&(this.handle1.opacity=this.handle2.opacity=a?.5:1),this.isDisabled=a}},{EVENTS:{ROTATION_HANDLE_RENDERED:"rotation-handle-rendered",ROTATION_HANDLE_SELECTED:"rotationHandleSelected",ROTATION_HANDLE_ROTATED:"rotationHandleRotated",ROTATION_HANDLE_ROTATION_ENDED:"rotationEnded"},ROTATION_HANDLE:{SIZE:{width:31,height:26},POSITION:{x:50,y:50},LENGTH:60,COLOR:"#391165",ARROW_OFFSET:{x:0,y:0},TRIANGLE_BASE:15,TRIANGLE_HEIGHT:10,TRIANGLE_COLOR:"#ffffff",TRIANGLE_OPACITY:1,TRIANGLE_COUNT:3,TRIANGLE_SPACING:5,MATBALL_OFFSET:{x:1,y:2}},CONSTANTS:{INITIAL_ANGLE:-45,INITIAL_DISTANCE:75}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Obstacle,c=a.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstacles=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvasAcc.extend({bridgeReflectionPath:null,bridgeWallObstacles:[],defaultObstacles:[],initialize:function(){this.ballViewList=[],this.initializeDefaultProperties(),this._setUpCanvas(),this._attachToolEvents(),this.render()},render:function(){this._renderObstacles()},_renderObstacles:function(){var a,b,c,d,e,f,g,h,i,j,k=this,l=MathInteractives.Interactivities.MiniGolf.Models.Obstacle.TYPES,m=l.LEFT_FIXED,n=l.RIGHT_FIXED,o=l.LEFT_RIVER,p=l.RIGHT_RIVER,q=l.DEFAULT,r=null,s=[],t=this.bridgeRasterActualPath||null;for(d=this.model,g=this.idPrefix,h=d.get("levelId"),a=d.get("obstaclesData"),b=[],i=MathInteractives.Interactivities.MiniGolf.Models,j=i.MiniGolfData.EVENTS,this.defaultObstacles=[],c=0;c<a.length;c++)f=a.models[c],f.set({player:this.player,manager:this.manager,idPrefix:g,filePath:this.filePath}),f.off(j.OBSTACLE_RENDERED).on(j.OBSTACLE_RENDERED,$.proxy(this._onObstacleRendered,this)),r=f.get("type"),e=i.Obstacle.generateObstacleOfType({type:r,viewProperties:{paperScope:this.paperScope,model:f,el:"#"+g+"canvas-holder-"+h,bridgeRasterActualPath:t}}),(r===m||r===n||r===o||r===p)&&s.push(e),r===q&&this.defaultObstacles.push(e),e.off(j.OBSTACLE_DRAG_START).on(j.OBSTACLE_DRAG_START,function(a){k.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.DISABLE_RESET),k.onObstacleDragStart(a,this)
}).off(j.OBSTACLE_ROTATE_START).on(j.OBSTACLE_ROTATE_START,$.proxy(this.onObstacleRotationStart,this)).off(j.OBSTACLE_DRAG_EVENT).on(j.OBSTACLE_DRAG_EVENT,function(a){k._checkForObstacleCorrectPoint(a,this)}),b.push(e);this.obstacles=b,this.bridgeWallObstacles=s},_obstaclesRenderedCount:0,_onObstacleRendered:function(){this._obstaclesRenderedCount++,this._obstaclesRenderedCount===this.model.get("obstaclesData").length&&(this._obstaclesRenderedCount=0,MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstacles.__super__.render.apply(this,arguments))},_attachToolEvents:function(){var a,b=this.paperScope,c=(this.paperScope2,MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES),d=this;this.tool=new b.Tool,this.tool.onMouseDrag=function(a){a.event.preventDefault&&a.event.preventDefault()},this.tool.onMouseUp=function(b){var e=d.currentObject,f=!1,g=-1,h=null,i=b.getItem;if(i&&(h=b.getItem()),d.enableDisableObstacleDispenserHelpElements(),d._isNullOrUndefined(e))return void d.hideRotationHandlesOfObstacles();switch(e.name){case c.BALL:a=d._getBallViewAtIndex(e.cid),d._onBallDragFinished(a.view,b),d._onBallMouseUp(b,e.cid);break;case c.STICKY_SLIDER:a=d._getBallViewAtIndex(e.cid),d._stickySliderDragFinished(a.view,b);var j=d._getBallViewListIndex(e.cid),k=0===j?-1:j-1,l=d._getBallViewAtListIndex(k),m=l?l.view:null,n=-1===j?j:j+1,o=d._getBallViewAtListIndex(n),p=o?o.view:null;p&&p.getBallSnap()&&(b.point=p.stickySliderRaster.position,d._stickySliderDragFinished(p,b)),l&&m.getBallSnap()&&(b.point=m.stickySliderRaster.position,d._stickySliderDragFinished(m,b));var q=d._isLastBallThroughHole();-1!==q&&(d._holeEncountered(q),d.hideHole(!0));break;case c.ROTATION_HANDLE:d.repositionStartBallStickySlider(),d.rotationHandleView.onRotationHandleRotate(b),d.rotationHandleView._resetCursor();break;case c.OBSTACLE:f=d.onObstacleDragStop(b,e),g=e.model.get("obstacleNumber"),f!==!0&&d._callLastBallMouseUp(b,e);var q=d._isLastBallThroughHole();d.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==q);break;case c.OBSTACLE_ROTATION_HANDLE:f=d.onObstacleRotationEnd(e),f!==!0&&d._callLastBallMouseUp(b,e);var q=d._isLastBallThroughHole();d.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.HOLE_ENCOUNTERED,-1!==q)}d._setCursorAndObstacleRotation(h,e,g),d.bridgeWallObstacles.length>0&&d.setEventHandlersOfBridge(),d.arrow&&d.arrow.removeChildren(),d.trigger(MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.TOOL_UP_EVENT)}},_setCursorAndObstacleRotation:function(a,b,d){var e=this,f=null,g=null;a&&a.name===c.DRAGGABLE?b.onObstacleMouseEnter&&(b.onObstacleMouseEnter(a),f=b.obstacleOnPaper.position,g=a.position,f.x===g.x&&f.y===g.y&&(d=b.model.get("obstacleNumber"))):e.rotationHandleView._resetCursor(),e.hideRotationHandlesOfObstacles(d)},onAnimationStarted:function(){this.hideRotationHandlesOfObstacles(-1),this._superwrapper("onAnimationStarted",arguments)},hideRotationHandlesOfObstacles:function(a){for(var b,c=0,a=this._isNullOrUndefined(a)?-1:a;-1!=(c=this.getNextObstacleIndex(c,a));)b=this.obstacles[c],b.showHideRotationDragHandle(!1),c++},enableDisableObstacleDispenserHelpElements:function(){var a,b,c,d=!0,e=this.model.get("levelId"),f=this.obstacles,g=this.actualCourseBounds;for(b=f.length-1;b>=0;b--)if(a=f[b],a.obstacleOnPaper&&(c=a.obstacleOnPaper.position,g&&!g.contains(c))){d=!1;break}this.player.enableHelpElement("obstacles-holder-"+e,"0",!d)},_onBallDragFinished:function(a,b){var c,d=this._getSiblingBalls(this._getBallViewListIndex(a.cid)),e=!1,f=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS.BALL_ENCOUNTERED_HOLE;if(d.previous){var g,h,i,j,k=d.previous.view.connectorLine,l=d.current.view,m=l.getBallPosition(),n=null,o=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.CONSTANTS.SNAP_TOLERANCE,p=null;if(b.saveResume){var q,r=l.ballModel,p=r.get("isSnappedTo"),s=0;if(null===p)this._snapBoundary={path:this.courseBounds,isObstacle:!1};else{for(;-1!=(s=this.getNextObstacleIndex(s,-1));){if(j=this.obstacles[s],q=j.model.get("obstacleNumber"),q==p){this._snapBoundary={path:j.reflectionPath,isObstacle:!0};break}s++}j.incrementSnappedBallCount(),e=!0}}else this._snapBoundary={path:this.courseBounds,isObstacle:!1},h=this._isPointInsideAnObstacle(m,-1,["ignoreBallSnap"]),h.isInside?j=h.obstacle:(i=this._isPointWithInObstacleTolerance(m,-1,["ignoreBallSnap"],o),i.isWithInTolerance&&(m=i.pointToSnapAt,j=i.obstacle)),(h.isInside||i.isWithInTolerance)&&0===this.hole.opacity&&(n=j.reflectionPath.getNearestPoint(m),g=this._getNearestPointForObstacle(n,k,j,d.previous.view.ball),this.courseBounds.contains(g)?(this._snapBoundary={path:j.reflectionPath,isObstacle:!0},j.incrementSnappedBallCount(),e=!0,p=j.model.get("obstacleNumber")):(g=this.courseBounds.getNearestPoint(g),this._snapBoundary={path:this.courseBounds,isObstacle:!1}),l.setBallPosition(g))}else this._snapBoundary={path:this.courseBounds,isObstacle:!1};this.off(f).on(f,$.proxy(this.holeEncountered,this,[j])),c=this._superwrapper("_onBallDragFinished",[a,b,{obstacleNumber:p}]),c&&c.holeEncountered&&e&&j.decrementSnappedBallCount()},_getNearestPointForObstacle:function(a,b,c,d){var e=b.getFirstSegment().getPoint(),f=b.getLastSegment().getPoint(),g=e.subtract(f),h=null,i=null,j=null,k=null,l=null,m=null,n=a,o=null,p=0;if(g.length=-100,h=f.add(g),k=new this.paperScope.Path.Line({from:e,to:h,strokeWidth:2,opacity:0}),i=c.reflectionPath.getIntersections(k),j=i.length,j>0){for(o=i[0].getPoint(),m=a.getDistance(o),n=o,p=1;j>p;p++)o=i[p].getPoint(),l=a.getDistance(o),m>l&&(m=l,n=o);d.position&&Math.round(d.position.x)===Math.round(n.x)&&Math.round(d.position.y)===Math.round(n.y)&&(n=a)}return n},holeEncountered:function(a){if(a[0]){a[0]}},decrementBallsAttachedCountOfObstacle:function(a){var b,c,d=0;if(null!==a)for(;-1!=(d=this.getNextObstacleIndex(d,-1));){if(b=this.obstacles[d],c=b.model.get("obstacleNumber"),c==a){b.decrementSnappedBallCount();break}d++}},incrementBallsAttachedCountOfObstacle:function(a){var b,c,d=0;if(null!==a)for(;-1!=(d=this.getNextObstacleIndex(d,-1));){if(b=this.obstacles[d],c=b.model.get("obstacleNumber"),c==a){b.incrementSnappedBallCount();break}d++}},_stickySliderDragFinished:function(a){var b,c,d,e,f,g=function(b){a.ballModel.set("isSnappedTo",b)};if(b=a.getBallPosition(),d=b,c=this._isPointInsideAnObstacle(b,-1),this._snapBoundary={path:this.courseBounds,isObstacle:!1},c.isInside)this._superwrapper("_stickySliderDragFinished",arguments);else{e=this.ballViewList,f=e.length;var h=a.ballModel.get("isSnappedTo");this._superwrapper("_stickySliderDragFinished",arguments),e.length===f&&(this.decrementBallsAttachedCountOfObstacle(h),g(null))}for(var i=0;i<this.obstacles.length;i++)this.obstacles[i].sendObstacleToBack()},_isPointInsideAnObstacle:function(a,b,c){c=c||[];for(var d,e=0;-1!=(e=this.getNextObstacleIndex(e,b,c));){if(d=this.obstacles[e],d.reflectionPath.contains(a))return{isInside:!0,obstacle:d};e++}return{isInside:!1}},_isPointWithInObstacleTolerance:function(a,b,c,d){c=c||[];var e,f,g,h,i,j,k=0,l=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,m={},n=[];for(f=new this.paperScope.Path.Circle(a,d);-1!=(k=this.getNextObstacleIndex(k,b,c));){e=this.obstacles[k],g=f.getIntersections(e.reflectionPath);for(var o=g.length-1;o>=0;o--)g[o]=g[o].point,h=Math.abs(l.GetDistBetweenPointFs(a,g[o])),m[h]={point:g[o],obstacle:e};k++}if(f.remove(),i=Object.keys(m),j=i.length){for(i.sort(function(a,b){return a-b}),k=0;j>k;k++)n.push(m[i[k]]);return{pointToSnapAt:n[0].point,obstacle:n[0].obstacle,isWithInTolerance:!0}}return{isWithInTolerance:!1}},onObstacleDragStop:function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o=!1;d=c.model,e=this.model,f={x:a.point.x,y:a.point.y},g=d.get("obstacleNumber"),h=this.getDroppableCompoundPath(g),k=b.TYPES,l=this.currentObject.model.get("type"),i=c.actualObstaclePath,j=i.getIntersections(h).length,m=i.intersect(h),h.remove(),Math.round(m.area)!==Math.round(c.actualObstaclePath.area)||j>0?c.dropSlot&&(n=c.actualObstaclePath.intersect(c.dropSlot),n.area/c.actualObstaclePath.area>.5?(c.revertToInitialPosition(),d.set("isInDispenser",!0)):(o=!0,this.revertToLastPosition(c)),this.play("obstacle-drop-loofa-sound"),n.remove()):(this.placeObstacle(c),d.set("isInDispenser",!1),this.play("obstacle-drop-loofa-sound"));var p,q,r=0,s=0;for(q=this.hole.getChildren()[1];-1!==this.getNextObstacleIndex(r,-1,["left-fixed","right-fixed","left-river","right-river"]);)p=this.obstacles[r],s+=q.intersect(p.actualObstaclePath).area,r++;return this.model.set("isHoleCovered",s>=Math.abs(q.area/b.OBSTACLE_HOLE_INTERSECTION_AREA_TOLERANCE)),(l===k.LEFT_RIVER||l===k.RIGHT_RIVER||l===k.LEFT_FIXED||l===k.RIGHT_FIXED)&&(e.set("eventPoint",f),this._checkForObstacleCorrectPoint(a,this.bridgeWallObstacles[0])),m.remove(),this._reverseTransfer(),c.sendObstacleToBack(),o},placeObstacle:function(a){a.placeObstacle(a.obstacleOnPaper.position)},revertToLastPosition:function(a){a.revertToLastPosition()},_callLastBallMouseUp:function(a,b){a=a||{};var c=this.ballViewList,d=c.length,e=c[d-1].view,f=0,g=!0;for(f=0;d>f;f++){e=c[f].view;var h=this._isLineThroughHole(e.cid);if(-1!==h){this._holeEncountered(h),g=!1;break}}g&&(e=c[d-1].view,(!b||b&&b.reflectionPath.contains(e.getBallPosition()))&&this._createSliderOnObstacleBallDrop(e,a))},_createSliderOnObstacleBallDrop:function(a,b){this._onBallDragFinished(a,b),this._onBallMouseUp(b,a.ball.cid)},getDroppableCompoundPath:function(a,b){var c,d=0;for(c=new this.paperScope.CompoundPath([this.actualCourseBounds,this.actualMatBounds]);-1!=(d=this.getNextObstacleIndex(d,a,b));)this.obstacles[d].actualObstaclePath.copyTo(c),d++;return c},onObstacleDragStart:function(a,b){var c=this.bridgeGroup,d=null;this.hideRotationHandlesOfObstacles(),this._transferAllExceptObstacle(b),c&&(d=c.position,this.model.set({lastCorrectPosition:{x:d.x,y:d.y}},{silent:!0})),b.name=MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES.OBSTACLE,this.hideRotationHandlesOfObstacles(),this.currentObject=b},_onBallSelected:function(){this.hideRotationHandlesOfObstacles(),this._superwrapper("_onBallSelected",arguments)},_stickySliderSelected:function(){this.hideRotationHandlesOfObstacles(),this._superwrapper("_stickySliderSelected",arguments)},_rotationHandleSelected:function(){this.hideRotationHandlesOfObstacles(),this._superwrapper("_rotationHandleSelected",arguments)},onObstacleRotationStart:function(a){this._transferAllExceptObstacle(a),a.name=MathInteractives.Interactivities.MiniGolf.Views.Ball.NAMES.OBSTACLE_ROTATION_HANDLE,this.currentObject=a},_transferAllExceptObstacle:function(a){for(var b,c=[a.obstacleOnPaper.id],d=c.length,e=this.paperScope.project.activeLayer.removeChildren(),f=e.length,g=[],h=0;d>h;h++)for(var i=0;f>i;i++)if(e[i].id===c[h]){b=e.splice(i,1),g.push(b[0]),f--;break}this.paperScope.project.activeLayer.addChildren(g),this.paperScope2.project.activeLayer.addChildren(e),this.paperScope.view.draw(),this.paperScope2.view.draw(),this.paperScope.activate()},onObstacleRotationEnd:function(a){var b=a.model.get("obstacleNumber"),c=this.getDroppableCompoundPath(b),d=!1,e=a.actualObstaclePath.intersect(c);return c.remove(),Math.round(e.area)!==Math.round(a.actualObstaclePath.area)?(a.revertToLastOrientation(),d=!0):a.storeCurrentOrientation(),e.remove(),a.attachObstacleGroupEventHandlers(),this._reverseTransfer(),a.sendObstacleToBack(),d},_snapBallIfDroppedOverObstacle:function(a){if(!a.previous)return void(this._snapBoundary={path:this.courseBounds,isObstacle:!1});var b,c,d,e=a.previous.view.connectorLine,f=a.current.view,g=f.getBallPosition();this._snapBoundary={path:this.courseBounds,isObstacle:!1},c=this._isPointInsideAnObstacle(g,-1),c.isInside&&(d=c.obstacle,b=e.getIntersections(d.reflectionPath)[0].point,this.courseBounds.contains(b)?this._snapBoundary={path:d.reflectionPath,isObstacle:!0}:(b=this.courseBounds.getNearestPoint(b),this._snapBoundary={path:this.courseBounds,isObstacle:!1}),f.setBallPosition(b))},_snapStickSliderIfDroppedNearObstacle:function(a){var b,c,d,e;return b=a.getBallPosition(),c=this._isPointInsideAnObstacle(b,-1),c.isInside?(d=c.obstacle,e=d.reflectionPath.getNearestPoint(b),this.courseBounds.contains(e)?this._snapBoundary={path:d.reflectionPath,isObstacle:!0}:(e=this.courseBounds.getNearestPoint(e),this._snapBoundary={path:this.courseBounds,isObstacle:!1}),a.setBallPosition(e),{point:b}):void 0},repositionStartBallStickySlider:function(){var a,b,c=this.matBallView,d=(c.connectorLine,this.startBallView,this.startBallView.ballModel),e=d.get("isSnapped"),f=d.get("isSnappedTo");e&&(this.decrementBallsAttachedCountOfObstacle(f),a=b?b.model.get("obstacleNumber"):null,d.set("isSnappedTo",a))},getFirstIntersectionWithObstacles:function(a){for(var b,c,d,e,f,g=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,h=0,i=[],j={},k=0,l=0,m=a.getFirstSegment().getPoint();-1!=(h=this.getNextObstacleIndex(h,-1));){for(c=this.obstacles[h],d=c.reflectionPath,e=a.getIntersections(d),b=e.length-1;b>=0;b--)e[b]=e[b].point,f=Math.abs(g.GetDistBetweenPointFs(m,e[b])),j[f]={point:e[b],obstacle:c};h++}for(k=Object.keys(j),l=k.length,k.sort(function(a,b){return a-b}),h=0;l>h;h++)i.push(j[k[h]]);return i},reset:function(){this.model.set("isHoleCovered",!1),this.resetAllObstacles(),this._superwrapper("reset",arguments),this.enableDisableObstacleDispenserHelpElements(),this.currentObject=null},resetAllObstacles:function(){for(var a,b=0;-1!=(b=this.getNextObstacleIndex(b,-1));)a=this.obstacles[b],a.revertToInitialPosition(),b++},resetObstaclesSnappedBallCount:function(){for(var a,b=0;-1!=(b=this.getNextObstacleIndex(b,-1));)a=this.obstacles[b],a.resetSnappedBallCount(),b++}},{})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Obstacle,c=a.MiniGolfData,d=c.PAPER_OBJECT_UNIQUE_NAME.OBSTACLE;MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstaclesAcc=MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstacles.extend({draggableObstaclesArray:[],_loadSaveState:function(){this._superwrapper("_loadSaveState",arguments)},_bindAccessibilityListeners:function(){this._superwrapper("_bindAccessibilityListeners",arguments);var a=this,b=MathInteractives.Common.Player.Models.CanvasAcc,d=(b.CANVAS_KEY_EVENTS,b.CANVAS_KEYUP_EVENTS),e=this.obstacles,f=e.length,g=null,h=this.$("#"+this.idPrefix+"canvas-holder-"+this.model.get("levelId")+"-acc-container");for(h.on(d.DELETE_KEYUP,function(b,c,d,e){c.isAccessibility=!0,a._handleDeleteOnObstacle(b,c,d,e)}),g=0;f>g;g++)e[g].on(c.EVENTS.STICKY_SLIDER_ATTACHED_TO_OBSTACLE,function(){"default"===this.model.get("type")&&a._updatePaperItemsOnStickySliderAttachment()})},_updatePaperItemsOnStickySliderAttachment:function(){var a=this._setActivePaperObjects();this._updatePaperItems(a,!0)},_setActivePaperObjects:function(){var a=[],b=[];return a=this._superwrapper("_setActivePaperObjects",arguments),b=this._getActiveObstacles(),a.concat(b)},_getActiveObstacles:function(){var a=[],b=this.obstacles,c=null,e=null,f=null,g=b.length;for(c=0;g>c;c++)e=b[c],f=e.model,"default"===f.get("type")&&f.get("numberOfBallsAttached")<=0&&(e.uniquePaperObjectName=d,a.push(e));return this.draggableObstaclesArray=a.slice(),a},_handleDraggingOnKeyDown:function(a,b){this._superwrapper("_handleDraggingOnKeyDown",arguments),this._handleAccForObstacle(a,b)},_handleTabOnPaperItem:function(a,b){this._superwrapper("_handleTabOnPaperItem",arguments),this._handleTabOnObstacle(a,b)},_handleTabOnObstacle:function(a,b){var e=(c.PAPER_OBJECT_UNIQUE_NAME,b.item),f=e.uniquePaperObjectName;if(f===d){a.point=e.obstacleOnPaper.getPosition(),e.onObstacleMouseDown(a),this._showHideObsRotationHandles(e);var g=this._setActivePaperObjects();this._updatePaperItems(g,!0),this._showHideFocusRect(e.obstacleFocusRect),b.isTabEvent=!0,this._setObstacleAccMessage(e,b),this._drawView()}},_setObstacleAccMessage:function(a,b){var c=null,d="obstacle-text",e=this.model,f=a.model,g=f.get("isObstacleDropped"),h={elementId:"canvas-holder-"+e.get("levelId")+"-acc-container"},i=f.get("obstacleNumber");3===this.model.get("levelId")&&(i-=3),b.isTabEvent||b.isObstacleMoved?c=this.getMessage(d,5,[i]):b.isPlacedEvent===!0?c=this.getMessage(d,3,[i]):b.isDeleteEvent===!0?c=this.getMessage(d,4):b.isReverted===!0&&(c=this.getMessage(d,2)),b.isPlacedEvent||(a.isInDispenser()||g!==!0||(c+=this.getMessage(d,7)),c+=this.getMessage(d,0),a.isInDispenser()||g!==!0||(c+=this.getMessage(d,1)),i<this.obstacles.length-2&&!b.isObstacleMoved&&(c+=this.getMessage(d,6))),h.strMessage=c,this.canvasAccModel.set({setAccMessageObject:null},{silent:!0}),this.canvasAccModel.set("setAccMessageObject",h)},_showHideObsRotationHandles:function(a,b){a.showHideRotationDragHandle(!b&&!a.isInDispenser()&&a.model.get("numberOfBallsAttached")<=0&&a.model.get("isObstacleDropped")?!0:!1)},_handleAccForObstacle:function(a,c){var e=b.ACC_ROTATION_ANGLE,f=c.item,g=f.model,h=f.uniquePaperObjectName,i=a.type,j=null,k=b.DRAG_DISTANCE_ACC,l=MathInteractives.Common.Player.Models.CanvasAcc,m=l.CANVAS_KEY_EVENTS;i===m.ARROW?h===d&&(f.name="obstacle",this.currentObject=f,a.point||(j=f.obstacleOnPaper.getPosition(),j={x:j.x+c.directionX*k,y:j.y+c.directionY*k},a.point=j),f.onObstacleMouseDrag(a),this._showHideObsRotationHandles(f),c.isObstacleMoved=!0,this._setObstacleAccMessage(f,c)):(i===m.ROTATE_ANTI_CLOCKWISE||i===m.ROTATE_CLOCKWISE)&&h===d&&!f.isInDispenser()==!0&&g.get("numberOfBallsAttached")<=0&&g.get("isObstacleDropped")===!0&&(this.currentObject=f,f.onRotationHandle2MouseDown(a),f.rotate(i===m.ROTATE_ANTI_CLOCKWISE?-e:e))},_handleSpaceAndFocusOutOnObject:function(a,b,c){this._superwrapper("_handleSpaceAndFocusOutOnObject",arguments);var e=b.item,f=e.uniquePaperObjectName;f===d&&(a.point=e.obstacleOnPaper.getPosition(),this.tool.trigger("mouseup",a),this._showHideObsRotationHandles(e,c))},_handleDeleteOnObstacle:function(a,b,c,e){var f={};e.uniquePaperObjectName===d&&(e.isInDispenser()||e.model.get("isObstacleDropped")!==!0||(e.revertToInitialPosition(),this._drawView(),f.isDeleteEvent=!0,this._setObstacleAccMessage(e,f)))},placeObstacle:function(a){var b={isPlacedEvent:!0};this._superwrapper("placeObstacle",arguments),a.showHideRotationDragHandle(!0),a.model.get("obstacleNumber")<this.draggableObstaclesArray.length&&this._setObstacleAccMessage(a,b)},revertToLastPosition:function(a){var b={isReverted:!0};this._superwrapper("revertToLastPosition",arguments),this._setObstacleAccMessage(a,b)},_createSliderOnObstacleBallDrop:function(){this._superwrapper("_createSliderOnObstacleBallDrop",arguments);var a=this.ballViewList[this.ballViewList.length-2].view;this.canvasAcc.setCurrentPaperItem(a,!0),this._showHideFocusRect(a.stickySliderFocusRect)},_canvasFocusOut:function(a,b){var c=!0;this._handleSpaceAndFocusOutOnObject(a,b,c),this._superwrapper("_canvasFocusOut",arguments)}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Course,c=a.Obstacle,d=a.MiniGolfData;MathInteractives.Interactivities.MiniGolf.Views.CanvasSlidingObsExt=MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstaclesAcc.extend({ballViewList:[],restOfTheCompoundPath:null,dragAreaGroup:null,buttonCompoundPath:null,bridgeGroup:null,riverLineSlope:null,bridgeRaster:null,bridgeRasterActualPath:null,bridgeReflectionPath:null,buttonGroup:null,bridgeFocusRect:null,initialize:function(){this.ballViewList=[],this.initializeDefaultProperties(),this._setUpCanvas(),this._cachedtRasters()},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},_cachedtRasters:function(){var a=this,c=b.BRIDGE_PATH_DATA.RASTER_COUNT,d=null,e=0,f=this.paperScope,g=null,h=null;for(d=0;c>d;d++)h=null,g=null,g=this._getRasterData(d),h=new f.Raster({source:g.source}),this[g.name]=h,h.onLoad=function(){e+=1,e===c&&(a.render(),a._attachToolEvents(),a._bindEvents())}},_getRasterData:function(a){var c=null,d=b.BRIDGE_PATH_DATA,e=this.getJson("baseURL");return 0===a&&(c={source:e.bridgeObstacleBase64URL,name:d.BRIDGE_RASTER_NAME}),1===a&&(c={source:e.bridgeDraggingButtonRight,name:d.BRIDGE_RASTER_RIGHT_BUTTON}),2===a&&(c={source:e.bridgeDraggingButtonLeft,name:d.BRIDGE_RASTER_LEFT_BUTTON}),c},render:function(){this._createRiverLineSlope(),this._createBridgeRaster(),this._createStaticBridgeArrow(),this._superwrapper("render",arguments)},_createBridgeRaster:function(){var a=this.paperScope,c=this.model,e=null,f=null,g=c.get("bridgeRasterPosition"),h=b.BRIDGE_PATH_DATA,i=h.BEIDGE_WALL_WIDTH,j=(h.BRIDGE_WALL_HEIGHT,h.BRIDGE_PATH_WIDTH),k=h.BRIDGE_PATH_HEIGHT,l=null,m=c.getJson("baseURL"),n=(m.bridgeDraggingButtonRight,m.bridgeDraggingButtonLeft,null),o=null,p=null,q=null,r=h.BUTTON_DATA,s=r.LEFT_TRANSLATE,t=r.RIGHT_TRANSLATE,u=null,v=null,w=d.ACC_DATA,x=w.BRIDGE_ACC_DATA,y=h.ROTATING_ANGLE;this.bridgeRaster.position=g,l=this.bridgeRaster,this.bridgeRasterActualPath=f=new a.Path.Rectangle({height:k,width:j+2*i+6,fillColor:"#ffffff",opacity:0}),this.bridgeReflectionPath=e=new a.Path.Rectangle({height:k+20,width:j+2*i+20}),f.rotate(-y),e.position.x=g.x+2,e.position.y=g.y-4,f.position.x=g.x+2,f.position.y=g.y-4,this.bridgeReflectionPath.rotate(-y),this.bridgeRasterRightButton.position=g,this.bridgeRasterLeftButton.position=g,n=this.bridgeRasterRightButton,o=this.bridgeRasterLeftButton,n.rotate(-y),o.rotate(-y),q=new a.Group(n),p=new a.Group(o),p.translate(s[0],s[1]),q.translate(t[0],t[1]),this.buttonGroup=new a.Group(q,p),this.dragAreaGroup=new a.Group(f,this.buttonGroup),this.bridgeFocusRect=v=new a.Path.Rectangle({position:[g.x+4,g.y-3],height:x.HEIGHT,width:x.WIDTH,strokeColor:w.STROKE_COLOR,strokeWidth:w.STROKE_WIDTH,visible:!1,dashArray:w.DASH_ARRAY}),this.bridgeGroup=u=new a.Group(l,e,this.dragAreaGroup,v),u.name=d.DRAGGABLE,u.bringToFront()},_createStaticBridgeArrow:function(){var a=this.paperScope2,b=this.model.get("initialBridgePosition");this.bridgeArrow=new a.Raster({source:this.getJson("baseURL").bridgeArrow,position:{x:b.x+9,y:b.y+2}}),this.bridgeArrow.sendToBack()},_bindEvents:function(){{var a=this,b=this.model,c=this.obstacles;c.length,this.bridgePathGroup,this.bridgeWallObstacles[0]}this._setBridgeEvents(),b.on("change:eventPoint",function(){a._setRiverBridgePosition()}),b.on("change:bridgeGroupPosition",function(){a._setRiverObstaclesPosition()})},_setBridgeEvents:function(){var a=this.model,b=this.dragAreaGroup,c=null,d=this;this.buttonGroup.opacity=1,this.bridgeArrow.visible=!0,this.bridgeArrow.sendToBack(),a.set("isBridgeDraggable",!0),b.onMouseDrag=function(b){c=a.get("isBridgeDraggable"),c?(this.detach("mouseenter"),this.detach("mouseleave"),a.set("eventDelta",b.delta),a.set("eventPoint",b.point)):d._onDisabledBridgeDrag()},b.onMouseEnter=function(a){d._openHandCursor(a)},b.onMouseLeave=function(){d._defaultCursor()},b.onMouseDown=function(a){d._handleMouseDownOnDataAreaGroup(a)}},_handleMouseDownOnDataAreaGroup:function(a){this._closedHandCursor(a),this.bridgeWallObstacles[2].trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.OBSTACLE_DRAG_START,a)},_isBridgeDraggable:!1,obstacleDragPopUp:null,_onDisabledBridgeDrag:function(){var a={manager:this.manager,path:this.filePath,player:this.player,idPrefix:this.idPrefix,containsTts:!0,title:this.getMessage("obstacle-drag-pop-up-text","title"),accTitle:this.getAccMessage("obstacle-drag-pop-up-text","title"),text:this.getMessage("obstacle-drag-pop-up-text","body-text"),accText:this.getAccMessage("obstacle-drag-pop-up-text","body-text"),type:MathInteractives.global.Theme2.PopUpBox.CONFIRM,buttons:[{id:"okay-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("reset-pop-up-text","okay-btn"),response:{isPositive:!0,buttonClicked:"okay-button"}}],closeCallback:{fnc:function(){this.obstacleDragPopUp=null},scope:this}};this.stopReading(),this.obstacleDragPopUp||(this.obstacleDragPopUp=MathInteractives.global.Theme2.PopUpBox.createPopup(a))},_openHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.getImagePath("open-hand")+'"), move'})},_closedHandCursor:function(a){this.isMobile||a.isAccessibility||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:'url("'+this.getImagePath("closed-hand")+'"), move'})},_defaultCursor:function(){this.isMobile||$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css({cursor:"default"})},_createRiverLineSlope:function(){var a=b.BRIDGE_PATH_DATA.RIVER_LINE,c=a.FROM,d=a.TO;this.riverLineSlope=(c[1]-d[1])/(c[0]-d[0])},_setRiverBridgePosition:function(){var a=this.model,c=a.get("eventPoint"),d=a.get("eventDelta"),e=d.x,f=this.bridgeGroup,g=f.position,h=g.x+e,i=b.BRIDGE_PATH_DATA.RIVER_LINE;this.stopReading(),h>i.FROM[0]&&h<i.TO[0]&&(e>0&&c.x>g.x||0>e&&c.x<g.x)&&(f.position.x=h,f.position.y=g.y+this.riverLineSlope*e)},_setRiverObstaclesPosition:function(){var a=null,b=this.model.get("lastCorrectPosition"),c=this.bridgeWallObstacles,d=c.length;for(this.bridgeGroup.position=b,this.restOfTheCompoundPath=null,a=0;d>a;a++)c[a].model.set("lastCorrectPosition",b);this.bridgeGroup.sendToBack()},_setBridgeToInitialPosition:function(){this.bridgeGroup.position=this.model.get("initialBridgePosition")},_transferAllExceptObstacle:function(a){var b=a.model.get("type"),d=c.TYPES;if(b===d.LEFT_RIVER||b===d.RIGHT_RIVER||b===d.LEFT_FIXED||b===d.RIGHT_FIXED){for(var e,f=[a.obstacleOnPaper.id],g=(f.length,this.bridgeWallObstacles),h=g.length,i=this.paperScope.project.activeLayer.removeChildren(),j=i.length,k=this.bridgeGroup.id,l=null,m=[],n=0;h>n;n++)for(var o=0;j>o;o++)l=i[o].id,(g[n].obstacleOnPaper.id===l||k===l)&&(e=i.splice(o,1),m.push(e[0]),j--);this.paperScope.project.activeLayer.addChildren(m),this.paperScope2.project.activeLayer.addChildren(i),this.paperScope.view.draw(),this.paperScope2.view.draw(),this.paperScope.activate()}else this._superwrapper("_transferAllExceptObstacle",arguments)},_checkForObstacleCorrectPoint:function(a,b){var c=b.model.get("obstacleNumber"),d=this.getDroppableCompoundPath(c,["ignoreOnBridgeDrag"]),e=this.bridgeRasterActualPath.getIntersections(d),f=this.model,g=(b.obstacleOnPaper.position,this.bridgeGroup),h=g.position,i={x:h.x,y:h.y},j=null;d.remove(),this.restOfTheCompoundPath=d,e.length>0?(f.set({bridgeGroupPosition:null},{silent:!0}),f.set("bridgeGroupPosition",f.get("lastCorrectPosition"))):(f.set("lastCorrectPosition",i),f.set("bridgeGroupPosition",i)),j=this.bridgeGroup.children[0].position,f.set("bridgeRasterPosition",{x:j.x,y:j.y})},setEventHandlersOfBridge:function(){var a=this.bridgeWallObstacles,b=a[2],c=this.bridgeGroup,d=this.dragAreaGroup,e=null,f=this._getObstacleCompoundPath(),g=this._isPassingThroughBridge(),h=a[3];null!==f&&(e=this.bridgeRasterActualPath.intersect(f),f.remove()),d.detach("mousedown"),d.detach("mouseenter"),d.detach("mouseleave"),this.bridgeArrow.visible=!1,this.bridgeArrow.sendToBack(),this.buttonGroup.opacity=.5,c.sendToBack(),g&&b.model.get("numberOfBallsAttached")<=0&&h.model.get("numberOfBallsAttached")<=0&&(null===e||null!==e&&e.area<=0)?this._setBridgeEvents():this.model.set("isBridgeDraggable",!1),null!==e&&e.remove()},_getObstacleCompoundPath:function(){var a=0,b=new this.paperScope.CompoundPath,c=this.obstacles,d=null,e=null,f=c.length;for(a=0;f>a;a++)d=c[a],e=d.model,e.get("ignoreOnBridgeDrag")||e.get("isInDispenser")||d.actualObstaclePath.copyTo(b);return b.children.length<=0&&(b=null),b},resetAllObstacles:function(){this._setBridgeToInitialPosition(),this._setBridgeEvents(),this._superwrapper("resetAllObstacles",arguments)},reset:function(){var a=this.model;a.set("bridgeRasterPosition",a.get("initialBridgePosition")),this._superwrapper("reset",arguments)},_isPassingThroughBridge:function(){for(var a,b=this.bridgeRasterActualPath,c=this.ballViewList,d=0;d<c.length;d++)if(a=c[d].view.connectorLine,a&&b.getIntersections(a).length>0)return!1;return!0},getDroppableCompoundPath:function(a,b){var d=this.currentObject.model.get("type"),e=c.TYPES;if(d===e.LEFT_RIVER||d===e.RIGHT_RIVER||d===e.LEFT_FIXED||d===e.RIGHT_FIXED){var f,g=0;for(f=new this.paperScope.CompoundPath;-1!=(g=this.getNextObstacleIndex(g,a,b));)this.obstacles[g].actualObstaclePath.copyTo(f),g++;return f}return this._superwrapper("getDroppableCompoundPath",arguments)},_onBallSelected:function(){this.bridgeGroup.sendToBack(),this.bridgeArrow.sendToBack(),this._superwrapper("_onBallSelected",arguments)},_loadSaveState:function(){this._superwrapper("_loadSaveState",arguments),this.setEventHandlersOfBridge()},_callLastBallMouseUp:function(a,b){var d=b.model.get("type"),e=c.TYPES;d===e.LEFT_RIVER||d===e.RIGHT_RIVER||d===e.LEFT_FIXED||d===e.RIGHT_FIXED?(this._superwrapper("_callLastBallMouseUp",arguments),this._superwrapper("_callLastBallMouseUp",[a,this.obstacles[3]])):this._superwrapper("_callLastBallMouseUp",arguments)}})}(),function(){"use strict";var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.Course,c=(a.Obstacle,a.MiniGolfData),d=c.PAPER_OBJECT_UNIQUE_NAME.BRIDGE;MathInteractives.Interactivities.MiniGolf.Views.CanvasSlidingObsExtAcc=MathInteractives.Interactivities.MiniGolf.Views.CanvasSlidingObsExt.extend({_bindEvents:function(){this._superwrapper("_bindEvents",arguments);var a=this.model,b=null,c=!1,e=this.ballViewList,f=this;a.on("change:isBridgeDraggable",function(a,g){g===!0?c=!1:g===!1&&f.canvasAcc.getCurrentPaperItem().uniquePaperObjectName===d&&(f.bridgeGroup.sendToBack(),c=!0),b=f._setActivePaperObjects(!0),f._updatePaperItems(b,!0),c&&f._showHideFocusRect(e[e.length-1].ballFocusRect)})},_handleLastBallDrag:function(){this._superwrapper("_handleLastBallDrag",arguments),this.model.get("isBridgeDraggable")===!1&&this.bridgeGroup.sendToBack()},_setActivePaperObjects:function(){var a=this.bridgeGroup,b=[];return b=this._superwrapper("_setActivePaperObjects",arguments),this.model.get("isBridgeDraggable")&&(a.uniquePaperObjectName=d,b.push(a)),b},_handleTabOnPaperItem:function(a,b){this._superwrapper("_handleTabOnPaperItem",arguments),this._handleTabOnBridge(a,b)},_handleTabOnBridge:function(a,b){var c=b.item,e=null;c.uniquePaperObjectName===d&&(a.point=this.obstacles[2].obstacleOnPaper.getPosition(),this.obstacles[2].onObstacleMouseDown(a),this.model.get("isBridgeDraggable")===!1?(this.canvasAcc.canvasFocusOut(),this._showHideFocusRect(),this.setFocus("reset-course-btn-3",10)):(e={elementId:"canvas-holder-"+this.model.get("levelId")+"-acc-container",strMessage:this.getMessage("bridge-text",0)},this.canvasAccModel.set("setAccMessageObject",e),this._showHideFocusRect(this.bridgeFocusRect)),this._drawView())},_handleDraggingOnKeyDown:function(a,b){this._superwrapper("_handleDraggingOnKeyDown",arguments),this._handleAccForBridge(a,b)},_handleAccForBridge:function(a,b){var c=b.item,e=this.model,f=null,g=null;c.uniquePaperObjectName===d&&this.model.get("isBridgeDraggable")===!0&&(this.currentObject=this.obstacles[2],g=this.bridgeGroup.getPosition(),f={x:g.x+2*b.directionX,y:g.y},e.set("eventDelta",{x:2*b.directionX,y:b.directionY}),e.set("eventPoint",f))},_handleSpaceAndFocusOutOnObject:function(a,b,c){this.ballViewList.length;this._superwrapper("_handleSpaceAndFocusOutOnObject",arguments);var e=b.item,f=null,g=this.ballViewList,h=g.length,i=null,j=null,k=e.uniquePaperObjectName;k===d&&(f=this.canvasAcc,a.point=this.bridgeGroup.getPosition(),this.tool.trigger("mouseup",a),c||this.model.get("isBridgeDraggable")||(i=g.length,f.updatePaperItems(this._setActivePaperObjects()),i>h?(j=g[i-2].view,f.setCurrentPaperItem(j,!0),this._showHideFocusRect(j.stickySliderFocusRect)):(j=g[i-1].view,f.setCurrentPaperItem(j,!0),this._showHideFocusRect(j.ballFocusRect))),this._drawView())},_resetCanvasAccHolderText:function(){var a=null,c=(b.KEYCODE,null),d=null;a=this.getMessage("carousel-view-slide-3-title",0),d=this.getMessage("canvas-acc-cont-text",0,[a]),Math.abs(this.ballViewList.length-2)>0&&(d+=this.getMessage("canvas-acc-cont-text",1)),c=this.obstacles.length,c>0&&(d+=this.getMessage("canvas-acc-cont-text",2,[3])),d+=this.getMessage("canvas-acc-cont-text",3),this.setAccMessage("canvas-holder-3-acc-container",d)
}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Animation=MathInteractives.Common.Player.Views.Base.extend({paperScope:null,animatingBall:null,courseBounds:null,lastIncidentPoint:null,newDirectionPoint:null,lineUtility:null,distance:null,hole:null,ballIndex:null,stopDistance:null,falseAngleFound:null,ballSpeed:null,vectorTexture:null,vector:null,ballTextureBase64URL:null,ballTextureRaster:null,collisionPoints:null,gradientLine:null,textureGroup:null,timeElapsed:null,canvasView:null,angleTolerance:null,skipBallAnimation:null,isSaveStateLoaded:!1,initialize:function(){this.angleTolerance=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANGLE_TOLERANCE,this.initializeDefaultProperties(),this.lineUtility=MathInteractives.Interactivities.MiniGolf.Views.LineUtility,this.stopDistance=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANIMATION_STOP_DISTANCE,this.falseAngleFound=!1,this.ballSpeed=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.INITIAL_SPEED,this.timeElapsed=0,this.canvasView=this.options.canvasView,this.listenTo(this.model,"change:invalidPathIndex",$.proxy(this._resetOnInteraction,this)),this.listenTo(this,MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.READY,this._loadSaveState)},_resetOnInteraction:function(){var a=this.model.get("invalidPathIndex");null===a&&this.isSaveStateLoaded===!0&&(this.canvasView.arrow&&this.canvasView.arrow.removeChildren(),this.reset()),this.isSaveStateLoaded=!0},setPaperScope:function(a){this.paperScope=a,this._renderBoundry(),this._renderDummyHole(),this._loadRaster(),this._renderGradientLine()},_loadRaster:function(){var a=this,b=this.paperScope,c=0,d=this.getJson("baseURL");this.ballBase64URL=d.ballBase64URL,this.ballTextureBase64URL=d.ballTextureBase64URL,this.ballTextureRaster=new b.Raster({source:this.ballTextureBase64URL}),this.ballInnerRaster=new b.Raster({source:this.ballBase64URL}),this.ballTextureRaster.onLoad=function(){c++,2===c&&a._clipBall()},this.ballInnerRaster.onLoad=function(){c++,2===c&&a._clipBall()}},_clipBall:function(){this.paperScope.activate();var a=new this.paperScope.Point(0,0),b=10,c=this.paperScope,d=new c.Path.Circle(a,b);d.fillColor="#396f30",d.translate(2,2);var e=new c.Group(this.courseBounds.clone(),d);e.clipped=!0;var f=new c.Path.Circle(a,b),g=new c.Path.Circle(a,b);g.fillColor="white",g.opacity=1;var h=new c.Group(d,g,this.ballInnerRaster);this.animatingBall=h,this.textureGroup=new c.Group(f,this.ballTextureRaster),this.textureGroup.clipped=!0,this.animatingBall.opacity=0,this.textureGroup.opacity=0,this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.READY)},_renderBoundry:function(){for(var a=this.paperScope,b=this.model,c=b.get("courseBoundaries"),d=new a.Path,e=0;e<c.length;e++)d.add(new a.Point(c[e]));d.closed=!0,this.courseBounds=d},_renderGradientLine:function(){var a=new this.paperScope.Path;a.add(0,0),a.add(0,0),a.strokeWidth=3,a.shadowColor=new this.paperScope.Color(0,0,0),a.shadowBlur=0,a.shadowOffset=new this.paperScope.Point(0,0),this.gradientLine=a},_predeterminePoints:function(){for(var a=this.model.get("balls"),b=[],c=(this.courseBounds,0);c<a.length-1;c++){{var d,e=c+1,f=a[c],g=(f.get("position"),c>0?a[c-1]:null),h=a[c].get("position"),i=a[e].get("position"),j=this.dummyLine(h,i);f.get("prevBallAngle"),f.get("nextBallAngle")}if(d=this._recursive(j,f,g,c),j.remove(),b=b.concat(d),d[d.length-1].ballIndex<0)return this.collisionPoints=b,this.stopDistance=this.lineUtility.GetDistBetweenPointFs(d[d.length-2].point,d[d.length-1].point),void(this.stopDistance=this.stopDistance>3?this.stopDistance-3:1)}b.push({point:a[a.length-1].get("position"),ballIndex:a.length-1}),this.collisionPoints=b},_recursive:function(a,b,c,d){var e,f=b.get("prevBallAngle"),g=b.get("nextBallAngle"),h=b.get("position"),i=this._verifyAngle(f,g,this.angleTolerance),j=[];if(j.push({point:h,ballIndex:d}),0===d&&(e=this._checkForRiver(a)))return j.push(e),j.push(e),j;if((i||this._falseAngleOnBoundry(d))&&d>0&&c){var k=this._getSnappedBallNormal(b),l=a.segments;l[0].point=k.incidentPt,l[1].point=k.normalPt;var m=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANIMATION_STOP_DISTANCE,n=this._getReflectionPoint(c.get("position"),a);n=this.lineUtility.GetvarOnLineUsingDistance(k.incidentPt,n,m,0,!0),l[1].point=n,e=this._handleInCorrectPath(a,h,1),e.length>0&&(n=e[0].point),j.push({point:n,ballIndex:-1})}else e=this._handleInCorrectPath(a,h,1),e.length>0&&(e[1]&&(e[1].ballIndex=-1),e[0].ballIndex=1===e.length?-1:e[0].ballIndex,j=j.concat(e[0]?[e[0]]:[]),j=j.concat(e[1]?[e[1]]:[]));return j},_checkForRiver:function(a){var b=this._reflectionByObstacle(a);if(b&&b.obstacle&&b.obstacle.type)switch(b.obstacle.type){case"left-river":case"right-river":return b={point:b.point,ballIndex:-1}}return null},_getSnappedBallNormal:function(a){var b=a.get("snapPoint"),c=a.get("mirrorPoint");return this._isNullOrUndefined(b)||this._isNullOrUndefined(c)?(this.log("normal for ball is not found"),null):{incidentPt:b,normalPt:c}},_handleInCorrectPath:function(a,b,c){if(0>c)return this.log("counter exhausted"),[];var d=this._reflectionByBoundry(a),e=this._reflectionByObstacle(a),f=a.segments,g=[],h=[];h=d?h.concat(d):h,h=e?h.concat(e):h;var i=this._getNearesetPointFromList(f[0].point,f[1].point,h);if(this._isNullOrUndefined(i)||0===i.length)return this.log("nothing found on path"),[];var j=i[0].obstacle,k=this._getNormal(j?j.reflectionPath:this.courseBounds,i[0].point),l=this.dummyLine(k.incidentPt,k.normalPt),m=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANIMATION_STOP_DISTANCE,n=this._getReflectionPoint(b,l);if(j&&j.type)return g.push({point:k.incidentPt,ballIndex:-1,isRiver:!0}),l.remove(),g;n=this.lineUtility.GetvarOnLineUsingDistance(k.incidentPt,n,m,0,!0),f[0].point=k.incidentPt,f[1].point=n,c--,g.push({point:k.incidentPt,ballIndex:-2});var o=this._handleInCorrectPath(a,k.incidentPt,c);return g=g.concat(o.length>0?o:[{point:n,ballIndex:-1}]),l.remove(),g},_getReflectionPoint:function(a,b){var c=b.segments,d=this.lineUtility.ReflectvarToTheLine(a,c[0].point,c[1].point);return d},_reflectionByBoundry:function(a){return a.getIntersections(this.courseBounds)},_reflectionByObstacle:function(a){var b=this.canvasView,c=(this.lineUtility,b.getFirstIntersectionWithObstacles);if(this._isNullOrUndefined(c))return null;var d=b.getFirstIntersectionWithObstacles(a);if(this._isNullOrUndefined(d)||0===d.length)return null;for(var e=-1,f=0;f<d.length;f++)if(!this._isPointEqual(d[f].point,a.segments[0].point)){e=f;break}return-1===e?null:d[e]},_getNearesetPointFromList:function(a,b,c){if(this._isNullOrUndefined(c)||0===c.length)return null;var d,e,f=0,g=0,h=[],i=[],j=this.paperScope;a=new j.Point(a),b=new j.Point(b);for(var k=0;k<c.length;k++)d=c[k].point,this._isPointEqual(a,d,0)||this._isPointEqual(b,d,0)||(e=a.getDistance(new j.Point(d)),h[e]=c[k]);f=Object.keys(h),g=f.length,f.sort(function(a,b){return a-b});for(var l=0;g>l;l++)i.push(h[f[l]]);return i},_renderDummyHole:function(){var a=this.paperScope,b=this.model,c=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.HOLES["COURSE_"+b.get("levelId")].RADIUS+.5,d=b.get("holePosition"),e=new a.Path.Circle({center:d,radius:c,strokeColor:"red",opacity:0});this.hole&&(this.hole.remove(),this.hole=null),this.hole=e},_renderAnimatingBall:function(){this.paperScope.project.activeLayer.removeChildren(),this._isNullOrUndefined(this.animatingBall)||(this.animatingBall.detach("frame"),this.animatingBall.remove(),this.animatingBall=null);var a=this.model,b=this.paperScope,c=a.get("rotationHandlePosition");this.animatingBall=new b.Path.Circle({center:new b.Point(c),radius:10,fillColor:"green",opacity:1}),this.paperScope.view.draw()},showHideAnimatingBall:function(a){a===!1?(this.animatingBall.opacity=0,this.textureGroup.opacity=0,this.paperScope.view.draw()):(this.animatingBall.opacity=1,this.textureGroup.opacity=1,this.paperScope.view.draw())},reset:function(){this.model.set("invalidPathStartPoint",null),this.model.set("invalidPathEndPoint",null),this.animatingBall.opacity=1,this.textureGroup.opacity=1,this.timeElapsed=0,this.ballIndex=-1,this.falseAngleFound=!1,this.distance=0,this.stopDistance=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.ANIMATION_STOP_DISTANCE;var a=new this.paperScope.Point(0,0);this.gradientLine.segments[0].point=a,this.gradientLine.segments[1].point=a,this.animatingBall.position=new this.paperScope.Point(-20,-20),this.textureGroup.position=new this.paperScope.Point(-20,-20),this.ballSpeed=MathInteractives.Interactivities.MiniGolf.Views.Animation.CONSTANTS.INITIAL_SPEED,this._renderDummyHole(),this.skipBallAnimation=!1,this.paperScope.view.draw()},addBallOnLayer:function(){this.animatingBall.remove(),this.textureGroup.remove(),this.gradientLine.remove(),this.paperScope.project.activeLayer.addChild(this.gradientLine),this.paperScope.project.activeLayer.addChild(this.animatingBall),this.paperScope.project.activeLayer.addChild(this.textureGroup)},removeBallFromLayer:function(){},launchBall:function(){this.reset(),this.ballIndex=0,this.paperScope.activate(),this.addBallOnLayer(),this.showHideAnimatingBall(),this._predeterminePoints();var a=this.collisionPoints,b=this,c=this.paperScope,d=a[0].point,e=a[1].point;this.lastIncidentPoint=new c.Point(d),this.newDirectionPoint=new c.Point(e),this.animatingBall.position=this.lastIncidentPoint,this.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.BALL_ANIMATION_STARTED),this.vector=this._subtractPoints(this.newDirectionPoint,this.lastIncidentPoint),this.vectorTexture=new c.Point({angle:this.vector.angle,length:1}),this.animatingBall.onFrame=function(a){b.animateBall4(a),b.paperScope.view.draw()}},animateBall4:function(){var a=this,b=a.lineUtility.GetDistBetweenPointFs(a.lastIncidentPoint,a.newDirectionPoint),c=a.ballSpeed;return a._isPassingThroughHole()&&!a.falseAngleFound?void a._ballInHole():(a.distance>=b&&a._reflectBall(),a.textureGroup.position=a._moveBallOnLine(a.lastIncidentPoint,a.newDirectionPoint,1.3*a.distance),a.textureGroup.children[0].position=a._moveBallOnLine(a.lastIncidentPoint,a.newDirectionPoint,a.distance),a.animatingBall.position=a._moveBallOnLine(a.lastIncidentPoint,a.newDirectionPoint,a.distance),a._restartTexture(),a.falseAngleFound&&a.distance>=a.stopDistance?void a._falseAnglePathAnimated():(a.falseAngleFound&&(a.timeElapsed+=10,a.gradientLine.segments[1].point=a.animatingBall.position,a.gradientLine.strokeColor={gradient:{stops:["white",new a.paperScope.Color(255,255,255,0)]},origin:a.gradientLine.segments[0].point,destination:a.gradientLine.segments[1].point},c=a._getBallSpeed(a.timeElapsed)),a.skipBallAnimation&&(c=a.lineUtility.GetDistBetweenPointFs(a.lastIncidentPoint,a.newDirectionPoint)-a.distance),void(a.distance+=c)))},_getBallSpeed:function(){if(this.stopDistance>80)return this.ballSpeed;var a=-this.ballSpeed/(this.stopDistance+5);return this.ballSpeed+Math.round(this.distance)*a},_restartTexture:function(){var a=this.ballTextureRaster,b=this.animatingBall;a.position.x<b.bounds.left?a.position.x=b.bounds.right:a.position.x>b.bounds.right&&(a.position.x=b.bounds.left),a.position.y<b.bounds.top?a.position.y=b.bounds.bottom:a.position.y>b.bounds.bottom&&(a.position.y=b.bounds.top),this.ballTextureRaster.position=a.position},_checkCollision4:function(){for(var a=this.animatingBall.position,b=this.collisionPoints,c=0;c<b.length;c++)if(this._isPointEqual(a,b[c],0))return c;return null},_reflectBall:function(){{var a=this;a.model.get("balls")}a.ballIndex++;var b=a.ballIndex;b&&b<a.collisionPoints.length-1?(a.lastIncidentPoint=a.collisionPoints[b].point,a.newDirectionPoint=a.collisionPoints[b+1].point,a.vector=a._subtractPoints(a.newDirectionPoint,a.lastIncidentPoint),a.vectorTexture=new a.paperScope.Point({angle:a.vector.angle,length:1}),a.distance=2,-1===a.collisionPoints[b+1].ballIndex&&(a.falseAngleFound=!0,a.gradientLine.segments[0].point=a.lastIncidentPoint,a.gradientLine.segments[1].point=a.lastIncidentPoint),a.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.BALL_REFLECTED),a.log("play sound on ball reflection")):this.log("something went wrong")},_falseAngleOnBoundry:function(a){var b=this,c=b.model.get("balls"),d=c[a],e=d.get("prevBallAngle"),f=d.get("nextBallAngle");if(this._verifyAngle(e,f,b.angleTolerance)&&a>0){var g=c[a-1].get("position"),h={incidentPt:d.get("snapPoint"),normalPt:d.get("mirrorPoint")},i=b.lineUtility.ReflectvarToTheLine(g,h.incidentPt,h.normalPt);return 0===Number(e.toFixed(0))&&(i=h.normalPt),{point:i,ballIndex:-1}}if(e&&0!=Number(e.toFixed(0))&&a>0&&a<c.length-1){var j=c[a-1].get("position"),k=d.get("position"),l=c[a+1].get("position"),m=this.lineUtility.AngleBetweenLineAndPointF(j,l,k);if(0===Number(m.toFixed(0))){var g=c[a-1].get("position"),h=b._getNormal(b.courseBounds,d.get("position")),i=b.lineUtility.ReflectvarToTheLine(g,h.incidentPt,h.normalPt);return{point:i,ballIndex:-1}}}return null},_verifyAngle:function(a,b,c){var d=!0;return c=this._isNullOrUndefined(c)?0:Math.abs(c),this._isNullOrUndefined(a)||this._isNullOrUndefined(b)||(a=Number(a.toFixed(0)),b=Number(b.toFixed(0)),b>=a-c&&a+c>=b&&(d=!1)),d},_ballInHole:function(){var a=this;a.animatingBall.detach("frame"),this.removeBallFromLayer(),a.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.BALL_IN_HOLE),a.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.BALL_ANIMATION_ENDED)},_falseAnglePathAnimated:function(){var a=this;a.animatingBall.detach("frame");for(var b=a.collisionPoints,c=a.ballIndex,d=!1,e=c;e>=0;e--)if(!this._isNullOrUndefined(b[e])&&b[e].ballIndex>=0){a.ballIndex=e;var f=a.model.get("balls"),g=f[a.ballIndex];d=this._verifyAngle(g.get("prevBallAngle"),g.get("nextBallAngle"),this.angleTolerance);break}a.gradientLine.segments[1].point=a.animatingBall.position,a.gradientLine.strokeColor={gradient:{stops:["white",new a.paperScope.Color(255,255,255,0)]},origin:a.gradientLine.segments[0].point,destination:a.gradientLine.segments[1].point},this.removeBallFromLayer(),a.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.INCORRECT_REFLECTION_ANGLE,{ballIndex:e,isFalseAngle:d}),a.trigger(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.BALL_ANIMATION_ENDED);var h=this.gradientLine.segments,i=h[0].point,j=h[1].point;this.model.set("invalidPathStartPoint",{x:i.x,y:i.y}),this.model.set("invalidPathEndPoint",{x:j.x,y:j.y})},_isPointEqual:function(a,b,c){c=c?c:0;var d=this._setNumberPrecision(a,c),e=this._setNumberPrecision(b,c);return d.x===e.x&&d.y===e.y},_setNumberPrecision:function(a,b){var c=Math.round(100*a.x)/100,d=Math.round(100*a.y)/100;return new this.paperScope.Point(Number(c.toFixed(b)),Number(d.toFixed(b)))},_isPassingThroughHole:function(){var a=this.hole,b=this.animatingBall.children[1],c=this.collisionPoints[this.collisionPoints.length-1].point;return(a.getIntersections(b).length>0||this.lineUtility.GetDistBetweenPointFs(a.position,this.animatingBall.position)<8)&&(this._isPointEqual(c,this.animatingBall.position,0)||this.lineUtility.GetDistBetweenPointFs(c,this.animatingBall.position)<5)?!0:!1},_moveBallOnLine:function(a,b,c){var d=this.lineUtility.GetvarOnLineUsingDistance(a,b,c,0,!0);return d},_getNormal:function(a,b){var c=a._getOffset(a.getLocationOf(b)),d=a.getNormalAt(c);return d.length=100,{incidentPt:b,normalPt:this._addPoints(b,d)}},skipAnimation:function(){this.skipBallAnimation=!0},dummyLine:function(a,b){var c=this.paperScope,d=new c.Path;return d.add(a),d.add(b),d.strokeColor="red",d},dummyCircle:function(a,b){return},_addPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x+b.x,a.y+b.y):"NaN"},_subtractPoints:function(a,b){return a&&b?new this.paperScope.Point(a.x-b.x,a.y-b.y):"NaN"},_isNullOrUndefined:function(a){return null===a||"undefined"==typeof a},changeBallLayer:function(a){a&&(this.animatingBall.remove(),this.textureGroup.remove(),this.gradientLine.remove(),a.project.activeLayer.addChild(this.gradientLine),a.project.activeLayer.addChild(this.animatingBall),a.project.activeLayer.addChild(this.textureGroup))},_loadSaveState:function(){var a=this.model,b=this,c=this.gradientLine,d=a.get("invalidPathStartPoint"),e=a.get("invalidPathEndPoint");this._isNullOrUndefined(d)||this._isNullOrUndefined(e)||(this._isNullOrUndefined(c)&&(this._renderGradientLine(),c=this.gradientLine),this.paperScope.activate(),c.segments[0].point=d,c.segments[1].point=e,c.strokeColor={gradient:{stops:["white",new this.paperScope.Color(255,255,255,0)]},origin:c.segments[0].point,destination:c.segments[1].point},setTimeout(function(){b.animatingBall.position=c.segments[1].point,b._restartTexture(),b.showHideAnimatingBall(!0),b.animatingBall.bringToFront(),b.canvasView.paperScope.view.draw(),b.canvasView.paperScope2.view.draw()},100))}},{EVENTS:{BALL_REFLECTED:"ball-reflcted",BALL_COLLIDED:"ball-colloided",BALL_IN_HOLE:"ball-is-in-hole",BALL_ANIMATION_STARTED:"ball-animation-started",BALL_ANIMATION_ENDED:"ball-animation-ended",INCORRECT_REFLECTION_ANGLE:"incorrect-reflection-angle",READY:"animation-canvas-ready"},CONSTANTS:{INITIAL_SPEED:4,STOP_ANIMATION_DURATION:925,DE_ACCELERATION:-.008,ANIMATION_STOP_DISTANCE:80,ANGLE_TOLERANCE:0}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Course=MathInteractives.Common.Player.Views.Base.extend({isNextCourseLocked:!1,paperScope:null,canvasId:null,canvasView:null,confettiView:null,takeShotBtn:null,scoreCardBtn:null,skipAnimationBtn:null,animationView:null,popupView:null,readyCount:0,events:{"click .reset-course-btn.clickEnabled":"_onResetCourseBtnClick","click .course-score-card-btn.clickEnabled":"_onScoreCardBtnClick","click .skip-animation-btn.clickEnabled":"_onSkipAnimationBtnClick"},initialize:function(){this.initializeDefaultProperties(),this.canvasId="game-canvas-"+this.model.get("levelId"),this.render();var a,b,c=Number(this.model.get("levelId")),d=this.getAccMessage("course-title-"+c,0),e=this.model.get("obstaclesData"),f=0;for(b=this.getAccMessage("main-container-text",0,[c+1,d]),a=e.length-1;a>=0;a--)"default"===e.models[a].get("type")&&f++;f&&(b+=this.getAccMessage("main-container-text",1,[f])),b+=this.getAccMessage("main-container-text",2),this.setAccMessage("main-container-"+c,b)},baseSetUp:function(a){this._attachCanvasEvents(a),this._setUpAnimation()},render:function(){var a,b,c;c=this.model,a=c.get("levelId"),b={level:a,idPrefix:this.idPrefix,obstacles:{level0:0==a,level1:1==a,level2:2==a,level3:3==a}},this.$el.html(MathInteractives.Interactivities.MiniGolf.templates.course(b).trim()),this.showCanvas(!1),this._renderBackGroundImage(),this.loadScreen("course"),this._initializeDirectionText(),this._addButtons(),this._generateConfettiView(),this.$(".course-title-obstacle-holder-2").css({"background-image":' url("'+this.filePath.getImagePath("sprites")+'")'}),c.get("customPopupShown")===!1?(c.set("customPopupShown",!0),this._createCustomPopup(),this._setCustomPopupProp()):this.setFocusToDirectionText()},_generateConfettiView:function(){this.confettiView=new MathInteractives.Interactivities.MiniGolf.Views.Confetti({el:"#"+this.idPrefix+"confetti-container",model:this.model,neverStop:!0})},_attachCanvasEvents:function(a){this.canvasView=a;var b=MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas.EVENTS,c=a;c.on(b.HOLE_ENCOUNTERED,$.proxy(this.showhideTakeShotButton,this)),c.on(b.DISABLE_RESET,$.proxy(this._setResetButtonInModel,this)),c.on(b.ENABLE_RESET,$.proxy(this.enableResetBtn,this)),c.on(b.TOOL_UP_EVENT,$.proxy(this._onCanvasInteraction,this)),c.on(b.READY,$.proxy(this._onCourseReady,this)),c.on(b.HIDE_TAKE_SHOT_BUTTON,$.proxy(this.showhideTakeShotButton,this))},_setUpAnimation:function(){var a=new MathInteractives.Interactivities.MiniGolf.Views.Animation({model:this.model,canvasView:this.canvasView});this.animationView=a,this.animationView.setPaperScope(this.canvasView.paperScope2),this.animationView.on(MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS.READY,$.proxy(this._onCourseReady,this)),this.attachEventsOnAnimationView()},_onCourseReady:function(){this.readyCount++,2===this.readyCount&&(this.readyCount=0,this.showCanvas(!0))},showCanvas:function(a){var b=this.$(".canvas-holder");a?(b.show(),this.canvasView.paperScope.view.draw(),this.canvasView.paperScope2.view.draw()):b.hide()},attachEventsOnAnimationView:function(a){var b=this.animationView,c=MathInteractives.Interactivities.MiniGolf.Views.Animation.EVENTS;a===!1?(b.off(c.BALL_REFLECTED),b.off(c.BALL_ANIMATION_STARTED),b.off(c.INCORRECT_REFLECTION_ANGLE),b.off(c.BALL_IN_HOLE),b.off(c.BALL_ANIMATION_ENDED)):(b.on(c.BALL_REFLECTED,$.proxy(this._onBallReflection,this)),b.on(c.BALL_ANIMATION_STARTED,$.proxy(this._onAnimationStart,this)),b.on(c.INCORRECT_REFLECTION_ANGLE,$.proxy(this._onIncorrectAnimationEnd,this)),b.on(c.BALL_IN_HOLE,$.proxy(this._onCorrectAnimationEnd,this)),b.on(c.BALL_ANIMATION_ENDED,$.proxy(this._onAnimationEnd,this)))},_onBallReflection:function(){this.log("play sound on reflection")},_onAnimationStart:function(){this.player.enableAllHeaderButtons(!1);var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_DISABLED;this.directionTextView.changeButtonState(a),this.directionTextView.disableTTS(!0),this.resetBtn.setButtonState(a),this.scoreCardBtn.setButtonState(a),this.showhideTakeShotButton(!1),this.showHideSkipAnimationButton(!0),this.canvasView.onAnimationStarted();var b=this.model.get("levelId");this.setFocus("skip-animation-btn-"+b),this.enableTab("main-container-"+b,!1),this.enableTab("canvas-holder-"+b+"-acc-container",!1)},_onAnimationEnd:function(){var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE,b=this.model.get("levelId");this.enableTab("main-container-"+b),this.enableTab("canvas-holder-"+b+"-acc-container"),this.directionTextView.changeButtonState(a),this.directionTextView.disableTTS(!1),this.resetBtn.setButtonState(a),this.scoreCardBtn.setButtonState(a),this.canvasView.onAnimationEnded(),this.showHideSkipAnimationButton(!1),$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css("z-index",2),$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")+"-2").css("z-index",1),this.animationView.changeBallLayer(this.canvasView.paperScope),this.canvasView.paperScope.view.draw(),this.canvasView.paperScope2.view.draw()},_onCorrectAnimationEnd:function(){var a=this.model;a.set("state",MathInteractives.Interactivities.MiniGolf.Models.Course.COURSE_TYPE.TYPE_1),a.set("holesInOne",Number(a.get("holesInOne")||0)+1),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.UNLOCK_NEXT_COURSE),this.animationView.showHideAnimatingBall(!1);var b,c,d,e,f,g=this.isNextCourseLocked?"body-text":"body-text-already-unlocked";switch(d=Number(a.get("levelId")),e=d+1,f=this.getMessage("course-title-"+e,0),b={text:this.getMessage("hole-in-1-pop-up-text",g,[f]),accText:this.getAccMessage("hole-in-1-pop-up-text",g,[f]),containsTts:!0,showCallback:{fnc:function(){this.confettiView.setUpConfetti()},scope:this},closeCallback:{fnc:function(b){"next-hole-button"===b.buttonClicked&&this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.NEXT_HOLE),this.confettiView.stopConfetti(),this.popupView.$el.find("#"+this.idPrefix+"theme-2-pop-up-modal").removeClass("bg-transparent"),this.canvasView.reset(),a.set("resetCourseButton",!1),this.enableResetBtn(!1),this.player.enableAllHeaderButtons(!0),"play-again-button"===b.buttonClicked&&this.setFocus("main-container-"+a.get("levelId"))},scope:this},buttons:[{id:"play-again-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("hole-in-1-pop-up-text","play-again-btn"),response:{isPositive:!0,buttonClicked:"play-again-button"},baseClass:"course-pop-up-btn"},{id:"next-hole-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("hole-in-1-pop-up-text","next-hole-btn"),response:{isPositive:!0,buttonClicked:"next-hole-button"},baseClass:"course-pop-up-btn"}],width:454,title:this.getMessage("hole-in-1-pop-up-text","title"),accTitle:this.getAccMessage("hole-in-1-pop-up-text","title"),manager:this.manager,player:this.player,path:this.filePath,idPrefix:this.idPrefix,foregroundImageBackgroundPosition:"-720px -687px",foregroundImage:{imageId:"sprites",imageHeight:156,imageWidth:131},titleTextColorClass:"course-pop-up-title-color-blue",bodyTextColorClass:"course-pop-up-body-color"},d){case 0:b.foregroundImage.imageHeight=156,b.foregroundImage.imageWidth=131,b.foregroundImageBackgroundPosition="-720px -687px";break;case 1:b.foregroundImage.imageHeight=165,b.foregroundImage.imageWidth=129,b.foregroundImageBackgroundPosition="-720px -853px";break;case 2:b.foregroundImage.imageHeight=146,b.foregroundImage.imageWidth=145,b.foregroundImageBackgroundPosition="-720px -1028px";break;case 3:b=this._createCourse4Popup()}this.popupView=c=MathInteractives.global.Theme2.PopUpBox.createPopup(b),c.$el.find(".theme2-pop-up-foreground").css({left:173,top:-111}),3===d&&c.$el.find(".theme2-pop-up-foreground").css({top:-81}),c.$el.find("#"+this.idPrefix+"theme2-pop-up-modal").addClass("bg-transparent"),c.$el.find(".theme2-pop-up-dialogue").addClass("bounceInDown").addClass("animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("bounceInDown").removeClass("animated")})},_onIncorrectAnimationEnd:function(a){var b,c,d;d="body-text",b={text:this.getMessage("misjudged-shot-pop-up-text",d),accText:this.getAccMessage("misjudged-shot-pop-up-text",d),containsTts:!0,closeCallback:{fnc:function(){this.player.enableAllHeaderButtons(!0),this.setFocus("canvas-holder-"+this.model.get("levelId")+"-acc-container")},scope:this},buttons:[{id:"okay-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("misjudged-shot-pop-up-text","okay-btn"),response:{isPositive:!0,buttonClicked:"okay-button"},baseClass:"course-pop-up-btn"}],width:462,title:this.getMessage("misjudged-shot-pop-up-text","title"),accTitle:this.getAccMessage("misjudged-shot-pop-up-text","title"),manager:this.manager,player:this.player,path:this.filePath,idPrefix:this.idPrefix,foregroundImageBackgroundPosition:"-700px -1220px",foregroundImage:{imageId:"sprites",imageHeight:108,imageWidth:135},titleTextColorClass:"course-pop-up-title-color",bodyTextColorClass:"course-pop-up-body-color"},this.canvasView.highLightIncorrectPath(this.animationView.ballIndex),a.isFalseAngle||this.canvasView.arrow&&this.canvasView.arrow.removeChildren(),c=MathInteractives.global.Theme2.PopUpBox.createPopup(b),c.$el.find(".theme2-pop-up-foreground").css({left:164,top:-75})},_renderBackGroundImage:function(){this.model.get("levelId");this.$el.find(".main-container").css({"background-image":"url("+this.getImagePath("course-bg-sprite")+")"})},_initializeDirectionText:function(){var a=this.model,b=a.get("levelId"),c={tabIndex:540,buttonTabIndex:600,containerId:this.idPrefix+"direction-text-"+b,idPrefix:this.idPrefix,player:this.player,manager:this.manager,path:this.filePath,text:this.getMessage("course-direction-text",0),accText:this.getAccMessage("course-direction-text",0),textColor:"#ffffff",containmentBGcolor:"rgba(57, 92, 43, 1)",showButton:!0,buttonText:this.getMessage("direction-text-button-text",0),btnTextColor:"#466E36",clickCallback:{fnc:this._onNewHoleClicked,scope:this},customClass:"mini-golf-direction-custom-class"};switch(b){case 0:c.textColor="#ffffff",c.containmentBGcolor="rgba(57, 92, 43, 1)",c.btnTextColor="#466E36",c.ttsBaseClass="white-button-tts",c.btnBaseClass="white-button";break;case 1:c.textColor="#ffffff",c.containmentBGcolor="rgba(0, 0, 0, 0.3)",c.btnTextColor="#222222",c.ttsBaseClass="course-2-new-hole-tts",c.btnBaseClass="course-2-new-hole";break;case 2:c.textColor="#5E573F",c.containmentBGcolor="rgba(255, 255, 255, 0.3)",c.btnTextColor="#FFFFFF",c.ttsBaseClass="course-3-new-hole-tts",c.btnBaseClass="course-3-new-hole";break;case 3:c.textColor="#6B6052",c.containmentBGcolor="rgba(255, 255, 255, 0.5)",c.btnTextColor="#FFFFFF",c.ttsBaseClass="course-4-new-hole-tts",c.btnBaseClass="course-4-new-hole"}this.directionTextView=MathInteractives.global.Theme2.DirectionText.generateDirectionText(c)},setFocusToDirectionText:function(){var a="direction-text-"+this.model.get("levelId")+"-direction-text-text";this.setFocus(a),this.updateFocusRect(a)},_addButtons:function(){var a,b,c;a=this.model,b=a.get("levelId"),c={player:this.player,manager:this.manager,idPrefix:this.idPrefix,path:this.filePath,data:{id:this.idPrefix+"reset-course-btn-"+b,type:MathInteractives.global.Theme2.Button.TYPE.RESET,height:38,width:45,tooltipText:this.getMessage("reset-btn",0)}},this.resetBtn=MathInteractives.global.Theme2.Button.generateButton(c),c.data={id:this.idPrefix+"take-shot-btn-holder-"+b,text:this.getMessage("take-shot-btn",0),type:MathInteractives.global.Theme2.Button.TYPE.TEXT,width:112,height:38},this.takeShotBtn=MathInteractives.global.Theme2.Button.generateButton(c),this.takeShotBtn.$el.on("click",$.proxy(this._onTakeShotClicked,this)),this.showhideTakeShotButton(!1),c.data={id:this.idPrefix+"skip-animation-btn-"+b,text:this.getMessage("skip-animation-btn-text",0),type:MathInteractives.global.Theme2.Button.TYPE.TEXT},this.skipAnimationBtn=MathInteractives.global.Theme2.Button.generateButton(c),this.showHideSkipAnimationButton(!1),this._positionTakeShotButton(),c.data={id:this.idPrefix+"course-score-card-btn-"+b,type:MathInteractives.global.Theme2.Button.TYPE.FA_ICONTEXT,colorType:MathInteractives.global.Theme2.Button.COLORTYPE.GREEN,text:this.getMessage("score-card-btn",0),height:38,width:150,textColor:"#FFFFFF",borderRadius:3,icon:{faClass:this.getFontAwesomeClass("trophy"),fontWeight:"normal",fontSize:18,fontColor:"#FFFFFF",height:22,width:25},textPosition:"right",baseClass:"course-score-card-btn"},this.scoreCardBtn=MathInteractives.global.Theme2.Button.generateButton(c),this.enableResetBtn(this.model.get("resetCourseButton"))},_positionTakeShotButton:function(){var a,b,c,d,e,f,g,h,i,j,k=this.takeShotBtn.$el,l=20,m=84;a=this.model,b=a.get("levelId"),c=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.HOLES["COURSE_"+b],d=c.POSITION,e=d.x,f=d.y,g=c.RADIUS,j=this.$(".skip-animation-btn-holder-"+b),h=f-g-3*l-2,i=e-k.width()/2,k.css({top:h,left:i}),i=2===b?i:e-m,j.css({top:h,left:i})},enableResetBtn:function(a){var b=MathInteractives.global.Theme2.Button;a===!1?this.model.set("resetCourseButton",!1):this.resetBtn.setButtonState(b.BUTTON_STATE_ACTIVE)},showhideTakeShotButton:function(a){var b="bounceIn";a?(this.takeShotBtn.showButton(),this.takeShotBtn.$el.addClass(b).addClass("animated"),this.canvasView.hideHole(!0)):(this.takeShotBtn.$el.removeClass(b).removeClass("animated"),this.takeShotBtn.hideButton())},showHideSkipAnimationButton:function(a){a?this.skipAnimationBtn.showButton():this.skipAnimationBtn.hideButton()},_setResetButtonInModel:function(){this.model.set("resetCourseButton",!0),this.enableResetBtn(!0)},_onTakeShotClicked:function(){this.showhideTakeShotButton(!1);var a=this;this.stopReading(),this.play("ball-hit"),$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")).css("z-index",1),$("#"+this.idPrefix+"game-canvas-"+this.model.get("levelId")+"-2").css("z-index",2);var b=this.model.get("timesPlayed")||0;b++,this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.ENABLE_CLEAR_BUTTON),this.model.set("timesPlayed",b),setTimeout(function(){a._launchBall()},200)},_launchBall:function(){var a=this;setTimeout(function(){a.animationView.launchBall()},100)},_onScoreCardBtnClick:function(){this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_BTN_CLICKED)},_onSkipAnimationBtnClick:function(){this.animationView.skipAnimation()},_onResetCourseBtnClick:function(){if(this.model.get("resetCourseButton")){var a={manager:this.manager,path:this.filePath,player:this.player,idPrefix:this.idPrefix,containsTts:!0,title:this.getMessage("reset-pop-up-text","title"),accTitle:this.getAccMessage("reset-pop-up-text","title"),text:this.getMessage("reset-pop-up-text","body-text"),accText:this.getAccMessage("reset-pop-up-text","body-text"),type:MathInteractives.global.Theme2.PopUpBox.CONFIRM,buttons:[{id:"okay-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("reset-pop-up-text","okay-btn"),response:{isPositive:!0,buttonClicked:"okay-button"}},{id:"cancel-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("reset-pop-up-text","cancel-btn"),response:{isPositive:!1,buttonClicked:"cancel-button"}}],closeCallback:{fnc:function(a){a.isPositive===!0?(this.canvasView.reset(),this.animationView.showHideAnimatingBall(!1),this.model.set("resetCourseButton",!1),this.enableResetBtn(!1),this.showhideTakeShotButton(!1),this.animationView.reset(),this.setFocus("main-container-"+this.model.get("levelId"))):this.setFocus("reset-course-btn-"+this.model.get("levelId"))
},scope:this}};this.stopReading(),MathInteractives.global.Theme2.PopUpBox.createPopup(a)}},_onCanvasInteraction:function(){this.canvasView.trivializeIncorrectPath(this.animationView.ballIndex),this.animationView.reset()},_onNewHoleClicked:function(){this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.NEW_HOLE_CLICKED)},destroyView:function(){this.model.get("obstaclesData").length&&this.canvasView.resetObstaclesSnappedBallCount(),this.remove()},_createCustomPopup:function(){var a=this.idPrefix,b=this.model.get("levelId"),c={player:this.player,manager:this.manager,filePath:this.filePath,idPrefix:a,emptyModalId:a+"custom-pop-up",bodyElemAccId:"course-"+b+"-got-it-button",dialogAccText:this.getMessage("course-"+b+"-custom-popup-text",0)};this.emptyModalView=MathInteractives.global.Theme2.EmptyModal.createEmptyModal(c)},_setCustomPopupProp:function(){var a=this.emptyModalView,b=this.model,c={idPrefix:this.idPrefix,courseNumber:b.get("levelId"),imageCount:b.get("customImageCountObject")},d=MathInteractives.Interactivities.MiniGolf.templates.customPopup(c).trim();a.setBody(d),this._createGotItButton(),this._setPopupImages()},_setPopupImages:function(){var a=this.getImagePath("sprites");this.emptyModalView.$(".image-cont").css({"background-image":"url("+a+")"})},_createGotItButton:function(){var a=this.idPrefix,b=null,c=this,d=this.emptyModalView,e={player:this.player,manager:this.manager,idPrefix:a,path:this.filePath,data:{id:a+"course-"+this.model.get("levelId")+"-got-it-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,colorType:MathInteractives.global.Theme2.Button.COLORTYPE.BLUE,text:this.getMessage("got-it-btn",0),baseClass:"one-time-popup-got-it-button"}};this.gotItButton=b=MathInteractives.global.Theme2.Button.generateButton(e),b.$el.on("click",function(){d.hideEmptyModel(),d.remove(),c.setFocusToDirectionText()})},_onCanvasAccKeyup:function(b){var c=null,d=a.KEYCODE,e=this.canvasView,f=null,g=null;b.keyCode===d.TAB&&(c=this.getMessage("carousel-view-slide-0-title",0),g=this.getMessage("canvas-acc-cont-text",0,[c]),Math.abs(e.ballViewList.length-2)>0&&(g+=this.getMessage("canvas-acc-cont-text",1)),f=e.obstacles.length,f>0&&(g+=this.getMessage("canvas-acc-cont-text",2,[f])),this.setAccMessage("canvas-holder-0-acc-container",g))}});var a=MathInteractives.Interactivities.MiniGolf.Models.Course}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Carousel=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,filePath:null,manager:null,player:null,prevSlideBtn:null,nextSlideBtn:null,initialize:function(){this.containerId=this.model.get("containerId");var a;this.initializeDefaultProperties(),a=MathInteractives.Interactivities.MiniGolf.templates.carousel({idPrefix:this.idPrefix,containerId:this.containerId}).trim(),this.$el.html(a),this._generateSlides(),this._addSlideChangeButtons(),this._getCurrentSlidePosition(),this.enableCorrectSlideChangeBtns(),this._onSlidingAnimationEnd()},_generateSlides:function(){var a,b,c,d,e,f=this.model.get("slidesData"),g=f.length,h=this.containerId,i=this.model.get("defaultSlideNumber")||0;for(a=0;g>a;a++)b=f.models[a],b.set({player:this.player,manager:this.manager,idPrefix:this.idPrefix,filePath:this.filePath,containerId:h}),a==i&&b.set("isCurrentSlide",!0),c=this.idPrefix+h+"-slide-"+a,d=$("<div>",{id:c,"class":h+"-slide-"+a+" "+h+"-slide"}).appendTo(this.$("."+h+"-slides-holder")),e=new MathInteractives.Interactivities.MiniGolf.Views.Slide({el:"#"+c,model:f.models[a]}).on(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CLICK_EVENT,$.proxy(this._onSlideClickEvent,this));this.loadScreen(this.model.get("screenId"))},_onSlideClickEvent:function(a){this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.CAROUSEL_SLIDE_CLICK_EVENT,a)},_addSlideChangeButtons:function(){var a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{id:this.idPrefix+this.containerId+"-prev-slide-btn",type:MathInteractives.global.Theme2.Button.TYPE.FA_ICON,height:60,width:40,icon:{faClass:this.getFontAwesomeClass("back"),fontWeight:"normal",fontSize:60,fontColor:"#F8DA32"},baseClass:this.containerId+"-prev-slide-btn"}};this.prevSlideBtn=MathInteractives.global.Theme2.Button.generateButton(a),a.data.id=this.idPrefix+this.containerId+"-next-slide-btn",a.data.icon.faClass=this.getFontAwesomeClass("next"),a.data.baseClass=this.containerId+"-next-slide-btn",this.nextSlideBtn=MathInteractives.global.Theme2.Button.generateButton(a),this.prevSlideBtn.$el.on("click",$.proxy(this.onPrevSlideBtnClick,this)),this.nextSlideBtn.$el.on("click",$.proxy(this.onNextSlideBtnClick,this))},onPrevSlideBtnClick:function(a){if(this.prevSlideBtn.$el.hasClass("clickEnabled")){this.stopReading(),a&&a.stopPropagation(),this._onSlidingAnimationStart(),this._enablePrevSlideBtn(!1),this._enableNextSlideBtn(!1);var b,c=this.model.get("slidesData"),d=(c.length,Number(this.model.get("defaultSlideNumber"))),e=d-1,f=this.model.get("oneSlideShiftDistance");c.models[d].set("isCurrentSlide",!1),c.models[e].set("isCurrentSlide",!0);var g=function(){$(this).trigger("slideAnimationEnd")};b=this.$("."+this.containerId+"-slides-holder"),MathInteractives.Common.Utilities.Models.BrowserCheck.isIE&&MathInteractives.Common.Utilities.Models.BrowserCheck.browserVersion<10?(b.css("left",-f*e),this._onPrevSlideAnimationEnd(e)):(this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_START),b.removeClass("carausel-right-"+d).removeClass("carausel-left-"+d).addClass("carausel-left-"+e).one("webkitAnimationEnd oanimationend msAnimationEnd animationend MSAnimationEnd",g).off("slideAnimationEnd").on("slideAnimationEnd",$.proxy(this._onPrevSlideAnimationEnd,this,e)))}else this._isAnimating||this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.ALREADY_AT_END)},onNextSlideBtnClick:function(a){if(this.nextSlideBtn.$el.hasClass("clickEnabled")){this.stopReading(),a&&a.stopPropagation(),this._onSlidingAnimationStart(),this._enableNextSlideBtn(!1),this._enablePrevSlideBtn(!1);var b,c=this.model.get("slidesData"),d=(c.length,Number(this.model.get("defaultSlideNumber"))),e=d+1,f=this.model.get("oneSlideShiftDistance");c.models[d].set("isCurrentSlide",!1),c.models[e].set("isCurrentSlide",!0);var g=function(){$(this).trigger("slideAnimationEnd")};b=this.$("."+this.containerId+"-slides-holder"),MathInteractives.Common.Utilities.Models.BrowserCheck.isIE&&MathInteractives.Common.Utilities.Models.BrowserCheck.browserVersion<10?(b.css("left",-f*e),this._onNextSlideAnimationEnd(e)):(this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_START),b.removeClass("carausel-right-"+d).removeClass("carausel-left-"+d).addClass("carausel-right-"+e).one("webkitAnimationEnd oanimationend msAnimationEnd animationend MSAnimationEnd",g).off("slideAnimationEnd").on("slideAnimationEnd",$.proxy(this._onNextSlideAnimationEnd,this,e)))}else this._isAnimating||this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.ALREADY_AT_END)},_onSlidingAnimationStart:function(){this.$("."+this.containerId+"-slide").removeClass("clickEnabled"),this._isAnimating=!0},_onSlidingAnimationEnd:function(){this._isAnimating=!1;var a=this.model.get("slidesData"),b=this.model.get("defaultSlideNumber"),c=a.models[b];c.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_END),this.$("."+this.containerId+"-slide").addClass("clickEnabled")},_onPrevSlideAnimationEnd:function(a){this.model.set("defaultSlideNumber",a),this.enableCorrectSlideChangeBtns(),this._onSlidingAnimationEnd(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_END,{prevSlide:!0,newSlideNumber:a})},_onNextSlideAnimationEnd:function(a){this.model.set("defaultSlideNumber",a),this.enableCorrectSlideChangeBtns(),this._onSlidingAnimationEnd(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_END,{prevSlide:!1,newSlideNumber:a})},_enablePrevSlideBtn:function(a){var b=MathInteractives.global.Theme2.Button,c=this.prevSlideBtn,d=c.$el;a===!1?(this.prevSlideBtn.setButtonState(b.BUTTON_STATE_DISABLED),d.hide(),this.isMobile||d.css({cursor:"default"})):(this.prevSlideBtn.setButtonState(b.BUTTON_STATE_ACTIVE),d.show(),this.isMobile||d.css({cursor:"pointer"}))},_enableNextSlideBtn:function(a){var b=MathInteractives.global.Theme2.Button,c=this.nextSlideBtn,d=c.$el;a===!1?(d.hide(),this.nextSlideBtn.setButtonState(b.BUTTON_STATE_DISABLED),this.isMobile||d.css({cursor:"default"})):(d.show(),this.nextSlideBtn.setButtonState(b.BUTTON_STATE_ACTIVE),this.isMobile||d.css({cursor:"pointer"}))},enableCorrectSlideChangeBtns:function(){var a=Number(this.model.get("defaultSlideNumber")),b=this.model.get("slidesData"),c=b.length;switch(a){case 0:this._enablePrevSlideBtn(!1),this._enableNextSlideBtn();break;case c-1:this._enablePrevSlideBtn(),this._enableNextSlideBtn(!1);break;default:this._enablePrevSlideBtn(),this._enableNextSlideBtn()}this.updateSlideNumberIndicator()},updateSlideNumberIndicator:function(){var a=Number(this.model.get("defaultSlideNumber")),b=this.model.get("slidesData"),c=b.length;this.setMessage(this.containerId+"-slide-number-indicator",this.getMessage(this.containerId+"-slide-number-indicator",0,[a+1,c]))},_getCurrentSlidePosition:function(){var a,b=this.model.get("defaultSlideNumber"),c=this.model.get("oneSlideShiftDistance"),d=this.$("."+this.containerId+"-slides-holder"),e=this.model.get("slidesData"),f=e.length;for(a=0;f>a;a++)d.removeClass("carausel-right-"+a).removeClass("carausel-left-"+a);d.css("left",-c*b)},changeASlide:function(a,b){var c=this.model.get("slidesData"),d=c.models[a];d.set({templateModule:b.template||d.get("templateModule"),templateName:b.template||d.get("templateName"),data:b.data||d.get("data")}),d.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.UPDATE_SLIDE),this.unloadScreen(this.model.get("screenId")),this.loadScreen(this.model.get("screenId")),this.updateSlideNumberIndicator()},updateASlideData:function(a,b){var c=this.model.get("slidesData"),d=c.models[a],e=d.get("data"),f=$.extend(!0,{},e,b);d.set("data",f),d.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.UPDATE_SLIDE)},updateAllSlides:function(a){var b,c,d,e=this.model.get("slidesData"),f=(e.length,a.length);for(d=0;f>d;d++)b=e.models[d],c=a[d],b.set({templateModule:c.template||b.get("templateModule"),templateName:c.template||b.get("templateName"),data:c.data||b.get("data")}),b.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.UPDATE_SLIDE);this.loadScreen(this.model.get("screenId")),this.updateSlideNumberIndicator(),this._getCurrentSlidePosition(),this.enableCorrectSlideChangeBtns()},updateDefaultSlideNumber:function(){var a=Number(this.model.get("defaultSlideNumber")),b=a+1,c=this.model.get("slidesData");c.models[a].set("isCurrentSlide",!1),c.models[b].set("isCurrentSlide",!0),this.model.set("defaultSlideNumber",b)}},{}),MathInteractives.Interactivities.MiniGolf.Views.Slide=MathInteractives.Common.Player.Views.Base.extend({initialize:function(){this.initializeDefaultProperties(),this.render(),this.model.on(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.UPDATE_SLIDE,$.proxy(this._updateSlide,this))},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},render:function(){var a,b=this.model.get("template"),c=this.model.get("data");c.idPrefix=this.idPrefix,c.containerId=this.model.get("containerId"),a=b(c).trim(),this.$el.html(a),this._highlightCurrentSlide(),this._attachEvents(!1),this._attachEvents()},_attachEvents:function(a){var b=this.model,c=MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CHANGE_ANIMATION_END;a===!1?(this.$el.off("click"),b.off("change:isCurrentSlide"),b.off(c)):(this.$el.off("click").on("click",$.proxy(this._onSlideElClick,this)),b.on("change:isCurrentSlide",$.proxy(this._highlightCurrentSlide,this)),b.on(c,$.proxy(this.addCursorIfCurrentSlide,this)))},_onSlideElClick:function(){if(this.$el.hasClass("clickEnabled")){this.stopReading();var a,b;a=this.model.get("data"),b={slideNumber:a.slideNumber,isCurrentSlide:this.$el.hasClass("current-slide"),isUnlocked:!!a.unlocked},this.trigger(MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS.SLIDE_CLICK_EVENT,b)}},_highlightCurrentSlide:function(){this.model.get("isCurrentSlide")?(MathInteractives.Common.Utilities.Models.BrowserCheck.isIE&&MathInteractives.Common.Utilities.Models.BrowserCheck.browserVersion<10&&this.$el.addClass("current-slide-ie"),this.$el.addClass("current-slide")):(MathInteractives.Common.Utilities.Models.BrowserCheck.isIE&&MathInteractives.Common.Utilities.Models.BrowserCheck.browserVersion<10&&this.$el.removeClass("current-slide-ie"),this.$el.removeClass("current-slide").removeClass("pointer-cursor"))},addCursorIfCurrentSlide:function(){this.model.get("isCurrentSlide")&&!this.isMobile&&this.model.get("data").unlocked&&this.$el.addClass("pointer-cursor")},_updateSlide:function(){this._attachEvents(!1),this.render()}})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.CarouselContainer=MathInteractives.Common.Player.Views.Base.extend({courseModelClassName:null,idPrefix:null,filePath:null,manager:null,player:null,scoreCardBtn:null,carouselView:null,events:{"click .carousel-page-score-card-btn.clickEnabled":"_onScoreCardBtnClick"},initialize:function(){var a=null;this.courseModelClassName=a=MathInteractives.Interactivities.MiniGolf.Models.Course;var b;this.initializeDefaultProperties(),b=MathInteractives.Interactivities.MiniGolf.templates.carouselContainer({idPrefix:this.idPrefix}).trim(),this.$el.html(b),this._addCarouselDirectionText(),this._addScoreCardButton(),this._generateCarousel(),this.render(),this.loadScreen("carousel-page"),this._attachEventsOnCarousel(),this.player.bindTabChange(function(){this.updateFocusRect("carousel-page-direction-text-holder-direction-text-text")},this,1)},initializeDefaultProperties:function(){this._superwrapper("initializeDefaultProperties",arguments),this.isMobile=MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile},render:function(){this._addImagesToSlides()},_addCarouselDirectionText:function(){var a,b;a=this.idPrefix+"carousel-page-direction-text-holder",b={tabIndex:510,text:this.getMessage("carousel-direction-text",0),accText:this.getAccMessage("carousel-direction-text",0),idPrefix:this.idPrefix,containerId:a,manager:this.manager,player:this.player,path:this.filePath,ttsColorType:MathInteractives.global.Theme2.Button.COLORTYPE.TTS_WHITE,textColor:"#ffffff",containmentBGcolor:"rgba(57, 92, 43, 1)",customClass:"mini-golf-direction-custom-class"},MathInteractives.global.Theme2.DirectionText.generateDirectionText(b)},setFocusToDirectionText:function(){this.setFocus("carousel-page-direction-text-holder-direction-text-text")},_addScoreCardButton:function(){var a;a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{id:this.idPrefix+"carousel-page-score-card-btn",type:MathInteractives.global.Theme2.Button.TYPE.FA_ICONTEXT,colorType:MathInteractives.global.Theme2.Button.COLORTYPE.GREEN,text:this.getMessage("score-card-btn",0),height:38,width:150,textColor:"#FFFFFF",borderRadius:3,icon:{faClass:this.getFontAwesomeClass("trophy"),fontWeight:"normal",fontSize:18,fontColor:"#FFFFFF",height:22,width:25},textPosition:"right",baseClass:"carousel-page-score-card-btn"}},this.scoreCardBtn=MathInteractives.global.Theme2.Button.generateButton(a)},_onScoreCardBtnClick:function(){this.stopReading(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_BTN_CLICKED)},_generateCarousel:function(){var a,b,c=this.model.get("courses");b=this.model.get("carouselModel"),a={containerId:"carousel-view",idPrefix:this.idPrefix,player:this.player,manager:this.manager,filePath:this.filePath,screenId:"carousel-screen",slidesData:[{templateModule:"MiniGolf",templateName:"slide",data:{slideNumber:0,unlocked:!0,timesPlayed:c[0].get("timesPlayed")||0,holesInOne:c[0].get("holesInOne")||0}},{templateModule:"MiniGolf",templateName:"slide",data:{slideNumber:1,unlocked:!1,timesPlayed:c[1].get("timesPlayed")||0,holesInOne:c[1].get("holesInOne")||0}},{templateModule:"MiniGolf",templateName:"slide",data:{slideNumber:2,unlocked:!1,timesPlayed:c[2].get("timesPlayed")||0,holesInOne:c[2].get("holesInOne")||0}},{templateModule:"MiniGolf",templateName:"slide",data:{slideNumber:3,unlocked:!1,timesPlayed:c[3].get("timesPlayed")||0,holesInOne:c[3].get("holesInOne")||0}}],defaultSlideNumber:this.model.get("currentCourseLevel"),oneSlideShiftDistance:MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.SLIDE_DISTANCE},b?(b.player=this.player,b.manager=this.manager,b.filePath=this.filePath,b.idPrefix=this.idPrefix,this.carouselModel=new MathInteractives.Interactivities.MiniGolf.Models.Carousel(b)):this.carouselModel=new MathInteractives.Interactivities.MiniGolf.Models.Carousel(a),this.carouselView=new MathInteractives.Interactivities.MiniGolf.Views.Carousel({el:"#"+this.idPrefix+"carousel-view",model:this.carouselModel}),this.model.set("carouselModel",this.carouselModel)},_attachEventsOnCarousel:function(){var a;a=MathInteractives.Interactivities.MiniGolf.Models.Carousel.EVENTS,this.carouselView.on(a.CAROUSEL_SLIDE_CLICK_EVENT,$.proxy(this._onCarouselSlideClick,this)).on(a.SLIDE_CHANGE_ANIMATION_START,$.proxy(this._onSlideChangeAnimationStart,this)).on(a.SLIDE_CHANGE_ANIMATION_END,$.proxy(this._onSlideChangeAnimationEnd,this)).on(a.ALREADY_AT_END,$.proxy(this._onAttemptingSlideChangeAtCarouselEnd,this)),this.$(".carousel-view-carousel-acc-div").off("keyup").on("keyup",$.proxy(this._onCarouselAccDivKeyUp,this)).off("keydown").on("keydown",$.proxy(this._onCarouselAccDivKeyDown,this))},_onAttemptingSlideChangeAtCarouselEnd:function(){this._setCarouselText({addPrefix:!0,endOfSlide:!0})},_onCarouselAccDivKeyDown:function(a){a=a?a:window.event;var b=a.keyCode?a.keyCode:a.which;9===b&&this._setCarouselText({setFocus:!1})},_onCarouselAccDivKeyUp:function(a){a=a?a:window.event;var b=this.model,c=a.keyCode?a.keyCode:a.which;switch(c){case 13:case 32:this.$(".current-slide").trigger("click");break;case 37:this.carouselView.onPrevSlideBtnClick();break;case 39:this.carouselView.onNextSlideBtnClick();break;case 9:b.get("animationPlaying")===!0&&b.set("allowSlideSelfFocus",!1)}},_onSlideChangeAnimationStart:function(){var a=!0;this._showHideCanvasCont(a),this.enableAllHeaderButtons(!1),this.model.set("animationPlaying",!0),this.play("swoosh-sound")},_showHideCanvasCont:function(a){var b=this.model;a?this.setFocus("carousel-view-carousel-temp-focus-div"):b.get("allowSlideSelfFocus")===!0?this.setFocus(".carousel-view-carousel-acc-div"):b.set("allowSlideSelfFocus",!1)},enableAllHeaderButtons:function(a){var b=MathInteractives.global.Theme2.Button;this.player.enableAllHeaderButtons(a),this.scoreCardBtn.setButtonState(a===!0?b.BUTTON_STATE_ACTIVE:b.BUTTON_STATE_DISABLED)},_onCarouselSlideClick:function(a){a.isCurrentSlide&&(a.isUnlocked?this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.CURRENT_SLIDE_CLICKED,a):this._setCarouselText({locked:!0}))},_onSlideChangeAnimationEnd:function(a){this.enableAllHeaderButtons(!0);var b=this.model,c=a.newSlideNumber;b.set("animationPlaying",!1),b.set("currentCourseLevel",c),this.$(".course-view-container").hide(),this.$(".course-"+c+"-view-container").show(),this._setCarouselText({addPrefix:!0})},_setCarouselText:function(a){var b,c,d=Number(this.model.get("currentCourseLevel")),e=this.model.get("courses")[d],f=this.getAccMessage("carousel-view-slide-"+d+"-title",0),g="carousel-view-carousel-acc-div",h="";this._showHideCanvasCont(),a.locked?b=this.getAccMessage(g,"locked-course",[d+1,f]):(a.addPrefix&&(0==d?(c=this.getAccMessage(g,"first"),h=this.getAccMessage(g,1,[c])):3==d&&(c=this.getAccMessage(g,"last"),h=this.getAccMessage(g,1,[c]))),b=h+this.getAccMessage(g,0,[d+1,f])),this.setAccMessage(g,b),a.setFocus!==!1&&(this.setFocus("carousel-view-carousel-temp-focus-div"),this.setFocus(g)),e.get("customPopupShown")!==!1||a.locked||a.endOfSlide||this._setCarouselTextOnKeyUp()},_setCarouselTextOnKeyUp:function(){var a=this.model,b=a.get("currentCourseLevel"),c=a.get("courses")[b],d=(c.get("customPopupShown"),"carousel-view-carousel-acc-div"),e=null,f=null;e=this.getAccMessage("carousel-view-slide-"+b+"-title",0),f=this.getAccMessage(d,0,[b+1,e])+this.getMessage(d,"one-time-popup-text"),this.setAccMessage(d,f),this.setFocus("carousel-view-carousel-temp-focus-div"),this.setFocus(d)},_addImagesToSlides:function(){var a,b,c,d,e,f;for(f=this.carouselModel.get("slidesData").length,a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=a.SPRITE_POSITIONS.SLIDES_BG_IMAGE,c=0;f>c;c++)d=this.getSpritePartBase64URL("sprites",b["COURSE_"+c].LEFT,b["COURSE_"+c].TOP,b["COURSE_"+c].WIDTH,b["COURSE_"+c].HEIGHT),e=this.$(".carousel-view-slide-"+c).css({"background-image":"url("+d+")"});this._addLockedModalImage()},_addLockedModalImage:function(){var a,b,c;c=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=c.SPRITE_POSITIONS.SLIDES_BG_IMAGE,a=this.getSpritePartBase64URL("sprites",b.LOCKED_COURSE.LEFT,b.LOCKED_COURSE.TOP,b.LOCKED_COURSE.WIDTH,b.LOCKED_COURSE.HEIGHT),this.isMobile||this.$(".carousel-view-slide-lock-modal").addClass("default-cursor"),this.$(".carousel-view-slide-lock-modal").css({"background-image":"url("+a+")"}),this.$(".carousel-view-slide-lock-symbol").addClass(this.getFontAwesomeClass("lock"))},updateAllSlides:function(a){a||(a=this.getSlidesDataFromModel()),this.carouselView.updateAllSlides(a),this._addLockedModalImage(),this._setCarouselText({setFocus:!1})},updateDefaultSlideNumberParent:function(){this.carouselView.updateDefaultSlideNumber()},getSlidesDataFromModel:function(){var a,b,c=[],d=null,e=this.courseModelClassName.COURSE_TYPE.TYPE_3,f=this.model.get("courses");for(a=0;a<MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.NUMBER_OF_COURSES;a++)d=null,d=f[a],b={templateModule:"MiniGolf",templateName:"slide",data:{slideNumber:a,unlocked:d.get("state")!==e,timesPlayed:d&&d.get("timesPlayed")||0,holesInOne:d&&d.get("holesInOne")||0}},c.push(b);return c}},{})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.PlayGame=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,filePath:null,manager:null,player:null,courseViewArray:[],initialize:function(){this.initializeDefaultProperties(),this.loadScreen("buttons-text"),this.loadScreen("pop-up-texts"),this.loadScreen("direction-texts"),this._generateChildViews(),this.model.get("currentView")===MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.CURRENT_VIEW.COURSE&&this.createCourseView({slideNumber:this.model.get("currentCourseLevel")}),this.render(),this.model.on("change:currentView",$.proxy(this.onCurrentViewChange,this)),this._setHelpElements()},render:function(){this.onCurrentViewChange(),this.model.get("scoreCardVisible")||this._scoreCardContainerView.closeScoreCard()},_generateChildViews:function(){this._generateCarouselPage(),this._generateScoreCard()},_generateCarouselPage:function(){this._carouselContainerView=new MathInteractives.Interactivities.MiniGolf.Views.CarouselContainer({el:"#"+this.idPrefix+"carousel-page-container",model:this.model}),this._attachEventsOnCarouselContainer()},_attachEventsOnCarouselContainer:function(a){var b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS;a===!1?this._carouselContainerView.off(b.SCORECARD_BTN_CLICKED).off(b.CURRENT_SLIDE_CLICKED):(this._carouselContainerView.on(b.SCORECARD_BTN_CLICKED,$.proxy(this._showScoreCard,this)),this._carouselContainerView.on(b.CURRENT_SLIDE_CLICKED,$.proxy(this._onCurrentSlideClicked,this)))},_attachCommonEventsOfCourses:function(a){var b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;a.off(b.EVENTS.NEW_HOLE_CLICKED).on(b.EVENTS.NEW_HOLE_CLICKED,$.proxy(function(){this.model.set("currentView",b.CURRENT_VIEW.CAROUSEL)},this)).off(b.EVENTS.SCORECARD_BTN_CLICKED).on(b.EVENTS.SCORECARD_BTN_CLICKED,$.proxy(this._showScoreCard,this)).off(b.EVENTS.ENABLE_CLEAR_BUTTON).on(b.EVENTS.ENABLE_CLEAR_BUTTON,$.proxy(function(){this.model.set("clearScoreCard",!0)},this)).off(b.EVENTS.UNLOCK_NEXT_COURSE).on(b.EVENTS.UNLOCK_NEXT_COURSE,$.proxy(this._unlockNextCourse,this)).off(b.EVENTS.NEXT_HOLE).on(b.EVENTS.NEXT_HOLE,$.proxy(this._onNextHoleClicked,this))},_onNextHoleClicked:function(){var a=Number(this.model.get("currentCourseLevel"));this.model.set("currentCourseLevel",a+1),this._carouselContainerView.updateDefaultSlideNumberParent(),this.model.get("currentView")===MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.CURRENT_VIEW.COURSE&&this.createCourseView({slideNumber:a+1}),this.courseViewArray[a]&&(this.courseViewArray[a].destroyView(),delete this.courseViewArray[a])},_unlockNextCourse:function(){var a=MathInteractives.Interactivities.MiniGolf.Models,b=a.MiniGolfData.NUMBER_OF_COURSES,c=Number(this.model.get("currentCourseLevel")),d=a.Course.COURSE_TYPE,e=this.model.get("courses"),f=e[c+1];c!==b-1&&(f.get("state"===d.TYPE_3)&&f.set("state",d.TYPE_2),this.courseViewArray[c].isNextCourseLocked&&e[c].get("timesPlayed")>1&&(this.courseViewArray[c].isNextCourseLocked=!1))},_showScoreCard:function(){this._scoreCardContainerView.showScoreCard()},_onCurrentSlideClicked:function(a){this.model.set("currentView",MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.CURRENT_VIEW.COURSE),this.createCourseView(a)},createCourseView:function(a){var b=a.slideNumber,c=this.idPrefix,d=this.courseViewArray,e=$('<div class="level-'+b+'">'),f=this.$("#"+c+"courses-view-container"),g=null,h=null;e.attr("id",c+"course-"+b+"-view-container"),d[b]&&(d[b].remove(),delete d[b]),f.append(e),h=this.model.getCourseModel(b),h.set("levelId",b),d[b]=g=new MathInteractives.Interactivities.MiniGolf.Views["Course"+(b+1)]({el:e,model:h}),b+1!=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.NUMBER_OF_COURSES&&this.model.getCourseModel(b+1).get("state")==MathInteractives.Interactivities.MiniGolf.Models.Course.COURSE_TYPE.TYPE_3&&(d[b].isNextCourseLocked=!0),this._attachCommonEventsOfCourses(g)},_generateScoreCard:function(){this._scoreCardContainerView=new MathInteractives.Interactivities.MiniGolf.Views.ScoreCardContainer({el:"#"+this.idPrefix+"score-card-container",model:this.model}),this._scoreCardContainerView.on(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_CLEARED,$.proxy(this._onScoreCardCleared,this)),this._scoreCardContainerView.on(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_CLOSED,$.proxy(this._onScoreCardClose,this))},_onScoreCardClose:function(){var a,b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,c=this.model.get("currentView"),d=this.model.get("currentCourseLevel"),e=this.courseViewArray[d];e&&(a=e.canvasView,a&&a.enableDisableObstacleDispenserHelpElements&&a.enableDisableObstacleDispenserHelpElements()),this.setFocus(c===b.CURRENT_VIEW.CAROUSEL?"carousel-page-score-card-btn":"course-score-card-btn-"+d)},_onScoreCardCleared:function(){var a,b=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,c=this.model.get("courses");for(a=0;a<c.length;a++)c[a].set("toResetCourse",!1);this._carouselContainerView.updateAllSlides(),this.model.set("currentView",b.CURRENT_VIEW.CAROUSEL)},onCurrentViewChange:function(){var a,b,c,d;a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.CURRENT_VIEW,b=this.model.get("currentView"),d=this.model.get("currentCourseLevel"),c=this.courseViewArray[d],b===a.CAROUSEL?(this._carouselContainerView.updateAllSlides(),this.$(".carousel-page-container").show(),this._carouselContainerView.setFocusToDirectionText(),c&&c.destroyView(),this.$(".courses-view-container").hide()):(this.$(".carousel-page-container").hide(),this.$(".courses-view-container").show())},_setHelpElements:function(){var a=this.model.get("helpElements");a.push({elementId:"carousel-view",helpId:"carousel-view-help",fromElementCenter:!0,msgId:"0",hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"carousel-page-score-card-btn-holder",helpId:"score-card-btn-help",msgId:"0",position:"top",dynamicArrowPosition:!0},{elementId:"canvas-holder-0",helpId:"ball-help",msgId:"mat-ball",fromElementCenter:!0,offset:{x:-82,y:-148},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-0",helpId:"ball-help",msgId:"start-ball",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,tooltipWidth:250,dynamicArrowPosition:!0},{elementId:"canvas-holder-0",helpId:"ball-help",msgId:"sticky-slider",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-0",helpId:"ball-help",msgId:"destination-ball",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-0",helpId:"ball-help",msgId:"hole",fromElementCenter:!0,offset:{x:263,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-1",helpId:"ball-help",msgId:"mat-ball",fromElementCenter:!0,offset:{x:-88,y:-153},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-1",helpId:"ball-help",msgId:"start-ball",tooltipWidth:250,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-1",helpId:"ball-help",msgId:"sticky-slider",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-1",helpId:"ball-help",msgId:"destination-ball",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-1",helpId:"ball-help",msgId:"hole",fromElementCenter:!0,offset:{x:220,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-2",helpId:"ball-help",msgId:"mat-ball",fromElementCenter:!0,offset:{x:-88,y:-150},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-2",helpId:"ball-help",msgId:"start-ball",tooltipWidth:250,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-2",helpId:"ball-help",msgId:"sticky-slider",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-2",helpId:"ball-help",msgId:"destination-ball",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-2",helpId:"ball-help",msgId:"hole",fromElementCenter:!0,offset:{x:190,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"ball-help",msgId:"mat-ball",fromElementCenter:!0,offset:{x:-88,y:-150},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"ball-help",msgId:"start-ball",tooltipWidth:250,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"ball-help",msgId:"sticky-slider",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"ball-help",msgId:"destination-ball",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"ball-help",msgId:"hole",fromElementCenter:!0,offset:{x:130,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-1",helpId:"obstacles-help",msgId:"holder",position:"right",dynamicArrowPosition:!0,tooltipWidth:330},{elementId:"obstacles-holder-1",helpId:"obstacles-help",msgId:"placed-obstacle",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-1",helpId:"obstacles-help",msgId:"multiple-obstacles",tooltipWidth:258,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-2",helpId:"obstacles-help",msgId:"holder",position:"right",dynamicArrowPosition:!0,tooltipWidth:330},{elementId:"obstacles-holder-2",helpId:"obstacles-help",msgId:"placed-obstacle",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-2",helpId:"obstacles-help",msgId:"multiple-obstacles",tooltipWidth:258,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-3",helpId:"obstacles-help",msgId:"holder",position:"right",dynamicArrowPosition:!0,tooltipWidth:330},{elementId:"obstacles-holder-3",helpId:"obstacles-help",msgId:"placed-obstacle",fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"obstacles-holder-3",helpId:"obstacles-help",msgId:"multiple-obstacles",tooltipWidth:258,fromElementCenter:!0,offset:{x:0,y:0},hideArrowDiv:!0,dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"bridge-help",msgId:"bridge",fromElementCenter:!0,offset:{x:130,y:-31},dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"bridge-help",msgId:"bridge-wall",fromElementCenter:!0,offset:{x:130,y:-31},dynamicArrowPosition:!0},{elementId:"canvas-holder-3",helpId:"bridge-help",msgId:"bridge-movement",fromElementCenter:!0,offset:{x:130,y:-31},dynamicArrowPosition:!0},{elementId:"reset-course-btn-holder-0",helpId:"reset-course-btn-holder-help",position:"right",msgId:"0",tooltipWidth:250,dynamicArrowPosition:!0},{elementId:"reset-course-btn-holder-1",helpId:"reset-course-btn-holder-help",position:"right",msgId:"0",tooltipWidth:250,dynamicArrowPosition:!0},{elementId:"reset-course-btn-holder-2",helpId:"reset-course-btn-holder-help",position:"right",msgId:"0",tooltipWidth:250,dynamicArrowPosition:!0},{elementId:"reset-course-btn-holder-3",helpId:"reset-course-btn-holder-help",position:"right",msgId:"0",tooltipWidth:250,dynamicArrowPosition:!0},{elementId:"course-score-card-btn-0",helpId:"score-card-btn-help",msgId:"0",position:"top",dynamicArrowPosition:!0},{elementId:"course-score-card-btn-1",helpId:"score-card-btn-help",msgId:"0",position:"top",dynamicArrowPosition:!0},{elementId:"course-score-card-btn-2",helpId:"score-card-btn-help",msgId:"0",position:"top",dynamicArrowPosition:!0},{elementId:"course-score-card-btn-3",helpId:"score-card-btn-help",msgId:"0",position:"top",dynamicArrowPosition:!0},{elementId:"direction-text-0-direction-text-buttonholder",helpId:"new-course-btn-help",msgId:"0",position:"bottom",dynamicArrowPosition:!0},{elementId:"direction-text-1-direction-text-buttonholder",helpId:"new-course-btn-help",msgId:"0",position:"bottom",dynamicArrowPosition:!0},{elementId:"direction-text-2-direction-text-buttonholder",helpId:"new-course-btn-help",msgId:"0",position:"bottom",dynamicArrowPosition:!0},{elementId:"direction-text-3-direction-text-buttonholder",helpId:"new-course-btn-help",msgId:"0",position:"bottom",dynamicArrowPosition:!0})
}},{})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.ScoreCardContainer=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,filePath:null,manager:null,player:null,$playerModalDiv:null,events:{"click .score-card-clear-button.clickEnabled":"_onClearAllDataBtnClick","click .score-card-close-button.clickEnabled":"closeScoreCard","click .score-card-back-button.clickEnabled":"closeScoreCard"},initialize:function(){this.initializeDefaultProperties(),this.render(),this.loadScreen("score-card"),this._attachAccEvents()},render:function(){this._generateScoreCard()},_attachAccEvents:function(){this.$(".score-card-title").on("keydown",$.proxy(this._onTitleKeyDown,this));this.$(".score-card-main-panel").off("keydown").on("keydown",$.proxy(this._onScoreCardContainerKeydown,this))},_onTitleKeyDown:function(a){a=a?a:window.event;var b=a.keyCode?a.keyCode:a.which;9!==b||a.shiftKey||(this.setFocus("score-card-main-panel"),a.preventDefault())},_onScoreCardContainerKeydown:function(a){a=a?a:window.event;var b=a.keyCode?a.keyCode:a.which;9===b&&a.shiftKey&&(this.setFocus("score-card-title"),a.preventDefault())},_generateScoreCard:function(){var a,b,c=$('<div id="'+this.idPrefix+'scorecard-modal-div-player" class="scorecard-modal-div-player">');this.$playerModalDiv=c,c.hide(),a=MathInteractives.Interactivities.MiniGolf.templates.scoreCard({idPrefix:this.idPrefix}).trim(),this.$el.html(a),this.player.$el.append(c);var b=this.getJson("baseURL");this.$(".score-card-title-icon").css({"background-image":"url("+b.scorecardIcon+")",height:17,width:19}),this._addButtonsOnScoreCard(),this._addScoreDOM(),this._addCurrentScores()},_addButtonsOnScoreCard:function(){var a;a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{id:this.idPrefix+"score-card-back-button",type:MathInteractives.global.Theme2.Button.TYPE.FA_ICONTEXT,text:this.getMessage("scorecard-back-btn",0),textColor:"#FFFFFF",borderRadius:3,width:105,icon:{faClass:this.getFontAwesomeClass("arrow-left"),fontWeight:"normal",fontSize:18,fontColor:"#FFFFFF",height:18,width:25},textPosition:"right"}},this.scoreCardBackBtn=MathInteractives.global.Theme2.Button.generateButton(a),a.data={id:this.idPrefix+"score-card-clear-button",type:MathInteractives.global.Theme2.Button.TYPE.FA_ICONTEXT,text:this.getMessage("clear-scorecard-btn",0),width:152,height:38,textColor:"#FFFFFF",borderRadius:3,icon:{faClass:this.getFontAwesomeClass("trash"),fontWeight:"normal",fontSize:18,fontColor:"#FFFFFF",height:18,width:25},textPosition:"right"},this.clearScoreDataBtn=MathInteractives.global.Theme2.Button.generateButton(a),a.data={id:this.idPrefix+"score-card-close-button",type:MathInteractives.global.Theme2.Button.TYPE.FA_ICON,height:18,width:15,icon:{faClass:this.getFontAwesomeClass("close"),fontWeight:"bold",fontSize:18,fontColor:"#4c1787"},baseClass:"score-card-close-button",tooltipText:this.getMessage("score-card-close-btn-text",0),tooltipType:MathInteractives.Common.Components.Theme2.Views.Tooltip.ARROW_TYPE.TOP_MIDDLE},this.closeScoreCardBtn=MathInteractives.global.Theme2.Button.generateButton(a)},showScoreCard:function(){this.player.enableHelp(!1),this._addCurrentScores(),this.$el.show(),this.$playerModalDiv.show(),this.model.set("scoreCardVisible",!0),this.enableAllHelpElements(!1),this.updateFocusRect("score-card-title"),this.updateFocusRect("score-card-main-panel"),this.setFocus("score-card-title")},closeScoreCard:function(){this.player.enableHelp(!0),this.$el.hide(),this.$playerModalDiv.hide(),this.model.set("scoreCardVisible",!1),this.enableAllHelpElements(!0),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_CLOSED)},_onClearAllDataBtnClick:function(){var a={manager:this.manager,path:this.filePath,player:this.player,idPrefix:this.idPrefix,containsTts:!0,title:this.getMessage("clear-scorecard-pop-up-text","title"),accTitle:this.getAccMessage("clear-scorecard-pop-up-text","title"),text:this.getMessage("clear-scorecard-pop-up-text","body-text"),accText:this.getAccMessage("clear-scorecard-pop-up-text","body-text"),type:MathInteractives.global.Theme2.PopUpBox.CONFIRM,bodyTextColorClass:"custom-popup-class",buttons:[{id:"okay-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("clear-scorecard-pop-up-text","okay-btn"),response:{isPositive:!0,buttonClicked:"okay-button"}},{id:"cancel-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("clear-scorecard-pop-up-text","cancel-btn"),response:{isPositive:!1,buttonClicked:"cancel-button"}}],closeCallback:{fnc:function(a){a.isPositive===!0?(this.clearAllData(),this.disableClearButton(),this.setFocus("score-card-main-panel")):this.setFocus("score-card-clear-button")},scope:this}};MathInteractives.global.Theme2.PopUpBox.createPopup(a)},disableClearButton:function(){var a=MathInteractives.global.Theme2.Button;this.clearScoreDataBtn.setButtonState(a.BUTTON_STATE_DISABLED),this.model.set("clearScoreCard",!1)},clearAllData:function(){this.clearScores(),this._lockAllCourses(),this._addCurrentScores(),this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.SCORECARD_CLEARED)},_lockAllCourses:function(){var a,b=this.model.get("courses"),c=b.length,d=MathInteractives.Interactivities.MiniGolf.Models.Course.COURSE_TYPE;for(b[0].set("state",d.TYPE_2),a=1;c>a;a++)b[a].set("state",d.TYPE_3)},clearScores:function(){var a,b=this.model.get("courses"),c=b.length;for(a=0;c>a;a++)b[a].set("timesPlayed",0),b[a].set("holesInOne",0)},_addScoreDOM:function(){var a,b,c=this.$(".score-card-levels-holder"),d=this.model.get("courses"),e=d.length;for(a=0;e>a;a++)b=MathInteractives.Interactivities.MiniGolf.templates.courseScoreCard({idPrefix:this.idPrefix,courseNumber:a}).trim(),c.append(b),0!=a&&(this.$(".course-"+a+"-lock-symbol").addClass(this.getFontAwesomeClass("lock")),this.$(".course-"+a+"-unlocked").hide());this.$(".course-0-locked").hide(),this.$(".course-trophy-holder").css({"background-image":"url("+this.getImagePath("sprites")+")"}).addClass("locked-trophy")},_addCurrentScores:function(){var a,b,c,d,e,f,g=this.model.get("courses"),h=g.length,i="score-card-main-panel",j=this.getAccMessage("score-card-title",0),k="";for(this.model.get("clearScoreCard")?(this.enableClearButton(),j+=this.getAccMessage("score-card-title","clear-btn")):this.disableClearButton(),j+=this.getAccMessage("score-card-title","close-btn"),this.setAccMessage("score-card-title",j),d=0;h>d;d++)a=g[d],b=a.get("state")===MathInteractives.Interactivities.MiniGolf.Models.Course.COURSE_TYPE.TYPE_3,e=a.get("timesPlayed")||0,f=a.get("holesInOne")||0,this._appendText(this.$(".course-"+d+"-play-count"),e),this._appendText(this.$(".course-"+d+"-hole-in-1-count"),f),this._addState(g,d),c=this.getAccMessage("course-"+d+"-title",0),k+=b?this.getAccMessage(i,"locked-course",[d+1,c]):this.getAccMessage(i,"unlocked-course",[d+1,c,e,f]);k+=this.getAccMessage(i,"end"),this.setAccMessage(i,k)},_addState:function(a,b){var c=MathInteractives.Interactivities.MiniGolf.Models.Course.COURSE_TYPE;a[b].get("state")===c.TYPE_1?(this.$(".course-"+b+"-trophy-holder").removeClass("locked-trophy"),this.$(".course-"+b+"-locked").hide(),this.$(".course-"+b+"-unlocked").show()):a[b].get("state")===c.TYPE_2?(this.$(".course-"+b+"-trophy-holder").addClass("locked-trophy"),this.$(".course-"+b+"-locked").hide(),this.$(".course-"+b+"-unlocked").show()):a[b].get("state")===c.TYPE_3&&(this.$(".course-"+b+"-trophy-holder").addClass("locked-trophy"),this.$(".course-"+b+"-locked").show(),this.$(".course-"+b+"-unlocked").hide())},enableClearButton:function(){var a=MathInteractives.global.Theme2.Button;this.clearScoreDataBtn.setButtonState(a.BUTTON_STATE_ACTIVE)},_appendText:function(a,b){a.text(b)},enableAllHelpElements:function(a){var b=this.player,c=0,d=null;for(b.enableHelpElement("canvas-holder-0","0",a),c=0;4>c;c++)d="canvas-holder-"+c,b.enableHelpElement(d,"mat-ball",a),b.enableHelpElement(d,"start-ball",a),b.enableHelpElement(d,"sticky-slider",a),b.enableHelpElement(d,"destination-ball",a),b.enableHelpElement(d,"hole",a),c>0&&(b.enableHelpElement("obstacles-holder-"+c,"holder",a),b.enableHelpElement("obstacles-holder-"+c,"placed-obstacle",a),b.enableHelpElement("obstacles-holder-"+c,"multiple-obstacles",a),3===c&&(b.enableHelpElement(d,"bridge",a),b.enableHelpElement(d,"bridge-wall",a),b.enableHelpElement(d,"bridge-movement",a))),b.enableHelpElement("course-score-card-btn-"+c,"0",a),b.enableHelpElement("direction-text-"+c+"-direction-text-buttonholder","0",a);b.enableHelpElement("canvas-holder-1","0",a),b.enableHelpElement("canvas-holder-2","0",a),b.enableHelpElement("canvas-holder-3","0",a),b.enableHelpElement("canvas-holder-3","1",a),b.enableHelpElement("reset-course-btn-holder-0","0",a),b.enableHelpElement("reset-course-btn-holder-1","0",a),b.enableHelpElement("reset-course-btn-holder-2","0",a),b.enableHelpElement("reset-course-btn-holder-3","0",a),b.enableHelpElement("obstacles-holder-0","0",a),b.enableHelpElement("obstacles-holder-1","0",a),b.enableHelpElement("obstacles-holder-2","0",a),b.enableHelpElement("obstacles-holder-3","0",a),b.enableHelpElement("carousel-view","0",a),b.enableHelpElement("carousel-page-score-card-btn-holder","0",a),b.enableHelpElement("carousel-view","0",a)}},{})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Confetti=MathInteractives.Common.Player.Views.Base.extend({idPrefix:null,filePath:null,manager:null,player:null,canvasEl:null,ctx:null,canvasWidth:null,canvasHeight:null,maxNumberOfParticles:300,particles:[],confettiHandler:null,timeCounter:0,playNonStop:!1,TiltChangeCountdown:5,angle:0,tiltAngle:0,initialize:function(a){this.initializeDefaultProperties(),a.neverStop&&(this.playNonStop=!0)},render:function(){var a=this.idPrefix+"confetti-canvas";this.canvasEl=$("<canvas width = 928 height = 599></canvas>",{id:a,"class":"confetti-canvas"}),this.$el.append(this.canvasEl)},_showConfetti:function(){this.$el.show()},hideConfetti:function(){this.$el.hide()},_randomFromTo:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},setUpConfetti:function(){this.render(),this._showConfetti(),this.ctx=this.canvasEl.get(0).getContext("2d"),this.canvasWidth=928>this.canvasEl.parent().width()?928:this.canvasEl.parent().width(),this.canvasHeight=599;for(var a=0;a<this.maxNumberOfParticles;a++)this.particles.push({x:Math.random()*this.canvasWidth,y:Math.random()*this.canvasHeight,r:this._randomFromTo(15,40),d:Math.random()*this.maxNumberOfParticles+10,color:"rgba("+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", "+Math.floor(255*Math.random())+", 1.0)",tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:.07*Math.random()+.05,tiltAngle:0});this._startConfetti()},_startConfetti:function(){this.confettiHandler=setInterval($.proxy(this._startAnimation,this),51)},_startAnimation:function(){this.timeCounter+=51,this.timeCounter>2e3&&!this.playNonStop&&(clearTimeout(this.confettiHandler),this.timeCounter=0);var a;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);for(var b=0;b<this.maxNumberOfParticles;b++)a=this.particles[b],this.ctx.beginPath(),this.ctx.lineWidth=a.r/2,this.ctx.strokeStyle=a.color,this.ctx.moveTo(a.x+a.tilt+a.r/4,a.y),this.ctx.lineTo(a.x+a.tilt,a.y+a.tilt+a.r/4),this.ctx.stroke();this._update()},_update:function(){this.angle+=.01,this.tiltAngle+=.1,this.TiltChangeCountdown--;for(var a=0;a<this.maxNumberOfParticles;a++){var b=this.particles[a];b.tiltAngle+=b.tiltAngleIncremental,b.y+=(Math.cos(this.angle+b.d)+1+b.r/2)/2,b.x+=Math.sin(this.angle),b.tilt=15*Math.sin(b.tiltAngle-a/3),(b.x>this.canvasWidth+5||b.x<-5||b.y>this.canvasHeight)&&(this.particles[a]=a%5>0||a%2==0?{x:Math.random()*this.canvasWidth,y:-10,r:b.r,d:b.d,color:b.color,tilt:Math.floor(10*Math.random())-10,tiltAngle:b.tiltAngle,tiltAngleIncremental:b.tiltAngleIncremental}:Math.sin(this.angle)>0?{x:-5,y:Math.random()*this.canvasHeight,r:b.r,d:b.d,color:b.color,tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:b.tiltAngleIncremental}:{x:this.canvasWidth+5,y:Math.random()*this.canvasHeight,r:b.r,d:b.d,color:b.color,tilt:Math.floor(10*Math.random())-10,tiltAngleIncremental:b.tiltAngleIncremental})}},stopConfetti:function(){clearTimeout(this.confettiHandler),this.timeCounter=0,void 0!=this.ctx&&(this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.canvasEl.remove(),this.$el.hide())}},{})}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Course1=MathInteractives.Interactivities.MiniGolf.Views.Course.extend({initialize:function(){var a,b;this._setUpCourseProperties(),this._superwrapper("initialize",arguments),b="#"+this.idPrefix+"work-area-"+this.model.get("levelId"),a=this.isAccessible()===!0?new MathInteractives.Interactivities.MiniGolf.Views.BaseCanvasAcc({canvasId:this.canvasId,model:this.model,el:b}):new MathInteractives.Interactivities.MiniGolf.Views.BaseCanvas({canvasId:this.canvasId,model:this.model,el:b}),this.baseSetUp(a)},render:function(){this._superwrapper("render",arguments),this.loadScreen("course-0-screen")},_setUpCourseProperties:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=this.model;b.set("courseBoundaries",a.BOUNDRIES.COUESE_0),b.set("matBoundaries",a.MAT_BOUNDRIES.COUESE_0),b.set("holePosition",a.HOLES.COURSE_0.POSITION),b.set("holeRadius",a.HOLES.COURSE_0.RADIUS)}});MathInteractives.Interactivities.MiniGolf.Models.Course}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Course2=MathInteractives.Interactivities.MiniGolf.Views.Course.extend({initialize:function(){var a,b;this._setUpCourseProperties(),this._superwrapper("initialize",arguments),b="#"+this.idPrefix+"work-area-"+this.model.get("levelId"),a=this.isAccessible()===!0?new MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstaclesAcc({canvasId:this.canvasId,model:this.model,el:b}):new MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstacles({canvasId:this.canvasId,model:this.model,el:b}),this.baseSetUp(a)},render:function(){this._superwrapper("render",arguments),this.loadScreen("course-1-screen")},_setUpCourseProperties:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=this.model;b.set("courseBoundaries",a.BOUNDRIES.COUESE_1),b.set("matBoundaries",a.MAT_BOUNDRIES.COUESE_1),b.set("holePosition",a.HOLES.COURSE_1.POSITION),b.set("holeRadius",a.HOLES.COURSE_1.RADIUS)}});MathInteractives.Interactivities.MiniGolf.Models.Course}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Course3=MathInteractives.Interactivities.MiniGolf.Views.Course.extend({initialize:function(){var a,b;this._setUpCourseProperties(),this._superwrapper("initialize",arguments),this._addPalmLeaf(),b="#"+this.idPrefix+"work-area-"+this.model.get("levelId"),a=this.isAccessible()===!0?new MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstaclesAcc({canvasId:this.canvasId,model:this.model,el:b}):new MathInteractives.Interactivities.MiniGolf.Views.CanvasWithObstacles({canvasId:this.canvasId,model:this.model,el:b}),this.baseSetUp(a),this.loadScreen("course-2-screen")},_setUpCourseProperties:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData;this.model.set("courseBoundaries",a.BOUNDRIES.COUESE_2),this.model.set("matBoundaries",a.MAT_BOUNDRIES.COUESE_2),this.model.set("holePosition",a.HOLES.COURSE_2.POSITION),this.model.set("holeRadius",a.HOLES.COURSE_2.RADIUS)},_addPalmLeaf:function(){var a,b,c,d,e,f;e=this.model,f=this.model.get("levelId"),d=this.getJson("baseURL"),b="course-"+f+"-palm-leaves",c=this.$(".course-score-card-btn-holder"),a=$("<div></div>",{id:this.idPrefix+b,"class":b}).insertBefore(c).css({"background-image":' url("'+d.palmLeaves+'")'})}});MathInteractives.Interactivities.MiniGolf.Models.Course}(),function(){"use strict";MathInteractives.Interactivities.MiniGolf.Views.Course4=MathInteractives.Interactivities.MiniGolf.Views.Course.extend({initialize:function(){this._setUpCourseProperties(),this._superwrapper("initialize",arguments),this._addCanvasObject(),this.loadScreen("course-3-screen")},_addCanvasObject:function(){var a="#"+this.idPrefix+"work-area-"+this.model.get("levelId"),b=null;b=this.isAccessible()===!0?new MathInteractives.Interactivities.MiniGolf.Views.CanvasSlidingObsExtAcc({canvasId:this.canvasId,model:this.model,el:a}):new MathInteractives.Interactivities.MiniGolf.Views.CanvasSlidingObsExt({canvasId:this.canvasId,model:this.model,el:a}),this.baseSetUp(b)},_setUpCourseProperties:function(){var a=MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData,b=this.model;b.set("courseBoundaries",a.BOUNDRIES.COUESE_3),b.set("matBoundaries",a.MAT_BOUNDRIES.COUESE_3),b.set("holePosition",a.HOLES.COURSE_3.POSITION),b.set("holeRadius",a.HOLES.COURSE_3.RADIUS)},_createCourse4Popup:function(){var a=this.player,b=this.idPrefix,c=this.model,d={text:this.getMessage("hole-in-1-pop-up-text","body-text-course-4"),accText:this.getAccMessage("hole-in-1-pop-up-text","body-text-course-4"),containsTts:!0,showCallback:{fnc:function(){this.confettiView.setUpConfetti()},scope:this},closeCallback:{fnc:function(d){this.confettiView.stopConfetti(),this.popupView.$el.find("#"+b+"theme-2-pop-up-modal").removeClass("bg-transparent"),this.canvasView.reset(),"play-again-button"===d.buttonClicked?this.setFocus("main-container-"+c.get("levelId")):this.trigger(MathInteractives.Interactivities.MiniGolf.Models.MiniGolfData.EVENTS.NEW_HOLE_CLICKED),c.set("resetCourseButton",!1),a.enableAllHeaderButtons(!0),this.enableResetBtn(!1)},scope:this},buttons:[{id:"play-again-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("hole-in-1-pop-up-text","play-again-btn"),response:{isPositive:!0,buttonClicked:"play-again-button"},baseClass:"course-pop-up-btn"},{id:"new-course-button",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,text:this.getMessage("hole-in-1-pop-up-text","new-course-btn"),response:{isPositive:!0,buttonClicked:"new-course-button"},baseClass:"course-pop-up-btn"}],width:454,title:this.getMessage("hole-in-1-pop-up-text","title"),accTitle:this.getAccMessage("hole-in-1-pop-up-text","title"),manager:this.manager,player:a,path:this.filePath,idPrefix:b,foregroundImageBackgroundPosition:"-720px -530px",foregroundImage:{imageId:"sprites",imageHeight:116,imageWidth:113},titleTextColorClass:"course-pop-up-title-color-blue",bodyTextColorClass:"course-pop-up-body-color"};return d}});MathInteractives.Interactivities.MiniGolf.Models.Course}(),function(){MathInteractives.Interactivities.MiniGolf.Views.CustomPopup=MathInteractives.Common.Player.Views.Base.extend({gotItButton:null,initialize:function(){this.initializeDefaultProperties(),this._appendTemplate(),this.render()},render:function(){this._createButtons()},initializeDefaultProperties:function(){var a=this.options;this.player=a.player,this.manager=a.manager,this.filePath=a.filePath,this.idPrefix=a.idPrefix},_appendTemplate:function(){var a=this.model,b=a.get("baseClass")||null,c={idPrefix:this.idPrefix,courseNumber:a.get("levelId"),imageCount:thi.model.get("imageObject")},d=MathInteractives.Interactivities.MiniGolf.templates.courseTutorial(c).trim();this.$el.append(d),null!==b&&this.$(".course-tutorial-container").addClass(b)},_createButtons:function(){var a=this.idPrefix,b={player:this.player,manager:this.manager,idPrefix:a,path:this.filePath,data:{id:a+"course-"+this.model.get("levelId")+"-got-it-button-contanier",type:MathInteractives.global.Theme2.Button.TYPE.TEXT,height:38,width:45,tooltipText:this.getMessage("got-it-btn",0)}};this.gotItButton=MathInteractives.global.Theme2.Button.generateButton(b)}})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.carousel=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-carousel-acc-div" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-carousel-acc-div"></div>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-carousel-temp-focus-div" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-carousel-temp-focus-div"></div>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slides-holder" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slides-holder"></div>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-number-indicator-holder" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-number-indicator-holder">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-number-indicator" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-number-indicator"></div>\r\n</div>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-prev-slide-btn-holder" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"-prev-slide-btn-holder ",(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-btn-holder">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-prev-slide-btn" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"-prev-slide-btn ",(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-btns"></div>\r\n</div>\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-next-slide-btn-holder" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"-next-slide-btn-holder ",(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-btn-holder">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f),(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-next-slide-btn" class="',(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"-next-slide-btn ",(g=c.containerId)?f=g.call(b,{hash:{},data:e}):(g=b&&b.containerId,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-slide-btns"></div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.carouselContainer=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<!--<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-acc-holder"></div>-->\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page" class="carousel-page">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-direction-text-panel" class="direction-text-panel">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-direction-text-holder" class="direction-text-holder"></div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-view" class="carousel-view"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-score-card-btn-holder" class="carousel-page-score-card-btn-holder">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-score-card-btn" class="carousel-page-score-card-btn"></div>\r\n    </div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.course=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"main-container-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' main-container">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"direction-text-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' direction-text"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"work-area-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' work-area">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"canvas-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-acc-container" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-acc-container canvas-holder-acc-container">\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"canvas-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' canvas-holder">\r\n            <canvas id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"game-canvas-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-2" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' canvas" width="928" height="502"></canvas>\r\n            <canvas id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"game-canvas-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="level-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' canvas" width="928" height="502"></canvas>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"take-shot-btn-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="take-shot-btn-holder take-shot-btn-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"take-shot-btn-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="take-shot-btn take-shot-btn-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'"></div>\r\n            </div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-title-obstacle-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-title-obstacle-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-title-obstacle-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-title-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-title-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-title-holder">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-number-indicator-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-number-indicator-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-number-indicator"></div>\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-title-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-title-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-title"></div>\r\n            </div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"reset-course-btn-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="reset-course-btn-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' reset-course-btn-holder">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"reset-course-btn-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="reset-course-btn-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' reset-course-btn"></div>\r\n            </div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"obstacles-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="obstacles-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' obstacles-holder"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-score-card-btn-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-score-card-btn-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-score-card-btn-holder">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-score-card-btn-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="course-score-card-btn-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' course-score-card-btn"></div>\r\n            </div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"skip-animation-btn-holder-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="skip-animation-btn-holder-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' skip-animation-btn-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"skip-animation-btn-",(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="skip-animation-btn-',(g=c.level)?f=g.call(b,{hash:{},data:e}):(g=b&&b.level,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+' skip-animation-btn"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n'
})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.courseScoreCard=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-score-card" class="course-score-card course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-score-card">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-trophy-holder" class="course-trophy-holder course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-trophy-holder">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-trophy" class="course-trophy course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-trophy"></div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-details" class="course-details course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-details">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-static-details" class="course-static-details course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-static-details">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-number" class="course-number course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-number"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-title" class="course-title course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-title"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-seperator-holder" class="course-seperator-holder course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-seperator-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-seperator" class="course-seperator course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-seperator"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-dynamic-details" class="course-dynamic-details course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-dynamic-details">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-locked" class="course-locked course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-locked">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-holder" class="course-lock-holder course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-holder">\r\n                    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-symbol" class="course-lock-symbol course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-symbol"></div>\r\n                    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-text" class="course-lock-text course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-lock-text"></div>\r\n                </div>\r\n            </div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-unlocked" class="course-unlocked course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-unlocked">\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-details-holder" class="course-play-count-details-holder course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-details-holder">\r\n                    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-details" class="course-play-count-details course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-details">\r\n                        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-text" class="course-play-count-text course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count-text"></div>\r\n                        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count" class="course-play-count course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-play-count"></div>\r\n                    </div>\r\n                </div>\r\n                <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-details-holder" class="course-hole-in-1-details-holder course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-details-holder">\r\n                    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-details" class="course-hole-in-1-details course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-details">\r\n                        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-text" class="course-hole-in-1-text course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-text"></div>\r\n                        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"course-",(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-count" class="course-hole-in-1-count course-',(g=c.courseNumber)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseNumber,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'-hole-in-1-count"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.customPopup=a(function(a,b,c,d,e){function f(a,b,d){var e,f="";return f+='\r\n    <!--create cont for image-->\r\n    <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-cont" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-cont text-image-cont">\r\n      <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+' image-cont">\r\n        ',e=c["if"].call(a,a&&a.textDiv,{hash:{},inverse:m.noop,fn:m.programWithDepth(2,g,b,d),data:b}),(e||0===e)&&(f+=e),f+='\r\n      </div>\r\n      <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description image-description">\r\n        <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-text-cont" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-text-cont description-text-cont">\r\n          <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-number" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-number image-description-number one-time-popup-text-container">'+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'.\r\n          </div>\r\n          <div id="'+l((e=d&&d.idPrefix,typeof e===k?e.apply(a):e))+"course-"+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-text" class="course-'+l((e=d&&d.courseNumber,typeof e===k?e.apply(a):e))+"-custom-popup-image-"+l((e=a&&a.imageNumber,typeof e===k?e.apply(a):e))+'-description-text image-description-text one-time-popup-text-container">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    '}function g(a,b,c){var d,e="";return e+='\r\n        <div id="'+l((d=c&&c.idPrefix,typeof d===k?d.apply(a):d))+"course-"+l((d=c&&c.courseNumber,typeof d===k?d.apply(a):d))+"-image-"+l((d=a&&a.imageNumber,typeof d===k?d.apply(a):d))+'-button-text-container" class="course-'+l((d=c&&c.courseNumber,typeof d===k?d.apply(a):d))+"-image-"+l((d=a&&a.imageNumber,typeof d===k?d.apply(a):d))+'-button-text-container button-text-container">\r\n        </div>\r\n        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-container" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-container course-custom-popup-container">\r\n  <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-title-container" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-title-container course-custom-popup-title-container">\r\n    <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-title" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-title course-custom-popup-title"></div>\r\n\r\n  </div>\r\n  <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-image-container" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-custom-popup-image-container course-custom-popup-image-container">\r\n\r\n    ',h=c.each.call(b,b&&b.imageCount,{hash:{},inverse:m.noop,fn:m.programWithDepth(1,f,e,b),data:e}),(h||0===h)&&(j+=h),j+='\r\n  </div>\r\n  <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-got-it-button-contanier" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-got-it-button-contanier got-it-button-cont">\r\n    <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"course-",(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-got-it-button" class="course-',(i=c.courseNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.courseNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-got-it-button got-it-button"></div>\r\n  </div>\r\n</div>\r\n'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.playGame=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'play-game-container" class="play-game-container">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'carousel-page-container" class="carousel-page-container"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'courses-view-container" class="courses-view-container">\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-container" class="score-card-container"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'confetti-container" class="confetti-container"></div>\r\n</div>\r\n'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.scoreCard=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<!--<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-acc-holder" class="score-card-acc-holder"></div>-->\r\n<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card" class="score-card">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-title-bar" class="score-card-title-bar">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-title-holder" class="score-card-title-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-title-icon" class="score-card-title-icon"></div>\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-title" class="score-card-title"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-close-btn-holder" class="score-card-close-btn-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-close-button" class="score-card-close-button"></div>\r\n        </div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-main-panel" class="score-card-main-panel">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-levels-holder" class="score-card-levels-holder">\r\n            <!--will contain the 4 levels-->\r\n        </div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-footer" class="score-card-footer">\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-back-btn-holder" class="score-card-back-btn-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-back-button" class="score-card-back-button"></div>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-clear-btn-holder" class="score-card-clear-btn-holder">\r\n            <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'score-card-clear-button" class="score-card-clear-button"></div>\r\n        </div>\r\n    </div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.MiniGolf.templates=MathInteractives.Interactivities.MiniGolf.templates||{};b.slide=a(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\r\n<div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-course-details" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-course-details ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-course-details">\r\n    <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count-details" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-play-count-details ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count-details">\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count-text" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-play-count-text ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count-text"></div>\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-play-count ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-play-count">\r\n            ',(e=c.timesPlayed)?d=e.call(a,{hash:{},data:b}):(e=a&&a.timesPlayed,d=typeof e===k?e.call(a,{hash:{},data:b}):e),(d||0===d)&&(f+=d),f+='\r\n        </div>\r\n    </div>\r\n    <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-details" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-hole-in-1-details ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-details">\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-text" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-hole-in-1-text ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-text"></div>\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-count" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-hole-in-1-count ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-hole-in-1-count">\r\n            ',(e=c.holesInOne)?d=e.call(a,{hash:{},data:b}):(e=a&&a.holesInOne,d=typeof e===k?e.call(a,{hash:{},data:b}):e),(d||0===d)&&(f+=d),f+="\r\n        </div>\r\n    </div>\r\n</div>\r\n"}function g(a,b){var d,e,f="";return f+='\r\n<div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-modal" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-lock-modal ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-modal">\r\n    <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-feedback" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-lock-feedback ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-feedback">\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-holder" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-lock-holder ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-holder">\r\n            <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-symbol" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-lock-symbol ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-symbol"></div>\r\n            <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-text" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-lock-text ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-lock-text"></div>\r\n        </div>\r\n        <div id="',(e=c.idPrefix)?d=e.call(a,{hash:{},data:b}):(e=a&&a.idPrefix,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d),(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-feedback-text-1" class="',(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-feedback-text-1 ",(e=c.containerId)?d=e.call(a,{hash:{},data:b}):(e=a&&a.containerId,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"-slide-",(e=c.slideNumber)?d=e.call(a,{hash:{},data:b}):(e=a&&a.slideNumber,d=typeof e===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'-feedback-text-1"></div>\r\n    </div>\r\n</div>\r\n'
}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+="",h=c["if"].call(b,b&&b.unlocked,{hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+='\r\n<div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h),(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title-container" class="',(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-title-container ",(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title-container">\r\n    <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h),(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title-holder" class="',(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-title-holder ",(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title-holder">\r\n        <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h),(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-number" class="',(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-number ",(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-number"></div>\r\n        <div id="',(i=c.idPrefix)?h=i.call(b,{hash:{},data:e}):(i=b&&b.idPrefix,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h),(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title" class="',(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-title ",(i=c.containerId)?h=i.call(b,{hash:{},data:e}):(i=b&&b.containerId,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+"-slide-",(i=c.slideNumber)?h=i.call(b,{hash:{},data:e}):(i=b&&b.slideNumber,h=typeof i===k?i.call(b,{hash:{},data:e}):i),j+=l(h)+'-title"></div>\r\n    </div>\r\n</div>'})}();