!function(){"use strict";MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab=MathInteractives.Common.Player.Views.Base.extend({conicSectionView:null,directionTextView:null,resetGraphBtnView:null,zoomInBtnView:null,zoomOutBtnView:null,dragStart:!1,initialize:function(){var a=this.model,b=this;this.initializeDefaultProperties(),this._createScreens(),this.loadScreen("explore-screen"),this.render(),this._disableAllButtons(),this.player.bindTabChange(function(b){b.isLetsGoClicked!==!0&&this.setFocus("direction-text-container-direction-text-text"),null===a.get("graphWrapperModel")&&this._initializeGridGraph()},this,1),MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile||a.off("change:cursor").on("change:cursor",this._setCursor,this),this.$el.css({"background-image":'url("'+this.filePath.getImagePath("sprite-image")+'")'}),this.listenTo(this.model,MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.ANIMATION_END_OF_CONIC_SECTION,this._enableAllButtons),this.$(".graph-canvas-container").off("focusin").on("focusin",function(){b.model.trigger(MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.GRAPH_CONTAINER_FOCUS_OUT)}).off("focusout.graph-focusout").on("focusout.graph-focusout",function(){b._getShapeAccText()})},events:{"mouseenter .graph-view-wrapper":"_onCanvasMouseenter","mouseleave .graph-view-wrapper":"_onCanvasMouseleave","click .graph-zoom-in-button.clickEnabled":"_onZoomInBtnClick","click .graph-zoom-out-button.clickEnabled":"_onZoomOutBtnClick","click .graph-reset-button.clickEnabled":"_onResetGraphBtnClick"},render:function(){this._initializeDirectionText(),this._generateGraphButtons(),this.listenTo(this.model,"change:equationConstants",this._generateEquation),this._setHelpElements()},_createScreens:function(){var a=MathInteractives.Interactivities.ConicSectionExplorer.Views;this.conicSectionView=new a.ConeView({el:this.$(".conic-section-wrapper"),model:this.model})},_initializeDirectionText:function(){var a=this.idPrefix,b={containerId:a+"direction-text-container",idPrefix:a,player:this.player,manager:this.manager,path:this.filePath,text:this.getMessage("direction-text-box-text",0),accText:this.getMessage("direction-text-box-text",0),showButton:!0,buttonText:this.getMessage("direction-text-box-text",1),btnColorType:MathInteractives.global.Theme2.Button.COLORTYPE.GREEN,containmentBGcolor:"rgba(0, 0, 0,0.14)",buttonHeight:38,btnTextColor:"#ffffff",clickCallback:{fnc:this._onTryAnotherClick,scope:this},textColor:"#ffffff",tabIndex:500,buttonTabIndex:1e3,btnBaseClass:"direction-text-start-over",ttsBaseClass:"direction-text-start-over-tts"};this.directionTextView=MathInteractives.global.Theme2.DirectionText.generateDirectionText(b),this.model.set("showPopupOnTryAnother",!1)},_onTryAnotherClick:function(){this.stopReading();var a=null,b=this.model,c=MathInteractives.global.Theme2.Button,d=c.TYPE.TEXT;this.directionTextView.tryAnotherView.getButtonState()===c.BUTTON_STATE_ACTIVE&&(b.get("showPopupOnTryAnother")===!0?(a={manager:this.manager,path:this.filePath,player:this.player,idPrefix:this.idPrefix,title:this.getMessage("try-another-pop-up-title",0),accTitle:this.getMessage("try-another-pop-up-title",0),text:this.getMessage("try-another-pop-up-text",0),accText:this.getMessage("try-another-pop-up-text",0),type:MathInteractives.global.Theme2.PopUpBox.CONFIRM,buttons:[{id:"yes-button",type:d,text:this.getMessage("try-another-pop-up-yes-button",0),response:{isPositive:!0,buttonClicked:"yes-button"}},{id:"cancel-button",type:d,text:this.getMessage("try-another-pop-up-cancel-button",0),response:{isPositive:!1,buttonClicked:"cancel-button"}}],closeCallback:{fnc:function(a){a.isPositive===!0?this._tryAnotherCallBack():this.setFocus("direction-text-container-direction-text-buttonholder")},scope:this}},MathInteractives.global.Theme2.PopUpBox.createPopup(a)):this._tryAnotherCallBack())},_tryAnotherCallBack:function(){var a=this.model,b=300,c=this.conicSectionView;this._disableAllButtons(),a.resetConeParameters(),c.resetConeView(b,!0,!0),c.animateCone(),this.changeAccMessage("plane-data-container",0,[a.get("planeSlop"),a.get("planeOffset")]),this.changeAccMessage("cone-data-container",0,[a.get("coneHeight"),a.get("coneSlop")]),a.set("showPopupOnTryAnother",!1),a.set("currentZoomingFactor",5),this.setFocus("explore-tab-content-container"),this.resetLimitsOfGraph()},_generateEquation:function(){var a=this.model,b=MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView,c=a.get("equationConstants"),d=b.INTERSECTION_COLOR,e=b.INTERSECTION_THICKNESS,f=this._generateEquationLatex(),g={latex:f,shouldRefresh:!0},h=a.get("graphWrapperModel"),i=a.get("equationObject");a.get("pointEquationObject");null===i?(i=h.createEquationObject(g),h.changeEqnObjColor(i,{color:d}).changeEqnObjThickness(i,{thickness:e})):h.removeFillColor(i).setLatex(i,g),c.fill===!0&&h.setFillColor(i,d),this._getShapeAccText(),a.set("equationObject",i)},_initializeGridGraph:function(){var a=this,b=this.idPrefix,c=this.model,d=MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab,e=c.get("limits"),f=MathInteractives.Common.Components.Theme2.Models.ToolsGraph.EVENTS.GRID_EVENTS,g={gridGraphEl:"#"+b+"graph-view-wrapper",gridGraphOptions:{isCustomModeOn:!1,canvasId:b+"graph-canvas",isTooltipForPoint:!1},isPlotterRequired:!0},h={color:{gridLine:d.GRAPH_GRID_LINE_COLOR,axisLine:d.GRAPH_AXIS_LINE_COLOR,markerLine:d.GRAPH_GRID_LINE_COLOR},size:{gridLine:d.GRAPH_GRID_LINE_THICKNESS,axisLine:d.GRAPH_AXIS_LINE_THICKNESS,markerLine:d.GRAPH_GRID_LINE_THICKNESS}},i={fontColor:d.GRAPH_FONT_COLOR,fontSize:d.GRAPH_FONT_SIZE,fontFamily:d.GRAPH_FONT_FAMILY},j=(new MathInteractives.Common.Components.Theme2.Models.ToolsGraph).initializeGridGraphView(g).setGridGraphStyle({gridStyle:h}).setGridGraphMarkerStyle({markerStyle:i,shouldRefresh:!0});j.setGridLimits(e).drawGridGraph().setDefaultZoomBehaviour(!1).stopDoubleClickZoom().triggerCustomEventsForGridEvent(f.GRID_LAYER_MOUSEDOWN_SENSED).triggerCustomEventsForGridEvent(f.GRID_LAYER_MOUSEUP).triggerCustomEventsForGridEvent(f.GRID_LAYER_CLICK).triggerCustomEventsForGridEvent(f.GRID_LAYER_DOUBLE_CLICK).triggerCustomEventsForGridEvent(f.GRID_LAYER_MOUSEDRAG).triggerCustomEventsForGridEvent(f.POINT_LAYER_MOUSEUP).triggerCustomEventsForGridEvent(f.POINT_LAYER_MOUSEDOWN_SENSED),a.listenTo(j,f.GRID_LAYER_MOUSEDOWN_SENSED,a._onDragStart),a.listenTo(j,f.GRID_LAYER_MOUSEUP,a._onDragStop),a.listenTo(j,f.POINT_LAYER_MOUSEUP,a._onDragStop),a.listenTo(j,f.GRID_LAYER_CLICK,a._onDragStop),a.listenTo(j,f.POINT_LAYER_MOUSEDOWN_SENSED,a._onDragStart),a.listenTo(j,f.GRID_LAYER_DOUBLE_CLICK,function(b){a.model.set("cursor","open-hand")}),a.listenTo(j,f.GRID_LAYER_MOUSEDRAG,function(b){a.resetGraphBtnView.setButtonState(MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE)}),c.set("graphWrapperModel",j)},_generateGraphButtons:function(){var a={},b=MathInteractives.global.Theme2.Button,c=this.idPrefix,d=this.filePath,e=MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab;a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{type:b.TYPE.FA_ICON,height:e.GRAPH_BUTTON_HEIGHT,width:e.GRAPH_BUTTON_WIDTH,tooltipText:this.getMessage("zoom-in-tooltip",0),tooltipType:MathInteractives.Common.Components.Theme2.Views.Tooltip.ARROW_TYPE.LEFT_MIDDLE,id:c+"graph-zoom-in-button",icon:{faClass:d.getFontAwesomeClass("zoom-in"),height:e.GRAPH_BUTTON_HEIGHT,width:e.GRAPH_BUTTON_WIDTH,fontSize:e.GRAPH_BUTTON_FONT_SIZE,fontColor:e.GRAPH_BUTTON_FONT_COLOR},baseClass:"graph-all-btn"}},this.zoomInBtnView=b.generateButton(a),a.data.tooltipText=this.getMessage("zoom-out-tooltip",0),a.data.id=c+"graph-zoom-out-button",a.data.icon.faClass=d.getFontAwesomeClass("zoom-out"),this.zoomOutBtnView=b.generateButton(a),a.data.tooltipText=this.getMessage("reset-tooltip",0),a.data.id=c+"graph-reset-button",a.data.icon.faClass=d.getFontAwesomeClass("reset"),this.resetGraphBtnView=b.generateButton(a)},_onZoomInBtnClick:function(){var a=MathInteractives.global.Theme2.Button;this.stopReading(),this._setGraphLimits("zoom-in"),this.zoomOutBtnView.setButtonState(a.BUTTON_STATE_ACTIVE),this._setResetGraphBtnState(),this.model.get("currentZoomingFactor")<=.5&&this.zoomInBtnView.setButtonState(a.BUTTON_STATE_DISABLED),this.changeAccMessage("graph-canvas-container",6),this.setFocus("graph-canvas-container")},_onZoomOutBtnClick:function(){var a=MathInteractives.global.Theme2.Button;this.stopReading(),this._setGraphLimits("zoom-out"),this.zoomInBtnView.setButtonState(a.BUTTON_STATE_ACTIVE),this._setResetGraphBtnState(),this.model.get("currentZoomingFactor")>=500&&this.zoomOutBtnView.setButtonState(a.BUTTON_STATE_DISABLED),this.changeAccMessage("graph-canvas-container",8),this.setFocus("graph-canvas-container")},_setGraphLimits:function(a){var b=this,c=b.model,d=c.get("graphWrapperModel"),e=this.getNextZoomFactor(a),f=d.getGridLimits(),g=$.extend(!0,{},f),h=f.yUpper-f.yLower,i=h*e,j=i-h,k=j/(2*e),l=f.xUpper-f.xLower,m=l*e,n=m-l,o=n/(2*e);g.xUpper=+(f.xUpper-o).toFixed(10),g.xLower=+(f.xLower+o).toFixed(10),g.yUpper=+(f.yUpper-k).toFixed(10),g.yLower=+(f.yLower+k).toFixed(10),d.setGridLimits(g).drawGridGraph()},_setResetGraphBtnState:function(){var a=MathInteractives.global.Theme2.Button,b=this.model,c=b.get("graphWrapperModel"),d=b.get("limits"),e=c.getGridLimits();this.resetGraphBtnView.setButtonState(_.isEqual(d,e)?a.BUTTON_STATE_DISABLED:a.BUTTON_STATE_ACTIVE)},_onResetGraphBtnClick:function(){var a=MathInteractives.global.Theme2.Button,b=this.model;this.stopReading(),this.resetLimitsOfGraph(),this.resetGraphBtnView.setButtonState(a.BUTTON_STATE_DISABLED),this.zoomInBtnView.setButtonState(a.BUTTON_STATE_ACTIVE),this.zoomOutBtnView.setButtonState(a.BUTTON_STATE_ACTIVE),b.set("currentZoomingFactor",5),this.changeAccMessage("graph-canvas-container",7),this.setFocus("graph-canvas-container")},resetLimitsOfGraph:function(){var a=this,b=a.model,c=b.get("limits"),d=b.get("graphWrapperModel");d.setGridLimits(c).drawGridGraph()},getNextZoomFactor:function(a){var b=this.model,c=(b.get("graphWrapperModel"),b.get("zoomingFactors")),d=b.get("currentZoomingFactor"),e=c.indexOf(d),f=e;return"zoom-in"===a?e>0&&(f=e-1):e<c.length&&(f=e+1),b.set("currentZoomingFactor",c[f]),c[e]/c[f]},_setCursor:function(a,b){"default"!==b&&"pointer"!==b&&(b="url('"+this.filePath.getImagePath(b)+"'), move"),this.$("canvas").css({cursor:b})},_onCanvasMouseenter:function(){var a=this.model;this.dragStart===!1?a.set("cursor","open-hand"):a.set("cursor","closed-hand")},_onCanvasMouseleave:function(){this.dragStart===!1&&this.model.set("cursor","default")},_onDragStart:function(a){this.stopReading(),this.dragStart=!0,this.model.set("cursor","closed-hand")},_onDragStop:function(a){this.dragStart=!1,this.model.set("cursor","open-hand")},checkNegativeValues:function(a,b){var c="";return c+=0>a?" - ":" + ",c+=Math.abs(a)+b},_generateEquationLatex:function(){var a=this.model.get("equationConstants"),b="";return b+=a.A+"x^2",b+=this.checkNegativeValues(a.B,"x"),b+=this.checkNegativeValues(a.C,"y^2"),b+=this.checkNegativeValues(a.D,"y"),b+=this.checkNegativeValues(a.E,""),b+=" = 0 "},_setHelpElements:function(){var a=this.model.get("helpElements");0===a.length&&a.push({elementId:"plane-slop-custom-spinner-container",helpId:"plane-slop-custom-spinner-container-help",msgId:0,tooltipWidth:"310",position:"top"},{elementId:"plane-offset-custom-spinner-container",helpId:"plane-offset-custom-spinner-container-help",msgId:0,tooltipWidth:"350",position:"top"},{elementId:"cone-height-custom-spinner-container",helpId:"cone-height-custom-spinner-container-help",msgId:0,tooltipWidth:"300",position:"top"},{elementId:"cone-slop-custom-spinner-container",helpId:"cone-slop-custom-spinner-container-help",msgId:0,tooltipWidth:"300",position:"top"},{elementId:"conic-rotate-angle-text",helpId:"conic-rotate-angle-text-help",msgId:0,position:"top"},{elementId:"conic-reset-button",helpId:"conic-reset-button-help",msgId:0,tooltipWidth:"280",position:"bottom"},{elementId:"graph-canvas-container",helpId:"graph-canvas-container-help",msgId:0,fromElementCenter:!0,hideArrowDiv:!0,position:"top"},{elementId:"graph-reset-button",helpId:"graph-reset-button-help",msgId:0,tooltipWidth:"350",hideArrowDiv:!0,position:"left"})},_disableAllButtons:function(){var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_DISABLED;this.directionTextView.tryAnotherView.setButtonState(a),this.resetGraphBtnView.setButtonState(a),this.zoomInBtnView.setButtonState(a),this.zoomOutBtnView.setButtonState(a),this.player.enableAllHeaderButtons(!1)},_enableAllButtons:function(){var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE;this.directionTextView.tryAnotherView.setButtonState(a),this._setResetGraphBtnState(),this.zoomInBtnView.setButtonState(a),this.zoomOutBtnView.setButtonState(a),this.player.enableAllHeaderButtons(!0)},_getShapeAccText:function(){var a=(this.model,null),b=this.model.get("equationConstants");switch(b.type){case"point":a=this.getAccMessage("graph-canvas-container",5);break;case"line":a=this.getAccMessage("graph-canvas-container",4);break;case"hyperbola":a=this.getAccMessage("graph-canvas-container",3);break;case"parabola":a=this.getAccMessage("graph-canvas-container",2);break;case"ellipse":a=this.getAccMessage("graph-canvas-container",1);break;case"circle":a=this.getAccMessage("graph-canvas-container",9)}"ellipse"===b.type?this.changeAccMessage("graph-canvas-container",10,[a]):this.changeAccMessage("graph-canvas-container",0,[a])}},{EVENTS:{ANIMATION_START_OF_CONIC_SECTION:"animation-start-of-conic-section",ANIMATION_END_OF_CONIC_SECTION:"animation-end-of-conic-section",GRAPH_CONTAINER_FOCUS_OUT:"graph-container-focus-out"},GRAPH_GRID_LINE_COLOR:"#404040",GRAPH_AXIS_LINE_COLOR:"#a3ad97",GRAPH_GRID_LINE_THICKNESS:1,GRAPH_AXIS_LINE_THICKNESS:3,GRAPH_FONT_COLOR:"#a3ad97",GRAPH_FONT_SIZE:14,GRAPH_FONT_FAMILY:"montserrat",GRAPH_BUTTON_HEIGHT:38,GRAPH_BUTTON_WIDTH:43,GRAPH_BUTTON_FONT_COLOR:"#ffffff",GRAPH_BUTTON_FONT_SIZE:23})}(),function(){"use strict";var a=MathInteractives.Common.Components.Theme2.Models;MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView=MathInteractives.Common.Player.Views.Base.extend({cango3dWrapper:null,canvasWidth:null,canvasHeight:null,movedConeID:"movedCone",movedCubeID:"movedCube",coneGrpID:"coneGroup",planeID:"plane",planeWrapperID:"planeWrapper",conicSectionID:"conicSection",grabMousePt:null,planeSlopSpinner:null,planeOffsetSpinner:null,coneHeightSpinner:null,coneSlopSpinner:null,isConicSectionPresent:!1,timerId:null,animationTimerId:null,rotateAboutXAxisBtnView:null,rotateAboutYAxisBtnView:null,rotateAboutZAxisBtnView:null,resetGraphBtnView:null,spritePath:null,canvasElem:null,isConeRotating:!1,dragCount:0,rotatingAccButtonText:null,rotatingAngle:0,_lastArrowKeyUpEvent:null,_lastArrowKeyUpItem:null,_previousArrowKeyDownCount:0,_currentArrowKeyDownCount:0,_keyUpInterval:null,resetCone:!0,firstReset:!0,isSafari:null,animationInterval:30,initialAnimationAngle:300,initialize:function(){var a=this;this.initializeDefaultProperties(),this._setBrowserChecks(),this._setAreas(),this.listenTo(this.player,MathInteractives.Common.Player.Views.Player.Events.SECOND_STEP_INTERACTIVE_LOAD_COMPLETE,this._secondStepLoadComplete),this.listenTo(this.model,MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.ANIMATION_START_OF_CONIC_SECTION,this._disableAllButtons),this.listenTo(this.model,MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.ANIMATION_END_OF_CONIC_SECTION,this._enableAllButtons),this.spritePath=this.filePath.getImagePath("sprite-image"),this.$(".plane-data-container").off("keyup").on("keyup",$.proxy(this._keyUpOnPlaneDataContainer,this)).on("focusin",function(b){a.$(b.target).parent().hasClass("plane-data-container")&&a._disableTabIndexForPlaneSpinner()}),this.$(".cone-data-container").off("keyup").on("keyup",$.proxy(this._keyUpOnConeDataContainer,this)).off("focusin").on("focusin",function(b){a.$(b.target).parent().hasClass("cone-data-container")&&(a._disableTabIndexForPlaneSpinner(),a._disableTabIndexForConeSpinner())}),this.listenTo(this.model,MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.GRAPH_CONTAINER_FOCUS_OUT,$.proxy(this._disableTabIndexForConeSpinner,this))},_setBrowserChecks:function(){this.isSafari=MathInteractives.Common.Utilities.Models.BrowserCheck.isSafari,this.isSafari&&this.isMobile&&(this.animationInterval=20,this.initialAnimationAngle=290)},_setAreas:function(){$(MathInteractives.Interactivities.ConicSectionExplorer.templates.conicSection({idPrefix:this.idPrefix}).trim()).appendTo(this.$el)},initialize3DObject:function(){var b=this.idPrefix,c=this.$("#"+b+"activity-canvas");this.canvasHeight=c[0].height,this.canvasWidth=c[0].width,this.cango3dWrapper=new a.Cango3DWrapper({canvasId:b+"activity-canvas"})},events:{"click .conic-reset-button.clickEnabled":"_onResetConicBtnClick","mouseenter .activity-canvas":"_onCanvasMouseenter","mouseleave .activity-canvas":"_onCanvasMouseleave","mouseup .activity-canvas":"_onCanvasMouseUp"},render:function(){this._createSpinners()},_createSpinners:function(){var a=this.model,b=null,c=a.get("coneHeight"),d=a.get("coneSlop"),e=a.get("planeOffset"),f=a.get("planeSlop"),g=MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView,h=MathInteractives.global.Theme2.CustomSpinner,i=[h.CURR_VAL],j=g.PLANE_SPINNER_BUTTON_WIDTH,k=g.PLANE_SPINNER_BUTTON_HEIGHT,l=g.PLANE_SPINNER_INPUT_HEIGHT,m=g.CONE_SPINNER_BUTTON_WIDTH,n=g.CONE_SPINNER_BUTTON_HEIGHT,o=g.CONE_SPINNER_INPUT_HEIGHT,p=g.SPINNER_INPUT_BOX_COLOR,q=(g.FONT_AWESOME_FONT_SIZE,null);b=this.getAccMessage("spinner-text",2),q={spinId:this.idPrefix+"plane-slop-custom-spinner-container",path:this.filePath,manager:this.manager,idPrefix:this.idPrefix,player:this.player,isEditable:!1,minValue:-40,maxValue:40,value:f,inputPrecision:1,step:.1,textBoxStyle:{backgroundColor:p},alignType:h.VERTICAL_ALIGN,inputType:MathInteractives.Common.Components.Theme2.Views.InputBox.INPUT_TYPE_CUSTOM,buttonBaseClass:"plane-slope-button",inputCustomClass:"plane-slope-input",buttonWidth:j,buttonHeight:k,inputBoxWidth:j,inputBoxHeight:l,upBtnFontAwesomeClass:"sort-up",downBtnFontAwesomeClass:"sort-down",buttonFontSize:24,tabIndex:630,upArrowAccText:this.getAccMessage("spinner-text",0),downArrowAccText:this.getAccMessage("spinner-text",1),defaultAccText:b,onIncreaseAccText:b,onDecreaseAccText:b,minLimitAccText:b,maxLimitAccText:b,onIncreasePlaceHolders:i,onDecreasePlaceHolders:i,defaultPlaceHolders:i,minLimitPlaceHolders:[h.MIN_VAL],maxLimitPlaceHolders:[h.MAX_VAL]},this.planeSlopSpinner=this._renderCustomSpinner(q,this._planeSlopValueChanged),b=this.getAccMessage("spinner-text",5),q.spinId=this.idPrefix+"plane-offset-custom-spinner-container",q.value=e,q.step=.1,q.minValue=-5,q.maxValue=5,q.buttonBaseClass="plane-offset-button",q.inputCustomClass="plane-offset-input",q.tabIndex=660,q.upArrowAccText=this.getAccMessage("spinner-text",3),q.downArrowAccText=this.getAccMessage("spinner-text",4),q.defaultAccText=b,q.onIncreaseAccText=b,q.onDecreaseAccText=b,q.minLimitAccText=b,q.maxLimitAccText=b,this.planeOffsetSpinner=this._renderCustomSpinner(q,this._planeOffsetValueChanged),b=this.getAccMessage("spinner-text",8),q.spinId=this.idPrefix+"cone-height-custom-spinner-container",q.minValue=1,q.maxValue=10,q.step=1,q.value=c,q.buttonBaseClass="cone-height-button",q.inputCustomClass="cone-height-input",q.buttonWidth=m,q.buttonHeight=n,q.inputBoxWidth=m,q.inputBoxHeight=o,q.tabIndex=730,q.upArrowAccText=this.getAccMessage("spinner-text",6),q.downArrowAccText=this.getAccMessage("spinner-text",7),q.defaultAccText=b,q.onIncreaseAccText=b,q.onDecreaseAccText=b,q.minLimitAccText=b,q.maxLimitAccText=b,this.coneHeightSpinner=this._renderCustomSpinner(q,this._coneHeightValueChanged),b=this.getAccMessage("spinner-text",11),q.spinId=this.idPrefix+"cone-slop-custom-spinner-container",q.minValue=.1,q.value=d,q.step=.1,q.buttonBaseClass="cone-slop-button",q.inputCustomClass="cone-slop-input",q.tabIndex=760,q.upArrowAccText=this.getAccMessage("spinner-text",9),q.downArrowAccText=this.getAccMessage("spinner-text",10),q.defaultAccText=b,q.onIncreaseAccText=b,q.onDecreaseAccText=b,q.minLimitAccText=b,q.maxLimitAccText=b,this.coneSlopSpinner=this._renderCustomSpinner(q,this._coneSlopValueChanged)},_renderCustomSpinner:function(a,b){var c=this,d=MathInteractives.global.Theme2.CustomSpinnerExtended.generateCustomSpinner(a);return c.listenTo(d,MathInteractives.global.Theme2.CustomSpinner.VALUE_CHANGED,b),d},_secondStepLoadComplete:function(){var a=this.model,b=this;this._generateGraphButtons(),this.loadScreen("button-screen"),this.render(),MathInteractives.Common.Utilities.Models.Utils.EnableTouch(this.$(".conic-rotate-about-x-axis-button")),MathInteractives.Common.Utilities.Models.Utils.EnableTouch(this.$(".conic-rotate-about-y-axis-button")),MathInteractives.Common.Utilities.Models.Utils.EnableTouch(this.$(".conic-rotate-about-z-axis-button")),MathInteractives.Common.Utilities.Models.Utils.EnableTouch(this.$(".rotate-button")),MathInteractives.Common.Utilities.Models.Utils.EnableTouch(this.$(".canvas-container")),this.$(".conic-rotate-about-x-axis-button").off("mousedown.rotate-x-button").on("mousedown.rotate-x-button",$.proxy(this._onRotateAboutXAxisMD,this)).off("keydown.rotate-x-button").on("keydown.rotate-x-button",$.proxy(this._onRotateAboutXAxisMD,this)),this.$(".conic-rotate-about-y-axis-button").off("mousedown.rotate-y-button").on("mousedown.rotate-y-button",$.proxy(this._onRotateAboutYAxisMD,this)).off("keydown.rotate-y-button").on("keydown.rotate-y-button",$.proxy(this._onRotateAboutYAxisMD,this)),this.$(".conic-rotate-about-z-axis-button").off("mousedown.rotate-z-button").on("mousedown.rotate-z-button",$.proxy(this._onRotateAboutZAxisMD,this)).off("keydown.rotate-z-button").on("keydown.rotate-z-button",$.proxy(this._onRotateAboutZAxisMD,this)),this.$(".rotate-button").off("mouseup.rotate-button").on("mouseup.rotate-button",$.proxy(this._onRotateMU,this)).off("keydown.rotate-button").on("keydown.rotate-button",function(a){(32===a.keyCode||13===a.keyCode)&&b._handleArrowUpTrigger(a)}).off("keyup.rotate-button").on("keyup.rotate-button",function(a){(32===a.keyCode||13===a.keyCode)&&(a.preventDefault(),b._lastArrowKeyUpEvent=a)}),this.$(".canvas-container").off("focusout.canvas-focusout").on("focusout.canvas-focusout",function(a){b.$(a.target).parent().hasClass("canvas-container")&&b.changeAccMessage("canvas-container",0)}),this._renderCone(),this.changeAccMessage("plane-data-container",0,[a.get("planeSlop"),a.get("planeOffset")]),this.changeAccMessage("cone-data-container",0,[a.get("coneHeight"),a.get("coneSlop")])},_planeSlopValueChanged:function(){var a=parseFloat(this.planeSlopSpinner.model.get("value")),b=this.model;this.changeAccMessage("plane-data-container",0,[a,b.get("planeOffset")]),b.set("planeSlop",a),b.set("showPopupOnTryAnother",!0),this._initializeCone(),this._resetLast3DPosition()},_planeOffsetValueChanged:function(){var a=parseFloat(this.planeOffsetSpinner.model.get("value")),b=this.model;this.changeAccMessage("plane-data-container",0,[b.get("planeSlop"),a]),b.set("planeOffset",a),b.set("showPopupOnTryAnother",!0),this._initializeCone(),this._resetLast3DPosition()},_coneHeightValueChanged:function(){var a=parseFloat(this.coneHeightSpinner.model.get("value")),b=this.model,c=b.get("heightFactor"),d=b.get("coneSlop"),e=a*c/2/d,f=null;this.planeOffsetSpinner.setMinMaxValue(parseFloat(-(a/2).toFixed(1)),parseFloat((a/2).toFixed(1))),f=parseFloat(this.planeOffsetSpinner.model.get("value")),this.changeAccMessage("cone-data-container",0,[a,b.get("coneSlop")]),this.changeAccMessage("plane-data-container",0,[b.get("planeSlop"),f]),b.set("planeOffset",f),b.set("coneRadius",e),b.set("coneHeight",a),b.set("showPopupOnTryAnother",!0),this._initializeCone(),this._resetLast3DPosition()},_coneSlopValueChanged:function(){var a=parseFloat(this.coneSlopSpinner.model.get("value")),b=this.model,c=b.get("coneHeight"),d=b.get("heightFactor"),e=c*d/2/a;this.changeAccMessage("cone-data-container",0,[b.get("coneHeight"),a]),b.set("coneRadius",e),b.set("coneSlop",a),b.set("showPopupOnTryAnother",!0),this._initializeCone(),this._resetLast3DPosition()},_renderCone:function(){var a=this.initialAnimationAngle;this.initialize3DObject(),this.cango3dWrapper.setWorldCoordinates(-this.canvasWidth/2,-this.canvasHeight/2,this.canvasWidth),this.resetConeView(a,!1,!0),this.animateCone()},resetConeView:function(a,b,c,d){var e=this.model,f=null;if(b===!0&&(f=e.get("coneHeight"),this.planeSlopSpinner.setSpinBoxValue(e.get("planeSlop")),this.planeOffsetSpinner.setSpinBoxValue(e.get("planeOffset")),this.coneHeightSpinner.setSpinBoxValue(f),this.coneSlopSpinner.setSpinBoxValue(e.get("coneSlop")),this.planeOffsetSpinner.setMinMaxValue(parseFloat(-(f/2).toFixed(1)),parseFloat((f/2).toFixed(1)))),this.resetCone=!0,this.cango3dWrapper.clearCanvas(),this.cango3dWrapper.deleteGroup(this.movedCubeID),this.cango3dWrapper.deleteGroup(this.movedConeID),this.cango3dWrapper.deleteGroup(this.planeWrapperID),this.cango3dWrapper.createGroup3D(this.movedCubeID),this.cango3dWrapper.createGroup3D(this.movedConeID),this.cango3dWrapper.createGroup3D(this.planeWrapperID),this._initializeCone(),this._initializeCube(),this.cango3dWrapper.rotate(this.movedCubeID,1,0,0,a,!1),this.cango3dWrapper.rotate(this.movedConeID,1,0,0,a,!1),this.cango3dWrapper.rotate(this.planeWrapperID,1,0,0,a,!1),c||(this.cango3dWrapper.clearCanvas(),this._initializeCube(),this._initializeCone(),this._resetLast3DPosition(),this._enableObjectDragging()),this.isSafari&&this.firstReset&&d){var g=this;window.setTimeout(function(){g.resetConeView(270)},100)}this.resetGraphBtnView.setButtonState(MathInteractives.global.Theme2.Button.BUTTON_STATE_DISABLED)},_resetLast3DPosition:function(){this.resetCone&&(this.cango3dWrapper.rotate(this.movedConeID,1,0,0,270,!0),this.cango3dWrapper.rotate(this.planeWrapperID,1,0,0,270,!0)),this.resetCone=!1,this.cango3dWrapper.renderObj([this.movedCubeID,this.movedConeID,this.planeWrapperID])},animateCone:function(){var a=0,b=this,c=this.animationInterval;this.animationInterval=30,this._disableObjectDragging(),this.model.trigger(MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.ANIMATION_START_OF_CONIC_SECTION);var d=function(){window.clearInterval(b.animationTimerId),b.animationTimerId=window.setInterval(function(){b.cango3dWrapper.rotate(b.movedConeID,1,0,0,-3,!0),b.cango3dWrapper.rotate(b.planeWrapperID,1,0,0,-3,!0),b.cango3dWrapper.renderObj([b.movedCubeID,b.movedConeID,b.planeWrapperID]),a+=3,a>c&&(window.clearInterval(b.animationTimerId),b._enableObjectDragging(),b.model.trigger(MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab.EVENTS.ANIMATION_END_OF_CONIC_SECTION))},100)};setTimeout(d,10)},_initializeCube:function(){var a="wrapperCube";this.cango3dWrapper.createGroup3D(a);for(var b=this.canvasHeight/2,c=-this.canvasHeight/2,d=[this.cango3dWrapper.toWorldCoordinates3D(0,0,b),this.cango3dWrapper.toWorldCoordinates3D(this.canvasWidth,0,b),this.cango3dWrapper.toWorldCoordinates3D(this.canvasWidth,this.canvasHeight,b),this.cango3dWrapper.toWorldCoordinates3D(0,this.canvasHeight,b)],e=[this.cango3dWrapper.toWorldCoordinates3D(0,0,c),this.cango3dWrapper.toWorldCoordinates3D(this.canvasWidth,0,c),this.cango3dWrapper.toWorldCoordinates3D(this.canvasWidth,this.canvasHeight,c),this.cango3dWrapper.toWorldCoordinates3D(0,this.canvasHeight,c)],f=[d,e],g=0,h=0;2>h;h++){for(var i=f[h],j=["M"],k=0;4>k;k++)j[j.length]=i[k].x,j[j.length]=i[k].y,j[j.length]=i[k].z,0==k&&(j[j.length]="L");j[j.length]="Z";var l="face"+g;g++,this.cango3dWrapper.create3DPath(l,j,"rgba(255,255,255,0)"),this.cango3dWrapper.addObjToGroup(l,a)}for(var h=0;4>h;h++){var j=["M"],m=h;j[j.length]=d[m].x,j[j.length]=d[m].y,j[j.length]=d[m].z,j[j.length]="L",j[j.length]=e[m].x,j[j.length]=e[m].y,j[j.length]=e[m].z,m=(m+1)%4,j[j.length]="L",j[j.length]=e[m].x,j[j.length]=e[m].y,j[j.length]=e[m].z,j[j.length]="L",j[j.length]=d[m].x,j[j.length]=d[m].y,j[j.length]=d[m].z,j[j.length]="Z";var l="face"+g;g++,this.cango3dWrapper.create3DPath(l,j,"rgba(255,255,255,0)"),this.cango3dWrapper.addObjToGroup(l,a)}this.cango3dWrapper.addObjToGroup(a,this.movedCubeID)},_initializeCone:function(){this.cango3dWrapper.deleteObjFromGroup(this.coneGrpID,this.movedConeID);var a=this._createCone();this.cango3dWrapper.createGroup3D(this.coneGrpID),this.cango3dWrapper.addObjToGroup(a,this.coneGrpID),this.cango3dWrapper.addObjToGroup(this.coneGrpID,this.movedConeID),this._createPlane()},_createCone:function(){var b=a.Cango3DWrapper,c=this.model,d=c.get("heightFactor"),e=c.get("coneRadius"),f=c.get("coneHeight"),g=MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView,h=g.CONE_COLOR,i=g.CONE_THICKNESS,j=g.CONE_LINES_COLOR,k=g.CONE_FILL_COLOR,l=g.CONE_FILL_THICKNESS,m=1,n=30;f*=d;var o=b.getCircleShapeCmds(2*e),p="topCircle",q="bottomCircle",r="lines",s="cone";this.cango3dWrapper.create3DPath(p,o,h,i),this.cango3dWrapper.create3DPath(q,o,h,i),this.cango3dWrapper.translate(p,0,0,f/2,!1),this.cango3dWrapper.translate(q,0,0,-f/2,!1),this.cango3dWrapper.createGroup3D(r);for(var t=0;360>=t;t+=m){var u=["M",e*Math.cos(t*Math.PI/180),e*Math.sin(t*Math.PI/180),f/2,"L",0,0,0],v="topLine"+t;t%n?this.cango3dWrapper.create3DPath(v,u,k,l):this.cango3dWrapper.create3DPath(v,u,j,i),this.cango3dWrapper.addObjToGroup(v,r)}for(var t=0;360>=t;t+=m){var u=["M",e*Math.cos(t*Math.PI/180),e*Math.sin(t*Math.PI/180),-f/2,"L",0,0,0],v="bottomLine"+t;t%n?this.cango3dWrapper.create3DPath(v,u,k,l):this.cango3dWrapper.create3DPath(v,u,j,i),this.cango3dWrapper.addObjToGroup(v,r)}return this.cango3dWrapper.createGroup3D(s),this.cango3dWrapper.addObjToGroup(p,s),this.cango3dWrapper.addObjToGroup(q,s),this.cango3dWrapper.addObjToGroup(r,s),s},grabCone:function(a,b){this.stopReading(),this.model.set("cursor","closed-hand"),this.grabMousePt=a},dragCone:function(b,c){if(this.dragCount%5===0){var d=a.Cango3DWrapper;this.model.set("cursor","closed-hand"),this.resetGraphBtnView.setButtonState(MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE);var e,f,g={x:this.grabMousePt.x-c.grabOfs.x,y:this.grabMousePt.y-c.grabOfs.y,z:200},h={x:b.x-c.grabOfs.x,y:b.y-c.grabOfs.y,z:200};this.grabMousePt=b,e=d.calculateNormal(c.dwgOrg,g,h),f=d.calculateIncAngle(c.dwgOrg,g,h),this.cango3dWrapper.rotate(this.movedConeID,e.x,e.y,e.z,f,!0),this.cango3dWrapper.rotate(this.planeWrapperID,e.x,e.y,e.z,f,!0),this.cango3dWrapper.renderObj([this.movedCubeID,this.movedConeID,this.planeWrapperID])}this.dragCount++},_createPlane:function(){this.cango3dWrapper.deleteObjFromGroup(this.planeID,this.planeWrapperID);var a=this.model,b=a.get("coneRadius"),c=a.get("planeSlop"),d=a.get("planeOffset"),e=a.get("heightFactor"),f=a.get("coneHeight"),g=MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView,h=g.PLANE_COLOR,i=g.PLANE_STROKECOLOR,j=g.PLANE_THICKNESS;d*=e,f*=e;for(var k=[1,1,1],l=[1,-1,1],m=[-1,-1,-1],n=[-1,1,-1],o=[k,l,m,n],p=0,q=4;q>p;)o[p][0]=o[p][0]*b,o[p][1]=o[p][1]*b,o[p][2]=o[p][2]*b,p++;for(p=0;q>p;){var r=o[p][0]*c+d;Math.abs(2*r)>this.canvasHeight&&Math.abs(c)>=1?(o[p][2]=this.canvasHeight/2*(r/Math.abs(r)),o[p][0]=(o[p][2]-d)/c):o[p][2]=r,p++}var s=["M"];for(p=0;q>p;p++)s[s.length]=o[p][0],s[s.length]=o[p][1],s[s.length]=o[p][2],0==p&&(s[s.length]="L");s[s.length]="Z";var t="planeOutline",u="palneFill";this.cango3dWrapper.createGroup3D(this.planeID),this.cango3dWrapper.create3DPath(t,s,i,j),this.cango3dWrapper.create3DShape(u,s,h,h),this.cango3dWrapper.addObjToGroup(t,this.planeID),this.cango3dWrapper.addObjToGroup(u,this.planeID),this.cango3dWrapper.addObjToGroup(this.planeID,this.planeWrapperID),this._findConicSection()},_findConicSection:function(){this.cango3dWrapper.createGroup3D(this.conicSectionID);
var a=this.model.get("coneSlop"),b=this.model.get("planeSlop"),c=this.model.get("planeOffset"),d=this.model.get("heightFactor");c*=d,Math.abs(b)<a?0===c?this._drawPoint():this._calculateEllipsePoints(a,b,c):Math.abs(b)===a?0===c?this._calculateLinePoints(b):this._calculateParabolaPoints(a,b,c):Math.abs(b)>a&&this._calculateHyperbolaPoints(a,b,c),this.isConicSectionPresent&&(this.cango3dWrapper.addObjToGroup(this.conicSectionID,this.planeID),this.isConicSectionPresent=!1),this.cango3dWrapper.renderObj([this.movedCubeID,this.movedConeID,this.planeWrapperID])},_calculateEllipsePoints:function(a,b,c){for(var d,e,f,g,h,i,j,k=-Math.abs(c)/Math.sqrt(a*a-b*b),l=150,m=(-k-k)/(l-1),n=b*b-a*a,o=2*b*c,p=0,q=this.model.get("heightFactor"),r={},s=[],t=[];l>p;)d=k+p*m,e=c*c-a*a*d*d,f=o*o-4*n*e,0>f&&(f=0),f=Math.sqrt(f),g=(-o-f)/(2*n),h=(-o+f)/(2*n),i=b*g+c,j=b*h+c,s[s.length]=g,s[s.length]=d,s[s.length]=i,t[t.length]=h,t[t.length]=d,t[t.length]=j,p++;for(var u="ellipseLeftSection",v="ellipseRightSection",w=this._makeRangeBound(s),x=0;x<w.length;x++)this._drawConicSection(w[x],u+(x+1));w=this._makeRangeBound(t);for(var x=0;x<w.length;x++)this._drawConicSection(w[x],v+(x+1));c/=q,r.A=n,r.B=2*b*c,r.C=-(a*a),r.D=0,r.E=c*c,r.fill=!1,0===b?r.type="circle":r.type="ellipse",this.model.set("equationConstants",r)},_calculateParabolaPoints:function(a,b,c){var d=this.model.get("coneHeight"),e=this.model.get("heightFactor"),f=this.model.get("coneRadius"),g={};d=d*e/2;for(var h,i,j,k=150,l=(f- -f)/(k-1),m=a*a/(2*b*c),n=-(c*c)/(2*b*c),o=0,p=[];k>o;)h=-f+o*l,i=m*h*h+n,j=b*i+c,d>=j&&j>=-d&&(p[p.length]=i,p[p.length]=h,p[p.length]=j),o++;var q="parabola";this._drawConicSection(p,q),c/=e,g.A=0,g.B=1,g.C=-(a*a)/(2*b*c),g.D=0,g.E=c*c/(2*b*c),g.fill=!1,g.type="parabola",this.model.set("equationConstants",g)},_calculateHyperbolaPoints:function(a,b,c){var d=this.model.get("coneHeight"),e=this.model.get("heightFactor"),f=this.model.get("coneRadius"),e=this.model.get("heightFactor"),g={};d=d*e/2;for(var h,i,j,k,l,m,n,o,p=150,q=(f- -f)/(p-1),r=b*b-a*a,s=2*b*c,t=0,u=[],v=[];p>t;)h=-f+t*q,i=c*c-a*a*h*h,j=s*s-4*r*i,0>j&&(j=0),j=Math.sqrt(j),k=(-s-j)/(2*r),l=(-s+j)/(2*r),m=b*k+c,n=b*l+c,m>n&&(o=l,l=k,k=o,o=n,n=m,m=o),d>=m&&m>=-d&&(u[u.length]=k,u[u.length]=h,u[u.length]=m),d>=n&&n>=-d&&(v[v.length]=l,v[v.length]=h,v[v.length]=n),t++;var w="hyperbolaSection1",x="hyperbolaSection2";this._drawConicSection(u,w),this._drawConicSection(v,x),c/=e,g.A=r,g.B=2*b*c,g.C=-(a*a),g.D=0,g.E=c*c,g.fill=!1,g.type="hyperbola",this.model.set("equationConstants",g)},_calculateLinePoints:function(a){var b=[],c=this.model.get("coneRadius"),d=-c,e=c,f={};b[b.length]=d,b[b.length]=0,b[b.length]=a*d,b[b.length]=e,b[b.length]=0,b[b.length]=a*e;var g="lineConicSection";this._drawConicSection(b,g),f.A=0,f.B=0,f.C=0,f.D=1,f.E=0,f.fill=!1,f.type="line",this.model.set("equationConstants",f)},_drawPoint:function(b){var c=a.Cango3DWrapper,d=c.getCircleShapeCmds(2.5),e={},f="point";this._drawConicSection(d,f),e.A=1,e.B=0,e.C=1,e.D=0,e.E=-1e-4,e.fill=!0,e.type="point",this.model.set("equationConstants",e)},_drawConicSection:function(a,b){var c=(this.model,MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView),d=c.INTERSECTION_COLOR,e=c.INTERSECTION_THICKNESS;if(a.length/3>1){var f=["M"];f=f.concat(a.splice(0,3)),f[f.length]="L",f=f.concat(a),this.cango3dWrapper.create3DPath(b,f,d,e),this.cango3dWrapper.addObjToGroup(b,this.conicSectionID),this.isConicSectionPresent=!0}},_makeRangeBound:function(a){var b=0,c=a.length,d=[],e=[],f=this.model.get("coneHeight"),g=this.model.get("heightFactor");for(f*=g;c>b;){var h=a[b+2],i=f/2;h>i||-i>h?(e.length/3>1&&(d[d.length]=e),e=[]):(e[e.length]=a[b],e[e.length]=a[b+1],e[e.length]=a[b+2]),b+=3}return e.length/3>1&&(d[d.length]=e),d},_generateGraphButtons:function(){var a={},b=MathInteractives.global.Theme2.Button,c=MathInteractives.Interactivities.ConicSectionExplorer.Views.ExploreTab,d=c.GRAPH_BUTTON_HEIGHT,e=c.GRAPH_BUTTON_WIDTH,f=c.GRAPH_BUTTON_FONT_SIZE,g=c.GRAPH_BUTTON_FONT_COLOR;a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{type:b.TYPE.FA_ICON,height:38,width:43,tooltipText:this.getMessage("reset-tooltip",0),tooltipType:MathInteractives.Common.Components.Theme2.Views.Tooltip.ARROW_TYPE.RIGHT_MIDDLE,id:this.idPrefix+"conic-reset-button",icon:{faClass:this.filePath.getFontAwesomeClass("reset"),height:d,width:e,fontSize:f,fontColor:g},baseClass:""}},this.resetGraphBtnView=b.generateButton(a),a={player:this.player,manager:this.manager,path:this.filePath,idPrefix:this.idPrefix,data:{id:this.idPrefix+"conic-rotate-about-x-axis-button",type:b.TYPE.ICON,height:d,width:e,baseClass:"rotate-button",tooltipText:this.getMessage("rotate-about-x-axis",0),tooltipType:MathInteractives.Common.Components.Theme2.Views.Tooltip.ARROW_TYPE.RIGHT_MIDDLE,icon:{iconPath:this.spritePath,height:d,width:e}}},this.rotateAboutXAxisBtnView=b.generateButton(a),a.data.id=this.idPrefix+"conic-rotate-about-y-axis-button",a.data.tooltipText=this.getMessage("rotate-about-y-axis",0),this.rotateAboutYAxisBtnView=b.generateButton(a),a.data.id=this.idPrefix+"conic-rotate-about-z-axis-button",a.data.tooltipText=this.getMessage("rotate-about-z-axis",0),this.rotateAboutZAxisBtnView=b.generateButton(a)},_onResetConicBtnClick:function(){this.stopReading();var a=270;this.resetConeView(a,!1,!1,!0),this.setFocus("canvas-container"),this.firstReset=!1},_onRotateAboutZAxisMD:function(a){this.rotateAboutZAxisBtnView.getButtonState()===MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE&&(MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile||[32,1,13].indexOf(a.which)>-1)&&(this.stopReading(),this.rotatingAccButtonText=this.getAccMessage("canvas-container",4),this._startRotating(a,0,0,1,MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView.CONIC_SECTION_ROTATING_ANGLE,!0))},_onRotateAboutXAxisMD:function(a){this.rotateAboutXAxisBtnView.getButtonState()===MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE&&(MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile||[32,1,13].indexOf(a.which)>-1)&&(this.stopReading(),this.rotatingAccButtonText=this.getAccMessage("canvas-container",2),this._startRotating(a,-1,0,0,MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView.CONIC_SECTION_ROTATING_ANGLE,!0))},_onRotateAboutYAxisMD:function(a){this.rotateAboutYAxisBtnView.getButtonState()===MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE&&(MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile||[32,1,13].indexOf(a.which)>-1)&&(this.stopReading(),this.rotatingAccButtonText=this.getAccMessage("canvas-container",3),this._startRotating(a,0,1,0,MathInteractives.Interactivities.ConicSectionExplorer.Views.ConeView.CONIC_SECTION_ROTATING_ANGLE,!0))},_onRotateMU:function(a){(MathInteractives.Common.Utilities.Models.BrowserCheck.isMobile||[32,1,13].indexOf(a.which)>-1)&&(this._stopRotating(a),this.changeAccMessage("canvas-container",1,[this.rotatingAccButtonText,this.rotatingAngle]),this.rotatingAngle=0,this.setFocus("canvas-container"))},_startRotating:function(a,b,c,d,e,f){var g,h=this;this.resetGraphBtnView.setButtonState(MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE),$(document).off("mouseup.document-click"+h.idPrefix).on("mouseup.document-click"+h.idPrefix,$.proxy(this._stopRotating,this)),window.clearInterval(h.timerId),h.cango3dWrapper.rotate(this.movedConeID,b,c,d,e,!0),h.cango3dWrapper.rotate(this.planeWrapperID,b,c,d,e,!0),h.cango3dWrapper.renderObj([this.movedCubeID,this.movedConeID,this.planeWrapperID]),h.rotatingAngle+=5,this.isConeRotating=!0,g=function(){h.isConeRotating&&(window.clearInterval(h.timerId),h.timerId=window.setInterval(function(){h.cango3dWrapper.rotate(h.movedConeID,b,c,d,e,!0),h.cango3dWrapper.rotate(h.planeWrapperID,b,c,d,e,!0),h.cango3dWrapper.renderObj([h.movedCubeID,h.movedConeID,h.planeWrapperID])},100))},window.setTimeout(g,500)},_stopRotating:function(a){var b=this;this.isConeRotating=!1,window.clearInterval(b.timerId),$(document).off("mouseup.document-click")},_onCanvasMouseenter:function(){this.model.set("cursor","open-hand")},_onCanvasMouseleave:function(){this.model.set("cursor","default")},_onCanvasMouseUp:function(){this.model.set("cursor","open-hand")},_handleArrowUpTrigger:function(a){var b=this,c=300;b._previousArrowKeyDownCount=b._currentArrowKeyDownCount,b._currentArrowKeyDownCount++,0===b._previousArrowKeyDownCount&&(b._keyUpInterval&&window.clearInterval(b._keyUpInterval),b._keyUpInterval=window.setInterval(function(){b._previousArrowKeyDownCount===b._currentArrowKeyDownCount?(window.clearInterval(b._keyUpInterval),b._keyUpInterval=null,b._previousArrowKeyDownCount=0,b._currentArrowKeyDownCount=0,b._onRotateMU(b._lastArrowKeyUpEvent),b._lastArrowKeyUpEvent=null):b._lastArrowKeyUpEvent&&(b._previousArrowKeyDownCount=b._currentArrowKeyDownCount)},c))},_disableAllButtons:function(){var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_DISABLED;this.resetGraphBtnView.setButtonState(a),this.rotateAboutXAxisBtnView.setButtonState(a),this.rotateAboutYAxisBtnView.setButtonState(a),this.rotateAboutZAxisBtnView.setButtonState(a),this.planeSlopSpinner.disableSpinBox(),this.planeOffsetSpinner.disableSpinBox(),this.coneHeightSpinner.disableSpinBox(),this.coneSlopSpinner.disableSpinBox()},_enableAllButtons:function(){var a=MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE;this.resetGraphBtnView.setButtonState(a),this.rotateAboutXAxisBtnView.setButtonState(a),this.rotateAboutYAxisBtnView.setButtonState(a),this.rotateAboutZAxisBtnView.setButtonState(a),this.planeSlopSpinner.enableSpinBox(),this.planeOffsetSpinner.enableSpinBox(),this.coneHeightSpinner.enableSpinBox(),this.coneSlopSpinner.enableSpinBox(),this._disableTabIndexForConeSpinner(),this._disableTabIndexForPlaneSpinner(),this.resetConeView(270),this._enableObjectDragging()},_keyUpOnPlaneDataContainer:function(a){a.stopPropagation();var b=a.keyCode;32!==b&&13!==b||!this.$(a.target).parent().hasClass("plane-data-container")||(this._enableTabIndexForPlaneSpinner(),this.setFocus("plane-slop-custom-spinner-container-text"))},_keyUpOnConeDataContainer:function(a){var b=a.keyCode;32!==b&&13!==b||!this.$(a.target).parent().hasClass("cone-data-container")||(this._enableTabIndexForConeSpinner(),this.setFocus("cone-height-custom-spinner-container-text"))},_disableTabIndexForPlaneSpinner:function(a){this.enableTab("plane-slop-custom-spinner-container-up-arrow",!1),this.enableTab("plane-slop-custom-spinner-container-text",!1),this.enableTab("plane-slop-custom-spinner-container-down-arrow",!1),this.enableTab("plane-offset-custom-spinner-container-up-arrow",!1),this.enableTab("plane-offset-custom-spinner-container-text",!1),this.enableTab("plane-offset-custom-spinner-container-down-arrow",!1)},_disableTabIndexForConeSpinner:function(a){this.enableTab("cone-height-custom-spinner-container-up-arrow",!1),this.enableTab("cone-height-custom-spinner-container-text",!1),this.enableTab("cone-height-custom-spinner-container-down-arrow",!1),this.enableTab("cone-slop-custom-spinner-container-up-arrow",!1),this.enableTab("cone-slop-custom-spinner-container-text",!1),this.enableTab("cone-slop-custom-spinner-container-down-arrow",!1)},_enableTabIndexForPlaneSpinner:function(a){this._enableTabIndexOfSpinner(this.planeSlopSpinner,"plane-slop-custom-spinner-container-up-arrow","plane-slop-custom-spinner-container-text","plane-slop-custom-spinner-container-down-arrow"),this._enableTabIndexOfSpinner(this.planeOffsetSpinner,"plane-offset-custom-spinner-container-up-arrow","plane-offset-custom-spinner-container-text","plane-offset-custom-spinner-container-down-arrow")},_enableTabIndexForConeSpinner:function(a){this._enableTabIndexOfSpinner(this.coneHeightSpinner,"cone-height-custom-spinner-container-up-arrow","cone-height-custom-spinner-container-text","cone-height-custom-spinner-container-down-arrow"),this._enableTabIndexOfSpinner(this.coneSlopSpinner,"cone-slop-custom-spinner-container-up-arrow","cone-slop-custom-spinner-container-text","cone-slop-custom-spinner-container-down-arrow")},_enableTabIndexOfSpinner:function(a,b,c,d){var e=MathInteractives.global.Theme2.Button.BUTTON_STATE_ACTIVE;a.getUpButtonState()===e&&this.enableTab(b,!0),a.getDownButtonState()===e&&this.enableTab(d,!0),this.enableTab(c)},_enableObjectDragging:function(){var a=this;this.cango3dWrapper.enableDrag(this.movedCubeID,function(b){a.grabCone(b,this)},function(b){a.dragCone(b,this)},function(){a.dragCount=0}),this.cango3dWrapper.enableDrag(this.movedConeID,function(b){a.grabCone(b,this)},function(b){a.dragCone(b,this)},function(){a.dragCount=0})},_disableObjectDragging:function(){this.cango3dWrapper.disableDrag(this.movedCubeID),this.cango3dWrapper.disableDrag(this.movedConeID)}},{CONIC_SECTION_ROTATING_ANGLE:5,PLANE_SPINNER_BUTTON_WIDTH:60,PLANE_SPINNER_BUTTON_HEIGHT:22,PLANE_SPINNER_INPUT_HEIGHT:40,CONE_SPINNER_BUTTON_WIDTH:45,CONE_SPINNER_BUTTON_HEIGHT:22,CONE_SPINNER_INPUT_HEIGHT:40,SPINNER_INPUT_BOX_COLOR:"#DCDBDB",CONE_COLOR:"#FFFFFF",CONE_LINES_COLOR:"#FFFFFF",CONE_FILL_COLOR:"rgba(150,150,150,0.2)",CONE_FILL_THICKNESS:3,CONE_THICKNESS:3,PLANE_COLOR:"RGBA(165,212,0,0.20)",PLANE_STROKECOLOR:"RGB(165,212,0)",PLANE_THICKNESS:3,INTERSECTION_COLOR:"RGB(165,212,0)",INTERSECTION_THICKNESS:3,FONT_AWESOME_FONT_SIZE:24})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.ConicSectionExplorer.templates=MathInteractives.Interactivities.ConicSectionExplorer.templates||{};b.exploreTab=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'explore-tab-container" class="explore-tab-container">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'direction-text-container" class="direction-text-container"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'explore-tab-content-container" class="explore-tab-content-container">\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-section-wrapper" class="conic-section-wrapper">\r\n      </div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-view-wrapper" class="graph-view-wrapper">\r\n\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-canvas-container" class="graph-canvas-container">\r\n          <canvas id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-canvas" class="graph-canvas" height="489" width="478"></canvas>\r\n        </div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-zoom-in-button" class="graph-zoom-in-button"></div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-reset-button" class="graph-reset-button"></div>\r\n        <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'graph-zoom-out-button" class="graph-zoom-out-button"></div>\r\n      </div>\r\n    </div>\r\n</div>'})}(),function(){var a=Handlebars.template,b=MathInteractives.Interactivities.ConicSectionExplorer.templates=MathInteractives.Interactivities.ConicSectionExplorer.templates||{};b.conicSection=a(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-section-container" class="conic-section-container">\r\n	<div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'canvas-container" class="canvas-container">\r\n		<canvas id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'activity-canvas" class="activity-canvas" width="384" height="363"></canvas>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-reset-button" class="conic-reset-button"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-rotate-angle-text" class="rotate-angle-text"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-rotate-about-x-axis-button" class="conic-rotate-about-x-axis-button"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-rotate-about-y-axis-button" class="conic-rotate-about-y-axis-button"></div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'conic-rotate-about-z-axis-button" class="conic-rotate-about-z-axis-button"></div>\r\n	</div>\r\n  \r\n  <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'spin-button-container" class="spin-button-container">\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-data-container" class="plane-data-container">\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-label" class="plane-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-slop-label" class="plane-slop-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-slop-custom-spinner-container" class="plane-slop-custom-spinner-container"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-offset-label" class="plane-offset-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'plane-offset-custom-spinner-container" class="plane-offset-custom-spinner-container"></div>\r\n    </div>\r\n    <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-data-container" class="cone-data-container">\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-label" class="cone-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-height-label" class="cone-height-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-height-custom-spinner-container" class="cone-height-custom-spinner-container"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-slop-label" class="cone-slop-label"></div>\r\n      <div id="',(g=c.idPrefix)?f=g.call(b,{hash:{},data:e}):(g=b&&b.idPrefix,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'cone-slop-custom-spinner-container" class="cone-slop-custom-spinner-container"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'})}();