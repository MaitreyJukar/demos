/*!
 * jQuery JavaScript Library v1.7.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */
function addEvent(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=addEvent.guid++),e.events||(e.events={});var i=e.events[t];i||(i=e.events[t]={},e["on"+t]&&(i[0]=e["on"+t])),i[n.$$guid]=n,e["on"+t]=handleEvent}}function removeEvent(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.events&&e.events[t]&&delete e.events[t][n.$$guid]}function handleEvent(e){var t=!0;e=e||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var i in n)this.$$handleEvent=n[i],this.$$handleEvent(e)===!1&&(t=!1);return t}function fixEvent(e){return e.preventDefault=fixEvent.preventDefault,e.stopPropagation=fixEvent.stopPropagation,e}!function(e,t){function n(e){var t,n,i=F[e]={};for(e=e.split(/\s+/),t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}function i(e,n,i){if(i===t&&1===e.nodeType){var r="data-"+n.replace(j,"-$1").toLowerCase();if(i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:B.isNumeric(i)?parseFloat(i):O.test(i)?B.parseJSON(i):i}catch(o){}B.data(e,n,i)}else i=t}return i}function r(e){for(var t in e)if(("data"!==t||!B.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function o(e,t,n){var i=t+"defer",r=t+"queue",o=t+"mark",s=B._data(e,i);!s||"queue"!==n&&B._data(e,r)||"mark"!==n&&B._data(e,o)||setTimeout(function(){B._data(e,r)||B._data(e,o)||(B.removeData(e,i,!0),s.fire())},0)}function s(){return!1}function a(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t,n){if(t=t||0,B.isFunction(t))return B.grep(e,function(e,i){var r=!!t.call(e,i,e);return r===n});if(t.nodeType)return B.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=B.grep(e,function(e){return 1===e.nodeType});if(dt.test(t))return B.filter(t,i,!n);t=B.filter(t,i)}return B.grep(e,function(e){return B.inArray(e,t)>=0===n})}function u(e){var t=mt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function d(e){return B.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e,t){if(1===t.nodeType&&B.hasData(e)){var n,i,r,o=B._data(e),s=B._data(t,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)B.event.add(t,n+(a[n][i].namespace?".":"")+a[n][i].namespace,a[n][i],a[n][i].data)}s.data&&(s.data=B.extend({},s.data))}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(B.expando))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function g(e){var t=(e.nodeName||"").toLowerCase();"input"===t?m(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&B.grep(e.getElementsByTagName("input"),m)}function v(e){var t=M.createElement("div");return At.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e,t){t.src?B.ajax({url:t.src,async:!1,dataType:"script"}):B.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function b(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,r="width"===t?jt:Ht,o=0,s=r.length;if(i>0){if("border"!==n)for(;s>o;o++)n||(i-=parseFloat(B.css(e,"padding"+r[o]))||0),"margin"===n?i+=parseFloat(B.css(e,n+r[o]))||0:i-=parseFloat(B.css(e,"border"+r[o]+"Width"))||0;return i+"px"}if(i=It(e,t,t),(0>i||null==i)&&(i=e.style[t]||0),i=parseFloat(i)||0,n)for(;s>o;o++)i+=parseFloat(B.css(e,"padding"+r[o]))||0,"padding"!==n&&(i+=parseFloat(B.css(e,"border"+r[o]+"Width"))||0),"margin"===n&&(i+=parseFloat(B.css(e,n+r[o]))||0);return i+"px"}function _(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),B.isFunction(n))for(var i,r,o,s=t.toLowerCase().split(nn),a=0,l=s.length;l>a;a++)i=s[a],o=/^\+/.test(i),o&&(i=i.substr(1)||"*"),r=e[i]=e[i]||[],r[o?"unshift":"push"](n)}}function w(e,n,i,r,o,s){o=o||n.dataTypes[0],s=s||{},s[o]=!0;for(var a,l=e[o],c=0,u=l?l.length:0,d=e===an;u>c&&(d||!a);c++)a=l[c](n,i,r),"string"==typeof a&&(!d||s[a]?a=t:(n.dataTypes.unshift(a),a=w(e,n,i,r,a,s)));return!d&&a||s["*"]||(a=w(e,n,i,r,"*",s)),a}function C(e,n){var i,r,o=B.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);r&&B.extend(!0,e,r)}function x(e,t,n,i){if(B.isArray(t))B.each(t,function(t,r){n||Vt.test(e)?i(e,r):x(e+"["+("object"==typeof r||B.isArray(r)?t:"")+"]",r,n,i)});else if(n||null==t||"object"!=typeof t)i(e,t);else for(var r in t)x(e+"["+r+"]",t[r],n,i)}function k(e,n,i){var r,o,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(o in u)o in i&&(n[u[o]]=i[o]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("content-type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in i)s=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function S(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i,r,o,s,a,l,c,u,d=e.dataTypes,h={},f=d.length,p=d[0];for(i=1;f>i;i++){if(1===i)for(r in e.converters)"string"==typeof r&&(h[r.toLowerCase()]=e.converters[r]);if(s=p,p=d[i],"*"===p)p=s;else if("*"!==s&&s!==p){if(a=s+" "+p,l=h[a]||h["* "+p],!l){u=t;for(c in h)if(o=c.split(" "),(o[0]===s||"*"===o[0])&&(u=h[o[1]+" "+p])){c=h[c],c===!0?l=u:u===!0&&(l=c);break}}l||u||B.error("No conversion from "+a.replace(" "," to ")),l!==!0&&(n=l?l(n):u(c(n)))}}return n}function E(){try{return new e.XMLHttpRequest}catch(t){}}function T(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function N(){return setTimeout(A,0),bn=B.now()}function A(){bn=t}function I(e,t){var n={};return B.each(xn.concat.apply([],xn.slice(0,t)),function(){n[this]=e}),n}function $(e){if(!_n[e]){var t=M.body,n=B("<"+e+">").appendTo(t),i=n.css("display");n.remove(),("none"===i||""===i)&&(gn||(gn=M.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn),vn&&gn.createElement||(vn=(gn.contentWindow||gn.contentDocument).document,vn.write(("CSS1Compat"===M.compatMode?"<!doctype html>":"")+"<html><body>"),vn.close()),n=vn.createElement(e),vn.body.appendChild(n),i=B.css(n,"display"),t.removeChild(gn)),_n[e]=i}return _n[e]}function P(e){return B.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var M=e.document,D=e.navigator,L=e.location,B=function(){function n(){if(!a.isReady){try{M.documentElement.doScroll("left")}catch(e){return setTimeout(n,1),void 0}a.ready()}}var i,r,o,s,a=function(e,t){return new a.fn.init(e,t,i)},l=e.jQuery,c=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=/\S/,h=/^\s+/,f=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,b=/(webkit)[ \/]([\w.]+)/,_=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,x=/-([a-z]|[0-9])/gi,k=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},E=D.userAgent,T=Object.prototype.toString,N=Object.prototype.hasOwnProperty,A=Array.prototype.push,I=Array.prototype.slice,$=String.prototype.trim,P=Array.prototype.indexOf,L={};return a.fn=a.prototype={constructor:a,init:function(e,n,i){var r,o,s,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&M.body)return this.context=M,this[0]=M.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1])return n=n instanceof a?n[0]:n,l=n?n.ownerDocument||n:M,s=p.exec(e),s?a.isPlainObject(n)?(e=[M.createElement(s[1])],a.fn.attr.call(e,n,!0)):e=[l.createElement(s[1])]:(s=a.buildFragment([r[1]],[l]),e=(s.cacheable?a.clone(s.fragment):s.fragment).childNodes),a.merge(this,e);if(o=M.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(e);this.length=1,this[0]=o}return this.context=M,this.selector=e,this}return a.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return a.isArray(e)?A.apply(i,e):a.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),o.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,n,i,r,o,s,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||a.isFunction(l)||(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(e=arguments[c]))for(n in e)i=l[n],r=e[n],l!==r&&(d&&r&&(a.isPlainObject(r)||(o=a.isArray(r)))?(o?(o=!1,s=i&&a.isArray(i)?i:[]):s=i&&a.isPlainObject(i)?i:{},l[n]=a.extend(d,s,r)):r!==t&&(l[n]=r));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=c),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!M.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;o.fireWith(M,[a]),a.fn.trigger&&a(M).trigger("ready").off("ready")}},bindReady:function(){if(!o){if(o=a.Callbacks("once memory"),"complete"===M.readyState)return setTimeout(a.ready,1);if(M.addEventListener)M.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",a.ready,!1);else if(M.attachEvent){M.attachEvent("onreadystatechange",s),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(i){}M.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):L[T.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!N.call(e,"constructor")&&!N.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||N.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():(a.error("Invalid JSON: "+t),void 0)):null},parseXML:function(n){var i,r;try{e.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&d.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(k,"ms-").replace(x,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var r,o=0,s=e.length,l=s===t||a.isFunction(e);if(i)if(l){for(r in e)if(n.apply(e[r],i)===!1)break}else for(;s>o&&n.apply(e[o++],i)!==!1;);else if(l){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;s>o&&n.call(e[o],o,e[o++])!==!1;);return e},trim:$?function(e){return null==e?"":$.call(e)}:function(e){return null==e?"":e.toString().replace(h,"").replace(f,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var i=a.type(e);null==e.length||"string"===i||"function"===i||"regexp"===i||a.isWindow(e)?A.call(n,e):a.merge(n,e)}return n},inArray:function(e,t,n){var i;if(t){if(P)return P.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=e.length,r=0;if("number"==typeof n.length)for(var o=n.length;o>r;r++)e[i++]=n[r];else for(;n[r]!==t;)e[i++]=n[r++];return e.length=i,e},grep:function(e,t,n){var i,r=[];n=!!n;for(var o=0,s=e.length;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,n,i){var r,o,s=[],l=0,c=e.length,u=e instanceof a||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||a.isArray(e));if(u)for(;c>l;l++)r=n(e[l],l,i),null!=r&&(s[s.length]=r);else for(o in e)r=n(e[o],o,i),null!=r&&(s[s.length]=r);return s.concat.apply([],s)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!a.isFunction(e))return t;var r=I.call(arguments,2),o=function(){return e.apply(n,r.concat(I.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||a.guid++,o},access:function(e,n,i,r,o,s){var l=e.length;if("object"==typeof n){for(var c in n)a.access(e,c,n[c],r,o,i);return e}if(i!==t){r=!s&&r&&a.isFunction(i);for(var u=0;l>u;u++)o(e[u],n,r?i.call(e[u],u,o(e[u],n)):i,s);return e}return l?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=b.exec(e)||_.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&C.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof a&&!(i instanceof e)&&(i=e(i)),a.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(M);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){L["[object "+t+"]"]=t.toLowerCase()}),r=a.uaMatch(E),r.browser&&(a.browser[r.browser]=!0,a.browser.version=r.version),a.browser.webkit&&(a.browser.safari=!0),d.test("Â ")&&(h=/^[\s\xA0]+/,f=/[\s\xA0]+$/),i=a(M),M.addEventListener?s=function(){M.removeEventListener("DOMContentLoaded",s,!1),a.ready()}:M.attachEvent&&(s=function(){"complete"===M.readyState&&(M.detachEvent("onreadystatechange",s),a.ready())}),a}(),F={};B.Callbacks=function(e){e=e?F[e]||n(e):{};var i,r,o,s,a,l=[],c=[],u=function(t){var n,i,r,o;for(n=0,i=t.length;i>n;n++)r=t[n],o=B.type(r),"array"===o?u(r):"function"===o&&(e.unique&&h.has(r)||l.push(r))},d=function(t,n){for(n=n||[],i=!e.memory||[t,n],r=!0,a=o||0,o=0,s=l.length;l&&s>a;a++)if(l[a].apply(t,n)===!1&&e.stopOnFalse){i=!0;break}r=!1,l&&(e.once?i===!0?h.disable():l=[]:c&&c.length&&(i=c.shift(),h.fireWith(i[0],i[1])))},h={add:function(){if(l){var e=l.length;u(arguments),r?s=l.length:i&&i!==!0&&(o=e,d(i[0],i[1]))}return this},remove:function(){if(l)for(var t=arguments,n=0,i=t.length;i>n;n++)for(var o=0;o<l.length&&(t[n]!==l[o]||(r&&s>=o&&(s--,a>=o&&a--),l.splice(o--,1),!e.unique));o++);return this},has:function(e){if(l)for(var t=0,n=l.length;n>t;t++)if(e===l[t])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=c=i=t,this},disabled:function(){return!l},lock:function(){return c=t,i&&i!==!0||h.disable(),this},locked:function(){return!c},fireWith:function(t,n){return c&&(r?e.once||c.push([t,n]):e.once&&i||d(t,n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h};var R=[].slice;B.extend({Deferred:function(e){var t,n=B.Callbacks("once memory"),i=B.Callbacks("once memory"),r=B.Callbacks("memory"),o="pending",s={resolve:n,reject:i,notify:r},a={done:n.add,fail:i.add,progress:r.add,state:function(){return o},isResolved:n.fired,isRejected:i.fired,then:function(e,t,n){return l.done(e).fail(t).progress(n),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,n){return B.Deferred(function(i){B.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n,r=t[0],o=t[1];B.isFunction(r)?l[e](function(){n=r.apply(this,arguments),n&&B.isFunction(n.promise)?n.promise().then(i.resolve,i.reject,i.notify):i[o+"With"](this===l?i:this,[n])}):l[e](i[o])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},l=a.promise({});for(t in s)l[t]=s[t].fire,l[t+"With"]=s[t].fireWith;return l.done(function(){o="resolved"},i.disable,r.lock).fail(function(){o="rejected"},n.disable,r.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){i[e]=arguments.length>1?R.call(arguments,0):t,--a||l.resolveWith(l,i)}}function n(e){return function(t){s[e]=arguments.length>1?R.call(arguments,0):t,l.notifyWith(c,s)}}var i=R.call(arguments,0),r=0,o=i.length,s=new Array(o),a=o,l=1>=o&&e&&B.isFunction(e.promise)?e:B.Deferred(),c=l.promise();if(o>1){for(;o>r;r++)i[r]&&i[r].promise&&B.isFunction(i[r].promise)?i[r].promise().then(t(r),l.reject,n(r)):--a;a||l.resolveWith(l,i)}else l!==e&&l.resolveWith(l,o?[e]:[]);return c}}),B.support=function(){var t,n,i,r,o,s,a,l,c,u,d,h,f=M.createElement("div");if(M.documentElement,f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=f.getElementsByTagName("*"),i=f.getElementsByTagName("a")[0],!n||!n.length||!i)return{};r=M.createElement("select"),o=r.appendChild(M.createElement("option")),s=f.getElementsByTagName("input")[0],t={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===s.value,optSelected:o.selected,getSetAttribute:"t"!==f.className,enctype:!!M.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==M.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!o.disabled;try{delete f.test}catch(p){t.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){t.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick")),s=M.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),f.appendChild(s),l=M.createDocumentFragment(),l.appendChild(f.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,l.removeChild(s),l.appendChild(f),f.innerHTML="",e.getComputedStyle&&(a=M.createElement("div"),a.style.width="0",a.style.marginRight="0",f.style.width="2px",f.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),f.attachEvent)for(d in{submit:1,change:1,focusin:1})u="on"+d,h=u in f,h||(f.setAttribute(u,"return;"),h="function"==typeof f[u]),t[d+"Bubbles"]=h;return l.removeChild(f),l=r=o=a=f=s=null,B(function(){var e,n,i,r,o,s,a,l,u,d,p=M.getElementsByTagName("body")[0];p&&(s=1,a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",u="style='"+a+"border:5px solid #000;padding:0;'",d="<div "+u+"><div></div></div>"+"<table "+u+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=M.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+s+"px",p.insertBefore(e,p.firstChild),f=M.createElement("div"),e.appendChild(f),f.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=f.getElementsByTagName("td"),h=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=h&&0===c[0].offsetHeight,f.innerHTML="",f.style.width=f.style.paddingLeft="1px",B.boxModel=t.boxModel=2===f.offsetWidth,"undefined"!=typeof f.style.zoom&&(f.style.display="inline",f.style.zoom=1,t.inlineBlockNeedsLayout=2===f.offsetWidth,f.style.display="",f.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=2!==f.offsetWidth),f.style.cssText=a+l,f.innerHTML=d,n=f.firstChild,i=n.firstChild,r=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==i.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},i.style.position="fixed",i.style.top="20px",o.fixedPosition=20===i.offsetTop||15===i.offsetTop,i.style.position=i.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===i.offsetTop,o.doesNotIncludeMarginInBodyOffset=p.offsetTop!==s,p.removeChild(e),f=e=null,B.extend(t,o))}),t}();var O=/^(?:\{.*\}|\[.*\])$/,j=/([A-Z])/g;B.extend({cache:{},uuid:0,expando:"jQuery"+(B.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?B.cache[e[B.expando]]:e[B.expando],!!e&&!r(e)},data:function(e,n,i,r){if(B.acceptData(e)){var o,s,a,l=B.expando,c="string"==typeof n,u=e.nodeType,d=u?B.cache:e,h=u?e[l]:e[l]&&l,f="events"===n;if(h&&d[h]&&(f||r||d[h].data)||!c||i!==t)return h||(u?e[l]=h=++B.uuid:h=l),d[h]||(d[h]={},u||(d[h].toJSON=B.noop)),("object"==typeof n||"function"==typeof n)&&(r?d[h]=B.extend(d[h],n):d[h].data=B.extend(d[h].data,n)),o=s=d[h],r||(s.data||(s.data={}),s=s.data),i!==t&&(s[B.camelCase(n)]=i),f&&!s[n]?o.events:(c?(a=s[n],null==a&&(a=s[B.camelCase(n)])):a=s,a)}},removeData:function(e,t,n){if(B.acceptData(e)){var i,o,s,a=B.expando,l=e.nodeType,c=l?B.cache:e,u=l?e[a]:a;if(c[u]){if(t&&(i=n?c[u]:c[u].data)){B.isArray(t)||(t in i?t=[t]:(t=B.camelCase(t),t=t in i?[t]:t.split(" ")));for(o=0,s=t.length;s>o;o++)delete i[t[o]];if(!(n?r:B.isEmptyObject)(i))return}(n||(delete c[u].data,r(c[u])))&&(B.support.deleteExpando||!c.setInterval?delete c[u]:c[u]=null,l&&(B.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,n){return B.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=B.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),B.fn.extend({data:function(e,n){var r,o,s,a=null;if("undefined"==typeof e){if(this.length&&(a=B.data(this[0]),1===this[0].nodeType&&!B._data(this[0],"parsedAttrs"))){o=this[0].attributes;for(var l=0,c=o.length;c>l;l++)s=o[l].name,0===s.indexOf("data-")&&(s=B.camelCase(s.substring(5)),i(this[0],s,a[s]));B._data(this[0],"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){B.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(a=this.triggerHandler("getData"+r[1]+"!",[r[0]]),a===t&&this.length&&(a=B.data(this[0],e),a=i(this[0],e,a)),a===t&&r[1]?this.data(r[0]):a):this.each(function(){var t=B(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),B.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){B.removeData(this,e)})}}),B.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",B._data(e,t,(B._data(e,t)||0)+1))},_unmark:function(e,t,n){if(e!==!0&&(n=t,t=e,e=!1),t){n=n||"fx";var i=n+"mark",r=e?0:(B._data(t,i)||1)-1;r?B._data(t,i,r):(B.removeData(t,i,!0),o(t,n,"mark"))}},queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=B._data(e,t),n&&(!i||B.isArray(n)?i=B._data(e,t,B.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),i=n.shift(),r={};"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),B._data(e,t+".run",r),i.call(e,function(){B.dequeue(e,t)},r)),n.length||(B.removeData(e,t+"queue "+t+".run",!0),o(e,t,"queue"))}}),B.fn.extend({queue:function(e,n){return"string"!=typeof e&&(n=e,e="fx"),n===t?B.queue(this[0],e):this.each(function(){var t=B.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function i(){--l||o.resolveWith(s,[s])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var r,o=B.Deferred(),s=this,a=s.length,l=1,c=e+"defer",u=e+"queue",d=e+"mark";a--;)(r=B.data(s[a],c,t,!0)||(B.data(s[a],u,t,!0)||B.data(s[a],d,t,!0))&&B.data(s[a],c,B.Callbacks("once memory"),!0))&&(l++,r.add(i));return i(),o.promise()}});var H,z,W,U=/[\n\t\r]/g,V=/\s+/,q=/\r/g,X=/^(?:button|input)$/i,K=/^(?:button|input|object|select|textarea)$/i,Y=/^a(?:rea)?$/i,G=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Q=B.support.getSetAttribute;B.fn.extend({attr:function(e,t){return B.access(this,e,t,!0,B.attr)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,e,t,!0,B.prop)},removeProp:function(e){return e=B.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,r,o,s,a;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(V),n=0,i=this.length;i>n;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==t.length){for(o=" "+r.className+" ",s=0,a=t.length;a>s;s++)~o.indexOf(" "+t[s]+" ")||(o+=t[s]+" ");r.className=B.trim(o)}else r.className=e;return this},removeClass:function(e){var n,i,r,o,s,a,l;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(V),i=0,r=this.length;r>i;i++)if(o=this[i],1===o.nodeType&&o.className)if(e){for(s=(" "+o.className+" ").replace(U," "),a=0,l=n.length;l>a;a++)s=s.replace(" "+n[a]+" "," ");o.className=B.trim(s)}else o.className="";return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var r,o=0,s=B(this),a=t,l=e.split(V);r=l[o++];)a=i?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else("undefined"===n||"boolean"===n)&&(this.className&&B._data(this,"__className__",this.className),this.className=this.className||e===!1?"":B._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(U," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=B.isFunction(e),this.each(function(i){var o,s=B(this);1===this.nodeType&&(o=r?e.call(this,i,s.val()):e,null==o?o="":"number"==typeof o?o+="":B.isArray(o)&&(o=B.map(o,function(e){return null==e?"":e+""})),n=B.valHooks[this.nodeName.toLowerCase()]||B.valHooks[this.type],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=B.valHooks[o.nodeName.toLowerCase()]||B.valHooks[o.type],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(q,""):null==i?"":i)}}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,r,o=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(0>o)return null;for(n=l?o:0,i=l?o+1:a.length;i>n;n++)if(r=a[n],!(!r.selected||(B.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&B.nodeName(r.parentNode,"optgroup"))){if(t=B(r).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?B(a[o]).val():s},set:function(e,t){var n=B.makeArray(t);return B(e).find("option").each(function(){this.selected=B.inArray(B(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,i,r){var o,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r&&n in B.attrFn?B(e)[n](i):"undefined"==typeof e.getAttribute?B.prop(e,n,i):(a=1!==l||!B.isXMLDoc(e),a&&(n=n.toLowerCase(),s=B.attrHooks[n]||(G.test(n)?z:H)),i!==t?null===i?(B.removeAttr(e,n),void 0):s&&"set"in s&&a&&(o=s.set(e,i,n))!==t?o:(e.setAttribute(n,""+i),i):s&&"get"in s&&a&&null!==(o=s.get(e,n))?o:(o=e.getAttribute(n),null===o?t:o))},removeAttr:function(e,t){var n,i,r,o,s=0;if(t&&1===e.nodeType)for(i=t.toLowerCase().split(V),o=i.length;o>s;s++)r=i[s],r&&(n=B.propFix[r]||r,B.attr(e,r,""),e.removeAttribute(Q?r:n),G.test(r)&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(X.test(e.nodeName)&&e.parentNode)B.error("type property can't be changed");else if(!B.support.radioValue&&"radio"===t&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return H&&B.nodeName(e,"button")?H.get(e,t):t in e?e.value:null},set:function(e,t,n){return H&&B.nodeName(e,"button")?H.set(e,t,n):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var r,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!B.isXMLDoc(e),s&&(n=B.propFix[n]||n,o=B.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):K.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),B.attrHooks.tabindex=B.propHooks.tabIndex,z={get:function(e,n){var i,r=B.prop(e,n);return r===!0||"boolean"!=typeof r&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?B.removeAttr(e,n):(i=B.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},Q||(W={name:!0,id:!0},H=B.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&(W[n]?""!==i.nodeValue:i.specified)?i.nodeValue:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=M.createAttribute(n),e.setAttributeNode(i)),i.nodeValue=t+""}},B.attrHooks.tabindex.set=H.set,B.each(["width","height"],function(e,t){B.attrHooks[t]=B.extend(B.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),B.attrHooks.contenteditable={get:H.get,set:function(e,t,n){""===t&&(t="false"),H.set(e,t,n)}}),B.support.hrefNormalized||B.each(["href","src","width","height"],function(e,n){B.attrHooks[n]=B.extend(B.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),B.support.style||(B.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),B.support.optSelected||(B.propHooks.selected=B.extend(B.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),B.support.enctype||(B.propFix.enctype="encoding"),B.support.checkOn||B.each(["radio","checkbox"],function(){B.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]=B.extend(B.valHooks[this],{set:function(e,t){return B.isArray(t)?e.checked=B.inArray(B(e).val(),t)>=0:void 0}})});var Z=/^(?:textarea|input|select)$/i,J=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,rt=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ot=function(e){var t=rt.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},st=function(e,t){var n=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(n.id||{}).value!==t[2]||t[3]&&!t[3].test((n["class"]||{}).value))},at=function(e){return B.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")
};B.event={add:function(e,n,i,r,o){var s,a,l,c,u,d,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(s=B._data(e))){for(i.handler&&(p=i,i=p.handler),i.guid||(i.guid=B.guid++),l=s.events,l||(s.events=l={}),a=s.handle,a||(s.handle=a=function(e){return"undefined"==typeof B||e&&B.event.triggered===e.type?t:B.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=B.trim(at(n)).split(" "),c=0;c<n.length;c++)u=J.exec(n[c])||[],d=u[1],h=(u[2]||"").split(".").sort(),g=B.event.special[d]||{},d=(o?g.delegateType:g.bindType)||d,g=B.event.special[d]||{},f=B.extend({type:d,origType:u[1],data:r,handler:i,guid:i.guid,selector:o,quick:ot(o),namespace:h.join(".")},p),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,r,h,a)!==!1||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,f):m.push(f),B.event.global[d]=!0;e=null}},global:{},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,f,p,m,g,v=B.hasData(e)&&B._data(e);if(v&&(h=v.events)){for(t=B.trim(at(t||"")).split(" "),o=0;o<t.length;o++)if(s=J.exec(t[o])||[],a=l=s[1],c=s[2],a){for(f=B.event.special[a]||{},a=(i?f.delegateType:f.bindType)||a,m=h[a]||[],u=m.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=0;d<m.length;d++)g=m[d],!r&&l!==g.origType||n&&n.guid!==g.guid||c&&!c.test(g.namespace)||i&&i!==g.selector&&("**"!==i||!g.selector)||(m.splice(d--,1),g.selector&&m.delegateCount--,f.remove&&f.remove.call(e,g));0===m.length&&u!==m.length&&(f.teardown&&f.teardown.call(e,c)!==!1||B.removeEvent(e,a,v.handle),delete h[a])}else for(a in h)B.event.remove(e,a+t[o],n,i,!0);B.isEmptyObject(h)&&(p=v.handle,p&&(p.elem=null),B.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,o){if(!r||3!==r.nodeType&&8!==r.nodeType){var s,a,l,c,u,d,h,f,p,m,g=n.type||n,v=[];if(!it.test(g+B.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),r&&!B.event.customEvent[g]||B.event.global[g]))if(n="object"==typeof n?n[B.expando]?n:new B.Event(g,n):new B.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=a,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",r){if(n.result=t,n.target||(n.target=r),i=null!=i?B.makeArray(i):[],i.unshift(n),h=B.event.special[g]||{},!h.trigger||h.trigger.apply(r,i)!==!1){if(p=[[r,h.bindType||g]],!o&&!h.noBubble&&!B.isWindow(r)){for(m=h.delegateType||g,c=it.test(m+g)?r:r.parentNode,u=null;c;c=c.parentNode)p.push([c,m]),u=c;u&&u===r.ownerDocument&&p.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<p.length&&!n.isPropagationStopped();l++)c=p[l][0],n.type=p[l][1],f=(B._data(c,"events")||{})[n.type]&&B._data(c,"handle"),f&&f.apply(c,i),f=d&&c[d],f&&B.acceptData(c)&&f.apply(c,i)===!1&&n.preventDefault();return n.type=g,o||n.isDefaultPrevented()||h._default&&h._default.apply(r.ownerDocument,i)!==!1||"click"===g&&B.nodeName(r,"a")||!B.acceptData(r)||d&&r[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!B.isWindow(r)&&(u=r[d],u&&(r[d]=null),B.event.triggered=g,r[g](),B.event.triggered=t,u&&(r[d]=u)),n.result}}else{s=B.cache;for(l in s)s[l].events&&s[l].events[g]&&B.event.trigger(n,i,s[l].handle.elem,!0)}}},dispatch:function(n){n=B.event.fix(n||e.event);var i,r,o,s,a,l,c,u,d,h,f=(B._data(this,"events")||{})[n.type]||[],p=f.delegateCount,m=[].slice.call(arguments,0),g=!n.exclusive&&!n.namespace,v=[];if(m[0]=n,n.delegateTarget=this,p&&!n.target.disabled&&(!n.button||"click"!==n.type))for(s=B(this),s.context=this.ownerDocument||this,o=n.target;o!=this;o=o.parentNode||this){for(l={},u=[],s[0]=o,i=0;p>i;i++)d=f[i],h=d.selector,l[h]===t&&(l[h]=d.quick?st(o,d.quick):s.is(h)),l[h]&&u.push(d);u.length&&v.push({elem:o,matches:u})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),i=0;i<v.length&&!n.isPropagationStopped();i++)for(c=v[i],n.currentTarget=c.elem,r=0;r<c.matches.length&&!n.isImmediatePropagationStopped();r++)d=c.matches[r],(g||!n.namespace&&!d.namespace||n.namespace_re&&n.namespace_re.test(d.namespace))&&(n.data=d.data,n.handleObj=d,a=((B.event.special[d.origType]||{}).handle||d.handler).apply(c.elem,m),a!==t&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||M,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[B.expando])return e;var n,i,r=e,o=B.event.fixHooks[e.type]||{},s=o.props?this.props.concat(o.props):this.props;for(e=B.Event(r),n=s.length;n;)i=s[--n],e[i]=r[i];return e.target||(e.target=r.srcElement||M),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),o.filter?o.filter(e,r):e},special:{ready:{setup:B.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){B.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var r=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?B.event.trigger(r,null,t):B.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},B.event.handle=B.event.dispatch,B.removeEvent=M.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},B.Event=function(e,t){return this instanceof B.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&B.extend(this,t),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0,void 0):new B.Event(e,t)},B.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return o.selector,(!r||r!==i&&!B.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),B.support.submitBubbles||(B.event.special.submit={setup:function(){return B.nodeName(this,"form")?!1:(B.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=B.nodeName(n,"input")||B.nodeName(n,"button")?n.form:t;i&&!i._submit_attached&&(B.event.add(i,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&B.event.simulate("submit",this.parentNode,e,!0)}),i._submit_attached=!0)}),void 0)},teardown:function(){return B.nodeName(this,"form")?!1:(B.event.remove(this,"._submit"),void 0)}}),B.support.changeBubbles||(B.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(B.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),B.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,B.event.simulate("change",this,e,!0))})),!1):(B.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!t._change_attached&&(B.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||B.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return B.event.remove(this,"._change"),Z.test(this.nodeName)}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){0===n++&&M.addEventListener(e,i,!0)},teardown:function(){0===--n&&M.removeEventListener(e,i,!0)}}}),B.fn.extend({on:function(e,n,i,r,o){var a,l;if("object"==typeof e){"string"!=typeof n&&(i=n,n=t);for(l in e)this.on(l,n,i,e[l],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=s;else if(!r)return this;return 1===o&&(a=r,r=function(e){return B().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=B.guid++)),this.each(function(){B.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on.call(this,e,t,n,i,1)},off:function(e,n,i){if(e&&e.preventDefault&&e.handleObj){var r=e.handleObj;return B(e.delegateTarget).off(r.namespace?r.type+"."+r.namespace:r.type,r.selector,r.handler),this}if("object"==typeof e){for(var o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=s),this.each(function(){B.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return B(this.context).on(e,this.selector,t,n),this},die:function(e,t){return B(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?B.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||B.guid++,i=0,r=function(n){var r=(B._data(this,"lastToggle"+e.guid)||0)%i;return B._data(this,"lastToggle"+e.guid,r+1),n.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=n;i<t.length;)t[i++].guid=n;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},B.attrFn&&(B.attrFn[t]=!0),tt.test(t)&&(B.event.fixHooks[t]=B.event.keyHooks),nt.test(t)&&(B.event.fixHooks[t]=B.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
function(){function e(e,t,n,i,o,s){for(var a=0,l=i.length;l>a;a++){var c=i[a];if(c){var u=!1;for(c=c[e];c;){if(c[r]===n){u=i[c.sizset];break}if(1!==c.nodeType||s||(c[r]=n,c.sizset=a),c.nodeName.toLowerCase()===t){u=c;break}c=c[e]}i[a]=u}}}function n(e,t,n,i,o,s){for(var a=0,l=i.length;l>a;a++){var c=i[a];if(c){var u=!1;for(c=c[e];c;){if(c[r]===n){u=i[c.sizset];break}if(1===c.nodeType)if(s||(c[r]=n,c.sizset=a),"string"!=typeof t){if(c===t){u=!0;break}}else if(h.filter(t,[c]).length>0){u=c;break}c=c[e]}i[a]=u}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),o=0,s=Object.prototype.toString,a=!1,l=!0,c=/\\/g,u=/\r\n/g,d=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(e,t,n,r){n=n||[],t=t||M;var o=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var a,l,c,u,d,f,g,v,b=!0,_=h.isXML(t),w=[],x=e;do if(i.exec(""),a=i.exec(x),a&&(x=a[3],w.push(a[1]),a[2])){u=a[3];break}while(a);if(w.length>1&&m.exec(e))if(2===w.length&&p.relative[w[0]])l=C(w[0]+w[1],t,r);else for(l=p.relative[w[0]]?[t]:h(w.shift(),t);w.length;)e=w.shift(),p.relative[e]&&(e+=w.shift()),l=C(e,l,r);else if(!r&&w.length>1&&9===t.nodeType&&!_&&p.match.ID.test(w[0])&&!p.match.ID.test(w[w.length-1])&&(d=h.find(w.shift(),t,_),t=d.expr?h.filter(d.expr,d.set)[0]:d.set[0]),t)for(d=r?{expr:w.pop(),set:y(r)}:h.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!t.parentNode?t:t.parentNode,_),l=d.expr?h.filter(d.expr,d.set):d.set,w.length>0?c=y(l):b=!1;w.length;)f=w.pop(),g=f,p.relative[f]?g=w.pop():f="",null==g&&(g=t),p.relative[f](c,g,_);else c=w=[];if(c||(c=l),c||h.error(f||e),"[object Array]"===s.call(c))if(b)if(t&&1===t.nodeType)for(v=0;null!=c[v];v++)c[v]&&(c[v]===!0||1===c[v].nodeType&&h.contains(t,c[v]))&&n.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&n.push(l[v]);else n.push.apply(n,c);else y(c,n);return u&&(h(u,o,n,r),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(_&&(a=l,e.sort(_),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var i,r,o,s,a,l;if(!e)return[];for(r=0,o=p.order.length;o>r;r++)if(a=p.order[r],(s=p.leftMatch[a].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(c,""),i=p.find[a](s,t,n),null!=i))){e=e.replace(p.match[a],"");break}return i||(i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:i,expr:e}},h.filter=function(e,n,i,r){for(var o,s,a,l,c,u,d,f,m,g=e,v=[],y=n,b=n&&n[0]&&h.isXML(n[0]);e&&n.length;){for(a in p.filter)if(null!=(o=p.leftMatch[a].exec(e))&&o[2]){if(u=p.filter[a],d=o[1],s=!1,o.splice(1,1),"\\"===d.substr(d.length-1))continue;if(y===v&&(v=[]),p.preFilter[a])if(o=p.preFilter[a](o,y,i,v,r,b)){if(o===!0)continue}else s=l=!0;if(o)for(f=0;null!=(c=y[f]);f++)c&&(l=u(c,o,f,y),m=r^l,i&&null!=l?m?s=!0:y[f]=!1:m&&(v.push(c),s=!0));if(l!==t){if(i||(y=v),e=e.replace(p.match[a],""),!s)return[];break}}if(e===g){if(null!=s)break;h.error(e)}g=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var f=h.getText=function(e){var t,n,i=e.nodeType,r="";if(i){if(1===i||9===i){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)r+=f(e)}else if(3===i||4===i)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(r+=f(n));return r},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!d.test(t),r=n&&!i;i&&(t=t.toLowerCase());for(var o,s=0,a=e.length;a>s;s++)if(o=e[s]){for(;(o=o.previousSibling)&&1!==o.nodeType;);e[s]=r||o&&o.nodeName.toLowerCase()===t?o||!1:o===t}r&&h.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,r=0,o=e.length;if(i&&!d.test(t)){for(t=t.toLowerCase();o>r;r++)if(n=e[r]){var s=n.parentNode;e[r]=s.nodeName.toLowerCase()===t?s:!1}}else{for(;o>r;r++)n=e[r],n&&(e[r]=i?n.parentNode:n.parentNode===t);i&&h.filter(t,e,!0)}},"":function(t,i,r){var s,a=o++,l=n;"string"!=typeof i||d.test(i)||(i=i.toLowerCase(),s=i,l=e),l("parentNode",i,a,t,s,r)},"~":function(t,i,r){var s,a=o++,l=n;"string"!=typeof i||d.test(i)||(i=i.toLowerCase(),s=i,l=e),l("previousSibling",i,a,t,s,r)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var i=t.getElementById(e[1]);return i&&i.parentNode?[i]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],i=t.getElementsByName(e[1]),r=0,o=i.length;o>r;r++)i[r].getAttribute("name")===e[1]&&n.push(i[r]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,i,r,o){if(e=" "+e[1].replace(c,"")+" ",o)return e;for(var s,a=0;null!=(s=t[a]);a++)s&&(r^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||i.push(s):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=o++,e},ATTR:function(e,t,n,i,r,o){var s=e[1]=e[1].replace(c,"");return!o&&p.attrMap[s]&&(e[1]=p.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,r,o){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var s=h.filter(e[3],t,n,!0^o);return n||r.push.apply(r,s),!1}e[3]=h(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var r=t[1],o=p.filters[r];if(o)return o(e,n,t,i);if("contains"===r)return(e.textContent||e.innerText||f([e])||"").indexOf(t[3])>=0;if("not"===r){for(var s=t[3],a=0,l=s.length;l>a;a++)if(s[a]===e)return!1;return!0}h.error(r)},CHILD:function(e,t){var n,i,o,s,a,l,c=t[1],u=e;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(n=t[2],i=t[3],1===n&&0===i)return!0;if(o=t[0],s=e.parentNode,s&&(s[r]!==o||!e.nodeIndex)){for(a=0,u=s.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);s[r]=o}return l=e.nodeIndex-i,0===n?0===l:0===l%n&&l/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=h.attr?h.attr(e,n):p.attrHandle[n]?p.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=i+"",o=t[2],s=t[4];return null==i?"!="===o:!o&&h.attr?null!=i:"="===o?r===s:"*="===o?r.indexOf(s)>=0:"~="===o?(" "+r+" ").indexOf(s)>=0:s?"!="===o?r!==s:"^="===o?0===r.indexOf(s):"$="===o?r.substr(r.length-s.length)===s:"|="===o?r===s||r.substr(0,s.length+1)===s+"-":!1:r&&i!==!1},POS:function(e,t,n,i){var r=t[2],o=p.setFilters[r];return o?o(e,n,t,i):void 0}}},m=p.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,g));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(M.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,i=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var r=e.length;r>n;n++)i.push(e[n]);else for(;e[n];n++)i.push(e[n]);return i}}var _,w;M.documentElement.compareDocumentPosition?_=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(_=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,r=[],o=[],s=e.parentNode,l=t.parentNode,c=s;if(s===l)return w(e,t);if(!s)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)o.unshift(c),c=c.parentNode;n=r.length,i=o.length;for(var u=0;n>u&&i>u;u++)if(r[u]!==o[u])return w(r[u],o[u]);return u===n?w(e,o[u],-1):w(r[u],t,1)},w=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}),function(){var e=M.createElement("div"),n="script"+(new Date).getTime(),i=M.documentElement;e.innerHTML="<a name='"+n+"'/>",i.insertBefore(e,i.firstChild),M.getElementById(n)&&(p.find.ID=function(e,n,i){if("undefined"!=typeof n.getElementById&&!i){var r=n.getElementById(e[1]);return r?r.id===e[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:t:[]}},p.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=M.createElement("div");e.appendChild(M.createComment("")),e.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],r=0;n[r];r++)1===n[r].nodeType&&i.push(n[r]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),M.querySelectorAll&&!function(){var e=h,t=M.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,i,r,o){if(i=i||M,!o&&!h.isXML(i)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===i.nodeType||9===i.nodeType)){if(s[1])return y(i.getElementsByTagName(t),r);if(s[2]&&p.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(s[2]),r)}if(9===i.nodeType){if("body"===t&&i.body)return y([i.body],r);if(s&&s[3]){var a=i.getElementById(s[3]);if(!a||!a.parentNode)return y([],r);if(a.id===s[3])return y([a],r)}try{return y(i.querySelectorAll(t),r)}catch(l){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var c=i,u=i.getAttribute("id"),d=u||n,f=i.parentNode,m=/^\s*[+~]/.test(t);u?d=d.replace(/'/g,"\\$&"):i.setAttribute("id",d),m&&f&&(i=i.parentNode);try{if(!m||f)return y(i.querySelectorAll("[id='"+d+"'] "+t),r)}catch(g){}finally{u||c.removeAttribute("id")}}}return e(t,i,r,o)};for(var i in e)h[i]=e[i];t=null}}(),function(){var e=M.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(M.createElement("div"),"div"),i=!1;try{t.call(M.documentElement,"[test!='']:sizzle")}catch(r){i=!0}h.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(i||!p.match.PSEUDO.test(r)&&!/!=/.test(r)){var o=t.call(e,r);if(o||!n||e.document&&11!==e.document.nodeType)return o}}catch(s){}return h(r,null,null,[e]).length>0}}}(),function(){var e=M.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}(),h.contains=M.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:M.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var C=function(e,t,n){for(var i,r=[],o="",s=t.nodeType?[t]:t;i=p.match.PSEUDO.exec(e);)o+=i[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var a=0,l=s.length;l>a;a++)h(e,s[a],r,n);return h.filter(o,r)};h.attr=B.attr,h.selectors.attrMap={},B.find=h,B.expr=h.selectors,B.expr[":"]=B.expr.filters,B.unique=h.uniqueSort,B.text=h.getText,B.isXMLDoc=h.isXML,B.contains=h.contains}();var lt=/Until$/,ct=/^(?:parents|prevUntil|prevAll)/,ut=/,/,dt=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,ft=B.expr.match.POS,pt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(e){var t,n,i=this;if("string"!=typeof e)return B(e).filter(function(){for(t=0,n=i.length;n>t;t++)if(B.contains(i[t],this))return!0});var r,o,s,a=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(r=a.length,B.find(e,this[t],a),t>0)for(o=r;o<a.length;o++)for(s=0;r>s;s++)if(a[s]===a[o]){a.splice(o--,1);break}return a},has:function(e){var t=B(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?B(e,this.context).index(this[0])>=0:B.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i,r=[],o=this[0];if(B.isArray(e)){for(var s=1;o&&o.ownerDocument&&o!==t;){for(n=0;n<e.length;n++)B(o).is(e[n])&&r.push({selector:e[n],elem:o,level:s});o=o.parentNode,s++}return r}var a=ft.test(e)||"string"!=typeof e?B(e,t||this.context):0;for(n=0,i=this.length;i>n;n++)for(o=this[n];o;){if(a?a.index(o)>-1:B.find.matchesSelector(o,e)){r.push(o);break}if(o=o.parentNode,!o||!o.ownerDocument||o===t||11===o.nodeType)break}return r=r.length>1?B.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?B.inArray(this[0],B(e)):B.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),i=B.merge(this.get(),n);return this.pushStack(l(n[0])||l(i[0])?i:B.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),B.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return B.nth(e,2,"nextSibling")},prev:function(e){return B.nth(e,2,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling(e.parentNode.firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return B.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:B.makeArray(e.childNodes)}},function(e,t){B.fn[e]=function(n,i){var r=B.map(this,t,n);return lt.test(e)||(i=n),i&&"string"==typeof i&&(r=B.filter(i,r)),r=this.length>1&&!pt[e]?B.unique(r):r,(this.length>1||ut.test(i))&&ct.test(e)&&(r=r.reverse()),this.pushStack(r,e,ht.call(arguments).join(","))}}),B.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?B.find.matchesSelector(t[0],e)?[t[0]]:[]:B.find.matches(e,t)},dir:function(e,n,i){for(var r=[],o=e[n];o&&9!==o.nodeType&&(i===t||1!==o.nodeType||!B(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var mt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:\d+|null)"/g,vt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,_t=/<tbody/i,wt=/<|&#?\w+;/,Ct=/<(?:script|style)/i,xt=/<(?:script|object|embed|option|style)/i,kt=new RegExp("<(?:"+mt+")","i"),St=/checked\s*(?:[^=]|=\s*.checked.)/i,Et=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)/,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=u(M);Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,B.support.htmlSerialize||(Nt._default=[1,"div<div>","</div>"]),B.fn.extend({text:function(e){return B.isFunction(e)?this.each(function(t){var n=B(this);n.text(e.call(this,t,n.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||M).createTextNode(e)):B.text(this)},wrapAll:function(e){if(B.isFunction(e))return this.each(function(t){B(this).wrapAll(e.call(this,t))});if(this[0]){var t=B(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return B.isFunction(e)?this.each(function(t){B(this).wrapInner(e.call(this,t))}):this.each(function(){var t=B(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=B.isFunction(e);return this.each(function(n){B(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){B.nodeName(this,"body")||B(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=B.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,B.clean(arguments)),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||B.filter(e,[n]).length)&&(t||1!==n.nodeType||(B.cleanData(n.getElementsByTagName("*")),B.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&B.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(gt,""):null;if("string"!=typeof e||Ct.test(e)||!B.support.leadingWhitespace&&vt.test(e)||Nt[(bt.exec(e)||["",""])[1].toLowerCase()])B.isFunction(e)?this.each(function(t){var n=B(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);else{e=e.replace(yt,"<$1></$2>");try{for(var n=0,i=this.length;i>n;n++)1===this[n].nodeType&&(B.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(r){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?B.isFunction(e)?this.each(function(t){var n=B(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=B(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;B(this).remove(),t?B(t).before(e):B(n).append(e)})):this.length?this.pushStack(B(B.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var r,o,s,a,l=e[0],c=[];if(!B.support.checkClone&&3===arguments.length&&"string"==typeof l&&St.test(l))return this.each(function(){B(this).domManip(e,n,i,!0)});if(B.isFunction(l))return this.each(function(r){var o=B(this);e[0]=l.call(this,r,n?o.html():t),o.domManip(e,n,i)});if(this[0]){if(a=l&&l.parentNode,r=B.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:B.buildFragment(e,this,c),s=r.fragment,o=1===s.childNodes.length?s=s.firstChild:s.firstChild){n=n&&B.nodeName(o,"tr");for(var u=0,h=this.length,f=h-1;h>u;u++)i.call(n?d(this[u],o):this[u],r.cacheable||h>1&&f>u?B.clone(s,!0,!0):s)}c.length&&B.each(c,y)}return this}}),B.buildFragment=function(e,t,n){var i,r,o,s,a=e[0];return t&&t[0]&&(s=t[0].ownerDocument||t[0]),s.createDocumentFragment||(s=M),!(1===e.length&&"string"==typeof a&&a.length<512&&s===M&&"<"===a.charAt(0))||xt.test(a)||!B.support.checkClone&&St.test(a)||!B.support.html5Clone&&kt.test(a)||(r=!0,o=B.fragments[a],o&&1!==o&&(i=o)),i||(i=s.createDocumentFragment(),B.clean(e,s,i,n)),r&&(B.fragments[a]=o?i:1),{fragment:i,cacheable:r}},B.fragments={},B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(n){var i=[],r=B(n),o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===r.length)return r[t](this[0]),this;for(var s=0,a=r.length;a>s;s++){var l=(s>0?this.clone(!0):this).get();B(r[s])[t](l),i=i.concat(l)}return this.pushStack(i,e,r.selector)}}),B.extend({clone:function(e,t,n){var i,r,o,s=B.support.html5Clone||!kt.test("<"+e.nodeName)?e.cloneNode(!0):v(e);if(!(B.support.noCloneEvent&&B.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||B.isXMLDoc(e)))for(f(e,s),i=p(e),r=p(s),o=0;i[o];++o)r[o]&&f(i[o],r[o]);if(t&&(h(e,s),n))for(i=p(e),r=p(s),o=0;i[o];++o)h(i[o],r[o]);return i=r=null,s},clean:function(e,t,n,i){var r;t=t||M,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||M);for(var o,s,a=[],l=0;null!=(s=e[l]);l++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(wt.test(s)){s=s.replace(yt,"<$1></$2>");var c=(bt.exec(s)||["",""])[1].toLowerCase(),d=Nt[c]||Nt._default,h=d[0],f=t.createElement("div");for(t===M?At.appendChild(f):u(t).appendChild(f),f.innerHTML=d[1]+s+d[2];h--;)f=f.lastChild;if(!B.support.tbody){var p=_t.test(s),m="table"!==c||p?"<table>"!==d[1]||p?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes;for(o=m.length-1;o>=0;--o)B.nodeName(m[o],"tbody")&&!m[o].childNodes.length&&m[o].parentNode.removeChild(m[o])}!B.support.leadingWhitespace&&vt.test(s)&&f.insertBefore(t.createTextNode(vt.exec(s)[0]),f.firstChild),s=f.childNodes}else s=t.createTextNode(s);var v;if(!B.support.appendChecked)if(s[0]&&"number"==typeof(v=s.length))for(o=0;v>o;o++)g(s[o]);else g(s);s.nodeType?a.push(s):a=B.merge(a,s)}if(n)for(r=function(e){return!e.type||Et.test(e.type)},l=0;a[l];l++)if(!i||!B.nodeName(a[l],"script")||a[l].type&&"text/javascript"!==a[l].type.toLowerCase()){if(1===a[l].nodeType){var y=B.grep(a[l].getElementsByTagName("script"),r);a.splice.apply(a,[l+1,0].concat(y))}n.appendChild(a[l])}else i.push(a[l].parentNode?a[l].parentNode.removeChild(a[l]):a[l]);return a},cleanData:function(e){for(var t,n,i,r=B.cache,o=B.event.special,s=B.support.deleteExpando,a=0;null!=(i=e[a]);a++)if((!i.nodeName||!B.noData[i.nodeName.toLowerCase()])&&(n=i[B.expando])){if(t=r[n],t&&t.events){for(var l in t.events)o[l]?B.event.remove(i,l):B.removeEvent(i,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete i[B.expando]:i.removeAttribute&&i.removeAttribute(B.expando),delete r[n]}}});var It,$t,Pt,Mt=/alpha\([^)]*\)/i,Dt=/opacity=([^)]*)/,Lt=/([A-Z]|^ms)/g,Bt=/^-?\d+(?:px)?$/i,Ft=/^-?\d/,Rt=/^([\-+])=([\-+.\de]+)/,Ot={position:"absolute",visibility:"hidden",display:"block"},jt=["Left","Right"],Ht=["Top","Bottom"];B.fn.css=function(e,n){return 2===arguments.length&&n===t?this:B.access(this,e,n,!0,function(e,n,i){return i!==t?B.style(e,n,i):B.css(e,n)})},B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=It(e,"opacity","opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":B.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a=B.camelCase(n),l=e.style,c=B.cssHooks[a];if(n=B.cssProps[a]||a,i===t)return c&&"get"in c&&(o=c.get(e,!1,r))!==t?o:l[n];if(s=typeof i,"string"===s&&(o=Rt.exec(i))&&(i=+(o[1]+1)*+o[2]+parseFloat(B.css(e,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||B.cssNumber[a]||(i+="px"),c&&"set"in c&&(i=c.set(e,i))===t)))try{l[n]=i}catch(u){}}},css:function(e,n,i){var r,o;return n=B.camelCase(n),o=B.cssHooks[n],n=B.cssProps[n]||n,"cssFloat"===n&&(n="float"),o&&"get"in o&&(r=o.get(e,!0,i))!==t?r:It?It(e,n):void 0},swap:function(e,t,n){var i={};for(var r in t)i[r]=e.style[r],e.style[r]=t[r];n.call(e);for(r in t)e.style[r]=i[r]}}),B.curCSS=B.css,B.each(["height","width"],function(e,t){B.cssHooks[t]={get:function(e,n,i){var r;return n?0!==e.offsetWidth?b(e,t,i):(B.swap(e,Ot,function(){r=b(e,t,i)}),r):void 0},set:function(e,t){return Bt.test(t)?(t=parseFloat(t),t>=0?t+"px":void 0):t}}}),B.support.opacity||(B.cssHooks.opacity={get:function(e,t){return Dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=B.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===B.trim(o.replace(Mt,""))&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=Mt.test(o)?o.replace(Mt,r):o+" "+r)}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,t){var n;return B.swap(e,{display:"inline-block"},function(){n=t?It(e,"margin-right","marginRight"):e.style.marginRight}),n}})}),M.defaultView&&M.defaultView.getComputedStyle&&($t=function(e,t){var n,i,r;return t=t.replace(Lt,"-$1").toLowerCase(),(i=e.ownerDocument.defaultView)&&(r=i.getComputedStyle(e,null))&&(n=r.getPropertyValue(t),""!==n||B.contains(e.ownerDocument.documentElement,e)||(n=B.style(e,t))),n}),M.documentElement.currentStyle&&(Pt=function(e,t){var n,i,r,o=e.currentStyle&&e.currentStyle[t],s=e.style;return null===o&&s&&(r=s[t])&&(o=r),!Bt.test(o)&&Ft.test(o)&&(n=s.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o||0,o=s.pixelLeft+"px",s.left=n,i&&(e.runtimeStyle.left=i)),""===o?"auto":o}),It=$t||Pt,B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!B.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||B.css(e,"display"))},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)});var zt,Wt,Ut=/%20/g,Vt=/\[\]$/,qt=/\r?\n/g,Xt=/#.*$/,Kt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Yt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Gt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Qt=/^(?:GET|HEAD)$/,Zt=/^\/\//,Jt=/\?/,en=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,tn=/^(?:select|textarea)/i,nn=/\s+/,rn=/([?&])_=[^&]*/,on=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,sn=B.fn.load,an={},ln={},cn=["*/"]+["*"];try{zt=L.href}catch(un){zt=M.createElement("a"),zt.href="",zt=zt.href}Wt=on.exec(zt.toLowerCase())||[],B.fn.extend({load:function(e,n,i){if("string"!=typeof e&&sn)return sn.apply(this,arguments);if(!this.length)return this;var r=e.indexOf(" ");if(r>=0){var o=e.slice(r,e.length);e=e.slice(0,r)}var s="GET";n&&(B.isFunction(n)?(i=n,n=t):"object"==typeof n&&(n=B.param(n,B.ajaxSettings.traditional),s="POST"));var a=this;return B.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?B("<div>").append(n.replace(en,"")).find(o):n)),i&&a.each(i,[n,t,e])}}),this},serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?B.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||tn.test(this.nodeName)||Yt.test(this.type))}).map(function(e,t){var n=B(this).val();return null==n?null:B.isArray(n)?B.map(n,function(e){return{name:t.name,value:e.replace(qt,"\r\n")}}):{name:t.name,value:n.replace(qt,"\r\n")}}).get()}}),B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){B.fn[t]=function(e){return this.on(t,e)}}),B.each(["get","post"],function(e,n){B[n]=function(e,i,r,o){return B.isFunction(i)&&(o=o||r,r=i,i=t),B.ajax({type:n,url:e,data:i,success:r,dataType:o})}}),B.extend({getScript:function(e,n){return B.get(e,t,n,"script")},getJSON:function(e,t,n){return B.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,B.ajaxSettings):(t=e,e=B.ajaxSettings),C(e,t),e},ajaxSettings:{url:zt,isLocal:Gt.test(Wt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":B.parseJSON,"text xml":B.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:_(an),ajaxTransport:_(ln),ajax:function(e,n){function i(e,n,i,s){if(2!==_){_=2,l&&clearTimeout(l),a=t,o=s||"",C.readyState=e>0?4:0;var c,d,y,b,w,x=n,E=i?k(h,C,i):t;if(e>=200&&300>e||304===e)if(h.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(B.lastModified[r]=b),(w=C.getResponseHeader("Etag"))&&(B.etag[r]=w)),304===e)x="notmodified",c=!0;else try{d=S(h,E),x="success",c=!0}catch(T){x="parsererror",y=T}else y=x,(!x||e)&&(x="error",0>e&&(e=0));C.status=e,C.statusText=""+(n||x),c?m.resolveWith(f,[d,x,C]):m.rejectWith(f,[C,x,y]),C.statusCode(v),v=t,u&&p.trigger("ajax"+(c?"Success":"Error"),[C,h,c?d:y]),g.fireWith(f,[C,x]),u&&(p.trigger("ajaxComplete",[C,h]),--B.active||B.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,s,a,l,c,u,d,h=B.ajaxSetup({},n),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof B)?B(f):B.event,m=B.Deferred(),g=B.Callbacks("once memory"),v=h.statusCode||{},y={},b={},_=0,C={readyState:0,setRequestHeader:function(e,t){if(!_){var n=e.toLowerCase();
e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===_?o:null},getResponseHeader:function(e){var n;if(2===_){if(!s)for(s={};n=Kt.exec(o);)s[n[1].toLowerCase()]=n[2];n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return _||(h.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),i(0,e),this}};if(m.promise(C),C.success=C.done,C.error=C.fail,C.complete=g.add,C.statusCode=function(e){if(e){var t;if(2>_)for(t in e)v[t]=[v[t],e[t]];else t=e[C.status],C.then(t,t)}return this},h.url=((e||h.url)+"").replace(Xt,"").replace(Zt,Wt[1]+"//"),h.dataTypes=B.trim(h.dataType||"*").toLowerCase().split(nn),null==h.crossDomain&&(c=on.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==Wt[1]&&c[2]==Wt[2]&&(c[3]||("http:"===c[1]?80:443))==(Wt[3]||("http:"===Wt[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=B.param(h.data,h.traditional)),w(an,h,n,C),2===_)return!1;if(u=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Qt.test(h.type),u&&0===B.active++&&B.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Jt.test(h.url)?"&":"?")+h.data,delete h.data),r=h.url,h.cache===!1)){var x=B.now(),E=h.url.replace(rn,"$1_="+x);h.url=E+(E===h.url?(Jt.test(h.url)?"&":"?")+"_="+x:"")}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(r=r||h.url,B.lastModified[r]&&C.setRequestHeader("If-Modified-Since",B.lastModified[r]),B.etag[r]&&C.setRequestHeader("If-None-Match",B.etag[r])),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+cn+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)C.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(f,C,h)===!1||2===_))return C.abort(),!1;for(d in{success:1,error:1,complete:1})C[d](h[d]);if(a=w(ln,h,n,C)){C.readyState=1,u&&p.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},h.timeout));try{_=1,a.send(y,i)}catch(T){if(!(2>_))throw T;i(-1,T)}}else i(-1,"No Transport");return C},param:function(e,n){var i=[],r=function(e,t){t=B.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=B.ajaxSettings.traditional),B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){r(this.name,this.value)});else for(var o in e)x(o,e[o],n,r);return i.join("&").replace(Ut,"+")}}),B.extend({active:0,lastModified:{},etag:{}});var dn=B.now(),hn=/(\=)\?(&|$)|\?\?/i;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return B.expando+"_"+dn++}}),B.ajaxPrefilter("json jsonp",function(t,n,i){var r="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(hn.test(t.url)||r&&hn.test(t.data))){var o,s=t.jsonpCallback=B.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[s],l=t.url,c=t.data,u="$1"+s+"$2";return t.jsonp!==!1&&(l=l.replace(hn,u),t.url===l&&(r&&(c=c.replace(hn,u)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+s))),t.url=l,t.data=c,e[s]=function(e){o=[e]},i.always(function(){e[s]=a,o&&B.isFunction(a)&&e[s](o[0])}),t.converters["script json"]=function(){return o||B.error(s+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return B.globalEval(e),e}}}),B.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),B.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=M.head||M.getElementsByTagName("head")[0]||M.documentElement;return{send:function(r,o){n=M.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,r||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var fn,pn=e.ActiveXObject?function(){for(var e in fn)fn[e](0,1)}:!1,mn=0;B.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&E()||T()}:E,function(e){B.extend(B.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(B.ajaxSettings.xhr()),B.support.ajax&&B.ajaxTransport(function(n){if(!n.crossDomain||B.support.cors){var i;return{send:function(r,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,r){var a,c,u,d,h;try{if(i&&(r||4===l.readyState))if(i=t,s&&(l.onreadystatechange=B.noop,pn&&delete fn[s]),r)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h),d.text=l.responseText;try{c=l.statusText}catch(f){c=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){r||o(-1,p)}d&&o(a,c,d,u)},n.async&&4!==l.readyState?(s=++mn,pn&&(fn||(fn={},B(e).unload(pn)),fn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var gn,vn,yn,bn,_n={},wn=/^(?:toggle|show|hide)$/,Cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];B.fn.extend({show:function(e,t,n){var i,r;if(e||0===e)return this.animate(I("show",3),e,t,n);for(var o=0,s=this.length;s>o;o++)i=this[o],i.style&&(r=i.style.display,B._data(i,"olddisplay")||"none"!==r||(r=i.style.display=""),""===r&&"none"===B.css(i,"display")&&B._data(i,"olddisplay",$(i.nodeName)));for(o=0;s>o;o++)i=this[o],i.style&&(r=i.style.display,(""===r||"none"===r)&&(i.style.display=B._data(i,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(I("hide",3),e,t,n);for(var i,r,o=0,s=this.length;s>o;o++)i=this[o],i.style&&(r=B.css(i,"display"),"none"===r||B._data(i,"olddisplay")||B._data(i,"olddisplay",r));for(o=0;s>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:B.fn.toggle,toggle:function(e,t,n){var i="boolean"==typeof e;return B.isFunction(e)&&B.isFunction(t)?this._toggle.apply(this,arguments):null==e||i?this.each(function(){var t=i?e:B(this).is(":hidden");B(this)[t?"show":"hide"]()}):this.animate(I("toggle",3),e,t,n),this},fadeTo:function(e,t,n,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){function r(){o.queue===!1&&B._mark(this);var t,n,i,r,s,a,l,c,u,d=B.extend({},o),h=1===this.nodeType,f=h&&B(this).is(":hidden");d.animatedProperties={};for(i in e){if(t=B.camelCase(i),i!==t&&(e[t]=e[i],delete e[i]),n=e[t],B.isArray(n)?(d.animatedProperties[t]=n[1],n=e[t]=n[0]):d.animatedProperties[t]=d.specialEasing&&d.specialEasing[t]||d.easing||"swing","hide"===n&&f||"show"===n&&!f)return d.complete.call(this);!h||"height"!==t&&"width"!==t||(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===B.css(this,"display")&&"none"===B.css(this,"float")&&(B.support.inlineBlockNeedsLayout&&"inline"!==$(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(i in e)r=new B.fx(this,d,i),n=e[i],wn.test(n)?(u=B._data(this,"toggle"+i)||("toggle"===n?f?"show":"hide":0),u?(B._data(this,"toggle"+i,"show"===u?"hide":"show"),r[u]()):r[n]()):(s=Cn.exec(n),a=r.cur(),s?(l=parseFloat(s[2]),c=s[3]||(B.cssNumber[i]?"":"px"),"px"!==c&&(B.style(this,i,(l||1)+c),a=(l||1)/r.cur()*a,B.style(this,i,a+c)),s[1]&&(l=("-="===s[1]?-1:1)*l+a),r.custom(a,l,c)):r.custom(a,n,""));return!0}var o=B.speed(t,n,i);return B.isEmptyObject(e)?this.each(o.complete,[!1]):(e=B.extend({},e),o.queue===!1?this.each(r):this.queue(o.queue,r))},stop:function(e,n,i){return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var r=t[n];B.removeData(e,n,!0),r.stop(i)}var n,r=!1,o=B.timers,s=B._data(this);if(i||B._unmark(!0,this),null==e)for(n in s)s[n]&&s[n].stop&&n.indexOf(".run")===n.length-4&&t(this,s,n);else s[n=e+".run"]&&s[n].stop&&t(this,s,n);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(i?o[n](!0):o[n].saveState(),r=!0,o.splice(n,1));i&&r||B.dequeue(this,e)})}}),B.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){B.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),B.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?B.extend({},e):{complete:n||!n&&t||B.isFunction(e)&&e,duration:e,easing:n&&t||t&&!B.isFunction(t)&&t};return i.duration=B.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in B.fx.speeds?B.fx.speeds[i.duration]:B.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(e){B.isFunction(i.old)&&i.old.call(this),i.queue?B.dequeue(this,i.queue):e!==!1&&B._unmark(this)},i},easing:{linear:function(e,t,n,i){return n+i*e},swing:function(e,t,n,i){return(-Math.cos(e*Math.PI)/2+.5)*i+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),B.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(B.fx.step[this.prop]||B.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=B.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,n,i){function r(e){return o.step(e)}var o=this,s=B.fx;this.startTime=bn||N(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=i||this.unit||(B.cssNumber[this.prop]?"":"px"),r.queue=this.options.queue,r.elem=this.elem,r.saveState=function(){o.options.hide&&B._data(o.elem,"fxshow"+o.prop)===t&&B._data(o.elem,"fxshow"+o.prop,o.start)},r()&&B.timers.push(r)&&!yn&&(yn=setInterval(s.tick,s.interval))},show:function(){var e=B._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||B.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),B(this.elem).show()},hide:function(){this.options.orig[this.prop]=B._data(this.elem,"fxshow"+this.prop)||B.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,i,r=bn||N(),o=!0,s=this.elem,a=this.options;if(e||r>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){if(null==a.overflow||B.support.shrinkWrapBlocks||B.each(["","X","Y"],function(e,t){s.style["overflow"+t]=a.overflow[e]}),a.hide&&B(s).hide(),a.hide||a.show)for(t in a.animatedProperties)B.style(s,t,a.orig[t]),B.removeData(s,"fxshow"+t,!0),B.removeData(s,"toggle"+t,!0);i=a.complete,i&&(a.complete=!1,i.call(s))}return!1}return 1/0==a.duration?this.now=r:(n=r-this.startTime,this.state=n/a.duration,this.pos=B.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},B.extend(B.fx,{tick:function(){for(var e,t=B.timers,n=0;n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||B.fx.stop()},interval:13,stop:function(){clearInterval(yn),yn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){B.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),B.each(["width","height"],function(e,t){B.fx.step[t]=function(e){B.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),B.expr&&B.expr.filters&&(B.expr.filters.animated=function(e){return B.grep(B.timers,function(t){return e===t.elem}).length});var kn=/^t(?:able|d|h)$/i,Sn=/^(?:body|html)$/i;B.fn.offset="getBoundingClientRect"in M.documentElement?function(e){var t,n=this[0];if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return B.offset.bodyOffset(n);try{t=n.getBoundingClientRect()}catch(i){}var r=n.ownerDocument,o=r.documentElement;if(!t||!B.contains(o,n))return t?{top:t.top,left:t.left}:{top:0,left:0};var s=r.body,a=P(r),l=o.clientTop||s.clientTop||0,c=o.clientLeft||s.clientLeft||0,u=a.pageYOffset||B.support.boxModel&&o.scrollTop||s.scrollTop,d=a.pageXOffset||B.support.boxModel&&o.scrollLeft||s.scrollLeft,h=t.top+u-l,f=t.left+d-c;return{top:h,left:f}}:function(e){var t=this[0];if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);for(var n,i=t.offsetParent,r=t,o=t.ownerDocument,s=o.documentElement,a=o.body,l=o.defaultView,c=l?l.getComputedStyle(t,null):t.currentStyle,u=t.offsetTop,d=t.offsetLeft;(t=t.parentNode)&&t!==a&&t!==s&&(!B.support.fixedPosition||"fixed"!==c.position);)n=l?l.getComputedStyle(t,null):t.currentStyle,u-=t.scrollTop,d-=t.scrollLeft,t===i&&(u+=t.offsetTop,d+=t.offsetLeft,!B.support.doesNotAddBorder||B.support.doesAddBorderForTableAndCells&&kn.test(t.nodeName)||(u+=parseFloat(n.borderTopWidth)||0,d+=parseFloat(n.borderLeftWidth)||0),r=i,i=t.offsetParent),B.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(u+=parseFloat(n.borderTopWidth)||0,d+=parseFloat(n.borderLeftWidth)||0),c=n;return("relative"===c.position||"static"===c.position)&&(u+=a.offsetTop,d+=a.offsetLeft),B.support.fixedPosition&&"fixed"===c.position&&(u+=Math.max(s.scrollTop,a.scrollTop),d+=Math.max(s.scrollLeft,a.scrollLeft)),{top:u,left:d}},B.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return B.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(B.css(e,"marginTop"))||0,n+=parseFloat(B.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=B.css(e,"position");"static"===i&&(e.style.position="relative");var r,o,s=B(e),a=s.offset(),l=B.css(e,"top"),c=B.css(e,"left"),u=("absolute"===i||"fixed"===i)&&B.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),r=h.top,o=h.left):(r=parseFloat(l)||0,o=parseFloat(c)||0),B.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):s.css(d)}},B.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=Sn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(B.css(e,"marginTop"))||0,n.left-=parseFloat(B.css(e,"marginLeft"))||0,i.top+=parseFloat(B.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(B.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||M.body;e&&!Sn.test(e.nodeName)&&"static"===B.css(e,"position");)e=e.offsetParent;return e})}}),B.each(["Left","Top"],function(e,n){var i="scroll"+n;B.fn[i]=function(n){var r,o;return n===t?(r=this[0])?(o=P(r),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:B.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:r[i]):null:this.each(function(){o=P(this),o?o.scrollTo(e?B(o).scrollLeft():n,e?n:B(o).scrollTop()):this[i]=n})}}),B.each(["Height","Width"],function(e,n){var i=n.toLowerCase();B.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(B.css(e,i,"padding")):this[i]():null},B.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(B.css(t,i,e?"margin":"border")):this[i]():null},B.fn[i]=function(e){var r=this[0];if(!r)return null==e?null:this;if(B.isFunction(e))return this.each(function(t){var n=B(this);n[i](e.call(this,t,n[i]()))});if(B.isWindow(r)){var o=r.document.documentElement["client"+n],s=r.document.body;return"CSS1Compat"===r.document.compatMode&&o||s&&s["client"+n]||o}if(9===r.nodeType)return Math.max(r.documentElement["client"+n],r.body["scroll"+n],r.documentElement["scroll"+n],r.body["offset"+n],r.documentElement["offset"+n]);if(e===t){var a=B.css(r,i),l=parseFloat(a);return B.isNumeric(l)?l:a}return this.css(i,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=B,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return B})}(window),function(e,t){var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},handleRemote:function(i){var r,o,s,a,l=i.data("cross-domain")||null,c=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.fire(i,"ajax:before")){if(i.is("form")){r=i.attr("method"),o=i.attr("action"),s=i.serializeArray();var u=i.data("ujs:submit-button");u&&(s.push(u),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(r=i.data("method"),o=i.attr("href"),s=i.data("params")||null);return a={type:r||"GET",data:s,dataType:c,crossDomain:l,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])}},o&&(a.url=o),n.ajax(a)}return!1},handleMethod:function(n){var i=n.attr("href"),r=n.data("method"),o=n.attr("target"),s=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),l=e('<form method="post" action="'+i+'"></form>'),c='<input name="_method" value="'+r+'" type="hidden" />';a!==t&&s!==t&&(c+='<input name="'+a+'" value="'+s+'" type="hidden" />'),o&&l.attr("target",o),l.hide().append(c).appendTo("body"),l.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o=e(),s=n||"input,textarea";return t.find(s).each(function(){r=e(this),(i?r.val():!r.val())&&(o=o.add(r))}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,i){var r=n.data("events"),o=!0;return r!==t&&r.submit!==t&&e.each(r.submit,function(e,t){return"function"==typeof t.handler?o=t.handler(i):void 0}),o},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),s=r.data("params");return n.allowAction(r)?(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t?!i.metaKey&&!i.ctrlKey||o&&"GET"!==o||s?(n.handleRemote(r)===!1&&n.enableElement(r),!1):!0:r.data("method")?(n.handleMethod(r),!1):void 0):n.stopEverything(i)}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var r=e(this),o=r.data("remote")!==t,s=n.blankInputs(r,n.requiredInputSelector),a=n.nonBlankInputs(r,n.fileInputSelector);return n.allowAction(r)?s&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[s])?n.stopEverything(i):o?a?n.fire(r,"ajax:aborted:file",[a]):!e.support.submitBubbles&&e().jquery<"1.7"&&n.callFormSubmitBindings(r,i)===!1?n.stopEverything(i):(n.handleRemote(r),!1):(setTimeout(function(){n.disableFormElements(r)},13),void 0):n.stopEverything(i)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))})}(jQuery),window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.5.9",suffix:""},function(e){var t,n=/^\s*|\s*$/g,i="$1"==="B".replace(/A(.)|B/,"$1"),r={majorVersion:"3",minorVersion:"5.9",releaseDate:"2013-10-10",_init:function(){function t(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(l.suffix="_src"),-1!=(s=e.src.indexOf("?"))&&(l.query=e.src.substring(s+1)),l.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),o&&-1==l.baseURL.indexOf("://")&&0!==l.baseURL.indexOf("/")&&(l.baseURL=o+l.baseURL),l.baseURL):null}var n,i,r,o,s,a,l=this,c=document,u=navigator,d=u.userAgent;if(l.isIE11=-1!=d.indexOf("Trident/")&&-1!=d.indexOf("rv:"),l.isOpera=e.opera&&opera.buildNumber,l.isWebKit=/WebKit/.test(d),l.isIE=!l.isWebKit&&!l.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(u.appName)||l.isIE11,l.isIE6=l.isIE&&/MSIE [56]/.test(d),l.isIE7=l.isIE&&/MSIE [7]/.test(d),l.isIE8=l.isIE&&/MSIE [8]/.test(d),l.isIE9=l.isIE&&/MSIE [9]/.test(d),l.isGecko=!l.isWebKit&&!l.isIE11&&/Gecko/.test(d),l.isMac=-1!=d.indexOf("Mac"),l.isAir=/adobeair/i.test(d),l.isIDevice=/(iPad|iPhone)/.test(d),l.isIOS5=l.isIDevice&&d.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return l.suffix=tinyMCEPreInit.suffix,l.baseURL=tinyMCEPreInit.base,l.query=tinyMCEPreInit.query,void 0;for(l.suffix="",i=c.getElementsByTagName("base"),n=0;n<i.length;n++)a=i[n].href,a&&(/^https?:\/\/[^\/]+$/.test(a)&&(a+="/"),o=a?a.match(/.*\//)[0]:"");for(i=c.getElementsByTagName("script"),n=0;n<i.length;n++)if(t(i[n]))return;if(r=c.getElementsByTagName("head")[0])for(i=r.getElementsByTagName("script"),n=0;n<i.length;n++)if(t(i[n]))return},is:function(e,n){return n?"array"==n&&r.isArray(e)?!0:typeof e==n:e!==t},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},makeMap:function(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n},each:function(e,n,i){var r,o;if(!e)return 0;if(i=i||e,e.length!==t){for(r=0,o=e.length;o>r;r++)if(n.call(i,e[r],r,e)===!1)return 0}else for(r in e)if(e.hasOwnProperty(r)&&n.call(i,e[r],r,e)===!1)return 0;return 1},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,t,n){var i,r,o,s,a,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],r=l.createNS(e[3].replace(/\.\w+$/,""),n),!r[o]){if("static"==e[2])return r[o]=t,this.onCreate&&this.onCreate(e[2],e[3],r[o]),void 0;t[o]||(t[o]=function(){},c=1),r[o]=t[o],l.extend(r[o].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,s=e[5].match(/\.(\w+)$/i)[1],a=r[o],r[o]=c?function(){return i[s].apply(this,arguments)}:function(){return this.parent=i[s],a.apply(this,arguments)},r[o].prototype[o]=r[o],l.each(i,function(e,t){r[o].prototype[t]=i[t]}),l.each(t,function(e,t){i[t]?r[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(r[o].prototype[t]=e)})),l.each(t["static"],function(e,t){r[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],r[o].prototype)}},walk:function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),r.each(e,function(e,o){return t.call(i,e,o,n)===!1?!1:(r.walk(e,t,n,i),void 0)}))},createNS:function(t,n){var i,r;for(n=n||e,t=t.split("."),i=0;i<t.length;i++)r=t[i],n[r]||(n[r]={}),n=n[r];return n},resolve:function(t,n){var i,r;for(n=n||e,t=t.split("."),i=0,r=t.length;r>i&&(n=n[t[i]],n);i++);return n},addUnload:function(t,n){function i(){function t(){n.detachEvent("onstop",t),r&&r(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",t),e.setTimeout(function(){n&&n.detachEvent("onstop",t)},0))}var r,o=this;return r=function(){var t,n,s=o.unloads;if(s){for(n in s)t=s[n],t&&t.func&&t.func.call(t.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",i),e.detachEvent("onunload",r)):e.removeEventListener&&e.removeEventListener("unload",r,!1),o.unloads=t=s=w=r=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},o.unloads?o.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",r),e.attachEvent("onbeforeunload",i)):e.addEventListener&&e.addEventListener("unload",r,!1),o.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return r.each(t,function(i,r){return i&&i.func==e?(t.splice(r,1),n=e,!1):void 0}),n},explode:function(e,t){return!e||r.is(e,"array")?e:r.map(e.split(t||","),r.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,n,r){return i?r.replace(e,function(){var e,i=n,r=arguments;for(e=0;e<r.length-2;e++)i=r[e]===t?i.replace(new RegExp("\\$"+e,"g"),""):i.replace(new RegExp("\\$"+e,"g"),r[e]);return i}):r.replace(e,n)}};r._init(),e.tinymce=e.tinyMCE=r}(window),function(e,t){var n,i=(t.is,/^(href|src|style)$/i);if(!e&&window.console)return console.log("Load jQuery first!");t.$=e,t.adapter={patchEditor:function(t){function r(e,t){var n=this;return t&&n.removeAttr("data-mce-style"),a.css.apply(n,arguments)}function o(e,r){var o=this;return i.test(e)?r!==n?(o.each(function(n,i){t.dom.setAttrib(i,e,r)}),o):o.attr("data-mce-"+e):a.attr.apply(o,arguments)}function s(e){return e.css!==r&&(e.css=r,e.attr=o,e.tinymce=t,e.pushStack=function(){return s(a.pushStack.apply(this,arguments))}),e}var a=e.fn;t.$=function(n,i){var r=t.getDoc();return s(e(n||r,r||i))}}},t.extend=e.extend,t.extend(t,{map:e.map,grep:function(t,n){return e.grep(t,n||function(){return 1})},inArray:function(t,n){return e.inArray(n,t||[])}});var r={"tinymce.dom.DOMUtils":{select:function(t,n){var i=this;return e.find(t,i.get(n)||i.get(i.settings.root_element)||i.doc,[])},is:function(t,n){return 1!==t.nodeType&&"*"===n?!1:e(this.get(t)).is(n)}}};t.onCreate=function(e,n,i){t.extend(i,r[n])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n=this,i={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[i].concat(n.listeners):n.listeners.unshift(i),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(i,r){return e==i.cb?(n=i,t.splice(r,1),!1):void 0}),n},dispatch:function(){var e,t,n,i=this,r=arguments,o=i.listeners;for(i.inDispatch=!0,t=0;t<o.length&&(n=o[t],e=n.cb.apply(n.scope,r.length>0?r:[n.scope]),e!==!1);t++);return i.inDispatch=!1,e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var i,r,o=this;return t=tinymce.trim(t),n=o.settings=n||{},/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)?(o.source=t,void 0):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(r=n.base_uri?n.base_uri.path:new tinymce.util.URI(location.href).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(r,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),o[e]=i}),i=n.base_uri,i&&(o.protocol||(o.protocol=i.protocol),o.userInfo||(o.userInfo=i.userInfo),o.port||"mce_host"!==o.host||(o.port=i.port),o.host&&"mce_host"!==o.host||(o.host=i.host),o.source=""),void 0)},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var i=n.getURI(),r=e.getURI();return i==r||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==r?i:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new tinymce.util.URI(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,i,r,o=0,s="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,r=e.length;r>i;i++)if(i>=n.length||e[i]!=n[i]){o=i+1;break}if(e.length<n.length)for(i=0,r=n.length;r>i;i++)if(i>=e.length||e[i]!=n[i]){o=i+1;break}if(1===o)return t;for(i=0,r=e.length-(o-1);r>i;i++)s+="../";for(i=o-1,r=n.length;r>i;i++)s+=i!=o-1?"/"+n[i]:n[i];return s},toAbsPath:function(t,n){var i,r,o,s=0,a=[];for(r=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&a.push(e)}),t=a,i=n.length-1,a=[];i>=0;i--)0!==n[i].length&&"."!==n[i]&&(".."!==n[i]?s>0?s--:a.push(n[i]):s++);return i=t.length-s,o=0>=i?a.reverse().join("/"):t.slice(0,i).join("/")+"/"+a.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,i=this.get(t);return i&&e(i.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,i,r,o,s){var a="";e(n,function(e,t){a+=(a?"&":"")+escape(t)+"="+escape(e)}),this.set(t,a,i,r,o,s)},get:function(e){var t,n,i=document.cookie,r=e+"=";if(i){if(n=i.indexOf("; "+r),-1==n){if(n=i.indexOf(r),0!==n)return null}else n+=2;return t=i.indexOf(";",n),-1==t&&(t=i.length),unescape(i.substring(n+r.length,t))}},set:function(e,t,n,i,r,o){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(i?"; path="+escape(i):"")+(r?"; domain="+r:"")+(o?"; secure":"")},remove:function(e,t,n){var i=new Date;i.setTime(i.getTime()-1e3),this.set(e,"",i,t,n)}})}(),function(){function serialize(e,t){var n,i,r,o;if(t=t||'"',null==e)return"null";if(r=typeof e,"string"==r)return i="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,r){return'"'===t&&"'"===e?e:(n=i.indexOf(r),n+1?"\\"+i.charAt(n+1):(e=r.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if("object"==r){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,i="[";n<e.length;n++)i+=(n>0?",":"")+serialize(e[n],t);return i+"]"
}i="{";for(o in e)e.hasOwnProperty(o)&&(i+="function"!=typeof e[o]?(i.length>1?","+t:t)+o+t+":"+serialize(e[o],t):"");return i+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){!e.async||4==i.readyState||s++>1e4?(e.success&&1e4>s&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,s>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):o.setTimeout(t,10)}function n(e){i=0;try{i=new ActiveXObject(e)}catch(t){}return i}var i,r,o=window,s=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",i=o.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(e.data),!e.async)return t();r=o.setTimeout(t,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(i){var r=i.error,o=i.success;i=e(this.settings,i),i.success=function(e,n){e=t.parse(e),"undefined"==typeof e&&(e={error:"JSON Parse error."}),e.error?r.call(i.error_scope||i.scope,e.error,n):o.call(i.success_scope||i.scope,e.result)},i.error=function(e,t){r&&r.call(i.error_scope||i.scope,e,t)},i.data=t.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),i.content_type="application/json",n.send(i)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}}(tinymce),tinymce.util.Quirks=function(e){function t(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(i){}}function n(){var t=e.getDoc().documentMode;return t?t:6}function i(e){return e.isDefaultPrevented()}function r(){function t(t){function n(){if(3==a.nodeType){if(t&&l==a.length)return!0;if(!t&&0===l)return!0}}var i,r,o,s,a,l,c;i=P.getRng();var u=[i.startContainer,i.startOffset,i.endContainer,i.endOffset];if(i.collapsed||(t=!0),a=i[(t?"start":"end")+"Container"],l=i[(t?"start":"end")+"Offset"],3==a.nodeType&&(r=$.getParent(i.startContainer,$.isBlock),t&&(r=$.getNext(r,$.isBlock)),!r||!n()&&i.collapsed||(o=$.create("em",{id:"__mceDel"}),B(tinymce.grep(r.childNodes),function(e){o.appendChild(e)}),r.appendChild(o))),i=$.createRng(),i.setStart(u[0],u[1]),i.setEnd(u[2],u[3]),P.setRng(i),e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),o){for(s=P.getBookmark();c=$.get("__mceDel");)$.remove(c,!0);P.moveToBookmark(s)}}e.onKeyDown.add(function(e,n){var r;r=n.keyCode==I,i(n)||!r&&n.keyCode!=A||N.modifierPressed(n)||(n.preventDefault(),t(r))}),e.addCommand("Delete",function(){t()})}function o(){function t(e){var t=$.create("body"),n=e.cloneContents();return t.appendChild(n),P.serializer.serialize(t,{format:"html"})}function n(n){var i=t(n),r=$.createRng();r.selectNode(e.getBody());var o=t(r);return i===o}e.onKeyDown.add(function(e,t){var r,o=t.keyCode;if(!i(t)&&(o==I||o==A)){if(r=e.selection.isCollapsed(),r&&!$.isEmpty(e.getBody()))return;if(tinymce.isIE&&!r)return;if(!r&&!n(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}})}function s(){e.onKeyDown.add(function(e,t){!i(t)&&65==t.keyCode&&N.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function a(){e.settings.content_editable||($.bind(e.getDoc(),"focusin",function(){P.setRng(P.getRng())}),$.bind(e.getDoc(),"mousedown",function(t){t.target==e.getDoc().documentElement&&(e.getWin().focus(),P.setRng(P.getRng()))}))}function l(){e.onKeyDown.add(function(e,t){if(!i(t)&&t.keyCode===A&&P.isCollapsed()&&0===P.getRng(!0).startOffset){var n=P.getNode(),r=n.previousSibling;r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&($.remove(r),tinymce.dom.Event.cancel(t))}})}function c(){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if(!i(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function u(){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&P.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&$.hasClass(t,"mceItemAnchor")&&P.select(t),e.nodeChanged()})}function d(){function t(){var t=$.getAttribs(P.getStart().cloneNode(!1));return function(){var n=P.getStart();n!==e.getBody()&&($.setAttrib(n,"style",null),B(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!P.isCollapsed()&&$.getParent(P.getStart(),$.isBlock)!=$.getParent(P.getEnd(),$.isBlock)}function r(e,t){return t.preventDefault(),!1}e.onKeyPress.add(function(e,r){var o;return i(r)||8!=r.keyCode&&46!=r.keyCode||!n()?void 0:(o=t(),e.getDoc().execCommand("delete",!1,null),o(),r.preventDefault(),!1)}),$.bind(e.getDoc(),"cut",function(o){var s;!i(o)&&n()&&(s=t(),e.onKeyUp.addToTop(r),setTimeout(function(){s(),e.onKeyUp.remove(r)},0))})}function h(){var t,n;$.bind(e.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=P.getRng();t&&tinymce.dom.RangeUtils.compareRanges(n,t)||(e.nodeChanged(),t=n)},50)})}function f(){document.body.setAttribute("role","application")}function p(){e.onKeyDown.add(function(e,t){if(!i(t)&&t.keyCode===A&&P.isCollapsed()&&0===P.getRng(!0).startOffset){var n=P.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})}function m(){n()>7||(t("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),$.addClass(e.getBody(),"mceHideBrInPre"),D.addNodeFilter("pre",function(e){for(var t,n,i,r,o=e.length;o--;)for(t=e[o].getAll("br"),n=t.length;n--;)i=t[n],r=i.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":i.parent.insert(new tinymce.html.Node("#text",3),i,!0).value="\n"}),L.addNodeFilter("pre",function(e){for(var t,n,i,r,o=e.length;o--;)for(t=e[o].getAll("br"),n=t.length;n--;)i=t[n],r=i.prev,r&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function g(){$.bind(e.getBody(),"mouseup",function(){var e,t=P.getNode();"IMG"==t.nodeName&&((e=$.getStyle(t,"width"))&&($.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),$.setStyle(t,"width","")),(e=$.getStyle(t,"height"))&&($.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),$.setStyle(t,"height","")))})}function v(){e.onKeyDown.add(function(e,t){var n,r,o,s,a,l,c;if(n=t.keyCode==I,!i(t)&&(n||t.keyCode==A)&&!N.modifierPressed(t)&&(r=P.getRng(),o=r.startContainer,s=r.startOffset,c=r.collapsed,3==o.nodeType&&o.nodeValue.length>0&&(0===s&&!c||c&&s===(n?0:1)))){if(l=o.previousSibling,l&&"IMG"==l.nodeName)return;nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),a=$.create("br",{id:"__tmp"}),o.parentNode.insertBefore(a,o),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),o=P.getRng().startContainer,l=o.previousSibling,l&&1==l.nodeType&&!$.isBlock(l)&&$.isEmpty(l)&&!nonEmptyElements[l.nodeName.toLowerCase()]&&$.remove(l),$.remove("__tmp")}})}function y(){e.onKeyDown.add(function(e,t){var n,r,o,s,a;if(!i(t)&&t.keyCode==N.BACKSPACE&&(n=P.getRng(),r=n.startContainer,o=n.startOffset,s=$.getRoot(),a=r,n.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=s;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),n=$.createRng(),n.setStart(r,0),n.setEnd(r,0),P.setRng(n))}})}function b(){function n(){e._refreshContentEditable(),t("StyleWithCSS",!1),t("enableInlineTableEditing",!1),M.object_resizing||t("enableObjectResizing",!1)}M.readonly||(e.onBeforeExecCommand.add(n),e.onMouseDown.add(n))}function _(){function t(){B($.select("a"),function(e){var t=e.parentNode,n=$.getRoot();if(t.lastChild===e){for(;t&&!$.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}$.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){"CreateLink"===n&&t(e)}),e.onSetContent.add(P.onSetContent.add(t))}function w(){M.forced_root_block&&e.onInit.add(function(){t("DefaultParagraphSeparator",M.forced_root_block)})}function C(){function t(t,n){t&&n.initial||e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}function x(){e.onKeyDown.add(function(e,t){var n;i(t)||t.keyCode!=A||(n=e.getDoc().selection.createRange(),n&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),$.remove(n.item(0)),e.undoManager.add()))})}function k(){var t;n()>=10&&(t="",B("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"}),e.contentStyles.push(t+"{padding-right: 1px !important}"))}function S(){function n(e){var t,n;t=e.screenX-h,n=e.screenY-f,y=t*d[2]+p,b=n*d[3]+m,y=5>y?5:y,b=5>b?5:b,(N.modifierPressed(e)||"IMG"==c.nodeName&&0!==d[2]*d[3])&&(y=Math.round(b/g),b=Math.round(y*g)),$.setStyles(u,{width:y,height:b}),d[2]<0&&u.clientWidth<=y&&$.setStyle(u,"left",a+(p-y)),d[3]<0&&u.clientHeight<=b&&$.setStyle(u,"top",l+(m-b))}function i(){function t(t,n){n&&(c.style[t]||!e.schema.isValid(c.nodeName.toLowerCase(),t)?$.setStyle(c,t,n):$.setAttrib(c,t,n))}t("width",y),t("height",b),$.unbind(w,"mousemove",n),$.unbind(w,"mouseup",i),_!=w&&($.unbind(_,"mousemove",n),$.unbind(_,"mouseup",i)),$.remove(u),r(c)}function r(e){var t,r,s;o(),t=$.getPos(e),a=t.x,l=t.y,r=e.offsetWidth,s=e.offsetHeight,c!=e&&(c=e,y=b=0),B(v,function(e,t){var o;o=$.get("mceResizeHandle"+t),o?$.show(o):(o=$.add(w.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"}),$.bind(o,"mousedown",function(t){t.preventDefault(),i(),h=t.screenX,f=t.screenY,p=c.clientWidth,m=c.clientHeight,g=m/p,d=e,u=c.cloneNode(!0),$.addClass(u,"mceClonedResizable"),$.setStyles(u,{left:a,top:l,margin:0}),w.documentElement.appendChild(u),$.bind(w,"mousemove",n),$.bind(w,"mouseup",i),_!=w&&($.bind(_,"mousemove",n),$.bind(_,"mouseup",i))})),$.setStyles(o,{left:r*e[0]+a-o.offsetWidth/2,top:s*e[1]+l-o.offsetHeight/2})}),tinymce.isOpera||"IMG"!=c.nodeName||c.setAttribute("data-mce-selected","1")}function o(){c&&c.removeAttribute("data-mce-selected");for(var e in v)$.hide("mceResizeHandle"+e)}function s(){var e=$.getParent(P.getNode(),"table,img");B($.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e?r(e):o()}var a,l,c,u,d,h,f,p,m,g,v,y,b,_=document,w=e.getDoc();M.object_resizing&&M.webkit_fake_resize!==!1&&(t("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),e.onNodeChange.add(s),$.bind(w,"selectionchange",s),e.serializer.addAttributeFilter("data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}function E(){n()<9&&(D.addNodeFilter("noscript",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),L.addNodeFilter("noscript",function(e){for(var t,n,i,r=e.length;r--;)t=e[r],n=e[r].firstChild,n?n.value=tinymce.html.Entities.decode(n.value):(i=t.attributes.map["data-mce-innertext"],i&&(t.attr("data-mce-innertext",null),n=new tinymce.html.Node("#text",3),n.value=i,n.raw=!0,t.append(n)))}))}function T(){e.contentStyles.push("body {min-height: 100px}"),e.onClick.add(function(t,n){"HTML"==n.target.nodeName&&(e.execCommand("SelectAll"),e.selection.collapse(!0),e.nodeChanged())})}var N=tinymce.VK,A=N.BACKSPACE,I=N.DELETE,$=e.dom,P=e.selection,M=e.settings,D=e.parser,L=e.serializer,B=tinymce.each;p(),y(),o(),tinymce.isWebKit&&(v(),r(),a(),u(),w(),tinymce.isIDevice?h():(S(),s())),tinymce.isIE&&!tinymce.isIE11&&(l(),f(),m(),g(),x(),k(),E()),tinymce.isIE11&&T(),tinymce.isGecko&&!tinymce.isIE11&&(l(),c(),d(),b(),_(),C()),tinymce.isOpera&&S()},function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,o,s={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),r[i]||(o="&"+e[n+1]+";",s[i]=o,s[o]=i);return s}}var i,r,o,s=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,u={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?s:a,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(l,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:a,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:a,function(e){return r[e]||n[e]||e})},getEncodeFunc:function(t,o){function l(e,t){return e.replace(t?s:a,function(e){return r[e]||o[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,t){return u.encodeNamed(e,t,o)}var u=e.html.Entities;return o=n(o)||i,t=e.makeMap(t.replace(/\+/g,",")),t.named&&t.numeric?l:t.named?o?c:u.encodeNamed:t.numeric?u.encodeNumeric:u.encodeRaw},decode:function(e){return e.replace(c,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):u[r]||String.fromCharCode(r)):o[e]||i[e]||t(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function n(e,t,n,i){function r(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(i)}var i,r,o,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};for(e=e||{},o="\\\" \\' \\; \\: ; : ï»¿".split(" "),r=0;r<o.length;r++)u[o[r]]="ï»¿"+r,u["ï»¿"+r]=o[r];return{toHex:function(e){return e.replace(s,n)},parse:function(t){function i(e,t){var n,i,r,o;"none"===y["border-image"]&&delete y["border-image"],n=y[e+"-top"+t],n&&(i=y[e+"-right"+t],n==i&&(r=y[e+"-bottom"+t],i==r&&(o=y[e+"-left"+t],r==o&&(y[e+t]=o,delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t]))))}function r(e){var t,n=y[e];if(n&&!(n.indexOf(" ")<0)){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}}function o(e,t,n,i){r(t)&&r(n)&&r(i)&&(y[e]=y[t]+" "+y[n]+" "+y[i],delete y[t],delete y[n],delete y[i])}function d(e){return v=!0,u[e]}function h(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return u[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function f(e,t,n,i,r,o){return(r=r||o)?(r=h(r),"'"+r.replace(/\'/g,"\\'")+"'"):(t=h(t||n||i),b&&(t=b.call(_,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var p,m,g,v,y={},b=e.url_converter,_=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,d).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,d)});p=l.exec(t);)m=p[1].replace(c,"").toLowerCase(),g=p[2].replace(c,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(s,n),g=g.replace(a,f),y[m]=v?h(g,!0):g),l.lastIndex=p.index+p[0].length;i("border",""),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),o("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border}return y},serialize:function(e,n){function r(n){var r,o,s,l;if(r=t.styles[n])for(o=0,s=r.length;s>o;o++)n=r[o],l=e[n],l!==i&&l.length>0&&(a+=(a.length>0?" ":"")+n+": "+l+";")}var o,s,a="";if(n&&t&&t.styles)r("*"),r(n);else for(o in e)s=e[o],s!==i&&s.length>0&&(a+=(a.length>0?" ":"")+o+": "+s+";");return a}}},function(e){function t(e,t){return e.split(t||",")}function n(e,n){function i(t){return t.replace(/[A-Z]+/g,function(t){return i(e[t])})}var r,o={};for(r in e)e.hasOwnProperty(r)&&(e[r]=i(e[r]));return i(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,n,i,r){i=t(i,"|"),o[n]={attributes:s(i),attributesOrder:i,children:s(r,"|",{"#comment":{}})}}),o}function i(){var e=o.html5;return e||(e=o.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),e}function r(){var e=o.html4;return e||(e=o.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var o={},s=e.makeMap,a=e.each;e.html.Schema=function(n){function l(t,i,r){var a=n[t];return a?a=s(a,",",s(a.toUpperCase()," ")):(a=o[t],a||(a=s(i," ",s(i.toUpperCase()," ")),a=e.extend(a,r),o[t]=a)),a}function c(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function u(n){var i,r,o,a,l,u,d,h,f,p,m,g,v,y,b,_,w,C,x,S=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,T=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,N=/[*?+]/;if(n)for(n=t(n),k["@"]&&(_=k["@"].attributes,w=k["@"].attributesOrder),i=0,r=n.length;r>i;i++)if(l=S.exec(n[i])){if(y=l[1],f=l[2],b=l[3],h=l[4],g={},v=[],u={attributes:g,attributesOrder:v},"#"===y&&(u.paddEmpty=!0),"-"===y&&(u.removeEmpty=!0),_){for(C in _)g[C]=_[C];v.push.apply(v,w)}if(h)for(h=t(h,"|"),o=0,a=h.length;a>o;o++)if(l=T.exec(h[o])){if(d={},m=l[1],p=l[2].replace(/::/g,":"),y=l[3],x=l[4],"!"===m&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(p),d.required=!0),"-"===m){delete g[p],v.splice(e.inArray(v,p),1);continue}y&&("="===y&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:p,value:x}),d.defaultValue=x),":"===y&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:p,value:x}),d.forcedValue=x),"<"===y&&(d.validValues=s(x,"?"))),N.test(p)?(u.attributePatterns=u.attributePatterns||[],d.pattern=c(p),u.attributePatterns.push(d)):(g[p]||v.push(p),g[p]=d)}_||"@"!=f||(_=g,w=v),b&&(u.outputName=f,k[b]=u),N.test(f)?(u.pattern=c(f),E.push(u)):k[f]=u}}function d(e){k={},E=[],u(e),a(g,function(e,t){S[t]=e.children})}function h(e){var n=/^(~)?(.+)$/;e&&a(t(e),function(e){var t=n.exec(e),i="~"===t[1],r=i?"span":"div",o=t[2];S[o]=S[r],T[o]=r,i||(w[o.toUpperCase()]={},w[o]={}),k[o]||(k[o]=k[r]),a(S,function(e){e[r]&&(e[o]=e[r])})})}function f(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&a(t(e),function(e){var i,r,o=n.exec(e);o&&(r=o[1],i=r?S[o[2]]:S[o[2]]={"#comment":{}},i=S[o[2]],a(t(o[3],"|"),function(e){"-"===r?delete i[e]:i[e]={}}))})}function p(e){var t,n=k[e];if(n)return n;for(t=E.length;t--;)if(n=E[t],n.pattern.test(e))return n}var m,g,v,y,b,_,w,C,x=this,k={},S={},E=[],T={};n=n||{},g="html5"==n.schema?i():r(),n.verify_html===!1&&(n.valid_elements="*[*]"),n.valid_styles&&(m={},a(n.valid_styles,function(t,n){m[n]=e.explode(t)})),v=l("whitespace_elements","pre script noscript style textarea"),y=l("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=l("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),_=l("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),C=l("non_empty_elements","td th iframe video audio object script",b),textBlockElementsMap=l("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),w=l("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),n.valid_elements?d(n.valid_elements):(a(g,function(e,t){k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},S[t]=e.children}),"html5"!=n.schema&&a(t("strong/b,em/i"),function(e){e=t(e,"/"),k[e[1]].outputName=e[0]}),k.img.attributesDefault=[{name:"alt",value:""}],a(t("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){k[e]&&(k[e].removeEmpty=!0)}),a(t("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){k[e].paddEmpty=!0})),h(n.custom_elements),f(n.valid_children),u(n.extended_valid_elements),f("+ol[ul|ol],+ul[ul|ol]"),n.invalid_elements&&e.each(e.explode(n.invalid_elements),function(e){k[e]&&delete k[e]}),p("span")||u("span[!data-mce-type|*]"),x.children=S,x.styles=m,x.getBoolAttrs=function(){return _},x.getBlockElements=function(){return w},x.getTextBlockElements=function(){return textBlockElementsMap},x.getShortEndedElements=function(){return b},x.getSelfClosingElements=function(){return y},x.getNonEmptyElements=function(){return C},x.getWhiteSpaceElements=function(){return v},x.isValidChild=function(e,t){var n=S[e];return!(!n||!n[t])},x.isValid=function(e,t){var n,i,r=p(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},x.getElementRule=p,x.getCustomElements=function(){return T},x.addValidElements=u,x.setValidElements=d,x.addCustomElements=h,x.addValidChildren=f,x.elements=k}}(tinymce),function(e){e.html.SaxParser=function(t,n){var i=this,r=function(){};t=t||{},i.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(i[e]=t[e]||r)}),i.parse=function(i){function r(e){var t,n;for(t=R.length;t--&&R[t].name!==e;);if(t>=0){for(n=R.length-1;n>=t;n--)e=R[n],e.valid&&B.end(e.name);R.length=t}}function o(e,t,n,i,r){var o,s;if(t=t.toLowerCase(),n=t in g?t:j(n||i||r||""),y&&!f&&0!==t.indexOf("data-")){if(o=k[t],!o&&S){for(s=S.length;s--&&(o=S[s],!o.pattern.test(t)););-1===s&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}c.map[t]=n,c.push({name:t,value:n})}var s,a,l,c,u,d,h,f,p,m,g,v,y,b,_,w,C,x,k,S,E,T,N,A,I,$,P,M,D,L,B=this,F=0,R=[],O=0,j=e.html.Entities.decode;for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),$=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,P={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},m=n.getShortEndedElements(),A=t.self_closing_elements||n.getSelfClosingElements(),g=n.getBoolAttrs(),y=t.validate,p=t.remove_internals,D=t.fix_self_closing,L=e.isIE,x=/^:/;s=I.exec(i);){if(F<s.index&&B.text(j(i.substr(F,s.index-F))),a=s[6])a=a.toLowerCase(),L&&x.test(a)&&(a=a.substr(1)),r(a);else if(a=s[7]){if(a=a.toLowerCase(),L&&x.test(a)&&(a=a.substr(1)),v=a in m,D&&A[a]&&R.length>0&&R[R.length-1].name===a&&r(a),!y||(b=n.getElementRule(a))){if(_=!0,y&&(k=b.attributes,S=b.attributePatterns),(C=s[8])?(f=-1!==C.indexOf("data-mce-type"),f&&p&&(_=!1),c=[],c.map={},C.replace($,o)):(c=[],c.map={}),y&&!f){if(E=b.attributesRequired,T=b.attributesDefault,N=b.attributesForced)for(u=N.length;u--;)w=N[u],h=w.name,M=w.value,"{$uid}"===M&&(M="mce_"+O++),c.map[h]=M,c.push({name:h,value:M});
if(T)for(u=T.length;u--;)w=T[u],h=w.name,h in c.map||(M=w.value,"{$uid}"===M&&(M="mce_"+O++),c.map[h]=M,c.push({name:h,value:M}));if(E){for(u=E.length;u--&&!(E[u]in c.map););-1===u&&(_=!1)}c.map["data-mce-bogus"]&&(_=!1)}_&&B.start(a,c,v)}else _=!1;if(l=P[a]){l.lastIndex=F=s.index+s[0].length,(s=l.exec(i))?(_&&(d=i.substr(F,s.index-F)),F=s.index+s[0].length):(d=i.substr(F),F=i.length),_&&d.length>0&&B.text(d,!0),_&&B.end(a),I.lastIndex=F;continue}v||(C&&C.indexOf("/")==C.length-1?_&&B.end(a):R.push({name:a,valid:_}))}else(a=s[1])?B.comment(a):(a=s[2])?B.cdata(a):(a=s[3])?B.doctype(a):(a=s[4])&&B.pi(a,s[5]);F=s.index+s[0].length}for(F<i.length&&B.text(j(i.substr(F))),u=R.length-1;u>=0;u--)a=R[u],a.valid&&B.end(a.name)}}}(tinymce),function(e){function t(e,t,n){var i,r,o=n?"lastChild":"firstChild",s=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(i=e[s])return i;for(r=e.parent;r&&r!==t;r=r.parent)if(i=r[s])return i}}function n(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(n.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,i,r,o=this;if("string"!=typeof e){for(i in e)o.attr(i,e[i]);return o}if(n=o.attributes){if(t!==r){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),o;return o}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},clone:function(){var e,t,i,r,o,s=this,a=new n(s.name,s.type);if(i=s.attributes){for(o=[],o.map={},e=0,t=i.length;t>e;e++)r=i[e],"id"!==r.name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);a.attributes=o}return a.value=s.value,a.shortEnded=s.shortEnded,a},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(e){var n,i=this,r=[];for(n=i.firstChild;n;n=t(n,i))n.name===e&&r.push(n);return r},empty:function(){var e,n,i,r=this;if(r.firstChild){for(e=[],i=r.firstChild;i;i=t(i,r))e.push(i);for(n=e.length;n--;)i=e[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(e){var n,r,o=this,s=o.firstChild;if(s)do{if(1===s.type){if(s.attributes.map["data-mce-bogus"])continue;if(e[s.name])return!1;for(n=s.attributes.length;n--;)if(r=s.attributes[n].name,"name"===r||0===r.indexOf("data-mce-"))return!1}if(8===s.type)return!1;if(3===s.type&&!i.test(s.value))return!1}while(s=t(s,o));return!0},walk:function(e){return t(this,null,e)}}),e.extend(n,{create:function(e,t){var i,o;if(i=new n(e,r[e]||1),t)for(o in t)i.attr(o,t[o]);return i}}),e.html.Node=n}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,i){function r(n){var r,s,a,l,c,u,d,h,f,p,m,g,v,y;for(m=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=i.getNonEmptyElements(),g=i.getTextBlockElements(),r=0;r<n.length;r++)if(s=n[r],s.parent&&!s.fixed)if(g[s.name]&&"li"==s.parent.name){for(v=s.next;v&&g[v.name];)v.name="li",v.fixed=!0,s.parent.insert(v,s.parent),v=v.next;s.unwrap(s)}else{for(l=[s],a=s.parent;a&&!i.isValidChild(a.name,s.name)&&!m[a.name];a=a.parent)l.push(a);if(a&&l.length>1){for(l.reverse(),c=u=o.filterNode(l[0].clone()),f=0;f<l.length-1;f++){for(i.isValidChild(u.name,l[f].name)?(d=o.filterNode(l[f].clone()),u.append(d)):d=u,h=l[f].firstChild;h&&h!=l[f+1];)y=h.next,d.append(h),h=y;u=d}c.isEmpty(p)?a.insert(s,l[0],!0):(a.insert(c,l[0],!0),a.insert(s,c)),a=l[0],(a.isEmpty(p)||a.firstChild===a.lastChild&&"br"===a.firstChild.name)&&a.empty().remove()}else if(s.parent){if("li"===s.name){if(v=s.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(s);continue}if(v=s.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(s,v.firstChild,!0);continue}s.wrap(o.filterNode(new t("ul",1)));continue}i.isValidChild(s.parent.name,"div")&&i.isValidChild("div",s.name)?s.wrap(o.filterNode(new t("div",1))):"style"===s.name||"script"===s.name?s.empty().remove():s.unwrap()}}}var o=this,s={},a=[],l={},c={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",o.schema=i=i||new e.html.Schema,o.filterNode=function(e){var t,n,i;n in s&&(i=l[n],i?i.push(e):l[n]=[e]),t=a.length;for(;t--;)n=a[t].name,n in e.attributes.map&&(i=c[n],i?i.push(e):c[n]=[e]);return e},o.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=s[e];t||(s[e]=t=[]),t.push(n)})},o.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<a.length;t++)if(a[t].name===e)return a[t].callbacks.push(n),void 0;a.push({name:e,callbacks:[n]})})},o.parse=function(o,u){function d(){for(var e,t,n=g.firstChild;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!E[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=h(L,1),g.insert(t,n),t.append(n)):t=null,n=e}function h(e,n){var i,r=new t(e,n);return e in s&&(i=l[e],i?i.push(r):l[e]=[r]),r}function f(e){var t,n,i;for(t=e.prev;t&&3===t.type;)n=t.value.replace(A,""),n.length>0?(t.value=n,t=t.prev):(i=t.prev,t.remove(),t=i)}function p(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var m,g,v,y,b,_,w,C,x,k,S,E,T,N,A,I,$,P,M,D,L,B=[];if(u=u||{},l={},c={},E=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),i.getBlockElements()),D=i.getNonEmptyElements(),M=i.children,S=n.validate,L="forced_root_block"in u?u.forced_root_block:n.forced_root_block,P=i.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,I=/[ \t\r\n]+/g,$=/^[ \t\r\n]+$/,m=new e.html.SaxParser({validate:S,self_closing_elements:p(i.getSelfClosingElements()),cdata:function(e){v.append(h("#cdata",4)).value=e},text:function(e,t){var n;N||(e=e.replace(I," "),v.lastChild&&E[v.lastChild.name]&&(e=e.replace(T,""))),0!==e.length&&(n=h("#text",3),n.raw=!!t,v.append(n).value=e)},comment:function(e){v.append(h("#comment",8)).value=e},pi:function(e,t){v.append(h(e,7)).value=t,f(v)},doctype:function(e){var t;t=v.append(h("#doctype",10)),t.value=e,f(v)},start:function(e,t,n){var r,o,s,l,u;if(s=S?i.getElementRule(e):{}){for(r=h(s.outputName||e,1),r.attributes=t,r.shortEnded=n,v.append(r),u=M[v.name],u&&M[r.name]&&!u[r.name]&&B.push(r),o=a.length;o--;)l=a[o].name,l in t.map&&(x=c[l],x?x.push(r):c[l]=[r]);E[e]&&f(r),n||(v=r),!N&&P[e]&&(N=!0)}},end:function(e){var n,r,o,s,a;if(r=S?i.getElementRule(e):{}){if(E[e]&&!N){if(n=v.firstChild,n&&3===n.type)for(o=n.value.replace(T,""),o.length>0?(n.value=o,n=n.next):(s=n.next,n.remove(),n=s);n&&3===n.type;)o=n.value,s=n.next,(0===o.length||$.test(o))&&(n.remove(),n=s),n=s;if(n=v.lastChild,n&&3===n.type)for(o=n.value.replace(A,""),o.length>0?(n.value=o,n=n.prev):(s=n.prev,n.remove(),n=s);n&&3===n.type;)o=n.value,s=n.prev,(0===o.length||$.test(o))&&(n.remove(),n=s),n=s}if(N&&P[e]&&(N=!1),(r.removeEmpty||r.paddEmpty)&&v.isEmpty(D))if(r.paddEmpty)v.empty().append(new t("#text","3")).value="Â ";else if(!v.attributes.map.name&&!v.attributes.map.id)return a=v.parent,v.empty().remove(),v=a,void 0;v=v.parent}}},i),g=v=new t(u.context||n.root_name,11),m.parse(o),S&&B.length&&(u.context?u.invalid=!0:r(B)),L&&"body"==g.name&&d(),!u.invalid){for(k in l){for(x=s[k],y=l[k],w=y.length;w--;)y[w].parent||y.splice(w,1);for(b=0,_=x.length;_>b;b++)x[b](y,k,u)}for(b=0,_=a.length;_>b;b++)if(x=a[b],x.name in c){for(y=c[x.name],w=y.length;w--;)y[w].parent||y.splice(w,1);for(w=0,C=x.callbacks.length;C>w;w++)x.callbacks[w](y,x.name,u)}}return g},n.remove_trailing_brs&&o.addNodeFilter("br",function(t){var n,r,o,s,a,l,c=t.length,u=e.extend({},i.getBlockElements()),d=i.getNonEmptyElements();for(u.body=1,n=0;c>n;n++)if(r=t[n],o=r.parent,u[r.parent.name]&&r===o.lastChild){for(a=r.prev;a;){if(l=a.name,"span"!==l||"bookmark"!==a.attr("data-mce-type")){if("br"!==l)break;if("br"===l){r=null;break}}a=a.prev}r&&(r.remove(),o.isEmpty(d)&&(elementRule=i.getElementRule(o.name),elementRule&&(elementRule.removeEmpty?o.remove():elementRule.paddEmpty&&(o.empty().append(new e.html.Node("#text",3)).value="Â "))))}else{for(s=r;o.firstChild===s&&o.lastChild===s&&(s=o,!u[o.name]);)o=o.parent;s===o&&(textNode=new e.html.Node("#text",3),textNode.value="Â ",r.replace(textNode))}}),n.allow_html_in_named_anchor||o.addAttributeFilter("id,name",function(e){for(var t,n,i,r,o=e.length;o--;)if(r=e[o],"a"===r.name&&r.firstChild&&!r.attr("href")){i=r.parent,t=r.lastChild;do n=t.prev,i.insert(t,r),t=n;while(t)}})}}(tinymce),tinymce.html.Writer=function(e){var t,n,i,r,o,s=[];return e=e||{},t=e.indent,n=tinymce.makeMap(e.indent_before||""),i=tinymce.makeMap(e.indent_after||""),r=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"==e.element_format,{start:function(e,a,l){var c,u,d,h;if(t&&n[e]&&s.length>0&&(h=s[s.length-1],h.length>0&&"\n"!==h&&s.push("\n")),s.push("<",e),a)for(c=0,u=a.length;u>c;c++)d=a[c],s.push(" ",d.name,'="',r(d.value,!0),'"');s[s.length]=!l||o?">":" />",l&&t&&i[e]&&s.length>0&&(h=s[s.length-1],h.length>0&&"\n"!==h&&s.push("\n"))},end:function(e){var n;s.push("</",e,">"),t&&i[e]&&s.length>0&&(n=s[s.length-1],n.length>0&&"\n"!==n&&s.push("\n"))},text:function(e,t){e.length>0&&(s[s.length]=t?e:r(e))},cdata:function(e){s.push("<![CDATA[",e,"]]>")},comment:function(e){s.push("<!--",e,"-->")},pi:function(e,n){n?s.push("<?",e," ",n,"?>"):s.push("<?",e,"?>"),t&&s.push("\n")},doctype:function(e){s.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){s.length=0},getContent:function(){return s.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var i=this,r=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,i.schema=n=n||new e.html.Schema,i.writer=r,i.serialize=function(e){function i(e){var t,a,l,c,u,d,h,f,p,m=o[e.type];if(m)m(e);else{if(t=e.name,a=e.shortEnded,l=e.attributes,s&&l&&l.length>1){for(d=[],d.map={},p=n.getElementRule(e.name),h=0,f=p.attributesOrder.length;f>h;h++)c=p.attributesOrder[h],c in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(h=0,f=l.length;f>h;h++)c=l[h].name,c in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(r.start(e.name,l,a),!a){if(e=e.firstChild)do i(e);while(e=e.next);r.end(t)}}}var o,s;return s=t.validate,o={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do i(e);while(e=e.next)}},r.reset(),1!=e.type||t.inner?o[11](e):i(e),r.getContent()}}}(tinymce),tinymce.dom={},function(e,t){function n(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){function n(){return!1}function i(){return!0}var r,o=t||{};for(r in e)"layerX"!==r&&"layerY"!==r&&(o[r]=e[r]);return o.target||(o.target=o.srcElement||document),o.preventDefault=function(){o.isDefaultPrevented=i,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=i,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=i,o.stopPropagation()},o.isDefaultPrevented||(o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),o}function o(e,t,r){function o(){r.domLoaded||(r.domLoaded=!0,t(l))}var s=e.document,l={type:"ready"};return"complete"==s.readyState?(o(),void 0):(a?n(e,"DOMContentLoaded",o):(n(s,"readystatechange",function(){"complete"===s.readyState&&(i(s,"readystatechange",arguments.callee),o())}),s.documentElement.doScroll&&e===e.top&&!function(){try{s.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0),void 0}o()}()),n(e,"load",o),void 0)}function s(e){function s(e,t){var n,i,r,o;if(n=f[t][e.type])for(i=0,r=n.length;r>i;i++)if(o=n[i],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var l,c,u,d,h=this,f={};u="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},l=1,h.domLoaded=!1,h.events=f,h.bind=function(i,p,m,g){function v(e){s(r(e||S.event),y)}var y,b,_,w,C,x,k,S=window;if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[t]?(y=i[t],f[y]||(f[y]={})):(y=l++,i[t]=y,f[y]={}),g=g||i,p=p.split(" "),_=p.length;_--;)w=p[_],x=v,C=k=!1,"DOMContentLoaded"===w&&(w="ready"),!h.domLoaded&&"complete"!=i.readyState||"ready"!==w?(u||(C=d[w],C&&(x=function(e){var t,n;if(t=e.currentTarget,n=e.relatedTarget,n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=r(e||S.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,y))})),c||"focusin"!==w&&"focusout"!==w||(k=!0,C="focusin"===w?"focus":"blur",x=function(e){e=r(e||S.event),e.type="focus"===e.type?"focusin":"focusout",s(e,y)}),b=f[y][w],b?b.push({func:m,scope:g}):(f[y][w]=b=[{func:m,scope:g}],b.fakeName=C,b.capture=k,b.nativeHandler=x,a||(b.proxyHandler=e(y)),"ready"===w?o(i,x,h):n(i,C||w,a?x:b.proxyHandler,k))):(h.domLoaded=!0,m.call(g,r({type:w})));return i=b=0,m}},h.unbind=function(e,n,r){var o,s,l,c,u,d;if(!e||3===e.nodeType||8===e.nodeType)return h;if(o=e[t]){if(d=f[o],n){for(n=n.split(" "),l=n.length;l--;)if(u=n[l],s=d[u]){if(r)for(c=s.length;c--;)s[c].func===r&&s.splice(c,1);r&&0!==s.length||(delete d[u],i(e,s.fakeName||u,a?s.nativeHandler:s.proxyHandler,s.capture))}}else{for(u in d)s=d[u],i(e,s.fakeName||u,a?s.nativeHandler:s.proxyHandler,s.capture);d={}}for(u in d)return h;delete f[o];try{delete e[t]}catch(p){e[t]=null}}return h},h.fire=function(e,n,i){var o,a;if(!e||3===e.nodeType||8===e.nodeType)return h;a=r(null,i),a.type=n;do o=e[t],o&&s(a,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!a.isPropagationStopped());return h},h.clean=function(e){var n,i,r=h.unbind;if(!e||3===e.nodeType||8===e.nodeType)return h;if(e[t]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),i=e.getElementsByTagName("*"),n=i.length;n--;)e=i[n],e[t]&&r(e);return h},h.callNativeHandler=function(e,t){f&&f[e][t.type].nativeHandler(t)},h.destory=function(){f={}},h.add=function(e,t,n,i){"string"==typeof e&&(e=document.getElementById(e));{if(!(e&&e instanceof Array))return"init"===t&&(t="ready"),h.bind(e,t instanceof Array?t.join(" "):t,n,i);for(var r=e.length;r--;)h.add(e[r],t,n,i)}},h.remove=function(e,t,n,i){if(!e)return h;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var r=e.length;r--;)h.remove(e[r],t,n,i);return h}return h.unbind(e,t instanceof Array?t.join(" "):t,n)},h.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),h.clean(e)},h.cancel=function(e){return e&&(h.prevent(e),h.stop(e)),!1},h.prevent=function(e){return e.preventDefault||(e=r(e)),e.preventDefault(),!1},h.stop=function(e){return e.stopPropagation||(e=r(e)),e.stopPropagation(),!1}}var a=!!document.addEventListener;e.EventUtils=s,e.Event=new s(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){function n(e,n,i,r){var o,s;if(e){if(!r&&e[n])return e[n];if(e!=t){if(o=e[i])return o;for(s=e.parentNode;s&&s!=t;s=s.parentNode)if(o=s[i])return o}}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,i=e.isWebKit,r=e.isIE,o=e.html.Entities,s=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var i,r=this;if(r.doc=t,r.win=window,r.files={},r.cssFlicker=!1,r.counter=0,r.stdMode=!e.isIE||t.documentMode>=8,r.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||r.stdMode,r.hasOuterHTML="outerHTML"in t.createElement("a"),r.settings=n=e.extend({keep_values:!1,hex_colors:1},n),r.schema=n.schema,r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(o){r.cssFlicker=!0}r.fixDoc(t),r.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(r.destroy,r),i=n.schema?n.schema.getBlockElements():{},r.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!i[e.nodeName]):!!i[e]}},fixDoc:function(t){var n,i=this.settings;if(r&&!e.isIE11&&i.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)});for(n in i.schema.getCustomElements())t.createElement(n)}},clone:function(n,i){var o,s,a=this;return!r||e.isIE11||1!==n.nodeType||i?n.cloneNode(i):(s=a.doc,i?o.firstChild:(o=s.createElement(n.nodeName),t(a.getAttribs(n),function(e){a.setAttrib(o,e.nodeName,a.getAttrib(n,e.nodeName))}),o))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,i,r){var o,s=this,a=s.settings,l=[];for(e=s.get(e),r=void 0===r,a.strict_root&&(i=i||s.getRoot()),n(t,"string")&&(o=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return s.is(e,o)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;l.push(e)}e=e.parentNode}return r?l:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},add:function(e,t,i,r,o){var s=this;return this.run(e,function(e){var a;return a=n(t,"string")?s.doc.createElement(t):t,s.setAttribs(a,i),r&&(r.nodeType?a.appendChild(r):s.setHTML(a,r)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,r="",o=this;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&(r+=" "+i+'="'+o.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},remove:function(t,n){return this.run(t,function(t){var i,r=t.parentNode;if(!r)return null;if(n)for(;i=t.firstChild;)!e.isIE||3!==i.nodeType||i.nodeValue?r.insertBefore(i,t):t.removeChild(i);return r.removeChild(t)})},setStyle:function(t,n,i){var o=this;return o.run(t,function(s){var a;switch(a=s.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),o.pixelStyles.test(n)&&(e.is(i,"number")||/^[\-0-9\.]+$/.test(i))&&(i+="px"),n){case"opacity":r&&!e.isIE11&&(a.filter=""===i?"":"alpha(opacity="+100*i+")",t.currentStyle&&t.currentStyle.hasLayout||(a.display="inline-block")),a[n]=a["-moz-opacity"]=a["-khtml-opacity"]=i||"";break;case"float":r&&!e.isIE11?a.styleFloat=i:a.cssFloat=i;break;default:a[n]=i||""}o.settings.update_styles&&o.setAttrib(s,"data-mce-style")})},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(i){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=r?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:void 0}},setStyles:function(e,n){var i,r=this,o=r.settings;i=o.update_styles,o.update_styles=0,t(n,function(t,n){r.setStyle(e,n,t)}),o.update_styles=i,o.update_styles&&r.setAttrib(e,o.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,i,r){var o=this;if(e&&i)return o.settings.strict&&(i=i.toLowerCase()),this.run(e,function(e){var s=o.settings,a=e.getAttribute(i);if(null!==r)switch(i){case"style":if(!n(r,"string"))return t(r,function(t,n){o.setStyle(e,n,t)}),void 0;s.keep_values&&(r&&!o._isRes(r)?e.setAttribute("data-mce-style",r,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=r;break;case"class":e.className=r||"";break;case"src":case"href":s.keep_values&&(s.url_converter&&(r=s.url_converter.call(s.url_converter_scope||o,r,i,e)),o.setAttrib(e,"data-mce-"+i,r,2));break;case"shape":e.setAttribute("data-mce-style",r)}if(n(r)&&null!==r&&0!==r.length?e.setAttribute(i,""+r,2):e.removeAttribute(i,2),tinyMCE.activeEditor&&a!=r){var l=tinyMCE.activeEditor;l.onSetAttrib.dispatch(l,e,i,r)}})},setAttribs:function(e,n){var i=this;return this.run(e,function(e){t(n,function(t,n){i.setAttrib(e,n,t)})})},getAttrib:function(t,o,s){var a,l,c=this;if(t=c.get(t),!t||1!==t.nodeType)return s===l?!1:s;if(n(s)||(s=""),/^(src|href|style|coords|shape)$/.test(o)&&(a=t.getAttribute("data-mce-"+o)))return a;if(r&&c.props[o]&&(a=t[c.props[o]],a=a&&a.nodeValue?a.nodeValue:a),a||(a=t.getAttribute(o,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o))return t[c.props[o]]===!0&&""===a?o:a?o:"";if("FORM"===t.nodeName&&t.getAttributeNode(o))return t.getAttributeNode(o).nodeValue;if("style"===o&&(a=a||t.style.cssText,a&&(a=c.serializeStyle(c.parseStyle(a),t.nodeName),c.settings.keep_values&&!c._isRes(a)&&t.setAttribute("data-mce-style",a))),i&&"class"===o&&a&&(a=a.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),r)switch(o){case"rowspan":case"colspan":1===a&&(a="");break;case"size":("+0"===a||20===a||0===a)&&(a="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===a&&(a="");break;case"hspace":-1===a&&(a="");break;case"maxlength":case"tabindex":(32768===a||2147483647===a||"32768"===a)&&(a="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===a?o:s;case"shape":a=a.toLowerCase();break;default:0===o.indexOf("on")&&a&&(a=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+a))}return a!==l&&null!==a&&""!==a?""+a:s},getPos:function(e,t){var n,i,r=this,o=0,s=0,a=r.doc;if(e=r.get(e),t=t||a.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=r.boxModel?a.documentElement:a.body,o=e.left+(a.documentElement.scrollLeft||a.body.scrollLeft)-n.clientTop,s=e.top+(a.documentElement.scrollTop||a.body.scrollTop)-n.clientLeft,{x:o,y:s};for(i=e;i&&i!=t&&i.nodeType;)o+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)o-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:o,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",t=n.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(styleElm,t.firstChild):t.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(n.createTextNode(e))},loadCSS:function(n){var i,o=this,s=o.doc;n||(n=""),i=s.getElementsByTagName("head")[0],t(n.split(","),function(t){var n;o.files[t]||(o.files[t]=!0,n=o.create("link",{rel:"stylesheet",href:e._addVer(t)}),r&&!e.isIE11&&s.documentMode&&s.recalc&&(n.onload=function(){s.recalc&&s.recalc(),n.onload=null}),i.appendChild(n))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(t,n){var i,r=this;return r.run(t,function(t){var o;return r.hasClass(t,n)?(i||(i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),o=t.className.replace(i," "),o=e.trim(" "!=o?o:""),t.className=o,o||(t.removeAttribute("class"),t.removeAttribute("className")),o):t.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(n,i){var o=this;return o.run(n,function(n){if(r){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+i,n.removeChild(n.firstChild)}catch(s){var a=o.create("div");a.innerHTML="<br />"+i,t(e.grep(a.childNodes),function(e,t){t&&n.canHaveHTML&&n.appendChild(e)})}}else n.innerHTML=i;return i})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function i(e,t,n){var i,r;for(r=n.createElement("body"),r.innerHTML=t,i=r.lastChild;i;)o.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;o.remove(e)}var o=this;return this.run(e,function(e){if(e=o.get(e),1==e.nodeType)if(n=n||e.ownerDocument||o.doc,r)try{r&&1==e.nodeType?e.outerHTML=t:i(e,t,n)}catch(s){i(e,t,n)}else i(e,t,n)})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(i,r,o){var s=this;return n(r,"array")&&(i=i.cloneNode(!0)),s.run(r,function(n){return o&&t(e.grep(n.childNodes),function(e){i.appendChild(e)}),n.parentNode.replaceChild(i,n)})},rename:function(e,n){var i,r=this;return e.nodeName!=n.toUpperCase()&&(i=r.create(n),t(r.getAttribs(e),function(t){r.setAttrib(i,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){function t(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function n(r){t(r.imports,function(e){n(e)}),t(r.cssRules||r.rules,function(r){switch(r.type||1){case 1:r.selectorText&&t(r.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(i=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),(!a||(t=a(t,i)))&&(s[t]||(o.push({"class":t}),s[t]=1)))});break;case 3:try{n(r.styleSheet)}catch(l){}}})}var i,r=this,o=[],s={},a=r.settings.class_filter;if(r.classes)return r.classes;try{t(r.doc.styleSheets,n)}catch(l){}return o.length>0&&(r.classes=o),o},run:function(e,n,i){var r,o=this;return o.doc&&"string"==typeof e&&(e=o.get(e)),e?(i=i||this,e.nodeType||!e.length&&0!==e.length?n.call(i,e):(r=[],t(e,function(e,t){e&&("string"==typeof e&&(e=o.doc.getElementById(e)),r.push(n.call(i,e,t)))}),r)):!1},getAttribs:function(e){var t;return e=this.get(e),e?r?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var i,r,o,a,l,c=this,u=0;if(t=t.firstChild){a=new e.dom.TreeWalker(t,t.parentNode),n=n||c.schema?c.schema.getNonEmptyElements():null;do{if(o=t.nodeType,1===o){if(t.getAttribute("data-mce-bogus"))continue;if(l=t.nodeName.toLowerCase(),n&&n[l]){if("br"===l){u++;continue}return!1}for(r=c.getAttribs(t),i=t.attributes.length;i--;)if(l=t.attributes[i].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==o)return!1;if(3===o&&!s.test(t.nodeValue))return!1}while(t=a.next())}return 1>=u},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,i,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(o++,n=r);return o},split:function(t,n,i){function r(t){function n(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var i,o=t.childNodes,s=t.nodeType;if(1!=s||"bookmark"!=t.getAttribute("data-mce-type")){for(i=o.length-1;i>=0;i--)r(o[i]);if(9!=s){if(3==s&&t.nodeValue.length>0){var a=e.trim(t.nodeValue).length;if(!l.isBlock(t.parentNode)||a>0||0===a&&n(t))return}else if(1==s&&(o=t.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(o[0],t),o.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;l.remove(t)}return t}}var o,s,a,l=this,c=l.createRng();return t&&n?(c.setStart(t.parentNode,l.nodeIndex(t)),c.setEnd(n.parentNode,l.nodeIndex(n)),o=c.extractContents(),c=l.createRng(),c.setStart(n.parentNode,l.nodeIndex(n)+1),c.setEnd(t.parentNode,l.nodeIndex(t)+1),s=c.extractContents(),a=t.parentNode,a.insertBefore(r(o),t),i?a.replaceChild(i,n):a.insertBefore(n,t),a.insertBefore(r(s),t),l.remove(t),i||n):void 0},bind:function(e,t,n,i){return this.events.add(e,t,n,i||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},_findSib:function(e,t,i){var r=this,o=t;if(e)for(n(o,"string")&&(o=function(e){return r.is(e,t)}),e=e[i];e;e=e[i])if(o(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function n(){return D.createDocumentFragment()}function i(e,t){C(R,e,t)}function r(e,t){C(O,e,t)}function o(e){i(e.parentNode,V(e))}function s(e){i(e.parentNode,V(e)+1)}function a(e){r(e.parentNode,V(e))}function l(e){r(e.parentNode,V(e)+1)}function c(e){e?(M[z]=M[H],M[W]=M[j]):(M[H]=M[z],M[j]=M[W]),M.collapsed=R}function u(e){o(e),l(e)}function d(e){i(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function h(e,t){var n=M[H],i=M[j],r=M[z],o=M[W],s=t.startContainer,a=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?w(n,i,s,a):1===e?w(r,o,s,a):2===e?w(r,o,l,c):3===e?w(n,i,l,c):void 0}function f(){x(F)}function p(){return x(L)}function m(){return x(B)}function g(t){var n,i,r=this[H],o=this[j];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(i=r.childNodes[o]),i?r.insertBefore(t,i):r.appendChild(t)):o?o>=r.nodeValue.length?e.insertAfter(t,r):(n=r.splitText(o),r.parentNode.insertBefore(t,n)):r.parentNode.insertBefore(t,r)}function v(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function y(){return U(new t(e),{startContainer:M[H],startOffset:M[j],endContainer:M[z],endOffset:M[W],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function b(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function _(){return M[H]==M[z]&&M[j]==M[W]
}function w(t,n,i,r){var o,s,a,l,c,u;if(t==i)return n==r?0:r>n?-1:1;for(o=i;o&&o.parentNode!=t;)o=o.parentNode;if(o){for(s=0,a=t.firstChild;a!=o&&n>s;)s++,a=a.nextSibling;return s>=n?-1:1}for(o=t;o&&o.parentNode!=i;)o=o.parentNode;if(o){for(s=0,a=i.firstChild;a!=o&&r>s;)s++,a=a.nextSibling;return r>s?-1:1}for(l=e.findCommonAncestor(t,i),c=t;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=i;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(a=l.firstChild;a;){if(a==c)return-1;if(a==u)return 1;a=a.nextSibling}}function C(t,n,i){var r,o;for(t?(M[H]=n,M[j]=i):(M[z]=n,M[W]=i),r=M[z];r.parentNode;)r=r.parentNode;for(o=M[H];o.parentNode;)o=o.parentNode;o==r?w(M[H],M[j],M[z],M[W])>0&&M.collapse(t):M.collapse(t),M.collapsed=_(),M.commonAncestorContainer=e.findCommonAncestor(M[H],M[z])}function x(e){var t,n,i,r,o,s,a,l=0,c=0;if(M[H]==M[z])return k(e);for(t=M[z],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[H])return S(t,e);++l}for(t=M[H],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[z])return E(t,e);++c}for(i=c-l,r=M[H];i>0;)r=r.parentNode,i--;for(o=M[z];0>i;)o=o.parentNode,i++;for(s=r.parentNode,a=o.parentNode;s!=a;s=s.parentNode,a=a.parentNode)r=s,o=a;return T(r,o,e)}function k(e){var t,i,r,o,s,a,l,c,u;if(e!=F&&(t=n()),M[j]==M[W])return t;if(3==M[H].nodeType){if(i=M[H].nodeValue,r=i.substring(M[j],M[W]),e!=B&&(o=M[H],c=M[j],u=M[W]-M[j],0===c&&u>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(c,u),M.collapse(R)),e==F)return;return r.length>0&&t.appendChild(D.createTextNode(r)),t}for(o=b(M[H],M[j]),s=M[W]-M[j];o&&s>0;)a=o.nextSibling,l=$(o,e),t&&t.appendChild(l),--s,o=a;return e!=B&&M.collapse(R),t}function S(e,t){var i,r,o,s,a,l;if(t!=F&&(i=n()),r=N(e,t),i&&i.appendChild(r),o=V(e),s=o-M[j],0>=s)return t!=B&&(M.setEndBefore(e),M.collapse(O)),i;for(r=e.previousSibling;s>0;)a=r.previousSibling,l=$(r,t),i&&i.insertBefore(l,i.firstChild),--s,r=a;return t!=B&&(M.setEndBefore(e),M.collapse(O)),i}function E(e,t){var i,r,o,s,a,l;for(t!=F&&(i=n()),o=A(e,t),i&&i.appendChild(o),r=V(e),++r,s=M[W]-r,o=e.nextSibling;o&&s>0;)a=o.nextSibling,l=$(o,t),i&&i.appendChild(l),--s,o=a;return t!=B&&(M.setStartAfter(e),M.collapse(R)),i}function T(e,t,i){var r,o,s,a,l,c,u,d;for(i!=F&&(o=n()),r=A(e,i),o&&o.appendChild(r),s=e.parentNode,a=V(e),l=V(t),++a,c=l-a,u=e.nextSibling;c>0;)d=u.nextSibling,r=$(u,i),o&&o.appendChild(r),u=d,--c;return r=N(t,i),o&&o.appendChild(r),i!=B&&(M.setStartAfter(e),M.collapse(R)),o}function N(e,t){var n,i,r,o,s,a=b(M[z],M[W]-1),l=a!=M[z];if(a==e)return I(a,l,O,t);for(n=a.parentNode,i=I(n,O,O,t);n;){for(;a;)r=a.previousSibling,o=I(a,l,O,t),t!=F&&i.insertBefore(o,i.firstChild),l=R,a=r;if(n==e)return i;a=n.previousSibling,n=n.parentNode,s=I(n,O,O,t),t!=F&&s.appendChild(i),i=s}}function A(e,t){var n,i,r,o,s,a=b(M[H],M[j]),l=a!=M[H];if(a==e)return I(a,l,R,t);for(n=a.parentNode,i=I(n,O,R,t);n;){for(;a;)r=a.nextSibling,o=I(a,l,R,t),t!=F&&i.appendChild(o),l=R,a=r;if(n==e)return i;a=n.nextSibling,n=n.parentNode,s=I(n,O,R,t),t!=F&&s.appendChild(i),i=s}}function I(t,n,i,r){var o,s,a,l,c;if(n)return $(t,r);if(3==t.nodeType){if(o=t.nodeValue,i?(l=M[j],s=o.substring(l),a=o.substring(0,l)):(l=M[W],s=o.substring(0,l),a=o.substring(l)),r!=B&&(t.nodeValue=a),r==F)return;return c=e.clone(t,O),c.nodeValue=s,c}if(r!=F)return e.clone(t,O)}function $(t,n){return n!=F?n==B?e.clone(t,R):t:(t.parentNode.removeChild(t),void 0)}function P(){return e.create("body",null,m()).outerText}var M=this,D=e.doc,L=0,B=1,F=2,R=!0,O=!1,j="startOffset",H="startContainer",z="endContainer",W="endOffset",U=tinymce.extend,V=e.nodeIndex;return U(M,{startContainer:D,startOffset:0,endContainer:D,endOffset:0,collapsed:R,commonAncestorContainer:D,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:r,setStartBefore:o,setStartAfter:s,setEndBefore:a,setEndAfter:l,collapse:c,selectNode:u,selectNodeContents:d,compareBoundaryPoints:h,deleteContents:f,extractContents:p,cloneContents:m,insertNode:g,surroundContents:v,cloneRange:y,toStringIE:P}),M}e.Range=t,t.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function e(e){function t(t,n){var i,r,o,s,a,l,c,u,d=0,h=-1;if(i=t.duplicate(),i.collapse(n),u=i.parentElement(),u.ownerDocument===e.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(s=u.children,r=s.length-1;r>=d;)if(c=Math.floor((d+r)/2),a=s[c],i.moveToElementText(a),h=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),h>0)r=c-1;else{if(!(0>h))return{node:a};d=c+1}if(0>h)for(a?i.collapse(!1):(i.moveToElementText(u),i.collapse(!0),a=u,o=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&u==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&u==i.parentElement();)l++;return{node:a,position:h,offset:l,inside:o}}}function n(){function n(e){var n,i,r,o,s,a=t(u,e),l=0;if(n=a.node,i=a.offset,a.inside&&!n.hasChildNodes())return d[e?"setStart":"setEnd"](n,0),void 0;if(i===o)return d[e?"setStartBefore":"setEndAfter"](n),void 0;if(a.position<0){if(r=a.inside?n.firstChild:n.nextSibling,!r)return d[e?"setStartAfter":"setEndAfter"](n),void 0;if(!i)return 3==r.nodeType?d[e?"setStart":"setEnd"](r,0):d[e?"setStartBefore":"setEndBefore"](r),void 0;for(;r;){if(s=r.nodeValue,l+=s.length,l>=i){n=r,l-=i,l=s.length-l;break}r=r.nextSibling}}else{if(r=n.previousSibling,!r)return d[e?"setStartBefore":"setEndBefore"](n);if(!i)return 3==n.nodeType?d[e?"setStart":"setEnd"](r,n.nodeValue.length):d[e?"setStartAfter":"setEndAfter"](r),void 0;for(;r;){if(l+=r.nodeValue.length,l>=i){n=r,l-=i;break}r=r.previousSibling}}d[e?"setStart":"setEnd"](n,l)}var o,s,a,l,c,u=e.getRng(),d=r.createRng();if(o=u.item?u.item(0):u.parentElement(),o.ownerDocument!=r.doc)return d;if(s=e.isCollapsed(),u.item)return d.setStart(o.parentNode,r.nodeIndex(o)),d.setEnd(d.startContainer,d.startOffset+1),d;try{n(!0),s||n()}catch(h){if(-2147024809!=h.number)throw h;c=i.getBookmark(2),a=u.duplicate(),a.collapse(!0),o=a.parentElement(),s||(a=u.duplicate(),a.collapse(!1),l=a.parentElement(),l.innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,i.moveToBookmark(c),u=e.getRng(),n(!0),s||n()}return d}var i=this,r=e.dom,o=!1;this.getBookmark=function(n){function i(e){var t,n,i,o,s=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,o=i.length;o--;)if(e===i[o]){s.push(o);break}e=t,t=t.parentNode}return s}function o(e){var n;return n=t(s,e),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var s=e.getRng(),a={};return 2===n&&(s.item?a.start={ctrl:!0,indexes:i(s.item(0))}:(a.start=o(!0),e.isCollapsed()||(a.end=o()))),a},this.moveToBookmark=function(e){function t(e){var t,n,i,o;for(t=r.getRoot(),n=e.length-1;n>=0;n--)o=t.children,i=e[n],i<=o.length-1&&(t=o[i]);return t}function n(n){var r,s,a,l=e[n?"start":"end"];l&&(r=l.position>0,s=o.createTextRange(),s.moveToElementText(t(l.indexes)),offset=l.offset,offset!==a?(s.collapse(l.inside||r),s.moveStart("character",r?-offset:offset)):s.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",s),n&&i.collapse(!0))}var i,o=r.doc.body;e.start&&(e.start.ctrl?(i=o.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=o.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,s,d,h;s=r.create("a"),t=e?a:c,n=e?l:u,d=i.duplicate(),(t==p||t==p.documentElement)&&(t=m,n=0),3==t.nodeType?(t.parentNode.insertBefore(s,t),d.moveToElementText(s),d.moveStart("character",n),r.remove(s),i.setEndPoint(e?"StartToStart":"EndToEnd",d)):(h=t.childNodes,h.length?(n>=h.length?r.insertAfter(s,h[h.length-1]):t.insertBefore(s,h[n]),d.moveToElementText(s)):t.canHaveHTML&&(t.innerHTML="<span>ï»¿</span>",s=t.firstChild,d.moveToElementText(s),d.collapse(o)),i.setEndPoint(e?"StartToStart":"EndToEnd",d),r.remove(s))}var i,s,a,l,c,u,d,h,f,p=e.dom.doc,m=p.body;if(a=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,i=m.createTextRange(),a==c&&1==a.nodeType){if(l==u&&!a.hasChildNodes()){if(a.canHaveHTML)return d=a.previousSibling,d&&!d.hasChildNodes()&&r.isBlock(d)?d.innerHTML="ï»¿":d=null,a.innerHTML="<span>ï»¿</span><span>ï»¿</span>",i.moveToElementText(a.lastChild),i.select(),r.doc.selection.clear(),a.innerHTML="",d&&(d.innerHTML=""),void 0;l=r.nodeIndex(a),a=a.parentNode}if(l==u-1)try{if(f=a.childNodes[l],s=m.createControlRange(),s.addElement(f),s.select(),h=e.getRng(),h.item&&f===h.item(0))return}catch(g){}}n(!0),n(),i.select()},this.getRangeAt=n}tinymce.dom.TridentSelection=e}(),function(e){e.dom.Element=function(t,n){var i,r,o=this;o.settings=n=n||{},o.id=t,o.dom=i=n.dom||e.DOM,e.isIE||(r=i.get(o.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){o[e]=function(){var n,r=[t];for(n=0;n<arguments.length;n++)r.push(arguments[n]);return r=i[e].apply(i,r),o.update(e),r}}),e.extend(o,{on:function(t,n,i){return e.dom.Event.add(o.id,t,n,i)},getXY:function(){return{x:parseInt(o.getStyle("left")),y:parseInt(o.getStyle("top"))}},getSize:function(){var e=i.get(o.id);return{w:parseInt(o.getStyle("width")||e.clientWidth),h:parseInt(o.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){o.setStyles({left:e,top:t})},moveBy:function(e,t){var n=o.getXY();o.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){o.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=o.getSize();o.resizeTo(n.w+e,n.h+t)},update:function(t){var r;if(e.isIE6&&n.blocker){if(t=t||"",0===t.indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return i.remove(o.blocker),void 0;o.blocker?r=i.get(o.blocker):(o.blocker=i.uniqueId(),r=i.add(n.container||i.getRoot(),"iframe",{id:o.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(r,"opacity",0)),i.setStyles(r,{left:o.getStyle("left",1),top:o.getStyle("top",1),width:o.getStyle("width",1),height:o.getStyle("height",1),display:o.getStyle("display",1),zIndex:parseInt(o.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,i=e.each,r=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,r,o){var s=this;s.dom=t,s.win=n,s.serializer=r,s.editor=o,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){s[t]=new e.util.Dispatcher(s)}),s.win.getSelection||(s.tridentSel=new e.dom.TridentSelection(s)),e.isIE&&!e.isIE11&&t.boxModel&&this._fixIESelection(),e.addUnload(s.destroy,s)},setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)},getContent:function(e){var n,i,r,o=this,s=o.getRng(),a=o.dom.create("body"),l=o.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",o.onBeforeGetContent.dispatch(o,e),"text"==e.format?o.isCollapsed()?"":s.text||(l.toString?l.toString():""):(s.cloneContents?(r=s.cloneContents(),r&&a.appendChild(r)):t(s.item)||t(s.htmlText)?(a.innerHTML="<br>"+(s.item?s.item(0).outerHTML:s.htmlText),a.removeChild(a.firstChild)):a.innerHTML=s.toString(),/^\s/.test(a.innerHTML)&&(n=" "),/\s+$/.test(a.innerHTML)&&(i=" "),e.getInner=!0,e.content=o.isCollapsed()?"":n+o.serializer.serialize(a,e)+i,o.onGetContent.dispatch(o,e),e.content)},setContent:function(e,t){var n,i,r,o=this,s=o.getRng(),a=o.win.document;if(t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||o.onBeforeSetContent.dispatch(o,t),e=t.content,s.insertNode){e+='<span id="__caret">_</span>',s.startContainer==a&&s.endContainer==a?a.body.innerHTML=e:(s.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:s.createContextualFragment?s.insertNode(s.createContextualFragment(e)):(i=a.createDocumentFragment(),r=a.createElement("div"),i.appendChild(r),r.outerHTML=e,s.insertNode(i))),n=o.dom.get("__caret"),s=a.createRange(),s.setStartBefore(n),s.setEndBefore(n),o.setRng(s),o.dom.remove("__caret");try{o.setRng(s)}catch(l){}}else s.item&&(a.execCommand("Delete",!1,null),s=o.getRng()),/^\s+/.test(e)?(s.pasteHTML('<span id="__mce_tmp">_</span>'+e),o.dom.remove("__mce_tmp")):s.pasteHTML(e);t.no_events||o.onSetContent.dispatch(o,t)},getStart:function(){var e,t,n,i,r=this,o=r.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for(n=o.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==r.dom.doc&&(e=r.dom.getRoot()),t=i=o.parentElement();i=i.parentNode;)if(i==e){e=t;break}return e}return e=o.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,o.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,i=n.getRng();return i.duplicate||i.item?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),e=i.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=i.endContainer,t=i.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return i(p.select(e),function(e,i){e==t&&(n=i)}),n}function r(e){function t(t){var n,i,r,o=t?"start":"end";n=e[o+"Container"],i=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(t?i:i-1,r.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function o(){function e(e,n){var r,o,s=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],l=[],c=0;if(3==s.nodeType){if(t)for(r=s.previousSibling;r&&3==r.nodeType;r=r.previousSibling)a+=r.nodeValue.length;l.push(a)}else o=s.childNodes,a>=o.length&&o.length&&(c=1,a=Math.max(0,o.length-1)),l.push(f.dom.nodeIndex(o[a],t)+c);for(;s&&s!=i;s=s.parentNode)l.push(f.dom.nodeIndex(s,t));return l}var n=f.getRng(!0),i=p.getRoot(),r={};return r.start=e(n,!0),f.isCollapsed()||(r.end=e(n)),r}var s,a,l,c,u,d,h,f=this,p=f.dom,m="ï»¿";if(2==e)return f.tridentSel?f.tridentSel.getBookmark(e):o();if(e)return s=f.getRng(),s.setStart&&(s={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset}),{rng:s};if(s=f.getRng(),l=p.uniqueId(),c=tinyMCE.activeEditor.selection.isCollapsed(),h="overflow:hidden;line-height:0px",s.duplicate||s.item){if(s.item)return d=s.item(0),u=d.nodeName,{name:u,index:n(u,d)};a=s.duplicate();try{s.collapse(),s.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+h+'">'+m+"</span>"),c||(a.collapse(!1),s.moveToElementText(a.parentElement()),0===s.compareEndPoints("StartToEnd",a)&&a.move("character",-1),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+h+'">'+m+"</span>"))}catch(g){return null}}else{if(d=f.getNode(),u=d.nodeName,"IMG"==u)return{name:u,index:n(u,d)};a=r(s.cloneRange()),c||(a.collapse(!1),a.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:h},m))),s=r(s),s.collapse(!0),s.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:h},m))}return f.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(t){function r(e){var n,i,r,o,s=t[e?"start":"end"];if(s){for(r=s[0],i=c,n=s.length-1;n>=1;n--){if(o=i.childNodes,s[n]>o.length-1)return;i=o[s[n]]}3===i.nodeType&&(r=Math.min(s[0],i.nodeValue.length)),1===i.nodeType&&(r=Math.min(s[0],i.childNodes.length)),e?a.setStart(i,r):a.setEnd(i,r)}return!0}function o(n){var r,o,s,a,l=m.get(t.id+"_"+n),c=t.keep;if(l&&(r=l.parentNode,"start"==n?(c?(r=l.firstChild,o=1):o=m.nodeIndex(l),u=d=r,h=f=o):(c?(r=l.firstChild,o=1):o=m.nodeIndex(l),d=r,f=o),!c)){for(a=l.previousSibling,s=l.nextSibling,i(e.grep(l.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=m.get(t.id+"_"+n);)m.remove(l,1);a&&s&&a.nodeType==s.nodeType&&3==a.nodeType&&!e.isOpera&&(o=a.nodeValue.length,a.appendData(s.nodeValue),m.remove(s),"start"==n?(u=d=a,h=f=o):(d=a,f=o))}}function s(e){return!m.isBlock(e)||e.innerHTML||n||(e.innerHTML='<br data-mce-bogus="1" />'),e}var a,l,c,u,d,h,f,p=this,m=p.dom;if(t)if(t.start){if(a=m.createRng(),c=m.getRoot(),p.tridentSel)return p.tridentSel.moveToBookmark(t);r(!0)&&r()&&p.setRng(a)}else if(t.id)o("start"),o("end"),u&&(a=m.createRng(),a.setStart(s(u),h),a.setEnd(s(d),f),p.setRng(a));else if(t.name)p.select(m.select(t.name)[t.index]);else if(t.rng){if(a=t.rng,a.startContainer){l=p.dom.createRng();try{l.setStart(a.startContainer,a.startOffset),l.setEnd(a.endContainer,a.endOffset)}catch(g){}a=l}p.setRng(a)}},select:function(t,n){function i(t,n){var i=new r(t,t);do{if(3==t.nodeType&&0!==e.trim(t.nodeValue).length)return n?l.setStart(t,0):l.setEnd(t,t.nodeValue.length),void 0;if("BR"==t.nodeName)return n?l.setStartBefore(t):l.setEndBefore(t),void 0}while(t=n?i.next():i.prev())}var o,s=this,a=s.dom,l=a.createRng();return t&&(o=a.nodeIndex(t),l.setStart(t.parentNode,o),l.setEnd(t.parentNode,o+1),n&&(i(t,1),i(t)),s.setRng(l)),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(t){var n,i,r,o=this,s=o.win.document;if(t&&o.tridentSel)return o.tridentSel.getRangeAt(0);try{(n=o.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(a){}return e.isIE&&!e.isIE11&&i&&i.setStart&&s.selection.createRange().item&&(r=s.selection.createRange().item(0),i=s.createRange(),i.setStartBefore(r),i.setEndAfter(r)),i||(i=s.createRange?s.createRange():s.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(r=o.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0)),o.selectedRange&&o.explicitRange&&(0===i.compareBoundaryPoints(i.START_TO_START,o.selectedRange)&&0===i.compareBoundaryPoints(i.END_TO_END,o.selectedRange)?i=o.explicitRange:(o.selectedRange=null,o.explicitRange=null)),i},setRng:function(e,t){var n,i=this;if(i.tridentSel){if(e.cloneRange)try{return i.tridentSel.addRange(e),void 0}catch(r){}try{e.select()}catch(r){}}else if(n=i.getSel()){i.explicitRange=e;try{n.removeAllRanges()}catch(r){}n.addRange(e),t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,i=n.getRng(),r=(n.getSel(),i.startContainer),o=i.endContainer;return i?i.setStart?(t=i.commonAncestorContainer,!i.collapsed&&(i.startContainer==i.endContainer&&i.endOffset-i.startOffset<2&&i.startContainer.hasChildNodes()&&(t=i.startContainer.childNodes[i.startOffset]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i.startOffset?e(r.nextSibling,!0):r.parentNode,o=0===i.endOffset?e(o.previousSibling,!1):o.parentNode,r&&r===o))?r:t&&3==t.nodeType?t.parentNode:t):i.item?i.item(0):i.parentElement():n.dom.getRoot()},getSelectedBlocks:function(e,t){var n,i,o,s=this,a=s.dom,l=[];if(n=a.getParent(e||s.getStart(),a.isBlock),i=a.getParent(t||s.getEnd(),a.isBlock),n&&l.push(n),n&&i&&n!=i){o=n;for(var c=new r(n,a.getRoot());(o=c.next())&&o!=i;)a.isBlock(o)&&l.push(o)}return i&&n!=i&&l.push(i),l},isForward:function(){var e,t,n=this.dom,i=this.getSel();return i&&null!=i.anchorNode&&null!=i.focusNode?(e=n.createRng(),e.setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(i.focusNode,i.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){function t(e){function t(e,t){for(var n=new r(e,p.getParent(e.parentNode,p.isBlock)||m);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function a(e,t){var n,s;for(t=t||l,n=new r(t,p.getParent(t.parentNode,p.isBlock)||m);d=n[e?"prev":"next"]();){if(3===d.nodeType&&d.nodeValue.length>0)return l=d,c=e?d.nodeValue.length:0,i=!0,void 0;if(p.isBlock(d)||h[d.nodeName.toLowerCase()])return;s=d}o&&s&&(l=s,i=!0,c=0)}var l,c,u,d,h,f,p=s.dom,m=p.getRoot();if(l=n[(e?"start":"end")+"Container"],c=n[(e?"start":"end")+"Offset"],h=p.schema.getNonEmptyElements(),9===l.nodeType&&(l=p.getRoot(),c=0),l===m){if(e&&(d=l.childNodes[c>0?c-1:0],d&&(f=d.nodeName.toLowerCase(),h[d.nodeName]||"TABLE"==d.nodeName)))return;if(l.hasChildNodes()&&(l=l.childNodes[Math.min(!e&&c>0?c-1:c,l.childNodes.length-1)],c=0,l.hasChildNodes()&&!/TABLE/.test(l.nodeName))){d=l,u=new r(l,m);do{if(3===d.nodeType&&d.nodeValue.length>0){c=e?0:d.nodeValue.length,l=d,i=!0;break}if(h[d.nodeName.toLowerCase()]){c=p.nodeIndex(d),l=d.parentNode,"IMG"!=d.nodeName||e||c++,i=!0;break}}while(d=e?u.next():u.prev())}}o&&(3===l.nodeType&&0===c&&a(!0),1===l.nodeType&&(d=l.childNodes[c],!d||"BR"!==d.nodeName||t(d)||t(d,!0)||a(!0,l.childNodes[c]))),e&&!o&&3===l.nodeType&&c===l.nodeValue.length&&a(!1),i&&n["set"+(e?"Start":"End")](l,c)}var n,i,o,s=this;e.isIE||(n=s.getRng(),o=n.collapsed,t(!0),o||t(),i&&(o&&n.collapse(!0),s.setRng(n,s.isForward())))},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.onNodeChange.addToTop(function(e,t,o){var s=r.dom,a=s.getParents(o,null,s.getRoot()),l={};i(r.selectorChangedData,function(e,t){i(a,function(r){return s.is(r,t)?(n[t]||(i(e,function(e){e(!0,{node:r,selector:t,parents:a})}),n[t]=e),l[t]=e,!1):void 0})}),i(n,function(e,t){l[t]||(delete n[t],i(e,function(e){e(!1,{node:o,selector:t,parents:a})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},scrollIntoView:function(e){var t,n,i=this,r=i.dom;n=r.getViewPort(i.editor.getWin()),t=r.getPos(e).y,(t<n.y||t+25>n.y+n.h)&&i.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function e(e,t){var n=l.createTextRange();try{n.moveToPoint(e,t)}catch(i){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",r)>0?i.setEndPoint("StartToStart",r):i.setEndPoint("EndToEnd",r),i.select())):n()}function n(){var e=a.selection.createRange();r&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&r.select(),s.unbind(a,"mouseup",n),s.unbind(a,"mousemove",t),r=i=0}var i,r,o,s=this.dom,a=s.doc,l=a.body;a.documentElement.unselectable=!0,s.bind(a,["mousedown","contextmenu"],function(l){if("HTML"===l.target.nodeName){if(i&&n(),o=a.documentElement,o.scrollHeight>o.clientHeight)return;i=1,r=e(l.x,l.y),r&&(s.bind(a,"mouseup",n),s.bind(a,"mousemove",t),s.win.focus(),r.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,i){var r,o,s,a=e.isIE,l=e.each;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,i=i||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:!0,r=new e.util.Dispatcher(self),o=new e.util.Dispatcher(self),s=new e.html.DomParser(t,i),s.addAttributeFilter("src,href,style",function(e,i){for(var r,o,s,a=e.length,l="data-mce-"+i,c=t.url_converter,u=t.url_converter_scope;a--;)r=e[a],o=r.attributes.map[l],o!==s?(r.attr(i,o.length>0?o:null),r.attr(l,null)):(o=r.attributes.map[i],"style"===i?o=n.serializeStyle(n.parseStyle(o),r.name):c&&(o=c.call(u,o,i,r.name)),r.attr(i,o.length>0?o:null))}),s.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),s.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,r=e.length;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),s.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),s.addNodeFilter("noscript",function(t){for(var n,i=t.length;i--;)n=t[i].firstChild,n&&(n.value=e.html.Entities.decode(n.value))}),s.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,r,o=e.length;o--;)i=e[o],r=i.firstChild?i.firstChild.value:"","script"===t?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(i.firstChild.value="<!--\n"+n(r)+"\n-->")}),s.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),s.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)n=e[i],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),t.fix_list_elements&&s.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),s.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:i,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,onPreProcess:r,onPostProcess:o,serialize:function(c,u){var d,h,f,p,m;return a&&n.select("script,style,select,map").length>0?(m=c.innerHTML,c=c.cloneNode(!1),n.setHTML(c,m)):c=c.cloneNode(!0),d=c.ownerDocument.implementation,d.createHTMLDocument&&(h=d.createHTMLDocument(""),l("BODY"==c.nodeName?c.childNodes:[c],function(e){h.body.appendChild(h.importNode(e,!0))}),c="BODY"!=c.nodeName?h.body.firstChild:h.body,f=n.doc,n.doc=h),u=u||{},u.format=u.format||"html",u.no_events||(u.node=c,r.dispatch(self,u)),p=new e.html.Serializer(t,i),u.content=p.serialize(s.parse(e.trim(u.getInner?c.innerHTML:n.getOuterHTML(c)),u)),u.cleanup||(u.content=u.content.replace(/\uFEFF/g,"")),u.no_events||o.dispatch(self,u),f&&(n.doc=f),u.node=null,u.content},addRules:function(e){i.addValidElements(e)},setRules:function(e){i.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(){function t(t,n){function i(){c.remove(l),o&&(o.onreadystatechange=o.onload=o=null),n()}function r(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+t)}var o,s,a,l,c=e.DOM;return l=c.uniqueId(),e.isIE6&&(s=new e.util.URI(t),a=location,s.host==a.hostname&&s.port==a.port&&s.protocol+":"==a.protocol&&"file"!=s.protocol.toLowerCase())?(e.util.XHR.send({url:e._addVer(s.getURI()),success:function(e){var t=c.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),c.remove(t),i()},error:r}),void 0):(o=document.createElement("script"),o.id=l,o.type="text/javascript",o.src=e._addVer(t),(!e.isIE||e.isIE11)&&(o.onload=i),o.onerror=r,e.isOpera||(o.onreadystatechange=function(){var e=o.readyState;("complete"==e||"loaded"==e)&&i()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(o),void 0)}var n,i=0,r=1,o=2,s={},a=[],l={},c=[],u=0;this.isDone=function(e){return s[e]==o},this.markDone=function(e){s[e]=o},this.add=this.load=function(e,t,r){var o=s[e];o==n&&(a.push(e),s[e]=i),t&&(l[e]||(l[e]=[]),l[e].push({func:t,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(a,e,t)},this.loadScripts=function(i,a,d){function h(t){e.each(l[t],function(e){e.func.call(e.scope)}),l[t]=n}var f;c.push({func:a,scope:d||this}),f=function(){var n=e.grep(i);i.length=0,e.each(n,function(e){return s[e]==o?(h(e),void 0):(s[e]!=r&&(s[e]=r,u++,t(e,function(){s[e]=o,u--,h(e),f()})),void 0)}),u||(e.each(c,function(e){e.func.call(e.scope)}),c.length=0)},f()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){this.walk=function(n,i){function r(e){var t;return t=e[0],3===t.nodeType&&t===m&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===y&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function a(e,t,n){var s=n?"nextSibling":"previousSibling";for(d=e,h=d.parentNode;d&&d!=t;d=h)h=d.parentNode,f=o(d==e?d:d[s],s),f.length&&(n||f.reverse(),i(r(f)))}var l,c,u,d,h,f,p,m=n.startContainer,g=n.startOffset,v=n.endContainer,y=n.endOffset;if(p=t.select("td.mceSelected,th.mceSelected"),p.length>0)return e.each(p,function(e){i([e])}),void 0;if(1==m.nodeType&&m.hasChildNodes()&&(m=m.childNodes[g]),1==v.nodeType&&v.hasChildNodes()&&(v=v.childNodes[Math.min(y-1,v.childNodes.length-1)]),m==v)return i(r([m]));for(l=t.findCommonAncestor(m,v),d=m;d;d=d.parentNode){if(d===v)return a(m,l,!0);if(d===l)break}for(d=v;d;d=d.parentNode){if(d===m)return a(v,l);if(d===l)break}c=s(m,l)||m,u=s(v,l)||v,a(m,c,!0),f=o(c==m?c:c.nextSibling,"nextSibling",u==v?u.nextSibling:u),f.length&&i(r(f)),a(v,u)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset;return n==r&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(r=t(n,i),n=r.previousSibling,o>i?(o-=i,n=r=t(r,o).previousSibling,o=r.nodeValue.length,i=0):o=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==r.nodeType&&o>0&&o<r.nodeValue.length&&(r=t(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:r,endOffset:o}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(i,r){var o,s,a,l,c,u=this,d=i.root,h=i.items,f=i.enableUpDown,p=i.enableLeftRight||!i.enableUpDown,m=i.excludeFromTabOrder;r=r||e.DOM,o=function(e){c=e.target.id},s=function(e){r.setAttrib(e.target.id,"tabindex","-1")},l=function(){var e=r.get(c);r.setAttrib(e,"tabindex","0"),e.focus()},u.focus=function(){r.get(c).focus()},u.destroy=function(){n(h,function(e){var t=r.get(e.id);r.unbind(t,"focus",o),r.unbind(t,"blur",s)});var e=r.get(d);r.unbind(e,"focus",l),r.unbind(e,"keydown",a),h=r=d=u.focus=o=s=a=l=null,u.destroy=function(){}},u.moveFocus=function(e,o){var s,a=-1;u.controls,c&&(n(h,function(e,t){return e.id===c?(a=t,!1):void 0}),a+=e,0>a?a=h.length-1:a>=h.length&&(a=0),s=h[a],r.setAttrib(c,"tabindex","-1"),r.setAttrib(s.id,"tabindex","0"),r.get(s.id).focus(),i.actOnFocus&&i.onAction(s.id),o&&t.cancel(o))},a=function(e){var n=37,r=39,o=38,s=40,a=27,l=14,d=13,h=32;switch(e.keyCode){case n:p&&u.moveFocus(-1),t.cancel(e);break;case r:p&&u.moveFocus(1),t.cancel(e);break;case o:f&&u.moveFocus(-1),t.cancel(e);break;case s:f&&u.moveFocus(1),t.cancel(e);break;case a:i.onCancel&&(i.onCancel(),t.cancel(e));break;case l:case d:case h:i.onAction&&(i.onAction(c),t.cancel(e))}},n(h,function(e,t){var n,i;e.id||(e.id=r.uniqueId("_mce_item_")),i=r.get(e.id),m?(r.bind(i,"blur",s),n="-1"):n=0===t?"0":"-1",i.setAttribute("tabindex",n),r.bind(i,"focus",o)}),h[0]&&(c=h[0].id),r.setAttrib(d,"tabindex","-1");var g=r.get(d);r.bind(g,"focus",l),r.bind(g,"keydown",a)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,i){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=i},setAriaProperty:function(e,n){var i=t.get(this.id+"_aria")||t.get(this.id);i&&t.setAttrib(i,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var i=t.get(this.id);e=this.classPrefix+e,n?t.addClass(i,e):t.removeClass(i,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))
},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is;e.DOM,e.each,e.walk,e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=(e.is,e.DOM),n=(e.each,e.walk);e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var i=this;i.parent(t,n),i.items={},i.collapsed=!1,i.menuCount=0,i.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&n(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&n(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new e.ui.MenuItem(n.id||t.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;n(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(n){var i=new e.ui.Menu(n.id||t.uniqueId(),n);return i.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),i}})}(tinymce),function(e){var t=e.is,n=e.DOM,i=e.each,r=e.dom.Event,o=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(i,r){r=r||{},r.container=r.container||n.doc.body,r.offset_x=r.offset_x||0,r.offset_y=r.offset_y||0,r.vp_offset_x=r.vp_offset_x||0,r.vp_offset_y=r.vp_offset_y||0,t(r.icons)&&!r.icons&&(r["class"]+=" mceNoIcons"),this.parent(i,r),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var i,r=this,o=r.settings;return t.container=t.container||o.container,t.parent=r,t.constrain=t.constrain||o.constrain,t["class"]=t["class"]||o["class"],t.vp_offset_x=t.vp_offset_x||o.vp_offset_x,t.vp_offset_y=t.vp_offset_y||o.vp_offset_y,t.keyboard_focus=o.keyboard_focus,i=new e.ui.DropMenu(t.id||n.uniqueId(),t),i.onAddItem.add(r.onAddItem.dispatch,r.onAddItem),i},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e,t,i=this,r=i.settings,o=n.get("menu_"+i.id+"_tbl"),s=n.get("menu_"+i.id+"_co");e=r.max_width?Math.min(o.offsetWidth,r.max_width):o.offsetWidth,t=r.max_height?Math.min(o.offsetHeight,r.max_height):o.offsetHeight,n.boxModel?i.element.setStyles({width:e,height:t}):i.element.setStyles({width:e+2,height:t+2}),r.max_width&&n.setStyle(s,"width",e),r.max_height&&(n.setStyle(s,"height",t),o.clientHeight<r.max_height&&n.setStyle(s,"overflow","hidden"))},showMenu:function(t,s,a){var l,c,u,d,h,f,p=this,m=p.settings,g=n.getViewPort(),v=2,y=p.classPrefix;p.collapse(1),p.isMenuVisible||(p.rendered?l=n.get("menu_"+p.id):(l=n.add(p.settings.container,p.renderNode()),i(p.items,function(e){e.postRender()}),p.element=new o("menu_"+p.id,{blocker:1,container:m.container})),e.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),p.update(),t+=m.offset_x||0,s+=m.offset_y||0,g.w-=4,g.h-=4,m.constrain&&(c=l.clientWidth-v,u=l.clientHeight-v,d=g.x+g.w,h=g.y+g.h,t+m.vp_offset_x+c>d&&(t=a?a-c:Math.max(0,d-m.vp_offset_x-c)),s+m.vp_offset_y+u>h&&(s=Math.max(0,h-m.vp_offset_y-u))),n.setStyles(l,{left:t,top:s}),p.element.update(),p.isMenuVisible=1,p.mouseClickFunc=r.add(l,"click",function(e){var t;if(e=e.target,e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,y+"ItemSub")){if(t=p.items[e.id],t.isDisabled())return;for(f=p;f;)f.hideMenu&&f.hideMenu(),f=f.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),p.hasMenus()&&(p.mouseOverFunc=r.add(l,"mouseover",function(e){var t,i;if(e=e.target,e&&(e=n.getParent(e,"tr"))){if(t=p.items[e.id],p.lastMenu&&p.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,y+"ItemSub")&&(i=n.getRect(e),t.showMenu(i.x+i.w-v,i.y-v,i.x),p.lastMenu=t,n.addClass(n.get(t.id).firstChild,y+"ItemActive"))}})),r.add(l,"keydown",p._keyHandler,p),p.onShowMenu.dispatch(p),m.keyboard_focus&&p._setupKeyboardNav())},hideMenu:function(e){var t,i=this,o=n.get("menu_"+i.id);i.isMenuVisible&&(i.keyboardNav&&i.keyboardNav.destroy(),r.remove(o,"mouseover",i.mouseOverFunc),r.remove(o,"click",i.mouseClickFunc),r.remove(o,"keydown",i._keyHandler),n.hide(o),i.isMenuVisible=0,e||i.collapse(1),i.element&&i.element.hide(),(t=n.get(i.id))&&n.removeClass(t.firstChild,i.classPrefix+"ItemActive"),i.onHideMenu.dispatch(i))},add:function(e){var t,i=this;return e=i.parent(e),i.isRendered&&(t=n.get("menu_"+i.id))&&i._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),r.remove(t,"mouseover",e.mouseOverFunc),r.remove(n.select("a",t),"focus",e.mouseOverFunc),r.remove(t,"click",e.mouseClickFunc),r.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,r,s,a=this,l=a.settings;return s=n.create("div",{role:"listbox",id:"menu_"+a.id,"class":l["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&n.setAttrib(s,"aria-parent","menu_"+a.settings.parent.id),r=n.add(s,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(l["class"]?" "+l["class"]:"")}),a.element=new o("menu_"+a.id,{blocker:1,container:l.container}),l.menu_line&&n.add(r,"span",{"class":a.classPrefix+"Line"}),e=n.add(r,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),i(a.items,function(e){a._add(t,e)}),a.rendered=!0,s},_setupKeyboardNav:function(){var t,i,r=this;t=n.get("menu_"+r.id),i=n.select("a[role=option]","menu_"+r.id),i.splice(0,0,t),r.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+r.id,items:i,onCancel:function(){r.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),r.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var i,r,o,s,a,l=t.settings,c=this.classPrefix;return l.separator?(o=n.add(e,"tr",{id:t.id,"class":c+"ItemSeparator"}),n.add(o,"td",{"class":c+"ItemSeparator"}),(i=o.previousSibling)&&n.addClass(i,"mceLast"),void 0):(i=o=n.add(e,"tr",{id:t.id,"class":c+"Item "+c+"ItemEnabled"}),i=s=n.add(i,l.titleItem?"th":"td"),i=r=n.add(i,"a",{id:t.id+"_aria",role:l.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),l.parent&&(n.setAttrib(r,"aria-haspopup","true"),n.setAttrib(r,"aria-owns","menu_"+t.id)),n.addClass(s,l["class"]),a=n.add(i,"span",{"class":"mceIcon"+(l.icon?" mce_"+l.icon:"")}),l.icon_src&&n.add(a,"img",{src:l.icon_src}),i=n.add(i,l.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),n.setAttrib(i,"style",t.settings.style)),1==e.childNodes.length&&n.addClass(o,"mceFirst"),(i=o.previousSibling)&&n.hasClass(i,c+"ItemSeparator")&&n.addClass(o,"mceFirst"),t.collapse&&n.addClass(o,c+"ItemSub"),(i=o.previousSibling)&&n.removeClass(i,"mceLast"),n.addClass(o,"mceLast"),void 0)}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e,n,i=this.classPrefix,r=this.settings;return n=t.encode(r.label||""),e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+i+" "+i+"Enabled "+r["class"]+(n?" "+i+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(r.title)+'">',e+=!r.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+r["class"]+'"></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":""):'<span class="mceIcon '+r["class"]+'"><img class="mceIcon" src="'+r.image+'" alt="'+t.encode(r.title)+'" /></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+r.title+"</span>",e+="</a>"},postRender:function(){var t,n=this,i=n.settings;e.isIE&&n.editor&&e.dom.Event.add(n.id,"mousedown",function(){var e=n.editor.selection.getNode().nodeName;t="IMG"===e?n.editor.selection.getBookmark():null}),e.dom.Event.add(n.id,"click",function(r){return n.isDisabled()?void 0:(e.isIE&&n.editor&&null!==t&&n.editor.selection.moveToBookmark(t),i.onclick.call(i.scope,r))}),e.dom.Event.add(n.id,"keydown",function(t){return n.isDisabled()||t.keyCode!=e.VK.SPACEBAR?void 0:(e.dom.Event.cancel(t),i.onclick.call(i.scope,t))})}})}(tinymce),function(e){var t,n=e.DOM,i=e.dom.Event,r=e.each,o=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,i){var r=this;r.parent(t,n,i),r.items=[],r.onChange=new o(r),r.onPostRender=new o(r),r.onAdd=new o(r),r.onRenderMenu=new e.util.Dispatcher(this),r.classPrefix="mceListBox",r.marked={}},select:function(e){var n,i,o=this;return o.marked={},e==t?o.selectByIndex(-1):(i=e&&"function"==typeof e?e:function(t){return t==e},e!=o.selectedValue&&(r(o.items,function(e,t){return i(e.value)?(n=1,o.selectByIndex(t),!1):void 0}),n||o.selectByIndex(-1)),void 0)},selectByIndex:function(e){var t,i,r,o=this;o.marked={},e!=o.selectedIndex&&(t=n.get(o.id+"_text"),r=n.get(o.id+"_voiceDesc"),i=o.items[e],i?(o.selectedValue=i.value,o.selectedIndex=e,n.setHTML(t,n.encode(i.title)),n.setHTML(r,o.settings.title+" - "+i.title),n.removeClass(t,"mceTitle"),n.setAttrib(o.id,"aria-valuenow",i.title)):(n.setHTML(t,n.encode(o.settings.title)),n.setHTML(r,n.encode(o.settings.title)),n.addClass(t,"mceTitle"),o.selectedValue=o.selectedIndex=null,n.setAttrib(o.id,"aria-valuenow",o.settings.title)),t=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,i){var r=this;i=i||{},i=e.extend(i,{title:t,value:n}),r.items.push(i),r.onAdd.dispatch(r,i)},getLength:function(){return this.items.length},renderHTML:function(){var e="",t=this,i=t.settings,r=t.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+t.id+'_voiceDesc" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+r+" "+r+"Enabled"+(i["class"]?" "+i["class"]:"")+'"><tbody><tr>',e+="<td>"+n.createHTML("span",{id:t.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},t.settings.title),e+=n.createHTML("a",{id:t.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},n.encode(t.settings.title))+"</td>",e+="<td>"+n.createHTML("a",{id:t.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">â¼</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var t,o,s=this,a=n.get(this.id);if(!s.isDisabled()&&0!==s.items.length){if(s.menu&&s.menu.isMenuVisible)return s.hideMenu();s.isMenuRendered||(s.renderMenu(),s.isMenuRendered=!0),t=n.getPos(a),o=s.menu,o.settings.offset_x=t.x,o.settings.offset_y=t.y,o.settings.keyboard_focus=!e.isOpera,r(s.items,function(e){o.items[e.id]&&o.items[e.id].setSelected(0)}),r(s.items,function(e){o.items[e.id]&&s.marked[e.value]&&o.items[e.id].setSelected(1),e.value===s.selectedValue&&o.items[e.id].setSelected(1)}),o.showMenu(0,a.clientHeight),i.add(n.doc,"mousedown",s.hideMenu,s),n.addClass(s.id,s.classPrefix+"Selected")}},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){if(n.removeClass(t.id,t.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open"))return;e&&n.getParent(e.target,".mceMenu")||(n.removeClass(t.id,t.classPrefix+"Selected"),i.remove(n.doc,"mousedown",t.hideMenu,t),t.menu.hideMenu())}},renderMenu:function(){var e,i=this;e=i.settings.control_manager.createDropMenu(i.id+"_menu",{menu_line:1,"class":i.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),e.onHideMenu.add(function(){i.hideMenu(),i.focus()}),e.add({title:i.settings.title,"class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}),r(i.items,function(r){r.value===t?e.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}):(r.id=n.uniqueId(),r.role="option",r.onclick=function(){i.settings.onselect(r.value)!==!1&&i.select(r.value)},e.add(r))}),i.onRenderMenu.dispatch(i,e),i.menu=e},postRender:function(){var t=this,r=t.classPrefix;i.add(t.id,"click",t.showMenu,t),i.add(t.id,"keydown",function(e){32==e.keyCode&&(t.showMenu(e),i.cancel(e))}),i.add(t.id,"focus",function(){t._focused||(t.keyDownHandler=i.add(t.id,"keydown",function(e){40==e.keyCode&&(t.showMenu(),i.cancel(e))}),t.keyPressHandler=i.add(t.id,"keypress",function(e){var n;13==e.keyCode&&(n=t.selectedValue,t.selectedValue=null,i.cancel(e),t.settings.onselect(n))})),t._focused=1}),i.add(t.id,"blur",function(){i.remove(t.id,"keydown",t.keyDownHandler),i.remove(t.id,"keypress",t.keyPressHandler),t._focused=0}),(e.isIE6||!n.boxModel)&&(i.add(t.id,"mouseover",function(){n.hasClass(t.id,r+"Disabled")||n.addClass(t.id,r+"Hover")}),i.add(t.id,"mouseout",function(){n.hasClass(t.id,r+"Disabled")||n.removeClass(t.id,r+"Hover")})),t.onPostRender.dispatch(t,n.get(t.id))},destroy:function(){this.parent(),i.clear(this.id+"_text"),i.clear(this.id+"_open")}})}(tinymce),function(e){var t,n=e.DOM,i=e.dom.Event,r=e.each;e.util.Dispatcher,e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){n.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return n.get(this.id).disabled},select:function(e){var n,i,o=this;return e==t?o.selectByIndex(-1):(i=e&&"function"==typeof e?e:function(t){return t==e},e!=o.selectedValue&&(r(o.items,function(e,t){return i(e.value)?(n=1,o.selectByIndex(t),!1):void 0}),n||o.selectByIndex(-1)),void 0)},selectByIndex:function(e){n.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,t,i){var r,o=this;i=i||{},i.value=t,o.isRendered()&&n.add(n.get(this.id),"option",i,e),r={title:e,value:t,attribs:i},o.items.push(r),o.onAdd.dispatch(o,r)},getLength:function(){return this.items.length},renderHTML:function(){var e,t=this;return e=n.createHTML("option",{value:""},"-- "+t.settings.title+" --"),r(t.items,function(t){e+=n.createHTML("option",{value:t.value},t.title)}),e=n.createHTML("select",{id:t.id,"class":"mceNativeListBox","aria-labelledby":t.id+"_aria"},e),e+=n.createHTML("span",{id:t.id+"_aria",style:"display: none"},t.settings.title)},postRender:function(){function e(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var t,r=this,o=!0;r.rendered=!0,i.add(r.id,"change",e),i.add(r.id,"keydown",function(n){var s,a=38,l=40,c=13,u=32;return i.remove(r.id,"change",t),o=!1,s=i.add(r.id,"blur",function(){o||(o=!0,i.add(r.id,"change",e),i.remove(r.id,"blur",s))}),n.keyCode==c||n.keyCode==u?(e(n),i.cancel(n)):((n.keyCode==l||n.keyCode==a)&&n.stopImmediatePropagation(),void 0)}),r.onPostRender.dispatch(r,n.get(r.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,i,r){this.parent(n,i,r),this.onRenderMenu=new e.util.Dispatcher(this),i.menu_container=i.menu_container||t.doc.body},showMenu:function(){var e,i,r,o=this,s=t.get(o.id);if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();e=t.getPos(o.settings.menu_container),i=t.getPos(s),r=o.menu,r.settings.offset_x=i.x,r.settings.offset_y=i.y,r.settings.vp_offset_x=i.x,r.settings.vp_offset_y=i.y,r.settings.keyboard_focus=o._focused,r.showMenu(0,s.firstChild.clientHeight),n.add(t.doc,"mousedown",o.hideMenu,o),o.setState("Selected",1),o.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(function(){t.hideMenu(),t.focus()}),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var i=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===i.id||e.id===i.id+"_open"})||(e&&t.getParent(e.target,".mceMenu")||(i.setState("Selected",0),n.remove(t.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()),i.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n,i=this,r=i.settings;return e="<tbody><tr>",n=r.image?t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):t.createHTML("span",{"class":"mceAction "+r["class"]},""),n+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:i.id+"_voice",style:"display:none;"},r.title),e+="<td >"+t.createHTML("a",{role:"button",id:i.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",n=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">â¼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:i.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e),t.createHTML("div",{id:i.id,role:"button",tabindex:"0","aria-labelledby":i.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var i,r=this,o=r.settings;o.onclick&&(i=function(e){r.isDisabled()||(o.onclick(r.value),n.cancel(e))},n.add(r.id+"_action","click",i),n.add(r.id,["click","keydown"],function(e){var t=40;32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?("click"===e.type||e.keyCode===t)&&(r.showMenu(),n.cancel(e)):(i(),n.cancel(e))})),n.add(r.id+"_open","click",function(e){r.showMenu(),n.cancel(e)}),n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1}),n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(r.id,"mouseover",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.addClass(r.id,"mceSplitButtonHover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.removeClass(r.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,i=e.is,r=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,i){var r=this;r.parent(t,n,i),r.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},r.settings),r.onShowMenu=new e.util.Dispatcher(r),r.onHideMenu=new e.util.Dispatcher(r),r.value=n.default_color},showMenu:function(){var i,r,o=this;if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();i=t.get(o.id),t.show(o.id+"_menu"),t.addClass(i,"mceSplitButtonSelected"),r=t.getPos(i),t.setStyles(o.id+"_menu",{left:r.x,top:r.y+i.firstChild.clientHeight,zIndex:2e5}),i=0,n.add(t.doc,"mousedown",o.hideMenu,o),o.onShowMenu.dispatch(o),o._focused&&(o._keyHandler=n.add(o.id+"_menu","keydown",function(e){27==e.keyCode&&o.hideMenu()}),t.select("a",o.id+"_menu")[0].focus()),o.keyboardNav=new e.ui.KeyboardNavigation({root:o.id+"_menu",items:t.select("a",o.id+"_menu"),onCancel:function(){o.hideMenu(),o.focus()}}),o.keyboardNav.focus(),o.isMenuVisible=1}},hideMenu:function(e){var i=this;if(i.isMenuVisible){if(e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===i.id+"_open"}))return;e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(i.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",i.hideMenu,i),n.remove(i.id+"_menu","keydown",i._keyHandler),t.hide(i.id+"_menu")),i.isMenuVisible=0,i.onHideMenu.dispatch(),i.keyboardNav.destroy()}},renderMenu:function(){var o,s,a,l,c,u,d=this,h=0,f=d.settings;return c=t.add(f.menu_container,"div",{role:"listbox",id:d.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"}),o=t.add(c,"div",{"class":f["class"]+" mceSplitButtonMenu"}),t.add(o,"span",{"class":"mceMenuLine"}),s=t.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"}),a=t.add(s,"tbody"),h=0,r(i(f.colors,"array")?f.colors:f.colors.split(","),function(n){n=n.replace(/^#/,""),h--||(l=t.add(a,"tr"),h=f.grid_width-1),s=t.add(l,"td");var i={href:"javascript:;",style:{backgroundColor:"#"+n},title:d.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(i.role="option"),s=t.add(s,"a",i),d.editor.forcedHighContrastMode&&(s=t.add(s,"canvas",{width:16,height:16,"aria-hidden":"true"}),s.getContext&&(u=s.getContext("2d"))?(u.fillStyle="#"+n,u.fillRect(0,0,16,16)):t.remove(s))}),f.more_colors_func&&(s=t.add(a,"tr"),s=t.add(s,"td",{colspan:f.grid_width,"class":"mceMoreColors"}),s=t.add(s,"a",{role:"option",id:d.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title),n.add(s,"click",function(e){return f.more_colors_func.call(f.more_colors_scope||this),n.cancel(e)})),t.addClass(o,"mceColorSplitMenu"),n.add(d.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(d.id+"_menu","click",function(e){var n;return e=t.getParent(e.target,"a",a),e&&"a"==e.nodeName.toLowerCase()&&(n=e.getAttribute("data-mce-color"))&&d.setColor(n),!1}),c},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent(),n.clear(e.id+"_menu"),n.clear(e.id+"_more"),t.remove(e.id+"_menu"),e.keyboardNav&&e.keyboardNav.destroy()}})}(tinymce),function(e){var t=e.DOM,n=e.each,i=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,i=[],r=n.controls,o=e.each,s=n.settings;return i.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),i.push("<span role='application'>"),i.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(s.name)+"</span>"),o(r,function(e){i.push(e.renderHTML())}),i.push("</span>"),i.push("</div>"),i.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var i=this,r=[];n(i.controls,function(e){n(e.controls,function(e){e.id&&r.push(e)})}),i.keyNav=new e.ui.KeyboardNavigation({root:i.id,items:r,onCancel:function(){e.isWebKit&&t.get(i.editor.id+"_ifr").focus(),i.editor.focus()},excludeFromTabOrder:!i.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),i.clear(e.id)}})}(tinymce),function(e){var t=e.DOM;e.each,e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,n,i,r,o,s,a=this,l="",c=a.settings;for(s=a.controls,i=0;i<s.length;i++)n=s[i],r=s[i-1],o=s[i+1],0===i&&(e="mceToolbarStart",n.Button?e+=" mceToolbarStartButton":n.SplitButton?e+=" mceToolbarStartSplitButton":n.ListBox&&(e+=" mceToolbarStartListBox"),l+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->"))),r&&n.ListBox&&(r.Button||r.SplitButton)&&(l+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),l+=t.stdMode?'<td style="position: relative">'+n.renderHTML()+"</td>":"<td>"+n.renderHTML()+"</td>",o&&n.ListBox&&(o.Button||o.SplitButton)&&(l+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",n.Button?e+=" mceToolbarEndButton":n.SplitButton?e+=" mceToolbarEndSplitButton":n.ListBox&&(e+=" mceToolbarEndListBox"),l+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:a.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+l+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher;e.each,e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:void 0},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(t,n,i,r){function o(){var o=s.dependencies(t);e.each(o,function(e){var t=s.createUrl(n,e);s.load(t.resource,t,void 0,void 0)}),i&&(r?i.call(r):i.call(e.ScriptLoader))}var s=this,a=n;s.urls[t]||("object"==typeof n&&(a=n.prefix+n.resource+n.suffix),0!==a.indexOf("/")&&-1==a.indexOf("://")&&(a=e.baseURL+"/"+a),s.urls[t]=a.substring(0,a.lastIndexOf("/")),s.lookup[t]?o():e.ScriptLoader.add(a,o,r))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t,n=e.each,i=e.extend,r=e.DOM,o=e.dom.Event,s=(e.ThemeManager,e.PluginManager,e.explode),a=e.util.Dispatcher,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new a(e),o.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new a(e),e.onRemoveEditor=new a(e),e.EditorManager=i(e,{editors:[],i18n:{},activeEditor:null,init:function(t){function i(e){var t=e.id;return t||(t=e.name,t=t&&!r.get(t)?e.name:r.uniqueId(),e.setAttribute("id",t)),t}function a(t,n,i){var r=t[n];if(r)return e.is(r,"string")&&(i=r.replace(/\.\w+$/,""),i=i?e.resolve(i):0,r=e.resolve(r)),r.apply(i||this,Array.prototype.slice.call(arguments,2))}function c(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}var u,d=this,h=(e.ScriptLoader,[]);d.settings=t,o.bind(window,"ready",function(){var o,d;switch(a(t,"onpageload"),t.mode){case"exact":o=t.elements||"",o.length>0&&n(s(o),function(i){r.get(i)?(u=new e.Editor(i,t),h.push(u),u.render(1)):n(document.forms,function(o){n(o.elements,function(n){n.name===i&&(i="mce_editor_"+l++,r.setAttrib(n,"id",i),u=new e.Editor(i,t),h.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":n(r.select("textarea"),function(n){t.editor_deselector&&c(n,t.editor_deselector)||(!t.editor_selector||c(n,t.editor_selector))&&(u=new e.Editor(i(n),t),h.push(u),u.render(1))});break;default:t.types?n(t.types,function(o){n(r.select(o.selector),function(n){var r=new e.Editor(i(n),e.extend({},t,o));h.push(r),r.render(1)})}):t.selector&&n(r.select(t.selector),function(n){var r=new e.Editor(i(n),t);h.push(r),r.render(1)})}t.oninit&&(o=d=0,n(h,function(e){d++,e.initialized?o++:e.onInit.add(function(){o++,o==d&&a(t,"oninit")}),o==d&&a(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors.hasOwnProperty(e)?this.editors[e]:t},getInstanceById:function(e){return this.get(e)},add:function(t){var n=this,i=n.editors;return i[t.id]=t,i.push(t),n._setActive(t),n.onAddEditor.dispatch(n,t),e.adapter&&e.adapter.patchEditor(t),t},remove:function(e){var t,n=this,i=n.editors;if(!i[e.id])return null;for(delete i[e.id],t=0;t<i.length;t++)if(i[t]==e){i.splice(t,1);break}return n.activeEditor==e&&n._setActive(i[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(t,n,i){function r(){a.destroy(),o.detachEvent("onunload",r),o=o.tinyMCE=o.tinymce=null}var o,s=this,a=s.get(i);switch(t){case"mceFocus":return a.focus(),!0;case"mceAddEditor":case"mceAddControl":return s.get(i)||new e.Editor(i,s.settings).render(),!0;case"mceAddFrameControl":return o=i.window,o.tinyMCE=tinyMCE,o.tinymce=e,e.DOM.doc=o.document,e.DOM.win=o,a=new e.Editor(i.element_id,i),a.render(),e.isIE&&!e.isIE11&&o.attachEvent("onunload",r),i.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return a&&a.remove(),!0;case"mceToggleEditor":return a?(a.isHidden()?a.show():a.hide(),!0):(s.execCommand("mceAddControl",0,i),!0)}return s.activeEditor?s.activeEditor.execCommand(t,n,i):!1},execInstanceCommand:function(e,t,n,i){var r=this.get(e);return r?r.execCommand(t,n,i):!1},triggerSave:function(){n(this.editors,function(e){e.save()})},addI18n:function(t,i){var r=this.i18n;e.is(t,"string")?n(i,function(e,n){r[t+"."+n]=e}):n(t,function(e,t){n(e,function(e,i){n(e,function(e,n){"common"===i?r[t+"."+n]=e:r[t+"."+i+"."+n]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,i=e.extend,r=e.each,o=e.isGecko,s=e.isIE,a=(e.isWebKit,e.is),l=e.ThemeManager,c=e.PluginManager,u=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var r=this,o=!0;r.settings=n=i({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:o,submit_patch:o,add_unload_trigger:o,convert_urls:o,relative_urls:o,remove_script_host:o,table_inline_editing:!1,object_resizing:o,accessibility_focus:o,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:o,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:o,directionality:"ltr",forced_root_block:"p",hidden_input:o,padd_empty_editor:o,render_ui:o,indentation:"30px",fix_table_elements:o,inline_styles:o,convert_fonts_to_spans:o,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:o,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:o},n),r.id=r.editorId=t,r.isNotDirty=!1,r.plugins={},r.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=e.baseURI,r.contentCSS=[],r.contentStyles=[],r.setupEvents(),r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.execCallback("setup",r)},render:function(){function i(){s.language&&s.language_load!==!1&&d.add(e.baseURL+"/langs/"+s.language+".js"),s.theme&&"function"!=typeof s.theme&&"-"!=s.theme.charAt(0)&&!l.urls[s.theme]&&l.load(s.theme,"themes/"+s.theme+"/editor_template"+e.suffix+".js"),r(u(s.plugins),function(t){if(t&&!c.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);
var n=c.dependencies(t);r(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=c.createUrl(n,t),c.load(t.resource,t)})}else{if("safari"==t)return;c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),d.loadQueue(function(){o.removed||o.init()})}var o=this,s=o.settings,a=o.id,d=e.ScriptLoader;return n.domLoaded?(tinyMCE.settings=s,o.getElement()&&(!e.isIDevice||e.isIOS5)&&(!/TEXTAREA|INPUT/i.test(o.getElement().nodeName)&&s.hidden_input&&t.getParent(a,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:a}),a),s.content_editable||(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden"),e.WindowManager&&(o.windowManager=new e.WindowManager(o)),"xml"==s.encoding&&o.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),s.add_form_submit_trigger&&o.onSubmit.addToTop(function(){o.initialized&&(o.save(),o.isNotDirty=1)}),s.add_unload_trigger&&(o._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0})})),e.addUnload(o.destroy,o),s.submit_patch&&o.onBeforeRenderUI.add(function(){var t=o.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(o.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),o.isNotDirty=1,o.formElement._mceOldSubmit(o.formElement)}),t=null))}),i()),void 0):(n.add(window,"ready",function(){o.render()}),void 0)},init:function(){function n(t){var i,o=c.get(t),s=c.urls[t]||e.documentBaseURL.replace(/\/$/,"");o&&-1===e.inArray(w,t)&&(r(c.dependencies(t),function(e){n(e)}),i=new o(y,s),y.plugins[t]=i,i.init&&(i.init(y,s),w.push(t)))}var i,o,a,d,h,f,p,m,g,v,y=this,b=y.settings,_=y.getElement(),w=[];if(e.add(y),b.aria_label=b.aria_label||t.getAttrib(_,"aria-label",y.getLang("aria.rich_text_area")),b.theme&&("function"!=typeof b.theme?(b.theme=b.theme.replace(/-/,""),h=l.get(b.theme),y.theme=new h,y.theme.init&&y.theme.init(y,l.urls[b.theme]||e.documentBaseURL.replace(/\/$/,""))):y.theme=b.theme),r(u(b.plugins.replace(/\-/g,"")),n),b.popup_css!==!1&&(b.popup_css=b.popup_css?y.documentBaseURI.toAbsolute(b.popup_css):y.baseURI.toAbsolute("themes/"+b.theme+"/skins/"+b.skin+"/dialog.css")),b.popup_css_add&&(b.popup_css+=","+y.documentBaseURI.toAbsolute(b.popup_css_add)),y.controlManager=new e.ControlManager(y),y.onBeforeRenderUI.dispatch(y,y.controlManager),b.render_ui&&y.theme&&(y.orgDisplay=_.style.display,"function"!=typeof b.theme?(o=b.width||_.style.width||_.offsetWidth,a=b.height||_.style.height||_.offsetHeight,d=b.min_height||100,g=/^[0-9\.]+(|px)$/i,g.test(""+o)&&(o=Math.max(parseInt(o,10)+(h.deltaWidth||0),100)),g.test(""+a)&&(a=Math.max(parseInt(a,10)+(h.deltaHeight||0),d)),h=y.theme.renderUI({targetNode:_,width:o,height:a,deltaWidth:b.delta_width,deltaHeight:b.delta_height}),t.setStyles(h.sizeContainer||h.editorContainer,{width:o,height:a}),a=(h.iframeHeight||a)+("number"==typeof a?h.deltaHeight||0:""),d>a&&(a=d)):(h=b.theme(y,_),h.editorContainer.nodeType&&(h.editorContainer=h.editorContainer.id=h.editorContainer.id||y.id+"_parent"),h.iframeContainer.nodeType&&(h.iframeContainer=h.iframeContainer.id=h.iframeContainer.id||y.id+"_iframecontainer"),a=h.iframeHeight||_.offsetHeight,s&&(y.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown keyup",function(){e.bookmark=e.selection.getBookmark(1)})}),y.onNodeChange.add(function(e){document.activeElement.id==e.id+"_ifr"&&(e.bookmark=e.selection.getBookmark(1))}))),y.editorContainer=h.editorContainer),b.content_css&&r(u(b.content_css),function(e){y.contentCSS.push(y.documentBaseURI.toAbsolute(e))}),b.content_style&&y.contentStyles.push(b.content_style),b.content_editable)return _=i=h=null,y.initContentBody();for(document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),y.iframeHTML=b.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',b.document_base_url!=e.documentBaseURL&&(y.iframeHTML+='<base href="'+y.documentBaseURI.getURI()+'" />'),e.isIE8&&(y.iframeHTML+=b.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),y.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',v=0;v<y.contentCSS.length;v++)y.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+y.contentCSS[v]+'" />';y.contentCSS=[],p=b.body_id||"tinymce",-1!=p.indexOf("=")&&(p=y.getParam("body_id","","hash"),p=p[y.id]||p),m=b.body_class||"",-1!=m.indexOf("=")&&(m=y.getParam("body_class","","hash"),m=m[y.id]||""),y.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+m+'" onload="window.parent.tinyMCE.get(\''+y.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(s||e.isOpera&&parseFloat(opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+y.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),i=t.add(h.iframeContainer,"iframe",{id:y.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:b.aria_label,style:{width:"100%",height:a,display:"block"}}),y.contentAreaContainer=h.iframeContainer,h.editorContainer&&(t.get(h.editorContainer).style.display=y.orgDisplay),_.style.visibility=y.orgVisibility,t.get(y.id).style.display="none",t.setAttrib(y.id,"aria-hidden",!0),e.relaxedDomain&&f||y.initContentBody(),_=i=h=null},initContentBody:function(){var n,i,o=this,a=o.settings,l=t.get(o.id),c=o.getDoc();s&&e.relaxedDomain||a.content_editable||(c.open(),c.write(o.iframeHTML),c.close(),e.relaxedDomain&&(c.domain=e.relaxedDomain)),a.content_editable&&(t.addClass(l,"mceContentBody"),o.contentDocument=c=a.content_document||document,o.contentWindow=a.content_window||window,o.bodyElement=l,a.content_document=a.content_window=null),n=o.getBody(),n.disabled=!0,a.readonly||(n.contentEditable=o.getParam("content_editable_state",!0)),n.disabled=!1,o.schema=new e.html.Schema(a),o.dom=new e.dom.DOMUtils(c,{keep_values:!0,url_converter:o.convertURL,url_converter_scope:o,hex_colors:a.force_hex_style_colors,class_filter:a.class_filter,update_styles:!0,root_element:a.content_editable?o.id:null,schema:o.schema}),o.parser=new e.html.DomParser(a,o.schema),o.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,i,r,s=e.length,a=o.dom;s--;)n=e[s],i=n.attr(t),r="data-mce-"+t,n.attributes.map[r]||("style"===t?n.attr(r,a.serializeStyle(a.parseStyle(i),n.name)):n.attr(r,o.convertURL(i,t,n.name)))}),o.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"text/javascript"))}),o.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),o.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,i=t.length,r=o.schema.getNonEmptyElements();i--;)n=t[i],n.isEmpty(r)&&(n.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),o.serializer=new e.dom.Serializer(a,o.dom,o.schema),o.selection=new e.dom.Selection(o.dom,o.getWin(),o.serializer,o),o.formatter=new e.Formatter(o),o.undoManager=new e.UndoManager(o),o.forceBlocks=new e.ForceBlocks(o),o.enterKey=new e.EnterKey(o),o.editorCommands=new e.EditorCommands(o),o.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||o.nodeChanged()}),o.serializer.onPreProcess.add(function(e,t){return o.onPreProcess.dispatch(o,t,e)}),o.serializer.onPostProcess.add(function(e,t){return o.onPostProcess.dispatch(o,t,e)}),o.onPreInit.dispatch(o),a.browser_spellcheck||a.gecko_spellcheck||(c.body.spellcheck=!1),a.readonly||o.bindNativeEvents(),o.controlManager.onPostRender.dispatch(o,o.controlManager),o.onPostRender.dispatch(o),o.quirks=e.util.Quirks(o),a.directionality&&(n.dir=a.directionality),a.nowrap&&(n.style.whiteSpace="nowrap"),a.protect&&o.onBeforeSetContent.add(function(e,t){r(a.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),o.onSetContent.add(function(){o.addVisual(o.getBody())}),a.padd_empty_editor&&o.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),o.initialized=!0,o.onInit.dispatch(o),o.execCallback("setupcontent_callback",o.id,n,c),o.execCallback("init_instance_callback",o),o.focus(!0),o.nodeChanged({initial:!0}),o.contentStyles.length>0&&(i="",r(o.contentStyles,function(e){i+=e+"\r\n"}),o.dom.addStyle(i)),r(o.contentCSS,function(e){o.dom.loadCSS(e)}),a.auto_focus&&setTimeout(function(){var t=e.get(a.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),l=c=n=null},focus:function(t){var n,i,r,o,s=this,a=s.selection,l=s.settings.content_editable,c=s.getDoc();t||(s.bookmark&&(a.moveToBookmark(s.bookmark),s.bookmark=null),i=a.getRng(),i.item&&(r=i.item(0)),s._refreshContentEditable(),l||s.getWin().focus(),(e.isGecko||l)&&(o=s.getBody(),o.setActive&&!e.isIE11?o.setActive():o.focus(),l&&a.normalize()),r&&r.ownerDocument==c&&(i=c.body.createControlRange(),i.addElement(r),i.select())),e.activeEditor!=s&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,s),s.onActivate.dispatch(s,n)),e._setActive(s)},execCallback:function(t){var n,i=this,r=i.settings[t];if(r)return i.callbackLookup&&(n=i.callbackLookup[t])&&(r=n.func,n=n.scope),a(r,"string")&&(n=r.replace(/\.\w+$/,""),n=n?e.resolve(n):0,r=e.resolve(r),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[t]={func:r,scope:n}),r.apply(n||i,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",i=e.i18n;return t?i[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return i[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(a(n)?n:"{#"+t+"}")},getParam:function(t,n,i){var o,s=e.trim,l=a(this.settings[t])?this.settings[t]:n;return"hash"===i?(o={},a(l,"string")?r(l.indexOf("=")>0?l.split(/[;,](?![^=;,]*(?:[;,]|$))/):l.split(","),function(e){e=e.split("="),o[s(e[0])]=e.length>1?s(e[1]):s(e)}):o=l,o):l},nodeChanged:function(e){var t,n=this,i=n.selection;n.initialized&&(e=e||{},t=i.getStart()||n.getBody(),t=s&&t.ownerDocument!=n.getDoc()?n.getBody():t,e.parents=[],n.dom.getParent(t,function(t){return"BODY"==t.nodeName?!0:(e.parents.push(t),void 0)}),n.onNodeChange.dispatch(n,e?e.controlManager||n.controlManager:n.controlManager,t,i.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){var o,s=this;return s.settings.custom_shortcuts===!1?!1:(s.shortcuts=s.shortcuts||{},a(n,"string")&&(o=n,n=function(){s.execCommand(o,!1,null)}),a(n,"object")&&(o=n,n=function(){s.execCommand(o[0],o[1],o[2])}),r(u(e),function(e){var o={func:n,scope:i||this,desc:s.translate(t),alt:!1,ctrl:!1,shift:!1};r(u(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=!0;break;default:o.charCode=e.charCodeAt(0),o.keyCode=e.toUpperCase().charCodeAt(0)}}),s.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o}),!0)},execCommand:function(e,t,n,o){var s,a,l=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||o&&o.skip_focus||l.focus(),o=i({},o),l.onBeforeExecCommand.dispatch(l,e,t,n,o),o.terminate?!1:l.execCallback("execcommand_callback",l.id,l.selection.getNode(),e,t,n)?(l.onExecCommand.dispatch(l,e,t,n,o),!0):(s=l.execCommands[e])&&(a=s.func.call(s.scope,t,n),a!==!0)?(l.onExecCommand.dispatch(l,e,t,n,o),a):(r(l.plugins,function(i){return i.execCommand&&i.execCommand(e,t,n)?(l.onExecCommand.dispatch(l,e,t,n,o),c=1,!1):void 0}),c?!0:l.theme&&l.theme.execCommand&&l.theme.execCommand(e,t,n)?(l.onExecCommand.dispatch(l,e,t,n,o),!0):l.editorCommands.execCommand(e,t,n)?(l.onExecCommand.dispatch(l,e,t,n,o),!0):(l.getDoc().execCommand(e,t,n),l.onExecCommand.dispatch(l,e,t,n,o),void 0))},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandState(e),-1!==t)return t;try{return this.getDoc().queryCommandState(e)}catch(r){}}},queryCommandValue:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryValueCommands[e])&&(n=t.func.call(t.scope),n!==!0))return n;if(t=i.editorCommands.queryCommandValue(e),a(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();s&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,i=n.getElement();return i?(e=e||{},e.load=!0,t=n.setContent(a(i.value)?i.value:i.innerHTML,e),e.element=i,e.no_events||n.onLoadContent.dispatch(n,e),e.element=i=null,t):void 0},save:function(e){var n,i,o=this,s=o.getElement();if(s&&o.initialized)return e=e||{},e.save=!0,e.element=s,n=e.content=o.getContent(e),e.no_events||o.onSaveContent.dispatch(o,e),n=e.content,/TEXTAREA|INPUT/i.test(s.nodeName)?s.value=n:(s.innerHTML=n,(i=t.getParent(o.id,"form"))&&r(i.elements,function(e){return e.name==o.id?(e.value=n,!1):void 0})),e.element=s=null,n},setContent:function(t,n){var i,r=this,o=r.getBody();return n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||r.onBeforeSetContent.dispatch(r,n),t=n.content,e.isIE||0!==t.length&&!/^\s+$/.test(t)?("raw"!==n.format&&(t=new e.html.Serializer({},r.schema).serialize(r.parser.parse(t))),n.content=e.trim(t),r.dom.setHTML(o,n.content),n.no_events||r.onSetContent.dispatch(r,n),r.settings.content_editable&&document.activeElement!==r.getBody()||r.selection.normalize(),n.content):(i=r.settings.forced_root_block,t=i?"<"+i+'><br data-mce-bogus="1"></'+i+">":'<br data-mce-bogus="1">',o.innerHTML=t,r.selection.select(o,!0),r.selection.collapse(!0),void 0)},getContent:function(t){var n,i=this,r=i.getBody();return t=t||{},t.format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||i.onBeforeGetContent.dispatch(i,t),n="raw"==t.format?r.innerHTML:"text"==t.format?r.innerText||r.textContent:i.serializer.serialize(r,t),t.content="text"!=t.format?e.trim(n):n,t.no_events||i.onGetContent.dispatch(i,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e,n=this;return n.contentWindow||(e=t.get(n.id+"_ifr"),e&&(n.contentWindow=e.contentWindow)),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:r.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,i=n.settings,o=n.dom;e=e||n.getBody(),a(n.hasVisual)||(n.hasVisual=i.visual),r(o.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":return t=i.visual_table_class||"mceItemTable",r=o.getAttrib(e,"border"),r&&"0"!=r||(n.hasVisual?o.addClass(e,t):o.removeClass(e,t)),void 0;case"A":return o.getAttrib(e,"href",!1)||(r=o.getAttrib(e,"name")||e.id,t="mceItemAnchor",r&&(n.hasVisual?o.addClass(e,t):o.removeClass(e,t))),void 0}}),n.onVisualAid.dispatch(n,e,n.hasVisual)},remove:function(){var i=this,r=i.getContainer(),o=i.getDoc();i.removed||(i.removed=1,s&&o&&o.execCommand("SelectAll"),i.save(),t.setStyle(i.id,"display",i.orgDisplay),i.settings.content_editable||(n.unbind(i.getWin()),n.unbind(i.getDoc())),n.unbind(i.getBody()),n.clear(r),i.execCallback("remove_instance_callback",i),i.onRemove.dispatch(i),i.onExecCommand.listeners=[],e.remove(i),t.remove(r))},destroy:function(t){var i=this;i.destroyed||(o&&(n.unbind(i.getDoc()),n.unbind(i.getWin()),n.unbind(i.getBody())),t||(e.removeUnload(i.destroy),tinyMCE.onBeforeUnload.remove(i._beforeUnload),i.theme&&i.theme.destroy&&i.theme.destroy(),i.controlManager.destroy(),i.selection.destroy(),i.dom.destroy()),i.formElement&&(i.formElement.submit=i.formElement._mceOldSubmit,i.formElement._mceOldSubmit=null),i.contentAreaContainer=i.formElement=i.container=i.settings.content_element=i.bodyElement=i.contentDocument=i.contentWindow=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),i.destroyed=1)},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return o?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,i=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)}),i.cleanup_callback&&(n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),n.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),n.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),i.save_callback&&n.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),i.handle_event_callback&&n.onEvent.add(function(e,t,i){n.execCallback("handle_event_callback",t,e,i)===!1&&(t.preventDefault(),t.stopPropagation())}),i.handle_node_change_callback&&n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),i.save_callback&&n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),i.onchange_callback&&n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},e.Editor.prototype.bindNativeEvents=function(){function n(e,t){e.type,a.removed||a.onEvent.dispatch(a,e,t)!==!1&&a[s[e.fakeType||e.type]].dispatch(a,e,t)}function i(){a.focus(!0)}function r(t,n){65==n.keyCode&&e.VK.metaKeyPressed(n)||a.selection.normalize(),a.nodeChanged()}function o(n,i){(n.altKey||n.ctrlKey||n.metaKey)&&t(a.shortcuts,function(t){var r=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl==r&&t.alt==n.altKey&&t.shift==n.shiftKey)return n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode?(n.preventDefault(),i&&t.func.call(t.scope),!0):void 0})}var s,a=this,l=a.settings,c=a.dom;s={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},t(s,function(t,i){var r=l.content_editable?a.getBody():a.getDoc();switch(i){case"contextmenu":c.bind(r,i,n);break;case"paste":c.bind(a.getBody(),i,n);break;case"submit":case"reset":c.bind(a.getElement().form||e.DOM.getParent(a.id,"form"),i,n);break;default:c.bind(r,i,n)}}),c.bind(l.content_editable?a.getBody():e.isGecko?a.getDoc():a.getWin(),"focus",function(){a.focus(!0)}),l.content_editable&&e.isOpera&&(c.bind(a.getBody(),"click",i),c.bind(a.getBody(),"keydown",i)),a.onMouseUp.add(r),a.onKeyUp.add(function(t,n){var i=n.keyCode;(i>=33&&36>=i||i>=37&&40>=i||13==i||45==i||46==i||8==i||e.isMac&&(91==i||93==i)||n.ctrlKey)&&r(t,n)}),a.onReset.add(function(){a.setContent(a.startContent,{format:"raw"})}),a.onKeyUp.add(function(e,t){o(t)}),a.onKeyPress.add(function(e,t){o(t)}),a.onKeyDown.add(function(e,t){o(t,!0)}),e.isOpera&&a.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(e){var t,n=e.each,i=!0,r=!1;e.EditorCommands=function(o){function s(e,t,n){var o;return e=e.toLowerCase(),(o=y.exec[e])?(o(e,t,n),i):r}function a(e){var t;return e=e.toLowerCase(),(t=y.state[e])?t(e):-1}function l(e){var t;return e=e.toLowerCase(),(t=y.value[e])?t(e):r}function c(e,t){t=t||"exec",n(e,function(e,i){n(i.toLowerCase().split(","),function(n){y[t][n]=e})})}function u(e,n,i){return n===t&&(n=r),i===t&&(i=null),o.getDoc().execCommand(e,n,i)}function d(e){return _.match(e)}function h(e,n){_.toggle(e,n?{value:n}:t)}function f(e){m=v.getBookmark(e)}function p(){v.moveToBookmark(m)}var m,g=o.dom,v=o.selection,y={state:{},exec:{},value:{}},b=o.settings,_=o.formatter;e.extend(this,{execCommand:s,queryCommandState:a,queryCommandValue:l,addCommands:c}),c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=o.getDoc();try{u(t)}catch(s){n=i}(n||!r.queryCommandSupported(t))&&(e.isGecko?o.windowManager.confirm(o.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):o.windowManager.alert(o.getLang("clipboard_no_support")))},unlink:function(e){v.isCollapsed()&&v.select(v.getNode()),u(e),v.collapse(r)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);n("left,center,right,full".split(","),function(e){t!=e&&_.remove("align"+e)}),h("align"+t),s("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;u(e),t=g.getParent(v.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(f(),g.split(n,t),p()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){h(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){h(e,n)},FontSize:function(t,n,i){var r,o;i>=1&&7>=i&&(o=e.explode(b.font_size_style_values),r=e.explode(b.font_size_classes),i=r?r[i-1]||i:o[i-1]||i),h(t,i)},RemoveFormat:function(e){_.remove(e)},mceBlockQuote:function(){h("blockquote")},FormatBlock:function(e,t,n){return h(n||"p")},mceCleanup:function(){var e=v.getBookmark();o.setContent(o.getContent({cleanup:i}),{cleanup:i}),v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||v.getNode();r!=o.getBody()&&(f(),o.dom.remove(r,i),p())},mceSelectNodeDepth:function(e,t,n){var i=0;g.getParent(v.getNode(),function(e){return 1==e.nodeType&&i++==n?(v.select(e),r):void 0},o.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(t,n,i){var r,s,a,l,c,u,d,h,f,p,m,y,b,_;if(r=o.parser,s=new e.html.Serializer({},o.schema),b='<span id="mce_marker" data-mce-type="bookmark">ï»¿</span>',u={content:i,format:"html"},v.onBeforeSetContent.dispatch(v,u),i=u.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),v.isCollapsed()||o.getDoc().execCommand("Delete",!1,null),a=v.getNode(),u={context:a.nodeName.toLowerCase()},c=r.parse(i,u),m=c.lastChild,"mce_marker"==m.attr("id"))for(d=m,m=m.prev;m;m=m.walk(!0))if(3==m.type||!g.isBlock(m.name)){m.parent.insert(d,m,"br"===m.name);break}if(u.invalid){for(v.setContent(b),a=v.getNode(),l=o.getBody(),9==a.nodeType?a=m=l:m=a;m!==l;)a=m,m=m.parentNode;i=a==l?l.innerHTML:g.getOuterHTML(a),i=s.serialize(r.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return s.serialize(c)}))),a==l?g.setHTML(l,i):g.setOuterHTML(a,i)}else i=s.serialize(c),m=a.firstChild,y=a.lastChild,!m||m===y&&"BR"===m.nodeName?g.setHTML(a,i):v.setContent(i);d=g.get("mce_marker"),h=g.getRect(d),f=g.getViewPort(o.getWin()),(h.y+h.h>f.y+f.h||h.y<f.y||h.x>f.x+f.w||h.x<f.x)&&(_=e.isIE?o.getDoc().documentElement:o.getBody(),_.scrollLeft=h.x,_.scrollTop=h.y-f.h+25),p=g.createRng(),m=d.previousSibling,m&&3==m.nodeType?p.setStart(m,m.nodeValue.length):(p.setStartBefore(d),p.setEndBefore(d)),g.remove(d),v.setRng(p),v.onSetContent.dispatch(v,u),o.addVisual()},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker"),o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){h(n)},mceSetContent:function(e,t,n){o.setContent(n)},"Indent,Outdent":function(e){var t,i,r;t=b.indentation,i=/[a-z%]+$/i.exec(t),t=parseInt(t),a("InsertUnorderedList")||a("InsertOrderedList")?u(e):(b.forced_root_block||g.getParent(v.getNode(),g.isBlock)||_.apply("div"),n(v.getSelectedBlocks(),function(n){"outdent"==e?(r=Math.max(0,parseInt(n.style.paddingLeft||0)-t),g.setStyle(n,"paddingLeft",r?r+i:"")):g.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+t+i)}))},mceRepaint:function(){if(e.isGecko)try{f(i),v.getSel()&&v.getSel().selectAllChildren(o.getBody()),v.collapse(i),p()}catch(t){}},mceToggleFormat:function(e,t,n){_.toggle(n)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(e,t,n){o.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=g.getParent(v.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||_.remove("link"),n.href&&_.apply("link",n,i)},selectAll:function(){var e=g.getRoot(),t=g.createRng();v.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),v.setRng(t)):u("SelectAll")}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),r=v.isCollapsed()?[g.getParent(v.getNode(),g.isBlock)]:v.getSelectedBlocks(),o=e.map(r,function(e){return!!_.matchNode(e,n)});return-1!==e.inArray(o,i)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return d(e)},mceBlockQuote:function(){return d("blockquote")},Outdent:function(){var e;if(b.inline_styles){if((e=g.getParent(v.getStart(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return i;if((e=g.getParent(v.getEnd(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return i}return a("InsertUnorderedList")||a("InsertOrderedList")||!b.inline_styles&&!!g.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=g.getParent(v.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),c({"FontSize,FontName":function(e){var t,n=0;return(t=g.getParent(v.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),c({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function i(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function r(){o.typing=!1,o.add()}var o,s,a,l,c,u=0,d=[];return onBeforeAdd=new t(o),a=new t(o),l=new t(o),c=new t(o),a.add(function(e,t){return e.hasUndo()?n.onChange.dispatch(n,t,e):void 0}),l.add(function(e,t){return n.onUndo.dispatch(n,t,e)}),c.add(function(e,t){return n.onRedo.dispatch(n,t,e)}),n.onInit.add(function(){o.add()}),n.onBeforeExecCommand.add(function(e,t,n,i,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||o.beforeChange()}),n.onExecCommand.add(function(e,t,n,i,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||o.add()}),n.onSaveContent.add(r),n.dom.bind(n.dom.getRoot(),"dragend",r),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&o.typing&&r()}),n.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||t.ctrlKey)&&r()}),n.onKeyDown.add(function(e,t){var n=t.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?(o.typing&&r(),void 0):((16>n||n>20)&&224!=n&&91!=n&&!o.typing&&(o.beforeChange(),o.typing=!0,o.add()),void 0)}),n.onMouseDown.add(function(){o.typing&&r()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),o={data:d,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:a,onUndo:l,onRedo:c,beforeChange:function(){s=n.selection.getBookmark(2,!0)},add:function(e){var t,r,a=n.settings;if(e=e||{},e.content=i(),o.onBeforeAdd.dispatch(o,e),r=d[u],r&&r.content==e.content)return null;if(d[u]&&(d[u].beforeBookmark=s),a.custom_undo_redo_levels&&d.length>a.custom_undo_redo_levels){for(t=0;t<d.length-1;t++)d[t]=d[t+1];d.length--,u=d.length}return e.bookmark=n.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(e),u=d.length-1,o.onAdd.dispatch(o,e),n.isNotDirty=0,e},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1),u>0&&(e=d[--u],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),o.onUndo.dispatch(o,e)),e},redo:function(){var e;return u<d.length-1&&(e=d[++u],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),o.onRedo.dispatch(o,e)),e},clear:function(){d=[],u=0,o.typing=!1},hasUndo:function(){return u>0||this.typing},hasRedo:function(){return u<d.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(e){function t(){var t,s,a,l,c,u,d,h,f,p=r.getStart(),m=e.getBody(),g=-16777215;if(p&&1===p.nodeType&&n.forced_root_block){for(;p&&p!=m;){if(o[p.nodeName])return;p=p.parentNode}for(t=r.getRng(),t.setStart?(s=t.startContainer,a=t.startOffset,l=t.endContainer,c=t.endOffset):(t.item&&(p=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(p)),f=t.parentElement().ownerDocument===e.getDoc(),tmpRng=t.duplicate(),tmpRng.collapse(!0),a=-1*tmpRng.move("character",g),tmpRng.collapsed||(tmpRng=t.duplicate(),tmpRng.collapse(!1),c=-1*tmpRng.move("character",g)-a)),p=m.firstChild;p;)if(3===p.nodeType||1==p.nodeType&&!o[p.nodeName]){if(3===p.nodeType&&0==p.nodeValue.length){d=p,p=p.nextSibling,i.remove(d);continue}u||(u=i.create(n.forced_root_block),p.parentNode.insertBefore(u,p),h=!0),d=p,p=p.nextSibling,u.appendChild(d)}else u=null,p=p.nextSibling;if(h){if(t.setStart)t.setStart(s,a),t.setEnd(l,c),r.setRng(t);else if(f)try{t=e.getDoc().body.createTextRange(),t.moveToElementText(m),t.collapse(!0),t.moveStart("character",a),c>0&&t.moveEnd("character",c),t.select()}catch(v){}e.nodeChanged()}}}var n=e.settings,i=e.dom,r=e.selection,o=e.schema.getBlockElements();n.forced_root_block&&(e.onKeyUp.add(t),e.onNodeChange.add(t))},function(e){var t=(e.DOM,e.dom.Event),n=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,i){var r=this;i=i||{},r.editor=t,r.controls={},r.onAdd=new e.util.Dispatcher(r),r.onPostRender=new e.util.Dispatcher(r),r.prefix=i.prefix||t.id+"_",r._cls={},r.onPostRender.add(function(){n(r.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,i,r,o,s=this,a=s.editor;for(s.controlFactories||(s.controlFactories=[],n(a.plugins,function(e){e.createControl&&s.controlFactories.push(e)})),o=s.controlFactories,i=0,r=o.length;r>i;i++)if(t=o[i].createControl(e,s))return s.add(t);return"|"===e||"separator"===e?s.createSeparator():a.buttons&&(t=a.buttons[e])?s.createButton(e,t):s.add(t)},createDropMenu:function(t,n,r){var o,s,a,l,c=this,u=c.editor;return n=i({"class":"mceDropDown",constrain:u.settings.constrain_menus},n),n["class"]=n["class"]+" "+u.getParam("skin")+"Skin",(a=u.getParam("skin_variant"))&&(n["class"]+=" "+u.getParam("skin")+"Skin"+a.substring(0,1).toUpperCase()+a.substring(1)),n["class"]+="rtl"==u.settings.directionality?" mceRtl":"",t=c.prefix+t,l=r||c._cls.dropmenu||e.ui.DropMenu,o=c.controls[t]=new l(t,n),o.onAddItem.add(function(e,t){var n=t.settings;
n.title=u.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&u.execCommand(n.cmd,n.ui||!1,n.value)})}),u.onRemove.add(function(){o.destroy()}),e.isIE&&(o.onShowMenu.add(function(){u.focus(),s=u.selection.getBookmark(1)}),o.onHideMenu.add(function(){s&&(u.selection.moveToBookmark(s),s=0)})),c.add(o)},createListBox:function(n,r,o){function s(t){return t.settings.use_accessible_selects&&!e.isGecko}var a,l,c=this,u=c.editor;return c.get(n)?null:(r.title=u.translate(r.title),r.scope=r.scope||u,r.onselect||(r.onselect=function(e){u.execCommand(r.cmd,r.ui||!1,e||r.value)}),r=i({title:r.title,"class":"mce_"+n,scope:r.scope,control_manager:c},r),n=c.prefix+n,u.settings.use_native_selects||s(u)?a=new e.ui.NativeListBox(n,r):(l=o||c._cls.listbox||e.ui.ListBox,a=new l(n,r,u)),c.controls[n]=a,e.isWebKit&&a.onPostRender.add(function(e,n){t.add(n,"mousedown",function(){u.bookmark=u.selection.getBookmark(1)}),t.add(n,"focus",function(){u.selection.moveToBookmark(u.bookmark),u.bookmark=null})}),a.hideMenu&&u.onMouseDown.add(a.hideMenu,a),c.add(a))},createButton:function(t,n,r){var o,s,a=this,l=a.editor;return a.get(t)?null:(n.title=l.translate(n.title),n.label=l.translate(n.label),n.scope=n.scope||l,n.onclick||n.menu_button||(n.onclick=function(){l.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:l.getLang("unavailable",""),scope:n.scope,control_manager:a},n),t=a.prefix+t,n.menu_button?(s=r||a._cls.menubutton||e.ui.MenuButton,o=new s(t,n,l),l.onMouseDown.add(o.hideMenu,o)):(s=a._cls.button||e.ui.Button,o=new s(t,n,l)),a.add(o))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,r){var o,s,a=this,l=a.editor;return a.get(t)?null:(n.title=l.translate(n.title),n.scope=n.scope||l,n.onclick||(n.onclick=function(e){l.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){l.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:a},n),t=a.prefix+t,s=r||a._cls.splitbutton||e.ui.SplitButton,o=a.add(new s(t,n,l)),l.onMouseDown.add(o.hideMenu,o),o)},createColorSplitButton:function(t,n,r){var o,s,a,l=this,c=l.editor;return l.get(t)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(t){e.isIE&&(a=c.selection.getBookmark(1)),c.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,menu_class:c.getParam("skin")+"Skin",scope:n.scope,more_colors_title:c.getLang("more_colors")},n),t=l.prefix+t,s=r||l._cls.colorsplitbutton||e.ui.ColorSplitButton,o=new s(t,n,c),c.onMouseDown.add(o.hideMenu,o),c.onRemove.add(function(){o.destroy()}),e.isIE&&(o.onShowMenu.add(function(){c.focus(),a=c.selection.getBookmark(1)}),o.onHideMenu.add(function(){a&&(c.selection.moveToBookmark(a),a=0)})),l.add(o))},createToolbar:function(t,n,i){var r,o,s=this;return t=s.prefix+t,o=i||s._cls.toolbar||e.ui.Toolbar,r=new o(t,n,s.editor),s.get(t)?null:s.add(r)},createToolbarGroup:function(t,n,i){var r,o,s=this;return t=s.prefix+t,o=i||this._cls.toolbarGroup||e.ui.ToolbarGroup,r=new o(t,n,s.editor),s.get(t)?null:s.add(r)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){n(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,i=e.isIE,r=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,o){var s,a,l,c,u=this,d="",h="modal"==u.editor.settings.dialog_type,f=e.DOM.getViewPort();t=t||{},o=o||{},a=r?f.w:screen.width,l=r?f.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(a/2)-t.width/2,t.top=t.top||parseInt(l/2)-t.height/2,o.inline=!1,o.mce_width=t.width,o.mce_height=t.height,o.mce_auto_focus=t.auto_focus,h&&i&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(d+=i&&h?(d?";":"")+n+":"+t:(d?",":"")+n+"="+t)}),u.features=t,u.params=o,u.onOpen.dispatch(u,t,o),c=t.url||t.file,c=e._addVer(c);try{i&&h?(s=1,window.showModalDialog(c,window,d)):s=window.open(c,t.name,d)}catch(p){}s||alert(u.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,i,r,o,s){var a=e.resolve(t);return new a(n,i,r,o,s)},confirm:function(e,t,n,i){i=i||window,t.call(n||this,i.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,i){var r=this;i=i||window,i.alert(r._decode(r.editor.getLang(e,e))),t&&t.call(n||r)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function n(e){return e.nodeType&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]}function i(e,t){return B.getParents(e,t,B.getRoot())}function r(e){return 1===e.nodeType&&"_mce_caret"===e.id}function o(){l({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){L(n,function(t,n){B.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),L("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){l(e,{block:e,remove:"all"})}),l(t.settings.formats)}function s(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function a(e){return e?D[e]:D}function l(e,t){e&&("string"!=typeof e?L(e,function(e,t){l(t,e)}):(t=t.length?t:[t],L(t,function(e){e.deep===M&&(e.deep=!e.selector),e.split===M&&(e.split=!e.selector||e.inline),e.remove===M&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),D[e]=t))}function c(i,o,s){function l(e,t){t=t||b,e&&(t.onformat&&t.onformat(e,t,o,s),L(t.styles,function(t,n){B.setStyle(e,n,_(t,o))}),L(t.attributes,function(t,n){B.setAttrib(e,n,_(t,o))}),L(t.classes,function(t){t=_(t,o),B.hasClass(e,t)||B.addClass(e,t)}))}function u(){function e(e,t){var n=new R(t);for(s=n.current();s;s=n.prev())if(s.childNodes.length>1||s==e||"BR"==s.tagName)return s}var n=t.selection.getRng(),i=n.startContainer,r=n.endContainer;if(i!=r&&0===n.endOffset){var o=e(i,r),a=3==o.nodeType?o.length:o.childNodes.length;n.setEnd(o,a)}return n}function d(t,n,i,r,o){var s,a,l=[],c=-1,u=-1,d=-1;return L(t.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(c=t,s=e,!1):void 0}),L(t.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==B.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?u=t:e.id==n.id+"_end"&&(d=t))}),0>=c||c>u&&d>c?(L(e.grep(t.childNodes),o),0):(a=B.clone(i,q),L(e.grep(t.childNodes),function(e,t){(c>u&&c>t||u>c&&t>c)&&(l.push(e),e.parentNode.removeChild(e))}),c>u?t.insertBefore(a,s):u>c&&t.insertBefore(a,s.nextSibling),r.push(a),L(l,function(e){a.appendChild(e)}),a)}function f(t,s,a){var c,u,f=[],p=!0;c=b.inline||b.block,u=B.create(c),l(u),O.walk(t,function(t){function m(t){var _,w,x,k,S;return S=p,_=t.nodeName.toLowerCase(),w=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&K(t)&&(S=p,p="true"===K(t),k=!0),y(_,"br")?(v=0,b.block&&B.remove(t),void 0):b.wrapper&&h(t,i,o)?(v=0,void 0):p&&!k&&b.block&&!b.wrapper&&n(_)?(t=B.rename(t,c),l(t),f.push(t),v=0,void 0):b.selector&&(L(g,function(e){"collapsed"in e&&e.collapsed!==C||B.is(t,e.selector)&&!r(t)&&(l(t,e),x=!0)}),!b.inline||x)?(v=0,void 0):(!p||k||!j(c,_)||!j(w,c)||!a&&3===t.nodeType&&1===t.nodeValue.length&&65279===t.nodeValue.charCodeAt(0)||r(t)||b.inline&&H(t)?"li"==_&&s?v=d(t,s,u,f,m):(v=0,L(e.grep(t.childNodes),m),k&&(p=S),v=0):(v||(v=B.clone(u,q),t.parentNode.insertBefore(v,t),f.push(v)),v.appendChild(t)),void 0)}var v;L(t,m)}),b.wrap_links===!1&&L(f,function(t){function n(t){var i,r,o;if("A"===t.nodeName){for(r=B.clone(u,q),f.push(r),o=e.grep(t.childNodes),i=0;i<o.length;i++)r.appendChild(o[i]);t.appendChild(r)}L(e.grep(t.childNodes),n)}n(t)}),L(f,function(e){function t(e){var t=0;return L(e.childNodes,function(e){w(e)||T(e)||t++}),t}function n(e){var t,n;return L(e.childNodes,function(e){return 1!=e.nodeType||T(e)||r(e)?void 0:(t=e,q)}),t&&v(t,b)&&(n=B.clone(t,q),l(n),B.replace(n,e,X),B.remove(t,1)),n||e}var s;if(s=t(e),(f.length>1||!H(e))&&0===s)return B.remove(e,1),void 0;if(b.inline||b.wrapper){if(b.exact||1!==s||(e=n(e)),L(g,function(t){L(B.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}k(t,o,e,t.exact?e:null)})}),h(e.parentNode,i,o))return B.remove(e,1),e=0,X;b.merge_with_parents&&B.getParent(e.parentNode,function(t){return h(t,i,o)?(B.remove(e,1),e=0,X):void 0}),e&&b.merge_siblings!==!1&&(e=N(E(e),e),e=N(e,E(e,X)))}})}var p,m,g=a(i),b=g[0],C=F.isCollapsed();if(b)if(s)s.nodeType?(m=B.createRng(),m.setStartBefore(s),m.setEndAfter(s),f(x(m,g),null,!0)):f(s,null,!0);else if(C&&b.inline&&!B.select("td.mceSelected,th.mceSelected").length)I("apply",i,o);else{var S=t.selection.getNode();z||!g[0].defaultBlock||B.getParent(S,B.isBlock)||c(g[0].defaultBlock),t.selection.setRng(u()),p=F.getBookmark(),f(x(F.getRng(X),g),p),b.styles&&(b.styles.color||b.styles.textDecoration)&&(e.walk(S,G,"childNodes"),G(S)),F.moveToBookmark(p),$(F.getRng(X)),t.nodeChanged()}}function u(n,r,o){function s(t){var n,i,o,a,l;if(3!==t.nodeType){if(1===t.nodeType&&K(t)&&(a=b,b="true"===K(t),l=!0),n=e.grep(t.childNodes),b&&!l)for(i=0,o=v.length;o>i&&!k(v[i],r,t,t);i++);if(y.deep&&n.length){for(i=0,o=n.length;o>i;i++)s(n[i]);l&&(b=a)}}}function l(e){var t;return L(i(e.parentNode).reverse(),function(e){var i;t||"_start"==e.id||"_end"==e.id||(i=h(e,n,r),i&&i.split!==!1&&(t=e))}),t}function c(e,t,n,i){var o,s,a,l,c,u;if(e){for(u=e.parentNode,o=t.parentNode;o&&o!=u;o=o.parentNode){for(s=B.clone(o,q),c=0;c<v.length;c++)if(k(v[c],r,s,s)){s=0;break}s&&(a&&s.appendChild(a),l||(l=s),a=s)}!i||y.mixed&&H(e)||(t=B.split(e,t)),a&&(n.parentNode.insertBefore(a,n),l.appendChild(n))}return t}function u(e){return c(l(e),e,e,!0)}function d(e){var t=B.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return T(n)&&(n=n[e?"firstChild":"lastChild"]),B.remove(t,!0),n}function p(e){var n,i;e=x(e,v,X),y.split&&(n=A(e,X),i=A(e),n!=i?(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild&&(n=("TD"==n.nodeName?n.firstChild:n.firstChild.firstChild)||n),n=C(n,"span",{id:"_start","data-mce-type":"bookmark"}),i=C(i,"span",{id:"_end","data-mce-type":"bookmark"}),u(n),u(i),n=d(X),i=d()):n=i=u(n),e.startContainer=n.parentNode,e.startOffset=W(n),e.endContainer=i.parentNode,e.endOffset=W(i)+1),O.walk(e,function(e){L(e,function(e){s(e),1===e.nodeType&&"underline"===t.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Y(e.parentNode)&&k({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var m,g,v=a(n),y=v[0],b=!0;return o?(o.nodeType?(g=B.createRng(),g.setStartBefore(o),g.setEndAfter(o),p(g)):p(o),void 0):(F.isCollapsed()&&y.inline&&!B.select("td.mceSelected,th.mceSelected").length?I("remove",n,r):(m=F.getBookmark(),p(F.getRng(X)),F.moveToBookmark(m),y.inline&&f(n,r,F.getStart())&&$(F.getRng(!0)),t.nodeChanged()),void 0)}function d(e,t,n){var i=a(e);!f(e,t,n)||"toggle"in i[0]&&!i[0].toggle?c(e,t,n):u(e,t,n)}function h(e,t,n,i){function r(e,t,r){var o,s,a,l=t[r];if(t.onmatch)return t.onmatch(e,t,r);if(l)if(l.length===M){for(o in l)if(l.hasOwnProperty(o)){if(s="attributes"===r?B.getAttrib(e,o):b(e,o),i&&!s&&!t.exact)return;if((!i||t.exact)&&!y(s,_(l[o],n)))return}}else for(a=0;a<l.length;a++)if("attributes"===r?B.getAttrib(e,l[a]):b(e,l[a]))return t;return t}var o,s,l,c=a(t);if(c&&e)for(s=0;s<c.length;s++)if(o=c[s],v(e,o)&&r(e,o,"attributes")&&r(e,o,"styles")){if(l=o.classes)for(s=0;s<l.length;s++)if(!B.hasClass(e,l[s]))return;return o}}function f(e,t,n){function i(n){return n=B.getParent(n,function(n){return!!h(n,e,t,!0)}),h(n,e,t)}var r;return n?i(n):(n=F.getNode(),i(n)?X:(r=F.getStart(),r!=n&&i(r)?X:q))}function p(e,t){var n,i=[],r={};return n=F.getStart(),B.getParent(n,function(n){var o,s;for(o=0;o<e.length;o++)s=e[o],!r[s]&&h(n,s,t)&&(r[s]=!0,i.push(s))},B.getRoot()),i}function m(e){var t,n,r,o,s,l=a(e);if(l)for(t=F.getStart(),n=i(t),o=l.length-1;o>=0;o--){if(s=l[o].selector,!s)return X;for(r=n.length-1;r>=0;r--)if(B.is(n[r],s))return X}return q}function g(e,n,r){var o;return P||(P={},o={},t.onNodeChange.addToTop(function(e,t,n){var r=i(n),s={};L(P,function(e,t){L(r,function(n){return h(n,t,{},e.similar)?(o[t]||(L(e,function(e){e(!0,{node:n,format:t,parents:r})}),o[t]=e),s[t]=e,!1):void 0})}),L(o,function(e,t){s[t]||(delete o[t],L(e,function(e){e(!1,{node:n,format:t,parents:r})}))})})),L(e.split(","),function(e){P[e]||(P[e]=[],P[e].similar=r),P[e].push(n)}),this}function v(e,t){return y(e,t.inline)?X:y(e,t.block)?X:t.selector?B.is(e,t.selector):void 0}function y(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function b(e,t){var n=B.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=B.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function _(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function w(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function C(e,t,n){var i=B.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function x(e,r,o){function s(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,i,o,s,a;if(n=i=e?m:v,s=e?"previousSibling":"nextSibling",a=B.getRoot(),3==n.nodeType&&!w(n)&&(e?g>0:b<n.nodeValue.length))return n;for(;;){if(!r[0].block_expand&&H(i))return i;for(o=i[s];o;o=o[s])if(!T(o)&&!w(o)&&!t(o))return i;if(i.parentNode==a){n=i;break}i=i.parentNode}return n}function a(e,t){for(t===M&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function l(e){for(var t=e;t;){if(1===t.nodeType&&K(t))return"false"===K(t)?t:e;t=t.parentNode}return e}function c(e,n,i){function r(e,t){var n,r,s=e.nodeValue;return"undefined"==typeof t&&(t=i?s.length:0),i?(n=s.lastIndexOf(" ",t),r=s.lastIndexOf("Â ",t),n=n>r?n:r,-1===n||o||n++):(n=s.indexOf(" ",t),r=s.indexOf("Â ",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var s,a,l,c;if(3===e.nodeType){if(l=r(e,n),-1!==l)return{container:e,offset:l};c=e}for(s=new R(e,B.getParent(e,H)||t.getBody());a=s[i?"prev":"next"]();)if(3===a.nodeType){if(c=a,l=r(a),-1!==l)return{container:a,offset:l}}else if(H(a))break;return c?(n=i?0:c.length,{container:c,offset:n}):void 0}function u(t,n){var o,s,a,l;for(3==t.nodeType&&0===t.nodeValue.length&&t[n]&&(t=t[n]),o=i(t),s=0;s<o.length;s++)for(a=0;a<r.length;a++)if(l=r[a],!("collapsed"in l&&l.collapsed!==e.collapsed)&&B.is(o[s],l.selector))return o[s];return t}function d(e,t){var o;if(r[0].wrapper||(o=B.getParent(e,r[0].block)),o||(o=B.getParent(3==e.nodeType?e.parentNode:e,n)),o&&r[0].wrapper&&(o=i(o,"ul,ol").reverse()[0]||o),!o)for(o=e;o[t]&&!H(o[t])&&(o=o[t],!y(o,"br")););return o||e}var h,f,p,m=e.startContainer,g=e.startOffset,v=e.endContainer,b=e.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(h=m.childNodes.length-1,m=m.childNodes[g>h?h:g],3==m.nodeType&&(g=0)),1==v.nodeType&&v.hasChildNodes()&&(h=v.childNodes.length-1,v=v.childNodes[b>h?h:b-1],3==v.nodeType&&(b=v.nodeValue.length)),m=l(m),v=l(v),(T(m.parentNode)||T(m))&&(m=T(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(T(v.parentNode)||T(v))&&(v=T(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),r[0].inline&&(e.collapsed&&(p=c(m,g,!0),p&&(m=p.container,g=p.offset),p=c(v,b),p&&(v=p.container,b=p.offset)),f=a(v,b),f.node)){for(;f.node&&0===f.offset&&f.node.previousSibling;)f=a(f.node.previousSibling);f.node&&f.offset>0&&3===f.node.nodeType&&" "===f.node.nodeValue.charAt(f.offset-1)&&f.offset>1&&(v=f.node,v.splitText(f.offset-1))}return(r[0].inline||r[0].block_expand)&&(r[0].inline&&3==m.nodeType&&0!==g||(m=s(!0)),r[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=s())),r[0].selector&&r[0].expand!==q&&!r[0].inline&&(m=u(m,"previousSibling"),v=u(v,"nextSibling")),(r[0].block||r[0].selector)&&(m=d(m,"previousSibling"),v=d(v,"nextSibling"),r[0].block&&(H(m)||(m=s(!0)),H(v)||(v=s()))),1==m.nodeType&&(g=W(m),m=m.parentNode),1==v.nodeType&&(b=W(v)+1,v=v.parentNode),{startContainer:m,startOffset:g,endContainer:v,endOffset:b}}function k(e,t,n,i){var r,o,s;if(!v(n,e))return q;if("all"!=e.remove)for(L(e.styles,function(e,r){e=_(e,t),"number"==typeof r&&(r=e,i=0),(!i||y(b(i,r),e))&&B.setStyle(n,r,""),s=1}),s&&""==B.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),L(e.attributes,function(e,r){var o;if(e=_(e,t),"number"==typeof r&&(r=e,i=0),!i||y(B.getAttrib(i,r),e)){if("class"==r&&(e=B.getAttrib(n,r),e&&(o="",L(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return B.setAttrib(n,r,o),void 0;"class"==r&&n.removeAttribute("className"),V.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),L(e.classes,function(e){e=_(e,t),(!i||B.hasClass(i,e))&&B.removeClass(n,e)}),o=B.getAttribs(n),r=0;r<o.length;r++)if(0!==o[r].nodeName.indexOf("_"))return q;return"none"!=e.remove?(S(n,e),X):void 0}function S(t,n){function i(e,t,n){return e=E(e,t,n),!e||"BR"==e.nodeName||H(e)}var r,o=t.parentNode;n.block&&(z?o==B.getRoot()&&(n.list_block&&y(t,n.list_block)||L(e.grep(t.childNodes),function(e){j(z,e.nodeName.toLowerCase())?r?r.appendChild(e):r=C(e,z):r=0})):H(t)&&!H(o)&&(i(t,q)||i(t.firstChild,X,1)||t.insertBefore(B.create("br"),t.firstChild),i(t,X)||i(t.lastChild,q,1)||t.appendChild(B.create("br")))),n.selector&&n.inline&&!y(n.inline,t)||B.remove(t,1)}function E(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!w(e))return e}function T(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function N(t,n){function i(e,t){function n(e){var t={};return L(B.getAttribs(e),function(n){var i=n.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&(t[i]=B.getAttrib(e,i))}),t}function i(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],n===M)return q;if(e[i]!=n)return q;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return q;return X}return e.nodeName!=t.nodeName?q:i(n(e),n(t))?i(B.parseStyle(B.getAttrib(e,"style")),B.parseStyle(B.getAttrib(t,"style")))?X:q:q}function r(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!T(o))return o}return e}var o,s;if(t&&n&&(t=r(t,"previousSibling"),n=r(n,"nextSibling"),i(t,n))){for(o=t.nextSibling;o&&o!=n;)s=o,o=o.nextSibling,t.appendChild(s);return B.remove(n),L(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function A(e,n){var i,r,o;return i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&r&&r--,i=i.childNodes[r>o?o:r]),3===i.nodeType&&n&&r>=i.nodeValue.length&&(i=new R(i,t.getBody()).next()||i),3!==i.nodeType||n||0!==r||(i=new R(i,t.getBody()).prev()||i),i}function I(i,r,o){function s(e){var n=B.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(U)),n}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==U||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function d(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function f(e){var t;if(e)for(t=new R(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function p(e,t){var n,i;if(e)i=F.getRng(!0),l(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),B.remove(e)):(n=f(e),n.nodeValue.charAt(0)===U&&(n=n.deleteData(0,1)),B.remove(e,1)),F.setRng(i);else if(e=d(F.getStart()),!e)for(;e=B.get(y);)p(e,!1)}function m(){var e,t,n,i,l,u,h;e=F.getRng(!0),i=e.startOffset,u=e.startContainer,h=u.nodeValue,t=d(F.getStart()),t&&(n=f(t)),h&&i>0&&i<h.length&&/\w/.test(h.charAt(i))&&/\w/.test(h.charAt(i-1))?(l=F.getBookmark(),e.collapse(!0),e=x(e,a(r)),e=O.split(e),c(r,o,e),F.moveToBookmark(l)):(t&&n.nodeValue===U?c(r,o,t):(t=s(!0),n=t.firstChild,e.insertNode(t),i=1,c(r,o,t)),F.setCursorLocation(n,i))}function g(){var e,t,i,l,c,d,f,p,m=F.getRng(!0),g=[];for(e=m.startContainer,t=m.startOffset,c=e,3==e.nodeType&&((t!=e.nodeValue.length||e.nodeValue===U)&&(l=!0),c=c.parentNode);c;){if(h(c,r,o)){d=c;break}c.nextSibling&&(l=!0),g.push(c),c=c.parentNode}if(d)if(l)i=F.getBookmark(),m.collapse(!0),m=x(m,a(r),!0),m=O.split(m),u(r,o,m),F.moveToBookmark(i);else{for(p=s(),c=p,f=g.length-1;f>=0;f--)c.appendChild(B.clone(g[f],!1)),c=c.firstChild;c.appendChild(B.doc.createTextNode(U)),c=c.firstChild;var v=B.getParent(d,n);v&&B.isEmpty(v)?d.parentNode.replaceChild(p,d):B.insertAfter(p,d),F.setCursorLocation(c,1),B.isEmpty(d)&&B.remove(d)}}function v(){var t;t=d(F.getStart()),t&&!B.isEmpty(t)&&e.walk(t,function(e){1!=e.nodeType||e.id===y||B.isEmpty(e)||B.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=t.settings.caret_debug;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e,t=[];if(l(d(F.getStart()),t))for(e=t.length;e--;)B.setAttrib(t[e],"data-mce-bogus","1")}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){p(),v()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(8==n||37==n||39==n)&&p(d(F.getStart())),v()}),F.onSetContent.add(v),self._hasCaretEvents=!0),"apply"==i?m():g()}function $(e){var t,n,i,r,o,s=e.startContainer,a=e.startOffset;if(3==s.nodeType&&a>=s.nodeValue.length&&(a=W(s),s=s.parentNode,t=!0),1==s.nodeType)for(r=s.childNodes,s=r[Math.min(a,r.length-1)],n=new R(s,B.getParent(s,B.isBlock)),(a>r.length-1||t)&&n.next(),i=n.current();i;i=n.next())if(3==i.nodeType&&!w(i))return o=B.create("a",null,U),i.parentNode.insertBefore(o,i),e.setStart(i,0),F.setRng(e),B.remove(o),void 0}var P,M,D={},L=e.each,B=t.dom,F=t.selection,R=e.dom.TreeWalker,O=new e.dom.RangeUtils(B),j=t.schema.isValidChild,H=(e.isArray,B.isBlock),z=t.settings.forced_root_block,W=B.nodeIndex,U="ï»¿",V=/^(src|href|style)$/,q=!1,X=!0,K=B.getContentEditable,Y=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&"none"!==n}),n},G=function(e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=Y(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:a,register:l,apply:c,remove:u,toggle:d,match:f,matchAll:p,matchNode:h,canApply:m,formatChanged:g}),o(),s()}}(tinymce),tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){e&&s.setStyle(t,n,e)}),s.rename(t,"span")}function i(n,i){s=n.dom,a.convert_fonts_to_spans&&e.each(s.select("font,u,strike",i.node),function(e){r[e.nodeName.toLowerCase()](t.dom,e)})}var r,o,s,a=t.settings;a.inline_styles&&(o=e.explode(a.font_size_legacy_values),r={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},t.onPreProcess.add(i),t.onSetContent.add(i),t.onInit.add(function(){t.selection.onSetContent.add(i)}))}),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function i(i){function c(e){return e&&r.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==r.getContentEditable(e)}function u(t){var n;e.isIE&&!e.isIE11&&r.isBlock(t)&&(n=o.getRng(),t.appendChild(r.create("span",null,"Â ")),o.select(t),t.lastChild.outerHTML="",o.setRng(n))}function d(e){for(var t,n=e,i=[];n=n.firstChild;){if(r.isBlock(n))return;1!=n.nodeType||l[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)n=i[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?r.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&r.remove(n)}function h(e){var i,s,a,c,u,d,h=e;if(a=r.createRng(),e.hasChildNodes()){for(i=new t(e,e);s=i.current();){if(3==s.nodeType){a.setStart(s,0),a.setEnd(s,0);break}if(l[s.nodeName.toLowerCase()]){a.setStartBefore(s),a.setEndBefore(s);break}h=s,s=i.next()}s||(a.setStart(h,0),a.setEnd(h,0))}else"BR"==e.nodeName?e.nextSibling&&r.isBlock(e.nextSibling)?((!T||9>T)&&(d=r.create("br"),e.parentNode.insertBefore(d,e)),a.setStartBefore(e),a.setEndBefore(e)):(a.setStartAfter(e),a.setEndAfter(e)):(a.setStart(e,0),a.setEnd(e,0));o.setRng(a),r.remove(d),u=r.getViewPort(n.getWin()),c=r.getPos(e).y,(c<u.y||c+25>u.y+u.h)&&n.getWin().scrollTo(0,c<u.y?c:c-u.h+25)}function f(t){var n,i,o,a=k;if(n=t||"TABLE"==P?r.create(t||D):E.cloneNode(!1),o=n,s.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)){if("_mce_caret"==a.id)continue;i=a.cloneNode(!1),r.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(o=i,n.appendChild(i))}while(a=a.parentNode);return(!e.isIE||e.isIE11)&&(o.innerHTML='<br data-mce-bogus="1">'),n}function p(e){var n,i,r;if(3==k.nodeType&&(e?S>0:S<k.nodeValue.length))return!1;if(k.parentNode==E&&L&&!e)return!0;if(e&&1==k.nodeType&&k==E.firstChild)return!0;if("TABLE"===k.nodeName||k.previousSibling&&"TABLE"==k.previousSibling.nodeName)return L&&!e||!L&&e;for(n=new t(k,E),3==k.nodeType&&(e&&0==S?n.prev():e||S!=k.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(r=i.nodeName.toLowerCase(),l[r]&&"br"!==r))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;e?n.prev():n.next()}return!0}function m(e,t){var n,i,o,s,a,l=D||"P";if(i=r.getParent(e,r.isBlock),!i||!c(i)){if(i=i||x,!i.hasChildNodes())return n=r.create(l),i.appendChild(n),B.setStart(n,0),B.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!r.isBlock(s);)o=s,s=s.previousSibling;if(o){for(n=r.create(l),o.parentNode.insertBefore(n,o),s=o;s&&!r.isBlock(s);)a=s.nextSibling,n.appendChild(s),s=a;B.setStart(e,t),B.setEnd(e,t)}}return e}function g(){function e(e){for(var t=$[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===E}A=D?f(D):r.create("BR"),e(!0)&&e()?r.replace(A,$):e(!0)?$.parentNode.insertBefore(A,$):e()?(r.insertAfter(A,$),u(A)):(C=B.cloneRange(),C.setStartAfter(E),C.setEndAfter($),I=C.extractContents(),r.insertAfter(I,$),r.insertAfter(A,$)),r.remove(E),h(A),a.add()}function v(){for(var e,n=new t(k,E);e=n.next();)if(l[e.nodeName.toLowerCase()]||e.length>0)return!0}function y(){var t,n,i;k&&3==k.nodeType&&S>=k.nodeValue.length&&(e.isIE&&!e.isIE11||v()||(t=r.create("br"),B.insertNode(t),B.setStartAfter(t),B.setEndAfter(t),n=!0)),t=r.create("br"),B.insertNode(t),e.isIE&&!e.isIE11&&"PRE"==P&&(!T||8>T)&&t.parentNode.insertBefore(r.doc.createTextNode("\r"),t),i=r.create("span",{},"&nbsp;"),t.parentNode.insertBefore(i,t),o.scrollIntoView(i),r.remove(i),n?(B.setStartBefore(t),B.setEndBefore(t)):(B.setStartAfter(t),B.setEndAfter(t)),o.setRng(B),a.add()}function b(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function _(e){var t,n,i=r.getRoot();for(t=e;t!==i&&"false"!==r.getContentEditable(t);)"true"===r.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==i?n:i}function w(t){var n;(!e.isIE||e.isIE11)&&(t.normalize(),n=t.lastChild,(!n||/^(left|right)$/gi.test(r.getStyle(n,"float",!0)))&&r.add(t,"br"))}var C,x,k,S,E,T,N,A,I,$,P,M,D,L,B=o.getRng(!0);if(!B.collapsed)return n.execCommand("Delete"),void 0;if(!i.isDefaultPrevented()&&(k=B.startContainer,S=B.startOffset,D=(s.force_p_newlines?"p":"")||s.forced_root_block,D=D?D.toUpperCase():"",T=r.doc.documentMode,N=i.shiftKey,1==k.nodeType&&k.hasChildNodes()&&(L=S>k.childNodes.length-1,k=k.childNodes[Math.min(S,k.childNodes.length-1)]||k,S=L&&3==k.nodeType?k.nodeValue.length:0),x=_(k))){if(a.beforeChange(),!r.isBlock(x)&&x!=r.getRoot())return(!D||N)&&y(),void 0;if((D&&!N||!D&&N)&&(k=m(k,S)),E=r.getParent(k,r.isBlock),$=E?r.getParent(E.parentNode,r.isBlock):null,P=E?E.nodeName.toUpperCase():"",M=$?$.nodeName.toUpperCase():"","LI"!=M||i.ctrlKey||(E=$,P=M),"LI"==P){if(!D&&N)return y(),void 0;if(r.isEmpty(E))return/^(UL|OL|LI)$/.test($.parentNode.nodeName)?!1:(g(),void 0)}if("PRE"==P&&s.br_in_pre!==!1){if(!N)return y(),void 0}else if(!D&&!N&&"LI"!=P||D&&N)return y(),void 0;D=D||"P",p()?(A=/^(H[1-6]|PRE)$/.test(P)&&"HGROUP"!=M?f(D):f(),s.end_container_on_empty_block&&c($)&&r.isEmpty(E)?A=r.split($,E):r.insertAfter(A,E),h(A)):p(!0)?(A=E.parentNode.insertBefore(f(),E),u(A)):(C=B.cloneRange(),C.setEndAfter(E),I=C.extractContents(),b(I),A=I.firstChild,r.insertAfter(I,E),d(A),w(E),h(A)),r.setAttrib(A,"id",""),a.add()}}var r=n.dom,o=n.selection,s=n.settings,a=n.undoManager,l=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){13==t.keyCode&&i(t)!==!1&&t.preventDefault()})}}(tinymce),function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=r(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinyMCE.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function i(e){var i,r=this;if(e!==n)t.call(r),r.each(function(t,n){var i;(i=tinyMCE.get(n.id))&&i.setContent(e)});else if(r.length>0&&(i=tinyMCE.get(r[0].id)))return i.getContent()}function r(e){var t=null;return e&&e.id&&o.tinymce&&(t=tinyMCE.get(e.id)),t}function s(e){return!!(e&&e.length&&o.tinymce&&e.is(":tinymce"))}var a={};e.each(["text","html","val"],function(t,o){var l=a[o]=e.fn[o],c="text"===o;e.fn[o]=function(t){var o=this;if(!s(o))return l.apply(o,arguments);if(t!==n)return i.call(o.filter(":tinymce"),t),l.apply(o.not(":tinymce"),arguments),o;var a="",u=arguments;return(c?o:o.eq(0)).each(function(t,n){var i=r(n);a+=i?c?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):l.apply(e(n),u)}),a}}),e.each(["append","prepend"],function(t,i){var o=a[i]=e.fn[i],l="prepend"===i;e.fn[i]=function(e){var t=this;return s(t)?e!==n?(t.filter(":tinymce").each(function(t,n){var i=r(n);i&&i.setContent(l?e+i.getContent():i.getContent()+e)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,i){var r=a[i]=e.fn[i];e.fn[i]=function(){return t.call(this,i),r.apply(this,arguments)}}),a.attr=e.fn.attr,e.fn.attr=function(t,o){var l=this,c=arguments;
if(!t||"value"!==t||!s(l))return o!==n?a.attr.apply(l,c):a.attr.apply(l,c);if(o!==n)return i.call(l.filter(":tinymce"),o),a.attr.apply(l.not(":tinymce"),c),l;var u=l[0],d=r(u);return d?d.getContent({save:!0}):a.attr.apply(e(u),c)}}var n,i,r=[],o=window;e.fn.tinymce=function(n){function s(){var i=[],r=0;t&&(t(),t=null),d.each(function(e,t){var o,s=t.id,a=n.oninit;s||(t.id=s=tinymce.DOM.uniqueId()),o=new tinymce.Editor(s,n),i.push(o),o.onInit.add(function(){var e,t=a;d.css("visibility",""),a&&++r==i.length&&(tinymce.is(t,"string")&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,i))})}),e.each(i,function(e,t){t.render()})}var a,l,c,u,d=this,h="",f="";return d.length?n?(d.css("visibility","hidden"),o.tinymce||i||!(a=n.script_url)?1===i?r.push(s):s():(i=1,l=a.substring(0,a.lastIndexOf("/")),/_(src|dev)\.js/g.test(a)&&(f="_src"),c=a.lastIndexOf("?"),-1!=c&&(h=a.substring(c+1)),o.tinyMCEPreInit=o.tinyMCEPreInit||{base:l,suffix:f,query:h},-1!=a.indexOf("gzip")&&(u=n.language||"en",a=a+(/\?/.test(a)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(n.theme)+"&plugins="+escape(n.plugins)+"&languages="+u,o.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(e))}tinymce.suffix=f,t("langs/"+u+".js"),t("themes/"+n.theme+"/editor_template"+f+".js"),t("themes/"+n.theme+"/langs/"+u+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/editor_plugin"+f+".js"),t("plugins/"+n+"/langs/"+u+".js"))})},end:function(){}})),e.ajax({type:"GET",url:a,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,i=2,n.script_loaded&&n.script_loaded(),s(),e.each(r,function(e,t){t()})}})),d):tinyMCE.get(d[0].id):d},e.extend(e.expr[":"],{tinymce:function(e){return!!(e.id&&"tinyMCE"in window&&tinyMCE.get(e.id))}})}(jQuery),/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},o=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new s(e,t)},e.extend(s,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}(),void 0):(l[t]=i,void 0)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=e.widget.extend({},this.options[n]),s=0;s<r.length-1;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===t)return o[n]===t?null:o[n];o[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,s){function a(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),/*
 * jQuery Iframe Transport Plugin 1.7
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,o;return{send:function(s,a){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,r=e('<iframe src="javascript:false;" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src","javascript".concat(":false;")),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin 5.32.5
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){(n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var n,i=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&i-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=i,n=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=n-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=n,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(i,n,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:s,value:t.blob}):e.each(t.files,function(e,i){n.push({name:t.paramName[e]||s,value:i})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(s,t.blob,r.name):e.each(t.files,function(e,r){(i._isInstanceOf("File",r)||i._isInstanceOf("Blob",r))&&n.append(t.paramName[e]||s,r,r.name)})),t.data=n):(t.contentType=r.type,t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,[t]).promise()};n.process=function(e,t){return(e||t)&&(n._processQueue=this._processQueue=(this._processQueue||r(this)).pipe(e,t)),this._processQueue||r(this)},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",t,this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():i._getXHRPromise()},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,o=this,s=t.files[0],a=s.size,l=t.uploadedBytes,c=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?n?!0:l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(r=function(){var n=e.extend({},t),h=n._progress.loaded;n.blob=u.call(s,l,l+c,s.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+a,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,s,c){l=o._getUploadedBytes(c)||l+n.chunkSize,h+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=s,n.jqXHR=c,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),a>l?r():d.resolveWith(n.context,[i,s,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})},this._enhancePromise(h),h.abort=function(){return i.abort()},r(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var o=r._progress.total,s=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),s.result=r.result=t,s.textStatus=r.textStatus=n,s.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,o,s,a=this,l=a._getAJAXSettings(n),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,i=i||((r||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){a._onDone(e,t,n,l)}).fail(function(e,t,n){a._onFail(e,t,n,l)}).always(function(e,t,n){if(a._onAlways(e,t,n,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var i=a._slots.shift();i;){if("pending"===a._getDeferredState(i)){i.resolve();break}i=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(c)):(this._sequence=this._sequence.pipe(c,c),s=this._sequence),s.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(l.context,r),c())},this._enhancePromise(s)):c()},_onAdd:function(t,n){var i,r,o,s,a=this,l=!0,c=e.extend({},this.options,n),u=c.limitMultiFileUploads,d=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(o=[],i=[],s=0;s<n.files.length;s+=u)o.push(n.files.slice(s,s+u)),r=d.slice(s,s+u),r.length||(r=d),i.push(r);else i=d;else o=[n.files],i=[d];return n.originalFiles=n.files,e.each(o||n.files,function(r,s){var c=e.extend({},n);return c.files=o?s:[s],c.paramName=i[r],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},s):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},s)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t,i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",t,i)!==!1&&this._onAdd(t,i))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,n=e.dataTransfer,i={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer,i={dropEffect:"copy",preventDefault:!0};n&&-1!==e.inArray("Files",n.types)&&this._trigger("dragover",t,i)!==!1&&(n.dropEffect=i.dropEffect,i.preventDefault&&t.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,i){t._isRegExpOption(e,i)&&(i=t._getRegExp(i)),n[e]=i})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return o.reject(),void 0;t.files=e,n=r._onSend(null,t).then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),c="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),i()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,u=t,l&&(e.style.overflowY=t),i()}function i(){var t=e.style.height,i=document.documentElement.scrollTop,r=document.body.scrollTop,o=e.style.height;e.style.height="auto";var s=e.scrollHeight+c;if(0===e.scrollHeight)return void(e.style.height=o);e.style.height=s+"px",document.documentElement.scrollTop=i,document.body.scrollTop=r;var a=window.getComputedStyle(e,null);if(a.height!==e.style.height){if("visible"!==u)return void n("visible")}else if("hidden"!==u)return void n("hidden");if(t!==e.style.height){var l=document.createEvent("Event");l.initEvent("autosize:resized",!0,!1),e.dispatchEvent(l)}}var r=void 0===arguments[1]?{}:arguments[1],o=r.setOverflowX,s=void 0===o?!0:o,a=r.setOverflowY,l=void 0===a?!0:a;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var c=null,u="hidden",d=function(t){window.removeEventListener("resize",i),e.removeEventListener("input",i),e.removeEventListener("keyup",i),e.removeAttribute("data-autosize-on"),e.removeEventListener("autosize:destroy",d),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",d),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",i),window.addEventListener("resize",i),e.addEventListener("input",i),e.addEventListener("autosize:update",i),e.setAttribute("data-autosize-on",!0),l&&(e.style.overflowY="hidden"),s&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function r(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var o=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(o=function(e){return e},o.destroy=function(e){return e},o.update=function(e){return e}):(o=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},o.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},o.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e}),t.exports=o}),function(){$(function(){return autosize($("textarea[data-autosize]"))})}.call(this),/* ===================================================
 * bootstrap-transition.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),/* ==========================================================
 * bootstrap-alert.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){i.trigger("closed").remove()}var i,r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i=e(o),t&&t.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var r=this,o=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),r=i.data("collapse"),o=e.extend({},e.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),r=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=e(r).data("collapse")?"toggle":i.data();i[e(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(r).collapse(o)})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",r=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,o=e(this);if(!o.is(".disabled, :disabled"))return i=n(o),r=i.hasClass("open"),t(),r||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),i.toggleClass("open")),o.focus(),!1},keydown:function(t){var r,o,s,a,l;if(/(38|40|27)/.test(t.keyCode)&&(r=e(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=n(r),a=s.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),r.click();o=e("[role=menu] li:not(.divider):visible a",s),o.length&&(l=o.index(o.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),r=i.data("modal"),o=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new t(this,o)),"string"==typeof n?r[n]():o.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),r=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},r.data(),n.data());t.preventDefault(),r.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=o.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),r.trigger(i),i.isDefaultPrevented()||(n=e(s),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),s=i&&e.support.transition&&o.hasClass("fade");s?o.one(e.support.transition.end,r):r(),o.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("tab");r||i.data("tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var r,o,s,a,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n,i=e.fn[this.type].defaults,r={};return this._options&&e.each(this._options,function(e,t){i[e]!=t&&(r[e]=t)},this),n=e(t.currentTarget)[this.type](r).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,r,o,s,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),i=t[0].offsetWidth,r=t[0].offsetHeight,o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(s,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,r,o,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,o=!0),"bottom"==t||"top"==t?(r=0,e.left<0&&(r=-2*e.left,e.left=0,s.offset(e),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(r-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),o&&s.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),r=i.data("tooltip"),o="object"==typeof n&&n;r||i.data("tooltip",r=new t(this,o)),"string"==typeof n&&r[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),// Copyright (c) 2011 Harvest http://getharvest.com
function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,i,r,o,s;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),o=e.childNodes,s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(this.add_option(n,t,e.disabled));return s},e.prototype.add_option=function(e,t,n){return"OPTION"===e.nodeName?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e}(),e.select_to_array=function(t){var n,i,r,o,s;for(i=new e,s=t.childNodes,r=0,o=s.length;o>r;r++)n=s[r],i.add_node(n);return i.parsed},this.SelectParser=e}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=null!=t?t:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;return this.active_field?void 0:setTimeout(function(){return e.container_mousedown()},50)},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.result_add_option=function(e){var t,n;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),n=""!==e.style.cssText?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+n+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,n;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=Math.floor(Math.random()*e.length),t=e.substring(n,n+1)},e}(),t.AbstractChosen=e}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var e,t,n,i,r=Object.prototype.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};i=this,e=jQuery,e.fn.extend({chosen:function(n){return!e.browser.msie||"6.0"!==e.browser.version&&"7.0"!==e.browser.version?this.each(function(){var i;return i=e(this),i.hasClass("chzn-done")?void 0:i.data("chosen",new t(this,n))}):this}}),t=function(t){function r(){r.__super__.constructor.apply(this,arguments)}return o(r,t),r.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},r.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},r.prototype.set_up_html=function(){var t,i,r,o;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),t=e("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):t.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),i=this.container.height(),r=this.f_width-n(this.dropdown),this.dropdown.css({width:r+"px",top:i+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),o=r-n(this.search_container)-n(this.search_field),this.search_field.css({width:o+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},r.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){return e.container_mousedown(t)}),this.container.mouseup(function(t){return e.container_mouseup(t)}),this.container.mouseenter(function(t){return e.mouse_enter(t)}),this.container.mouseleave(function(t){return e.mouse_leave(t)}),this.search_results.mouseup(function(t){return e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){return e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){return e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){return e.results_update_field(t)}),this.search_field.blur(function(t){return e.input_blur(t)}),this.search_field.keyup(function(t){return e.keyup_checker(t)}),this.search_field.keydown(function(t){return e.keydown_checker(t)}),this.is_multiple?(this.search_choices.click(function(t){return e.choices_click(t)}),this.search_field.focus(function(t){return e.input_focus(t)})):this.container.click(function(e){return e.preventDefault()})},r.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},r.prototype.container_mousedown=function(t){var n;return this.is_disabled?void 0:(n=null!=t?e(t.target).hasClass("search-choice-close"):!1,t&&"mousedown"===t.type&&!this.results_showing&&t.stopPropagation(),this.pending_destroy_click||n?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()))},r.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},r.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},r.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},r.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},r.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},r.prototype.results_build=function(){var e,t,n,r,o;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",o=this.results_data,n=0,r=o.length;r>n;n++)t=o[n],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},r.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},r.prototype.result_do_highlight=function(e){var t,n,i,r,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),r=i+o,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight(),t>=r)return this.search_results.scrollTop(t-i>0?t-i:0);if(o>n)return this.search_results.scrollTop(n)}},r.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},r.prototype.results_show=function(){var e;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return e=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},r.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},r.prototype.set_tab_index=function(){var e;return this.form_field_jq.attr("tabindex")?(e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",e):(this.selected_item.attr("tabindex",e),this.search_field.attr("tabindex",-1))):void 0},r.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},r.prototype.search_results_mouseup=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(t)):void 0},r.prototype.search_results_mouseover=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},r.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},r.prototype.choices_click=function(t){return t.preventDefault(),!this.active_field||e(t.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},r.prototype.choice_build=function(t){var n,i,r=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(n=this.container_id+"_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+n+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>'),i=e("#"+n).find("a").first(),i.click(function(e){return r.choice_destroy_link_click(e)}))},r.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},r.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},r.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},r.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},r.prototype.result_select=function(e){var t,n,i,r;return this.result_highlight?(t=this.result_highlight,n=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),r=n.substr(n.lastIndexOf("_")+1),i=this.results_data[r],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):(this.selected_item.find("span").first().text(i.text),this.allow_single_deselect&&this.single_deselect_control_build()),e.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()):void 0},r.prototype.result_activate=function(e){return e.addClass("active-result")},r.prototype.result_deactivate=function(e){return e.removeClass("active-result")},r.prototype.result_deselect=function(t){var n,i;return i=this.results_data[t],i.selected=!1,this.form_field.options[i.options_index].selected=!1,n=e("#"+this.container_id+"_o_"+t),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[i.options_index].value}),this.search_field_scale()},r.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},r.prototype.winnow_results=function(){var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y;for(this.no_results_clear(),c=0,u=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),s=this.search_contains?"":"^",o=new RegExp(s+u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),f=new RegExp(u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=this.results_data,p=0,g=y.length;g>p;p++)if(n=y[p],!n.disabled&&!n.empty)if(n.group)e("#"+n.dom_id).css("display","none");else if(!this.is_multiple||!n.selected){if(t=!1,l=n.dom_id,a=e("#"+l),o.test(n.html))t=!0,c+=1;else if((n.html.indexOf(" ")>=0||0===n.html.indexOf("["))&&(r=n.html.replace(/\[|\]/g,"").split(" "),r.length))for(m=0,v=r.length;v>m;m++)i=r[m],o.test(i)&&(t=!0,c+=1);t?(u.length?(d=n.html.search(f),h=n.html.substr(0,d+u.length)+"</em>"+n.html.substr(d+u.length),h=h.substr(0,d)+"<em>"+h.substr(d)):h=n.html,a.html(h),this.result_activate(a),null!=n.group_array_index&&e("#"+this.results_data[n.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>c&&u.length?this.no_results(u):this.winnow_results_set_highlight()},r.prototype.winnow_results_clear=function(){var t,n,i,r,o;for(this.search_field.val(""),n=this.search_results.find("li"),o=[],i=0,r=n.length;r>i;i++)t=n[i],t=e(t),t.hasClass("group-result")?o.push(t.css("display","auto")):this.is_multiple&&t.hasClass("result-selected")?o.push(void 0):o.push(this.result_activate(t));return o},r.prototype.winnow_results_set_highlight=function(){var e,t;return this.result_highlight||(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null==e)?void 0:this.result_do_highlight(e)},r.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},r.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},r.prototype.keydown_arrow=function(){var t,n;return this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t))),this.results_showing?void 0:this.results_show()},r.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},r.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},r.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},r.prototype.keydown_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},r.prototype.search_field_scale=function(){var t,n,i,r,o,s,a,l,c;if(this.is_multiple){for(i=0,a=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",s=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=s.length;c>l;l++)r=s[l],o+=r+":"+this.search_field.css(r)+";";return n=e("<div />",{style:o}),n.text(this.search_field.val()),e("body").append(n),a=n.width()+25,n.remove(),a>this.f_width-10&&(a=this.f_width-10),this.search_field.css({width:a+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},r.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},r}(AbstractChosen),n=function(e){var t;return t=e.outerWidth()-e.width()},i.get_side_border_padding=n}.call(this),function(e){for(var t,n=function(){},i="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");t=i.pop();)e[t]=e[t]||n}(window.console=window.console||{}),jQuery.fn.rangeinput=function(e){e=e?e:{};var t=$(this),n=$('<div id="'+t.attr("id")+'_slider" class="'+(t.attr("class")||"")+'"></div>'),i=t.clone().wrap("<div/>").parent().html(),r=$(i.replace(/type=/i,"type=text data-orig-type="));r.wrap("<div class=ui-slider-value>"+(e.unit?e.unit:"")+"</div>").prop("size",6),e.input_events&&r.on(e.input_events),e.mask&&r.mask(e.mask);var o=jQuery.extend({min:parseFloat(t.attr("min")),max:parseFloat(t.attr("max")),step:parseFloat(t.attr("step")),value:parseFloat(t.val()),range:"min"},e),s=function(t,n){e.formatter&&"function"==jQuery.type(e.formatter)&&(n.value=e.formatter(n.value)),$(this).val(n.value)};return n.insertAfter(t).wrap('<div class="ui-slider-wrapper"></div>').on("slidechange",s).append(r.parent()).slider(o),t.remove(),n},$.extend($.expr[":"],{range:function(e){var t=e.getAttribute("type");return t&&"range"==t||!!$(e).filter("input").data("rangeinput")}}),/*!
 * jQuery UI 1.8.19
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
function(e,t){function n(t,n){var r=t.nodeName.toLowerCase();if("area"===r){var o,s=t.parentNode,a=s.name;return t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&i(o)):!1}return(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"==r?t.href||n:n)&&i(t)}function i(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,i&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(s,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r=e.ui[t].prototype;for(var o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode)for(var r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,r,o,s){return e.ui.isOverAxis(t,i,o)&&e.ui.isOverAxis(n,r,s)}}))}(jQuery),/*!
 * jQuery UI Widget 1.8.19
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(o){}n(t)}}else{var i=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),i.call(e(this),t,n)})}}e.widget=function(t,n,i){var r,o=t.split(".")[0];t=t.split(".")[1],r=o+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r]=function(n){return!!e.data(n,t)},e[o]=e[o]||{},e[o][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var s=new n;s.options=e.extend(!0,{},s.options),e[o][t].prototype=e.extend(!0,s,{namespace:o,widgetName:t,widgetEventPrefix:e[o][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},i),e.widget.bridge(t,e[o][t])},e.widget.bridge=function(n,i){e.fn[n]=function(r){var o="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=this;return r=!o&&s.length?e.extend.apply(null,[!0,r].concat(s)):r,o&&"_"===r.charAt(0)?a:(o?this.each(function(){var i=e.data(this,n),o=i&&e.isFunction(i[r])?i[r].apply(i,s):i;return o!==i&&o!==t?(a=o,!1):void 0}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new i(r,this))}),a)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,i){var r=n;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof n){if(i===t)return this.options[n];r={},r[n]=i}return this._setOptions(r),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),/*!
 * jQuery UI Mouse 1.8.19
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1==n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),/*!
 * jQuery UI Slider 1.8.19
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n=this,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=i.values&&i.values.length||1,a=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:"")));for(var l=r.length;s>l;l+=1)a.push(o);this.handles=r.add(e(a.join("")).appendTo(n.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){i.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(i){var r,o,s,a,l=e(this).data("index.ui-slider-handle");if(!n.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!n._keySliding&&(n._keySliding=!0,e(this).addClass("ui-state-active"),r=n._start(i,l),r===!1))return}switch(a=n.options.step,o=s=n.options.values&&n.options.values.length?n.values(l):n.value(),i.keyCode){case e.ui.keyCode.HOME:s=n._valueMin();break;case e.ui.keyCode.END:s=n._valueMax();break;case e.ui.keyCode.PAGE_UP:s=n._trimAlignValue(o+(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=n._trimAlignValue(o-(n._valueMax()-n._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===n._valueMax())return;s=n._trimAlignValue(o+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===n._valueMin())return;s=n._trimAlignValue(o-a)}n._slide(i,l,s)}}).keyup(function(t){var i=e(this).data("index.ui-slider-handle");n._keySliding&&(n._keySliding=!1,n._stop(t,i),n._change(t,i),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n,i,r,o,s,a,l,c,u,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,s=this,this.handles.each(function(t){var n=Math.abs(i-s.values(t));r>n&&(r=n,o=e(this),a=t)}),d.range===!0&&this.values(1)===d.min&&(a+=1,o=e(this.handles[a])),l=this._start(t,a),l===!1?!1:(this._mouseSliding=!0,s._handleIndex=a,o.addClass("ui-state-active").focus(),c=o.offset(),u=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),o!==!1&&this.values(t,n,!0))):n!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:n}),o!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;o<i.length;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,r,o,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){t=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:t+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:t-n+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:t+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:t-n+"%"},{queue:!1,duration:a.animate}))),n=t}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),t=o!==r?100*((i-r)/(o-r)):0,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:t+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:t+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"@VERSION"})}(jQuery),/*!

    Copyright (c) 2011 Peter van der Spek

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
    
 */
function(e){function t(){if(!d){d=!0;for(var t in u)e(t).each(function(){var n,i;n=e(this),i=n.data("jqae"),(i.containerWidth!=n.innerWidth()||i.containerHeight!=n.innerHeight())&&l(n,u[t])});d=!1}}function n(e){u[e]&&(delete u[e],u.length||c&&(window.clearInterval(c),c=void 0))}function i(e,n){u[e]=n,c||(c=window.setInterval(function(){t()},200))}function r(){return 3===this.nodeType}function o(t){if(t.contents().length){var n=t.contents(),i=n.eq(n.length-1);if(i.filter(r).length){var s=i.get(0).nodeValue;return s=e.trim(s),""==s?(i.remove(),!0):!1}for(;o(i););return i.contents().length?!1:(i.remove(),!0)}return!1}function s(e){if(e.contents().length){var t=e.contents(),n=t.eq(t.length-1);return n.filter(r).length?n:s(n)}e.append("");var t=e.contents();return t.eq(t.length-1)}function a(t){var n=s(t);if(n.length){var i=n.get(0).nodeValue,r=i.lastIndexOf(" ");return r>-1?(i=e.trim(i.substring(0,r)),n.get(0).nodeValue=i):n.get(0).nodeValue="",!0}return!1}function l(t,n){var i=t.data("jqae");i||(i={});var r=i.wrapperElement;r||(r=t.wrapInner("<div/>").find(">div"));var l=r.data("jqae");l||(l={});var c=l.originalContent;c?r=l.originalContent.clone(!0).data("jqae",{originalContent:c}).replaceAll(r):r.data("jqae",{originalContent:r.clone(!0)}),t.data("jqae",{wrapperElement:r,containerWidth:t.innerWidth(),containerHeight:t.innerHeight()});var u=!1,d=r;n.selector&&(d=e(r.find(n.selector).get().reverse())),d.each(function(){var i=e(this),l=i.text(),c=!1;if(r.innerHeight()-i.innerHeight()>t.innerHeight())i.remove();else if(o(i),i.contents().length){for(u&&(s(i).get(0).nodeValue+=n.ellipsis,u=!1);r.innerHeight()>t.innerHeight();){if(c=a(i),!c){u=!0,i.remove();break}if(o(i),!i.contents().length){u=!0,i.remove();break}s(i).get(0).nodeValue+=n.ellipsis}"onEllipsis"==n.setTitle&&c||"always"==n.setTitle?i.attr("title",l):"never"!=n.setTitle&&i.removeAttr("title")}})}var c,u={},d=!1,h={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(t,r){var o,s;return o=e(this),"string"!=typeof t&&(r=t,t=void 0),s=e.extend({},h,r),s.selector=t,o.each(function(){var t=e(this);l(t,s)}),s.live?i(o.selector,s):n(o.selector),this}}(jQuery),/*!
 * jQuery Browser Plugin v0.0.3
 * https://github.com/gabceb/jquery-browser-plugin
 *
 * Original jquery-browser code Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * http://jquery.org/license
 *
 * Modifications Copyright 2013 Gabriel Cebrian
 * https://github.com/gabceb
 *
 * Released under the MIT license
 *
 * Date: 2013-07-29T17:23:27-07:00
 */
function(e,t){"use strict";var n,i;e.uaMatch=function(e){e=e.toLowerCase();var t=/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(iphone)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0",platform:n[0]||""}},n=e.uaMatch(t.navigator.userAgent),i={},n.browser&&(i[n.browser]=!0,i.version=n.version),n.platform&&(i[n.platform]=!0),i.chrome||i.opr?i.webkit=!0:i.webkit&&(i.safari=!0),i.rv&&(i.msie=!0),i.opr&&(i.opera=!0),e.browser=i}(jQuery,window),/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(e,t,n){if(arguments.length>1&&(null===t||"object"!=typeof t)){if(n=jQuery.extend({},n),null===t&&(n.expires=-1),"number"==typeof n.expires){var i=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+i)}return document.cookie=[encodeURIComponent(e),"=",n.raw?String(t):encodeURIComponent(String(t)),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}n=t||{};var o,s=n.raw?function(e){return e}:decodeURIComponent;return(o=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?s(o[1]):null},function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=e.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function s(e){c.animate(d,r,o.easing,e&&function(){e.call(this,i,o)})}if(null!=i){var a,l=this,c=e(l),u=i,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=e(u,this),!u.length)return;case"object":(u.is||u.style)&&(a=(u=e(u)).offset())}e.each(o.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",r=i.toLowerCase(),f="scroll"+i,p=l[f],m=n.max(l,t);if(a)d[f]=a[r]+(h?0:p-c.offset()[r]),o.margin&&(d[f]-=parseInt(u.css("margin"+i))||0,d[f]-=parseInt(u.css("border"+i+"Width"))||0),d[f]+=o.offset[r]||0,o.over[r]&&(d[f]+=u["x"==t?"width":"height"]()*o.over[r]);else{var g=u[r];d[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}o.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],m)),!e&&o.queue&&(p!=d[f]&&s(o.onAfterFirst),delete d[f])}),s(o.onAfter)}}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!e(t).is("html,body"))return t[r]-e(t)[i.toLowerCase()]();var o="client"+i,s=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(s[r],a[r])-Math.min(s[o],a[o])}}(jQuery),function(e){e.fn.spin=function(t,n){var i={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner)return this.each(function(){var r=e(this),o=r.data();o.spinner&&(o.spinner.stop(),delete o.spinner),t!==!1&&("string"==typeof t&&(t=t in i?i[t]:{},n&&(t.color=n)),o.spinner=new Spinner(e.extend({color:r.css("color")},t)).spin(this))});throw"Spinner class not available."}}(jQuery),/*!
 * jQuery UI Sortable @VERSION
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var r=null,o=this;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==o?(r=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")==o&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!n){var s=!1;if(e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(s=!0)}),!s)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var r=this.options,o=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,o._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var o=this.items[r],s=o.item[0],a=this._intersectsWithPointer(o);if(a&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!e.ui.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!e.ui.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=i.placeholder.offset();i.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-i.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-i.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d=i+c>a&&l>i+c&&t+u>o&&s>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"==s||"down"==o?2:1:o&&("down"==o?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&i||"left"==o&&!i:r&&("down"==r&&n||"up"==r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],r=this._connectWith();if(r&&t)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var o=r.length-1;o>=0;o--)for(var s=e(r[o]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=i.length-1;o>=0;o--)for(var c=i[o][1],u=i[o][0],a=0,d=u.length;d>a;a++){var h=e(u[a]);h.data(this.widgetName+"-item",c),n.push({item:h,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=r.outerWidth(),i.height=r.outerHeight());var o=r.offset();i.left=o.left,i.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var o=this.containers[n].element.offset();this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,i=n.options;if(!i.placeholder||i.placeholder.constructor==String){var r=i.placeholder;i.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(r||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper").html("&nbsp;")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){(!r||i.forcePlaceholderSize)&&(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}}n.placeholder=e(i.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),i.placeholder.update(n,n.placeholder)},_contactContainers:function(t){for(var n=null,i=null,r=this.containers.length-1;r>=0;r--)if(!e.ui.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(n&&e.ui.contains(this.containers[r].element[0],n.element[0]))continue;n=this.containers[r],i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else if(this.currentContainer!=this.containers[i]){for(var o=1e4,s=null,a=this.positionAbs[this.containers[i].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[i].element[0],this.items[l].item[0])){var c=this.items[l][this.containers[i].floating?"left":"top"];Math.abs(c-a)<o&&(o=Math.abs(c-a),s=this.items[l])}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),r="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i),left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i)}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+n.grid[1]:a-n.grid[1]:a:a;var l=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0];o=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,o=this.counter;window.setTimeout(function(){o==r.counter&&r.refreshPositions(!i)},0)},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){n||i.push(function(e){this._trigger("remove",e,this._uiHash())});for(var r=this.containers.length-1;r>=0;r--)e.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!n&&(i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])))}for(var r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"@VERSION"})}(jQuery),/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,i=e.ui.mouse.prototype,r=i._mouseInit;i._touchStart=function(e){var i=this;!n&&i._mouseCapture(e.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},i._touchMove=function(e){n&&(this._touchMoved=!0,t(e,"mousemove"))},i._touchEnd=function(e){n&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),n=!1)},i._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),r.call(t)}}}(jQuery),/**
 * @license jQuery paging plugin v1.8 06/21/2010
 * http://www.xarg.org/project/jquery-color-plugin-xcolor/
 *
 * Copyright (c) 2010, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
function(e,t){function n(e){function i(e,n){var i;if(t!==e&&(e=parseFloat(e)),t===n)n=255,i=255;else if(1===n){if(t===e||1===e)return 1;n=100,i=1}else i=n;return isNaN(e)||0>=e?0:e>n?i:1>e||1===n?1===i?e:0|e*i:e*i/n}function r(e,t,n){function r(e,t,n){return n=++n%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+(t-e)*(4-6*n):e}if(e=i(e,360)/360,t=i(t,1),n=i(n,1),0===t)return n=Math.round(255*n),[n,n,n];var o=.5>n?n+n*t:n+t-n*t,s=n+n-o;return[Math.round(255*r(s,o,e+1/3)),Math.round(255*r(s,o,e)),Math.round(255*r(s,o,e-1/3))]}function a(e,t,n){e=i(e,360)/60,t=i(t,1),n=i(n,1);var r=0|e,o=e-r,s=Math.round(255*n*(1-t)),a=Math.round(255*n*(1-t*o)),l=Math.round(255*n*(1-t*(1-o)));switch(n=Math.round(255*n),r){case 1:return[a,n,s];case 2:return[s,n,l];case 3:return[s,a,n];case 4:return[l,s,n];case 5:return[n,s,a]}return[n,l,s]}this.setColor=function(e){if(this.success=!0,"number"==typeof e)return this.a=(255&e>>24)/255,this.r=255&e>>16,this.g=255&e>>8,this.b=255&e,void 0;for(;"object"==typeof e;){if(0 in e&&1 in e&&2 in e)return this.a=i(e[3],1),this.r=i(e[0]),this.g=i(e[1]),this.b=i(e[2]),void 0;if("r"in e&&"g"in e&&"b"in e)return this.a=i(e.a,1),this.r=i(e.r),this.g=i(e.g),this.b=i(e.b),void 0;if("h"in e&&"s"in e){var n;if("l"in e)n=r(e.h,e.s,e.l);else if("v"in e)n=a(e.h,e.s,e.v);else{if(!("b"in e))break;n=a(e.h,e.s,e.b)}return this.a=i(e.a,1),this.r=n[0],this.g=n[1],this.b=n[2],void 0}break}if("string"==typeof e){e=e.toLowerCase().replace(/[^a-z0-9,.()#%]/g,"");var o,l;if("transparent"===e)return this.a=this.r=this.g=this.b=0,void 0;if("rand"===e)return l=0|16777215*Math.random(),this.a=1,this.r=255&l>>16,this.g=255&l>>8,this.b=255&l,void 0;if(t!==s[e]&&(e="#"+s[e]),o=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/.exec(e))return this.a=1,this.r=parseInt(o[1],16),this.g=parseInt(o[2],16),this.b=parseInt(o[3],16),void 0;if(o=/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/.exec(e))return this.a=1,this.r=parseInt(o[1]+o[1],16),this.g=parseInt(o[2]+o[2],16),this.b=parseInt(o[3]+o[3],16),void 0;if(o=/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(e))return this.a=i(o[5],1),this.r=i(o[1]),this.g=i(o[2]),this.b=i(o[3]),void 0;if(o=/^rgba?\(([0-9.]+\%),([0-9.]+\%),([0-9.]+\%)(,([0-9.]+)\%?)?\)$/.exec(e))return this.a=i(o[5],1),this.r=Math.round(2.55*i(o[1],100)),this.g=Math.round(2.55*i(o[2],100)),this.b=Math.round(2.55*i(o[3],100)),void 0;if(o=/^hs([bvl])a?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?\)$/.exec(e)){var c;return c="l"===o[1]?r:a,l=c(parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10)),this.a=i(o[6],1),this.r=l[0],this.g=l[1],this.b=l[2],void 0}if(o=/^(\d{1,3}),(\d{1,3}),(\d{1,3})(,([0-9.]+))?$/.exec(e))return this.a=i(o[5],1),this.r=i(o[1]),this.g=i(o[2]),this.b=i(o[3]),void 0}this.success=!1},this.getColor=function(e){if(t!==e)switch(e.toLowerCase()){case"rgb":return this.getRGB();case"hsv":case"hsb":return this.getHSV();case"hsl":return this.getHSL();case"int":return this.getInt();case"array":return this.getArray();case"fraction":return this.getFraction();case"css":case"style":return this.getCSS();case"name":return this.getName()}return this.getHex()},this.getRGB=function(){return this.success?{r:this.r,g:this.g,b:this.b,a:this.a}:null},this.getCSS=function(){return this.success?0===this.a?"transparent":1===this.a?"rgb("+this.r+","+this.g+","+this.b+")":o(this.r,this.g,this.b,this.a):null},this.getArray=function(){return this.success?[this.r,this.g,this.b,0|100*this.a]:null},this.getName=function(){if(this.success){var e,t=null,i=s,r=this.getHSL();for(var o in i){var a=new n(i[o]).getHSL(),l=Math.sqrt(.5*(r.h-a.h)*(r.h-a.h)+.5*(r.s-a.s)*(r.s-a.s)+(r.l-a.l)*(r.l-a.l));(null===t||t>l)&&(t=l,e=o)}return e}return null},this.getFraction=function(){return this.success?{r:this.r/255,g:this.g/255,b:this.b/255,a:this.a}:null},this.getHSL=function(){if(this.success){var e,t,n=this.r/255,i=this.g/255,r=this.b/255,o=Math.min(n,i,r),s=Math.max(n,i,r),a=s-o,l=(s+o)/2;return 0===a?(e=0,t=0):(e=n===s?(i-r)/a:i===s?2+(r-n)/a:4+(n-i)/a,t=a/(.5>l?s+o:2-s-o)),{h:Math.round(60*((6+e)%6)),s:Math.round(100*t),l:Math.round(100*l),a:this.a}}return null},this.getHSV=function(){if(this.success){var e,t,n=this.r/255,i=this.g/255,r=this.b/255,o=Math.min(n,i,r),s=Math.max(n,i,r),a=s-o,l=s;return t=0===s?0:a/s,e=0===a?0:n===s?(i-r)/a:i===s?2+(r-n)/a:4+(n-i)/a,{h:Math.round(60*((6+e)%6)),s:Math.round(100*t),v:Math.round(100*l),a:this.a}}return null},this.getHex=function(){if(this.success){var e="0123456789abcdef",t=this.r>>4,n=this.g>>4,i=this.b>>4,r=15&this.r,o=15&this.g,s=15&this.b;return 0===(t^r|n^o|i^s)?"#"+e.charAt(t)+e.charAt(n)+e.charAt(i):"#"+e.charAt(t)+e.charAt(r)+e.charAt(n)+e.charAt(o)+e.charAt(i)+e.charAt(s)}return null},this.getInt=function(e){return this.success?t!==e?(0|100*this.a)<<24^this.r<<16^this.g<<8^this.b:16777215&(this.r<<16^this.g<<8^this.b):null},this.toString=function(){return this.getHex()},this.setColor(e)}function i(t,i){var r="";do if(r=e.curCSS(t,i),""!==r&&"transparent"!==r&&"rgba(0, 0, 0, 0)"!==r||e.nodeName(t,"body"))break;while(t=t.parentNode);return""===r&&(r=e.support.rgba?"transparent":"backgroundColor"===i?"white":"black"),new n(r)}function r(){this.test=function(e){var t=new n(e);return t.success?t:null},this.red=function(e){var t=new n(e);return t.success?(t.g=255,t.b=255,t):null},this.blue=function(e){var t=new n(e);return t.success?(t.r=255,t.g=255,t):null},this.green=function(e){var t=new n(e);return t.success?(t.r=255,t.b=255,t):null},this.sepia=function(e){var t=new n(e);if(t.success){var i=t.r,r=t.g,o=t.b;return t.r=Math.round(.393*i+.769*r+.189*o),t.g=Math.round(.349*i+.686*r+.168*o),t.b=Math.round(.272*i+.534*r+.131*o),t}return null},this.random=function(){return new n([0|255*Math.random(),0|255*Math.random(),0|255*Math.random()])},this.inverse=function(e){var t=new n(e);return t.success?(t.r^=255,t.g^=255,t.b^=255,t):null},this.opacity=function(e,t,i){var r=new n(e),o=new n(t);return r.success&o.success?(i>1&&(i/=100),i=Math.max(i-1+o.a,0),r.r=Math.round((o.r-r.r)*i+r.r),r.g=Math.round((o.g-r.g)*i+r.g),r.b=Math.round((o.b-r.b)*i+r.b),r):null},this.greyfilter=function(e,t){var i,r=new n(e);if(r.success){switch(t){case 1:i=.35+13*(r.r+r.g+r.b)/60;break;case 2:i=(13*(r.r+r.g+r.b)+5355)/60;break;default:i=.3*r.r+.59*r.g+.11*r.b}return r.r=r.g=r.b=Math.min(0|i,255),r}return null},this.webround=function(e){var t=new n(e);return t.success?((t.r+=51-t.r%51)>255&&(t.r=255),(t.g+=51-t.g%51)>255&&(t.g=255),(t.b+=51-t.b%51)>255&&(t.b=255),t):null},this.distance=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?Math.sqrt(3*(r.r-i.r)*(r.r-i.r)+4*(r.g-i.g)*(r.g-i.g)+2*(r.b-i.b)*(r.b-i.b)):null},this.readable=function(e,t,i){var r=new n(t),o=new n(e);if(i=i||10,r.success&o.success){var s=.299*o.r+.587*o.g+.114*o.b-.299*r.r-.587*r.g-.114*r.b;return!(s<1.5+141.162*Math.pow(.975,i)&&s>-.5-154.709*Math.pow(.99,i))}return null},this.combine=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?(i.r^=r.r,i.g^=r.g,i.b^=r.b,i):null},this.breed=function(e,t){var i=new n(e),r=new n(t),o=0,s=6;if(i.success&r.success){for(;s--;)Math.random()<.5&&(o|=15<<(s<<2));return i.r=i.r&(255&o>>16)|r.r&(255^255&o>>16),i.g=i.g&(255&o>>8)|r.g&(255^255&o>>8),i.b=i.b&(255&o>>0)|r.b&(255^255&o>>0),i}return null},this.additive=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?((i.r+=r.r)>255&&(i.r=255),(i.g+=r.g)>255&&(i.g=255),(i.b+=r.b)>255&&(i.b=255),i):null},this.subtractive=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?((i.r+=r.r-255)<0&&(i.r=0),(i.g+=r.g-255)<0&&(i.g=0),(i.b+=r.b-255)<0&&(i.b=0),i):null},this.subtract=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?((i.r-=r.r)<0&&(i.r=0),(i.g-=r.g)<0&&(i.g=0),(i.b-=r.b)<0&&(i.b=0),i):null},this.multiply=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?(i.r=0|i.r/255*r.r,i.g=0|i.g/255*r.g,i.b=0|i.b/255*r.b,i):null},this.average=function(e,t){var i=new n(e),r=new n(t);return i.success&r.success?(i.r=i.r+r.r>>1,i.g=i.g+r.g>>1,i.b=i.b+r.b>>1,i):null},this.triad=function(e){var t=new n(e);return t.success?[t,new n([t.b,t.r,t.g]),new n([t.g,t.b,t.r])]:null},this.tetrad=function(e){var t=new n(e);return t.success?[t,new n([t.b,t.r,t.b]),new n([t.b,t.g,t.r]),new n([t.r,t.b,t.r])]:null},this.gradientlevel=function(e,i,r,o){if(t===o&&(o=1),r>o)return null;var s=new n(e),a=new n(i);return s.success&a.success?(s.r=0|s.r+(a.r-s.r)/o*r,s.g=0|s.g+(a.g-s.g)/o*r,s.b=0|s.b+(a.b-s.b)/o*r,s):null},this.gradientarray=function(t,i,r){if(i>r||!t.length)return null;if(1==t.length)return new n(t[0]);var o=0|i*(t.length-1)/(r+1),s=r/(t.length-1);return e.xcolor.gradientlevel(t[o],t[o+1],i-o*s,s)},this.nearestname=function(e){return e=new n(e),e.success?e.getName():null},this.darken=function(e,i,r){if(t===i)i=1;else if(0>i)return this.lighten(e,-i,r);t===r&&(r=32);var o=new n(e);return o.success?((o.r-=r*i)<0&&(o.r=0),(o.g-=r*i)<0&&(o.g=0),(o.b-=r*i)<0&&(o.b=0),o):null},this.lighten=function(e,i,r){if(t===i)i=1;else if(0>i)return this.darken(e,-i,r);t===r&&(r=32);var o=new n(e);return o.success?((o.r+=r*i)>255&&(o.r=255),(o.g+=r*i)>255&&(o.g=255),(o.b+=r*i)>255&&(o.b=255),o):null},this.analogous=function(e,i,r){t===i&&(i=8),t===r&&(r=30);var o=new n(e);if(o.success){var s=o.getHSV(),a=360/r,l=[o];for(s.h=(s.h-(a*i>>1)+720)%360;--i;)s.h+=a,s.h%=360,l.push(new n(s));return l}return null},this.complementary=function(e){var t=new n(e);if(t.success){var i=t.getHSL();return i.h=(i.h+180)%360,new n(i)}return null},this.splitcomplement=function(e){var t=new n(e);if(t.success){var i=t.getHSV(),r=[t];return i.h+=72,i.h%=360,r.push(new n(i)),i.h+=144,i.h%=360,r.push(new n(i)),r}return null},this.monochromatic=function(e,i){t===i&&(i=6);var r=new n(e);if(r.success){for(var o=r.getHSV(),s=[r];--i;)o.v+=20,o.v%=100,s.push(new n(o));return s}return null}}var o,s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};e.each(["color","backgroundColor","borderColor","borderTopColor","borderBottomColor","borderLeftColor","borderRightColor","outlineColor"],function(r,s){e.cssHooks[s]={set:function(e,t){e.style[s]=new n(t).getCSS()}},e.fx.step[s]=function(e){if(t===e.xinit){if("string"==typeof e.end&&-1!==e.end.indexOf(";")){var r,a=e.end.split(";");if(a.length>2){for(r in a)a[r]=-1===a[r].indexOf("native")?new n(a[r]):i(e.elem,s);e.start=null,e.end=a}else e.start=new n(a[0]),e.end=new n(a[1])}else e.start=i(e.elem,s),e.end=new n(e.end);e.xinit=1}var l=e.start,c=e.end,u=e.pos;if(null===l){var d=u*(c.length-1),h=1>u?0|d:c.length-2;l=c[h],c=c[h+1],u=d-h}e.elem.style[s]=o(0|l.r+u*(c.r-l.r),0|l.g+u*(c.g-l.g),0|l.b+u*(c.b-l.b),l.a+u*(c.a-l.a))}}),e(function(){var t=document.createElement("div"),n=t.style;o=function(e,t,n,i){return"rgba("+e+","+t+","+n+","+i+")"},n.cssText="background-color:rgba(1,1,1,.5)",(e.support.rgba=n.backgroundColor.indexOf("rgba")>-1)||(o=function(e,t,n){return"rgb("+e+","+t+","+n+")"})}),e.xcolor=new r,e.fn.readable=function(){var t=this[0],n="",i="";do if(""!==n||"transparent"!==(n=e.curCSS(t,"color"))&&"rgba(0, 0, 0, 0)"!==n||(n=""),""!==i||"transparent"!==(i=e.curCSS(t,"backgroundColor"))&&"rgba(0, 0, 0, 0)"!==i||(i=""),""!==n&&""!==i||e.nodeName(t,"body"))break;while(t=t.parentNode);return""===n&&(n="black"),""===i&&(i="white"),e.xcolor.readable(i,n)},e.fn.colorize=function(e,t,i){var r={gradient:function(e,t){return e/t},flip:function(e,t,n,i){return" "===i?n:!n},pillow:function(e,t){return e*=2,t>=e?e/t:2-e/t}};if("function"==typeof i);else{if(void 0===r[i])return;i=r[i]}e=new n(e),t=new n(t),this.each(function(){var n=this.childNodes,r=0,s=0;if(e.success&t.success){for(var a=n.length;a--;r+=n[a].textContent.length);!function l(n){var a,c=0;if(3===n.nodeType){var u,d,h,f=e,p=t,m=r,g=0,v=i;for(a=n.nodeValue.length,d=document.createElement("span"),c=0;a>c;++c)u=document.createElement("span"),h=n.nodeValue.charAt(c),g=v(s,m,g,h),u.style.color=o(0|f.r+g*(p.r-f.r),0|f.g+g*(p.g-f.g),0|f.b+g*(p.b-f.b),f.a+g*(p.a-f.a)),u.appendChild(document.createTextNode(h)),d.appendChild(u),++s;n.parentNode.replaceChild(d,n)}else for(a=n.childNodes.length;a>c;++c)l(n.childNodes[c])}(this)}})}}(jQuery),function(){$(function(){return $(".jstab li").on("click",function(e){var t;return t=$(this),e.preventDefault(),t.hasClass("is-active")||null!=t.find("> a").data("disabled")?void 0:($(".jstab li").removeClass("is-active"),t.addClass("is-active"),$(".jstab + .tab-content > .jstab-content").removeClass("is-active"),$(".jstab + .tab-content > .jstab-content[data-tab-id='"+t.find("> a").data("target")+"']").addClass("is-active"))})})}.call(this),$(function(){var e=[],t=$(window),n=[{name:"phone",max:768},{name:"tablet",min:768,max:980},{name:"mobile",max:980},{name:"desktop",min:980}],i=function(){var e=t.width(),i=$.grep(n,function(t){return r(t,e)});return i.length?i:void 0},r=function(e,t){return(!e.max||e.max>t)&&(!e.min||e.min<=t)},o=function(t){var n=$.map(t,function(e){return e.name}),i=$.grep(e,function(e){return-1==$.inArray(e,n)}),r=$.grep(n,function(t){return-1==$.inArray(t,e)});0!==i.length+r.length&&($.each(i,function(e,t){s("exit",t),s("change",t,"exit")}),$.each(r,function(e,t){s("enter",t),s("change",t,"enter")}),i.length&&s("exit","stateList",i),r.length&&s("enter","stateList",r),e=n)},s=function(e,t,n){$(document).trigger("mediachange."+e+"."+t,n)},a=function(){o(i())};$(window).on("resize",a),$(a)}),function(){var e={inline_styles:!0,language:"en",mode:"textareas",plugins:"preview,inlinepopups,lists",theme:"advanced",theme_advanced_buttons1:"bold,italic,separator,formatselect,separator,bullist,numlist,indent,outdent,blockquote,separator,link,separator,undo,redo,preview,separator,code",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_toolbar_location:"top",width:"100%",valid_elements:"@[dir],h1,h2,h3,h4,h5,h6,p,em/i,strong/b,ul,ol,li,pre,code,address,a[href|target=_self],blockquote,bdo",relative_urls:!1};$(function(){$("textarea.mceEditor").tinymce(e)})}(),function(e,t,n){function i(e,n){var i,r=t.createElement(e||"div");for(i in n)r[i]=n[i];return r}function r(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function o(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+100*(n/i),s=Math.max(1-(1-e)/t*(100-o),e),a=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return h[r]||(f.insertRule("@"+l+"keyframes "+r+"{"+"0%{opacity:"+s+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+s+"}"+"}",0),h[r]=1),r}function s(e,t){var i,r,o=e.style;if(o[t]!==n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<d.length;r++)if(i=d[r]+t,o[i]!==n)return i}function a(e,t){for(var n in t)e.style[s(e,n)||n]=t[n];return e}function l(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)e[r]===n&&(e[r]=i[r])}return e}function c(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}/**
 * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
 * Licensed under the MIT license
 */
var u,d=["webkit","Moz","ms","O"],h={},f=function(){var e=i("style");return r(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},m=function g(e){return this.spin?(this.opts=l(e||{},g.defaults,p),void 0):new g(e)};m.defaults={},l(m.prototype,{spin:function(e){this.stop();var t,n,r=this,o=r.opts,s=r.el=a(i(0,{className:o.className}),{position:"relative",zIndex:o.zIndex}),l=o.radius+o.length+o.width;if(e&&(e.insertBefore(s,e.firstChild||null),n=c(e),t=c(s),a(s,{left:("auto"==o.left?n.x-t.x+(e.offsetWidth>>1):o.left+l)+"px",top:("auto"==o.top?n.y-t.y+(e.offsetHeight>>1):o.top+l)+"px"})),s.setAttribute("aria-role","progressbar"),r.lines(s,r.opts),!u){var d=0,h=o.fps,f=h/o.speed,p=(1-o.opacity)/(f*o.trail/100),m=f/o.lines;!function g(){d++;for(var e=o.lines;e;e--){var t=Math.max(1-(d+e*m)%f*p,o.opacity);r.opacity(s,o.lines-e,t,o)}r.timeout=r.el&&setTimeout(g,~~(1e3/h))}()}return r},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function n(e,n){return a(i(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*l+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})}for(var s,l=0;l<t.lines;l++)s=a(i(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:u&&o(t.opacity,t.trail,l,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&r(s,a(n("#000","0 0 4px #000"),{top:"2px"})),r(e,r(s,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return i("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=a(i("group"),{behavior:"url(#default#VML)"});!s(t,"transform")&&t.adj?(f.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(t,n){function i(){return a(e("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function o(t,o,s){r(d,r(a(i(),{rotation:360/n.lines*t+"deg",left:~~o}),r(a(e("roundrect",{arcsize:1}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var s,l=n.length+n.width,c=2*l,u=2*-(n.width+n.length)+"px",d=a(i(),{position:"absolute",top:u,left:u});if(n.shadow)for(s=1;s<=n.lines;s++)o(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=n.lines;s++)o(s);return r(t,d)},m.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}):u=s(t,"animation")}(),e.Spinner=m}(window,document),function(){var e;e=function(){function e(){}var t,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g,v,y;return p=a=i=m=d=u=c=g=o=s=h=f=n=t=r=l=null,y=function(){var e;return e=$.parseJSON($.cookie("domain-info")),p=$.parseJSON($.cookie("user-info")),a=$.parseJSON($.cookie("cart-info")),null!=e&&null!=p&&(i=decodeURI(e.root),m=decodeURI(p.username),d=decodeURI(p.name).replace(/\+/g," "),u=decodeURI(p.first_name),c=decodeURI(p.email),g=decodeURI(p.wishlist),o=decodeURI(p.books),h=p.is_author,f=p.is_editor,n=void 0,t=void 0,r=void 0),null!=a?s=decodeURI(a.cart_count):void 0},y(),v=function(){return l=$.cookie("country_code"),l?void 0:$.get("/geoip",function(){return window.Leanpub.VATpricing.updatePrices()})}(),e.prototype.checkForUser=function(){return y()},e.prototype.isAuthorInCurrentContext=function(){return null!=n&&$.inArray(m,n)>=0},e.prototype.isEditorInCurrentContext=function(){return"undefined"!=typeof editorUsernames&&null!==editorUsernames&&$.inArray(m,editorUsernames)>=0},e.prototype.isYourAuthorPage=function(){return null!=t&&m===t},e.prototype.isLoggedIn=function(){return!!m},e.prototype.getUserEmail=function(){return p?decodeURI(p.email):void 0},e.prototype.getWishlist=function(){return p?decodeURI(p.wishlist).split(/,/):void 0},e.prototype.getBooks=function(){return p?decodeURI(p.books).split(/,/):void 0},e.prototype.getFullName=function(){return d},e.prototype.getFirstName=function(){return u},e.prototype.getEmail=function(){return c},e.prototype.getUsername=function(){return m},e.prototype.getIsAuthor=function(){return h},e.prototype.getIsEditor=function(){return f},e.prototype.getCartCount=function(){return s},e.prototype.setAuthorUsernames=function(e){return n=e},e.prototype.setEditorUsernames=function(e){var t;return t=e},e.prototype.setAuthorPageUsername=function(e){return t=e},e.prototype.setBookSlug=function(e){return r=e},e.prototype.getCountryCode=function(){return l},e}(),window.Leanpub=new e}.call(this),function(){$(function(){return $(".chzn-select").chosen()})}.call(this),function(){$(".clipboardy").click(function(e){var t,n,i;return n=$(e.target),(t=n.attr("data-clipboard-text"))?(i=n.attr("title"),window.prompt(i,decodeURI(t)),e.preventDefault()):void 0})}.call(this),function(){var e,t,n;t={activeFilter:".active-filter",activeSubFilter:".active-sub-filter",activeListItem:".menu .active span",activeListHeader:".menu .active .filter-header",button:".dropdown-button",menu:".menu"},e=function(){return $(t.button).click(function(e){var n,i;return e.stopPropagation(),$(".menu").removeClass("show-menu"),n=$(this),i=n.siblings(t.menu),i.toggleClass("show-menu"),i.children("li").click(function(){return n.text($(this).text()),i.removeClass("show-menu")})}),$("html").click(function(){var e;return e=$(t.menu),e.is(":visible")?e.removeClass("show-menu"):void 0}),$(".menu").click(function(e){return e.stopPropagation()})},n=function(){return $(t.button).each(function(){var e;return e=$(this).siblings(t.menu).find(".active").last().text(),e?($(this).empty(),$(this).text(e)):void 0})},$(function(){return n(),e()})}.call(this),function(){!function(e){var t,n,i,r;return n=e.document,!location.hash&&e.addEventListener?(window.scrollTo(0,1),r=1,i=function(){return e.pageYOffset||"CSS1Compat"===n.compatMode&&n.documentElement.scrollTop||n.body.scrollTop||0},t=setInterval(function(){return n.body?(clearInterval(t),r=i(),e.scrollTo(0,1===r?0:1)):void 0},15),e.addEventListener("load",function(){return setTimeout(function(){return i()<20?e.scrollTo(0,1===r?0:1):void 0},0)})):void 0}(this)}.call(this),!window.addEventListener&&function(e,t,n,i,r,o,s){e[i]=t[i]=n[i]=function(e,t){var n=this;s.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,s[0][3])},e[r]=t[r]=n[r]=function(e,t){for(var n,i=0;n=s[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,s.splice(i,1)[0][3])},e[o]=t[o]=n[o]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),function(){var e;(e=document.getElementById("embed-code"))&&e.addEventListener("click",function(t){var n,i;if(n=e.getAttribute("data-clipboard-text"))return i=e.getAttribute("title"),window.prompt(i,decodeURI(n)),t.preventDefault()})}.call(this),function(){window.Leanpub||(window.Leanpub=new Leanpub),Leanpub.flashContainer=$("#flash-prototype"),Leanpub.setFlashNotice=function(e,t,n,i){var r;return null==n&&(n=!1),null==i&&(i=!1),$("#flash-"+e).length||Leanpub.flashContainer.clone().addClass(e).attr("id","flash-"+e).insertAfter(Leanpub.flashContainer),$("#flash-"+e).show().find("p.flash-message").text(t),r=$("#flash-"+e),i||setTimeout(function(){return r.animate({opacity:0,top:"-="+r.height()+"px"},500,function(){return $(this).remove()})},5e3),n?Leanpub.handleFlashCloses($("#flash-"+e).find(".flash-close")):void 0},Leanpub.handleFlashCloses=function(e){return null==e&&(e=".flash-close"),$(e).click(function(){var e;return e=$(this).parents(".alert"),e.animate({opacity:0,top:"-="+e.height()+"px"},500,function(){return $(this).remove()})})},$(function(){var e,t;return t={notice:"alert-info",alert:"alert-warning",error:"alert-error",success:"alert-success"},Leanpub.flashContainer.length&&(e=$.parseJSON($.cookie("cookied-flash")),null!=e)?(jQuery.each(t,function(t,n){var i,r;if(e[t])return r=function(){try{return decodeURI(e[t]).replace(/\+/g," ")}catch(n){return i=n,e[t]}}(),Leanpub.setFlashNotice(n,r)}),$.cookie("cookied-flash",null,{expire:-1,path:"/"})):void 0})}.call(this),function(){$(function(){return $(".initialFocus").focus()})}.call(this),function(){var e;e=function(){var e,t,n,i;return e=$("#navigation-menu"),n=$("#js-mobile-menu"),t=$("#js-mobile-search"),i=$("#js-navigation-tools"),n.on("click",function(t){return t.preventDefault(),i.is(":hidden")||i.removeAttr("style"),e.slideToggle(function(){return e.is(":hidden")?e.removeAttr("style"):void 0})}),t.on("click",function(t){return t.preventDefault(),e.is(":hidden")||e.removeAttr("style"),i.slideToggle(function(){return i.is(":hidden")?i.removeAttr("style"):void 0})})},$(function(){var t,n,i,r,o;return Leanpub.isLoggedIn()&&(n=Leanpub.getFullName(),o=Leanpub.getUsername(),i=Leanpub.getIsAuthor(),r=Leanpub.getIsEditor(),""!==o&&$("#user_menu .profile_link").attr({href:"/u/"+o}),""!==o&&$("#user_menu .wishlist_link").attr({href:"/u/"+o+"/wishlist"}),i&&($("#user_menu .author_dashboard_link").show(),$("#user_menu .profile_link").show()),r&&($("#user_menu .publisher_dashboard_link").show(),$("#user_menu .profile_link").show())),t=Leanpub.isLoggedIn(),$(".show_if_logged_"+(t?"in":"out")).show(),$(".hide_if_logged_"+(t?"out":"in")).show(),$("#cart-total").text(Leanpub.getCartCount()),e()})}.call(this),function(){$(function(){return $(".trimmed").each(function(){return $(this).children(":first").height()<parseInt($(this).css("maxHeight"))?($(this).addClass("expanded"),$(this).next(".show-more").remove()):void 0}),$(".show-more").click(function(){return $(this).prev(".trimmed").toggleClass("expanded"),$(this).find("span").each(function(){return $(this).toggle()})})})}.call(this),function(){var e,t;e={theme:null,mouseDraggable:!1,pagination:!1,slideSpeed:350,scrollPerPage:!0,rewindNav:!1,navigation:!0,navigationText:!1},t=function(e){return e.is(":visible")?void 0:e.fadeIn()},$(function(){var n,i,r,o,s,a,l;return n=$(".book-list.paginate"),i=$(".bundle-list.paginate"),r=$(".package-list.paginate"),null!=n&&(o=$.extend({items:6,itemsDesktop:[1024,6],itemsDesktopSmall:[860,4],itemsTablet:[640,3],itemsMobile:!1,afterInit:function(e){var i;return i=$(e).parent().find(".list-controls"),t(n),this.owlControls.appendTo(i)}},e),n.owlCarousel(o)),null!=i&&(a=$.extend({items:4,itemsDesktop:[1024,4],itemsDesktopSmall:[860,3],itemsTablet:[640,2],itemsMobile:!1,afterInit:function(e){var n;return n=$(e).parent().find(".list-controls"),t(i),this.owlControls.appendTo(n)}},e),i.owlCarousel(a)),"undefined"!=typeof $bundlesCarousel&&null!==$bundlesCarousel&&(s={autoWidth:!0,center:!0,items:3,scrollPerPage:!0,theme:null,mouseDraggable:!1,slideSpeed:350,navigation:!0,navigationText:['<a class="previous-page"></a>','<a class="next-page"></a>'],afterInit:t($bundlesCarousel)},$bundlesCarousel.owlCarousel(s)),null!=r?(l=$.extend({items:3,itemsDesktop:[1024,3],itemsDesktopSmall:[860,2],itemsTablet:[640,1],itemsMobile:!1,afterInit:function(e){var n;return n=$(e).parent().find(".list-controls"),t(r),this.owlControls.appendTo(n)}},e),r.owlCarousel(l)):void 0})}.call(this),function(){$(function(){return $(".modal [data-dismiss]").click(function(){return $(this).parents(".modal").hide()}),Leanpub.handleFlashCloses()})}.call(this),function(){$(function(){return $("#book_autofill, #user_book_autofill").val("javascript")})}.call(this),function(){var e;e=function(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,"\n")},$(function(){return $("[data-slug-from]").each(function(){var t,n,i;return t=$(this),i=t.data("slugFrom"),n=$("[data-slug-for='"+i+"']"),n.focusout(function(){var i;return i=n.val(),n.val(e(i)),t.val(i.toLowerCase().replace(/[^a-z0-9\-_]/g,""))}),t.focusout(function(){var e;return e=t.val().replace(/[^a-zA-Z0-9\-_]/g,""),t.val(e)})})})}.call(this),function(){$(function(){return $("a[href*=#]:not([href=#])").click(function(){var e,t;return location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(t=$(this.hash),t=t.length?t:$("[name="+this.hash.slice(1)+"]"),e=this.hash,t.length)?($("html,body").animate({scrollTop:t.offset().top},1e3,function(){return window.location.hash=e}),!1):void 0})})}.call(this),function(){var e,t;$(function(){return $("input[name='book[sync_mode]'], input[name='user[book][sync_mode]']").click(e),e(),$(".use-dropbox-email").click(t)}),e=function(){var e,n,i,r,o,s,a,l,c;switch(l=$("input[name='book[sync_mode]']:checked, input[name='user[book][sync_mode]']:checked").val(),r=$("#dropbox-email"),o=$("#github-repo"),e=$("#bitbucket-repo"),n=$("#in-browser"),i=$("#byob-upload"),s=$("#sync-note"),c=[r,o,e,n,i],a=function(e){var t,n,i,r,o;for(i="Please note you can always change your book's title, URL and style.",n=c.filter(function(t){return t!==e}),r=0,o=n.length;o>r;r++)t=n[r],t.hide(100).find(":input").prop("disabled",!0);return e.show(100).find(":input").prop("disabled",!1),$(".book_book_style, .user_book_book_style, .style-title").show(100),s.html(i)},l){case"leanpub":return a(n);case"dropbox":return a(r);case"github":return a(o),t(o.find(".use-dropbox-email"));case"bitbucket":return a(e),t(e.find(".use-dropbox-email"));case"upload":return a(i)}},t=function(e){var t,n;return null!=e.currentTarget&&(e=$(e.currentTarget)),t=e.prop("checked"),n=e.closest(".book_use_dropbox_output").nextAll(".dropbox-email"),t?n.show(100):n.hide(100)}}.call(this),function(){var e=this,t=e._,n=Array.prototype,i=Object.prototype,r=Function.prototype,o=n.push,s=n.slice,a=n.concat,l=i.toString,c=i.hasOwnProperty,u=Array.isArray,d=Object.keys,h=r.bind,f=function(e){return e instanceof f?e:this instanceof f?void(this._wrapped=e):new f(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):e._=f,f.VERSION="1.7.0";var p=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}};f.iteratee=function(e,t,n){return null==e?f.identity:f.isFunction(e)?p(e,t,n):f.isObject(e)?f.matches(e):f.property(e)},f.each=f.forEach=function(e,t,n){if(null==e)return e;t=p(t,n);var i,r=e.length;if(r===+r)for(i=0;r>i;i++)t(e[i],i,e);else{var o=f.keys(e);for(i=0,r=o.length;r>i;i++)t(e[o[i]],o[i],e)}return e},f.map=f.collect=function(e,t,n){if(null==e)return[];t=f.iteratee(t,n);for(var i,r=e.length!==+e.length&&f.keys(e),o=(r||e).length,s=Array(o),a=0;o>a;a++)i=r?r[a]:a,s[a]=t(e[i],i,e);return s};var m="Reduce of empty array with no initial value";f.reduce=f.foldl=f.inject=function(e,t,n,i){null==e&&(e=[]),t=p(t,i,4);var r,o=e.length!==+e.length&&f.keys(e),s=(o||e).length,a=0;if(arguments.length<3){if(!s)throw new TypeError(m);n=e[o?o[a++]:a++]}for(;s>a;a++)r=o?o[a]:a,n=t(n,e[r],r,e);return n},f.reduceRight=f.foldr=function(e,t,n,i){null==e&&(e=[]),t=p(t,i,4);var r,o=e.length!==+e.length&&f.keys(e),s=(o||e).length;if(arguments.length<3){if(!s)throw new TypeError(m);n=e[o?o[--s]:--s]}for(;s--;)r=o?o[s]:s,n=t(n,e[r],r,e);return n},f.find=f.detect=function(e,t,n){var i;return t=f.iteratee(t,n),f.some(e,function(e,n,r){return t(e,n,r)?(i=e,!0):void 0}),i},f.filter=f.select=function(e,t,n){var i=[];return null==e?i:(t=f.iteratee(t,n),f.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i)},f.reject=function(e,t,n){return f.filter(e,f.negate(f.iteratee(t)),n)},f.every=f.all=function(e,t,n){if(null==e)return!0;t=f.iteratee(t,n);var i,r,o=e.length!==+e.length&&f.keys(e),s=(o||e).length;for(i=0;s>i;i++)if(r=o?o[i]:i,!t(e[r],r,e))return!1;return!0},f.some=f.any=function(e,t,n){if(null==e)return!1;t=f.iteratee(t,n);var i,r,o=e.length!==+e.length&&f.keys(e),s=(o||e).length;for(i=0;s>i;i++)if(r=o?o[i]:i,t(e[r],r,e))return!0;return!1},f.contains=f.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=f.values(e)),f.indexOf(e,t)>=0)},f.invoke=function(e,t){var n=s.call(arguments,2),i=f.isFunction(t);return f.map(e,function(e){return(i?t:e[t]).apply(e,n)})},f.pluck=function(e,t){return f.map(e,f.property(t))},f.where=function(e,t){return f.filter(e,f.matches(t))},f.findWhere=function(e,t){return f.find(e,f.matches(t))},f.max=function(e,t,n){var i,r,o=-1/0,s=-1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],i>o&&(o=i)}else t=f.iteratee(t,n),f.each(e,function(e,n,i){r=t(e,n,i),(r>s||r===-1/0&&o===-1/0)&&(o=e,s=r)});return o},f.min=function(e,t,n){var i,r,o=1/0,s=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:f.values(e);for(var a=0,l=e.length;l>a;a++)i=e[a],o>i&&(o=i)}else t=f.iteratee(t,n),f.each(e,function(e,n,i){r=t(e,n,i),(s>r||1/0===r&&1/0===o)&&(o=e,s=r)});return o},f.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:f.values(e),i=n.length,r=Array(i),o=0;i>o;o++)t=f.random(0,o),t!==o&&(r[o]=r[t]),r[t]=n[o];return r},f.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=f.values(e)),e[f.random(e.length-1)]):f.shuffle(e).slice(0,Math.max(0,t))},f.sortBy=function(e,t,n){return t=f.iteratee(t,n),f.pluck(f.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var g=function(e){return function(t,n,i){var r={};return n=f.iteratee(n,i),f.each(t,function(i,o){var s=n(i,o,t);e(r,i,s)}),r}};f.groupBy=g(function(e,t,n){f.has(e,n)?e[n].push(t):e[n]=[t]}),f.indexBy=g(function(e,t,n){e[n]=t}),f.countBy=g(function(e,t,n){f.has(e,n)?e[n]++:e[n]=1}),f.sortedIndex=function(e,t,n,i){n=f.iteratee(n,i,1);for(var r=n(t),o=0,s=e.length;s>o;){var a=o+s>>>1;n(e[a])<r?o=a+1:s=a}return o},f.toArray=function(e){return e?f.isArray(e)?s.call(e):e.length===+e.length?f.map(e,f.identity):f.values(e):[]},f.size=function(e){return null==e?0:e.length===+e.length?e.length:f.keys(e).length},f.partition=function(e,t,n){t=f.iteratee(t,n);var i=[],r=[];return f.each(e,function(e,n,o){(t(e,n,o)?i:r).push(e)}),[i,r]},f.first=f.head=f.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:s.call(e,0,t)},f.initial=function(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},f.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},f.rest=f.tail=f.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},f.compact=function(e){return f.filter(e,f.identity)};var v=function(e,t,n,i){if(t&&f.every(e,f.isArray))return a.apply(i,e);for(var r=0,s=e.length;s>r;r++){var l=e[r];f.isArray(l)||f.isArguments(l)?t?o.apply(i,l):v(l,t,n,i):n||i.push(l)}return i};f.flatten=function(e,t){return v(e,t,!1,[])},f.without=function(e){return f.difference(e,s.call(arguments,1))},f.uniq=f.unique=function(e,t,n,i){if(null==e)return[];f.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=f.iteratee(n,i));for(var r=[],o=[],s=0,a=e.length;a>s;s++){var l=e[s];if(t)s&&o===l||r.push(l),o=l;else if(n){var c=n(l,s,e);f.indexOf(o,c)<0&&(o.push(c),r.push(l))}else f.indexOf(r,l)<0&&r.push(l)}return r},f.union=function(){return f.uniq(v(arguments,!0,!0,[]))},f.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,i=0,r=e.length;r>i;i++){var o=e[i];if(!f.contains(t,o)){for(var s=1;n>s&&f.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},f.difference=function(e){var t=v(s.call(arguments,1),!0,!0,[]);return f.filter(e,function(e){return!f.contains(t,e)})},f.zip=function(e){if(null==e)return[];for(var t=f.max(arguments,"length").length,n=Array(t),i=0;t>i;i++)n[i]=f.pluck(arguments,i);return n},f.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},f.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=f.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}for(;r>i;i++)if(e[i]===t)return i;return-1},f.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=e.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(e[i]===t)return i;return-1},f.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;i>o;o++,e+=n)r[o]=e;return r};var y=function(){};f.bind=function(e,t){var n,i;if(h&&e.bind===h)return h.apply(e,s.call(arguments,1));if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(s.call(arguments)));y.prototype=e.prototype;var r=new y;y.prototype=null;var o=e.apply(r,n.concat(s.call(arguments)));return f.isObject(o)?o:r}},f.partial=function(e){var t=s.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,o=i.length;o>r;r++)i[r]===f&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},f.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=f.bind(e[n],e);return e},f.memoize=function(e,t){var n=function(i){var r=n.cache,o=t?t.apply(this,arguments):i;return f.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},f.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},f.defer=function(e){return f.delay.apply(f,[e,1].concat(s.call(arguments,1)))},f.throttle=function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:f.now(),s=null,o=e.apply(i,r),s||(i=r=null)};return function(){var c=f.now();a||n.leading!==!1||(a=c);var u=t-(c-a);return i=this,r=arguments,0>=u||u>t?(clearTimeout(s),s=null,a=c,o=e.apply(i,r),s||(i=r=null)):s||n.trailing===!1||(s=setTimeout(l,u)),o}},f.debounce=function(e,t,n){var i,r,o,s,a,l=function(){var c=f.now()-s;t>c&&c>0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,s=f.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r),o=r=null),a}},f.wrap=function(e,t){return f.partial(t,e)},f.negate=function(e){return function(){return!e.apply(this,arguments)}},f.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},f.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},f.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},f.once=f.partial(f.before,2),f.keys=function(e){if(!f.isObject(e))return[];if(d)return d(e);var t=[];for(var n in e)f.has(e,n)&&t.push(n);return t},f.values=function(e){for(var t=f.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},f.pairs=function(e){for(var t=f.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},f.invert=function(e){for(var t={},n=f.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},f.functions=f.methods=function(e){var t=[];for(var n in e)f.isFunction(e[n])&&t.push(n);return t.sort()},f.extend=function(e){if(!f.isObject(e))return e;for(var t,n,i=1,r=arguments.length;r>i;i++){t=arguments[i];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},f.pick=function(e,t,n){var i,r={};if(null==e)return r;if(f.isFunction(t)){t=p(t,n);for(i in e){var o=e[i];t(o,i,e)&&(r[i]=o)}}else{var l=a.apply([],s.call(arguments,1));e=new Object(e);for(var c=0,u=l.length;u>c;c++)i=l[c],i in e&&(r[i]=e[i])}return r},f.omit=function(e,t,n){if(f.isFunction(t))t=f.negate(t);else{var i=f.map(a.apply([],s.call(arguments,1)),String);t=function(e,t){return!f.contains(i,t)}}return f.pick(e,t,n)},f.defaults=function(e){if(!f.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];for(var r in i)void 0===e[r]&&(e[r]=i[r])}return e},f.clone=function(e){return f.isObject(e)?f.isArray(e)?e.slice():f.extend({},e):e},f.tap=function(e,t){return t(e),e};var b=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof f&&(e=e._wrapped),t instanceof f&&(t=t._wrapped);var r=l.call(e);if(r!==l.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]===e)return i[o]===t;var s=e.constructor,a=t.constructor;if(s!==a&&"constructor"in e&&"constructor"in t&&!(f.isFunction(s)&&s instanceof s&&f.isFunction(a)&&a instanceof a))return!1;n.push(e),i.push(t);var c,u;if("[object Array]"===r){if(c=e.length,u=c===t.length)for(;c--&&(u=b(e[c],t[c],n,i)););}else{var d,h=f.keys(e);if(c=h.length,u=f.keys(t).length===c)for(;c--&&(d=h[c],u=f.has(t,d)&&b(e[d],t[d],n,i)););}return n.pop(),i.pop(),u};f.isEqual=function(e,t){return b(e,t,[],[])},f.isEmpty=function(e){if(null==e)return!0;if(f.isArray(e)||f.isString(e)||f.isArguments(e))return 0===e.length;for(var t in e)if(f.has(e,t))return!1;return!0},f.isElement=function(e){return!(!e||1!==e.nodeType)},f.isArray=u||function(e){return"[object Array]"===l.call(e)},f.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},f.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){f["is"+e]=function(t){return l.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(e){return f.has(e,"callee")}),"function"!=typeof/./&&(f.isFunction=function(e){return"function"==typeof e||!1}),f.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},f.isNaN=function(e){return f.isNumber(e)&&e!==+e},f.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===l.call(e)},f.isNull=function(e){return null===e},f.isUndefined=function(e){return void 0===e},f.has=function(e,t){return null!=e&&c.call(e,t)},f.noConflict=function(){return e._=t,this},f.identity=function(e){return e},f.constant=function(e){return function(){return e}},f.noop=function(){},f.property=function(e){return function(t){return t[e]}},f.matches=function(e){var t=f.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var i=0;n>i;i++){var r=t[i],o=r[0];if(r[1]!==e[o]||!(o in e))return!1}return!0}},f.times=function(e,t,n){var i=Array(Math.max(0,e));t=p(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},f.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},f.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=f.invert(_),C=function(e){var t=function(t){return e[t]},n="(?:"+f.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};f.escape=C(_),f.unescape=C(w),f.result=function(e,t){if(null==e)return void 0;var n=e[t];return f.isFunction(n)?e[t]():n};var x=0;f.uniqueId=function(e){var t=++x+"";return e?e+t:t},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var k=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},E=/\\|'|\r|\n|\u2028|\u2029/g,T=function(e){return"\\"+S[e]};f.template=function(e,t,n){!t&&n&&(t=n),t=f.defaults({},t,f.templateSettings);var i=RegExp([(t.escape||k).source,(t.interpolate||k).source,(t.evaluate||k).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,function(t,n,i,s,a){return o+=e.slice(r,a).replace(E,T),r=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var l=function(e){return s.call(this,e,f)},c=t.variable||"obj";return l.source="function("+c+"){\n"+o+"}",l},f.chain=function(e){var t=f(e);return t._chain=!0,t};var N=function(e){return this._chain?f(e).chain():e};f.mixin=function(e){f.each(f.functions(e),function(t){var n=f[t]=e[t];f.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),N.call(this,n.apply(f,e))}})},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];f.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],N.call(this,n)}}),f.each(["concat","join","slice"],function(e){var t=n[e];f.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}.call(this);/**
 * TERMS OF USE - Validatious 2.0
 * Open source under the BSD License.
 * Copyright 2008 Christian Johansen.
 * All rights reserved.
 */
var addDOMLoadEvent=function(){var e,t,n,i,r,o=[],s=function(){for(n=!0,clearInterval(e);i=o.shift();)i();t&&(t.onreadystatechange="")};return function(t){return n?t():(o[0]||(document.addEventListener&&document.addEventListener("DOMContentLoaded",s,!1),/WebKit/i.test(navigator.userAgent)&&(e=setInterval(function(){/loaded|complete/.test(document.readyState)&&s()},10)),r=window.onload,window.onload=function(){s(),r&&r()}),o.push(t),void 0)}}(),Base=function(){};Base.extend=function(e,t){var n=Base.prototype.extend;Base._prototyping=!0;var i=new this;n.call(i,e),delete Base._prototyping;var r=i.constructor,o=i.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==o)this._constructing=!0,r.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||n).call(arguments[0],i)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=i,o.toString=this.toString,o.valueOf=function(e){return"object"==e?o:r.valueOf()},n.call(o,t),"function"==typeof o.init&&o.init(),o},Base.prototype={extend:function(e,t){if(arguments.length>1){var n=this[e];if(n&&"function"==typeof t&&(!n.valueOf||n.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var i=t.valueOf();t=function(){var e=this.base||Base.prototype.base;this.base=n;var t=i.apply(this,arguments);return this.base=e,t},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString}this[e]=t}else if(e){var r=Base.prototype.extend;Base._prototyping||"function"==typeof this||(r=this.extend||r);for(var o={toSource:null},s=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=s[a++];)e[l]!=o[l]&&r.call(this,l,e[l]);for(var l in e)o[l]||r.call(this,l,e[l])}return this},base:function(){}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return String(this.valueOf())}}),addEvent.guid=1,fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},("undefined"==typeof v2||null===v2)&&(v2={}),v2.empty=function(e){return"undefined"==typeof e||null===e||""===e},v2.array=function(e){var t=[];if(e&&"function"==typeof e.item){for(var n=0;n<e.length;n++)t[n]=e[n];e=t}return v2.empty(e)?[]:"undefined"==typeof e.shift?[e]:e},v2.Object={extend:function(e,t,n){n="undefined"==typeof n?!1:n;for(var i in t)n&&"undefined"!=typeof e[i]||t.hasOwnProperty(i)&&"undefined"!=typeof t[i]&&(e[i]=t[i]);return e}},v2.Object.extend(String.prototype,{strip:function(){return this.replace(/^\s+|\s+$/,"")}}),v2.Object.extend(Array.prototype,{indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}}),v2.$=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)),t="undefined"==typeof t?!0:t,null===e||"undefined"!=typeof e.hide||!t)return e;for(var n in v2.Element)v2.Element.hasOwnProperty(n)&&!function(){var t=n,i={};i[t]=function(){for(var n=[e],i=0;i<arguments.length;i++)n.push(arguments[i]);return v2.Element[t].apply(v2.Element,n)},v2.Object.extend(e,i,!0)}();return e},v2.$$=function(e,t){if(t=t||document,document.querySelectorAll)return v2.$$=function(e,t){return(t||document).querySelectorAll(e)},v2.$$(e,t);var n,i,r,o,s,a,l,c,u,d,h,f,p=e.split(","),m=[];for(n=0;e=p[n];n++){for(o=e.strip().split(/[^a-zA-Z]/)[0]||"*",s=e.replace(/^\./,"_.").split(/\./),u=[],d=[],i=1;i<s.length;i++)u.push(s[i].split(/[^a-zA-Z\-_]/)[0]);for(s=e.replace("][","].[").split(/[\[\]]/),i=0;i<s.length-1;i+=2)a=s[i+1].split("="),a[1]=a[1]||!0,d.push(a);l=t.getElementsByTagName(o);e:for(i=0;c=l[i];i++){for(r=0;r<u.length;r++)if(!v2.Element.hasClassName(c,u[r]))continue e;for(r=0;r<d.length;r++)if(h=d[r][0],f=d[r][1],c.hasAttribute){if(!c.hasAttribute(h)||f!==!0&&c.getAttribute(h)!==f)continue e}else if(h="for"===h?"htmlFor":h,"undefined"==typeof c[h]||f!==!0&&c[h]!==f)continue e;m.indexOf(c)<0&&m.push(c)}}return m},v2.Element={observe:function(e,t,n){addEvent(e,t,n)},computedStyle:function(e,t){var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t]),n},visible:function(e){return"none"!=v2.Element.computedStyle(e,"display")&&"hidden"!=v2.Element.computedStyle(e,"visibility")&&(null===e.parentNode||1!=e.parentNode.nodeType||v2.Element.visible(e.parentNode))},hasClassName:function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},addClassName:function(e,t){return e.className+=v2.Element.hasClassName(e,t)?"":" "+t,e.className=e.className.replace("  "," ").replace(/^\s|\s$/,""),e},removeClassName:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return e.className=e.className.replace(n," ").replace("  "," ").replace(/^\s|\s$/,""),e},position:function(e){for(var t={x:0,y:0};null!==e;)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t},scrollTo:function(e){var t=v2.Element.position(e);window.scrollTo(t.x,t.y)},previous:function(e){do e=e.previousSibling;while(e&&1!==e.nodeType);return e}},v2.Object.extend(Function.prototype,{bind:function(e){var t=this;return t.__cc=t.__cc||[],window.__coc=window.__coc||0,"undefined"==typeof e.__id&&(e.__id=window.__coc++),t.__cc[e.__id]=t.__cc[e.__id]||function(){try{return t.apply(e,arguments)}catch(n){}},t.__cc[e.__id]}}),"undefined"!=typeof addDOMLoadEvent&&(v2.addDOMLoadEvent=addDOMLoadEvent),v2.CompositeFormItem=Base.extend({type:"generic",constructor:function(){v2.empty(this.__validators)&&(this.__validators=[]),v2.empty(this.__errors)&&(this.__errors=[]),this.__passOnAny=!1,this.__message=null,this.parent=null},add:function(e){this.__validators.push(e),e.parent=this},get:function(e){return v2.empty(e)?this.__validators:this.__validators[e]},validate:function(){this.__errors=[];var e=this.test("validate");return e?(this.__errors=[],this.onSuccess()):this.onFailure(),e},test:function(e){var t,n,i=0;for(e=e||"test",t=0;n=this.__validators[t];t++)n[e]()?i++:this.__errors.push(n);return this.passOnAny()&&i>0||!this.passOnAny()&&i===this.__validators.length},getInvalid:function(){return 0===this.__errors.length?null:this.__errors},setMessage:function(e){this.__message=e},getMessages:function(){if(!v2.empty(this.__message))return[this.__message];var e,t,n=[];for(e=0,t;t=this.__errors[e];e++)n=n.concat(t.getMessages());return n},passOnAny:function(e){return"undefined"!=typeof e&&(this.__passOnAny=!!e),this.__passOnAny},onSuccess:function(){},onFailure:function(){}}),v2.InputElement=Base.extend({constructor:function(e,t){this.__name=null,this.__events=v2.empty(t)?["blur"]:v2.array(t),this.__elements=v2.array(e)},monitor:function(e){this.__monitored=!0;var t,n,i,r;for(t=0;i=this.__elements[t];t++)for(n=0;r=this.__events[n];n++)v2.Element.observe(i,r,e)},getValue:function(){return this.__elements[0].value},getLabel:function(){var e=this.__elements[0],t=v2.$$("label[for="+(e.id||e.name)+"]",e.form);return t&&t[0]},getName:function(){if(this.__name)return this.__name;var e=this.getLabel();if(e)return""!==e.title?e.title:e.innerHTML;var t=this.__elements[0];return t.id||t.name},setName:function(e){return this.__name=e?e:null,this},getParent:function(){return this.__elements[0].parentNode},getElements:function(){return this.__elements},visible:function(){if(!v2.$(this.getParent()).visible())return!1;for(var e,t=0;e=this.__elements[t];t++)if(v2.Element.visible(e))return!0;return!1}},{__fields:{},get:function(e){if(e&&e.constructor===v2.InputElement)return e;var t,n,i,r,o,s,a=v2.$(e);if(a||(r="input$, select$, textarea$",i=v2.$$(r.replace(/\$/g,"[name="+e+"]")),a=i[0]),!a)throw new TypeError(e+" does not resolve to an HTML element!");return t=a.name||a.id,(n=v2.InputElement.__fields[t])?n:(a.options?n=new v2.SelectElement(a):"textarea"===a.tagName.toLowerCase()?n=new v2.TextareaElement(a):a.type&&"radio"==a.type?(i=v2.$$("input[type=radio][name="+a.name+"]",a.form),n=new v2.RadioElement(i)):a.type&&"checkbox"==a.type?(o=a.className,s=/\bg_([^\s]*)\b/,i=s.test(o)?v2.$$("input[type=checkbox].g_"+o.match(s)[1],a.form):[a],n=new v2.CheckboxElement(i)):n=new v2.InputElement(a),v2.InputElement.__fields[t]=n)}}),v2.$f=v2.InputElement.get,v2.RadioElement=v2.InputElement.extend({constructor:function(e){this.base(e,["click","change"])},getValue:function(){for(var e,t=0;e=this.__elements[t];t++)if(e.checked)return e.value;return null},getLabel:function(){var e=this.__elements[0].parentNode;if("li"===e.tagName.toLowerCase())return v2.$(e.parentNode).previous();var t=v2.$(this.__elements[0]).previous();return t||this.base()},getParent:function(){var e=this.__elements[0].parentNode;return"li"===e.tagName.toLowerCase()?e.parentNode.parentNode:e}}),v2.SelectElement=v2.InputElement.extend({constructor:function(e){this.base([e],"change")},getValue:function(){var e=this.__elements[0];if(!e.multiple)return e.options[e.selectedIndex].value;for(var t,n=[],i=0;t=e.options[i];i++)t.selected&&n.push(t.value);return n}}),v2.TextareaElement=v2.InputElement.extend({}),v2.CheckboxElement=v2.RadioElement.extend({getValue:function(){var e,t,n=[];for(e=0,t;t=this.__elements[e];e++)t.checked&&n.push(t.value);return n}}),v2.Message=Base.extend({constructor:function(e,t,n){this.message=e,this.params=t||[],this.values=n||[]},copy:function(){return new v2.Message(this.message,this.params,this.values)},toString:function(){for(var e=this.message+"",t=0,n=null;n=this.params[t];t++)e=e.replace("${"+n+"}",this.values[t]);return e}}),v2.Validator=Base.extend({constructor:function(e,t,n,i,r){this.__name=e,this.__test=t,this.__message=new v2.Message(n||"${field} does not pass "+e+" validator",i),this.__aliases=v2.array(r),this.acceptEmpty=!0},test:function(e,t,n){n="undefined"==typeof n?!1:n;var i=e.getValue(),r=this.acceptEmpty&&""===i||this.__test(e,i,t);return r&&!n||!r&&n},getName:function(){return this.__name},getMessage:function(){return this.__message},setMessage:function(e){this.__message.message=e}},{validators:{},add:function(e){if(!e.name||!e.fn)throw new TypeError("Options object should contain name and fn");e=v2.Object.extend({params:[],aliases:[],acceptEmpty:!0},e,!1);var t=v2.array(e.params),n=new v2.Validator(e.name,e.fn,e.message,t,e.aliases);n.acceptEmpty=e.acceptEmpty;for(var i,r=v2.array(e.aliases).concat([e.name]),o=0;i=r[o];o++)v2.Validator.validators[i]=n;return n},reg:function(e,t,n,i,r,o){return v2.Validator.add({name:e,fn:t,message:i,params:n,aliases:r,acceptEmpty:o})},get:function(e){var t;return e.constructor===v2.Validator?e:(t=v2.Validator.validators[e])?t:null}}),v2.$v=function(e){return v2.Validator.get(e)},v2.$msg=function(){if(2===arguments.length)return v2.Validator.get(arguments[0]).setMessage(arguments[1]);for(var e in arguments[0])try{v2.Validator.get(e).setMessage(arguments[0][e])}catch(t){}},v2.Field=v2.CompositeFormItem.extend({validateHidden:!1,instant:!1,instantWhenValidated:!0,type:"field",constructor:function(e,t,n){this.base(),this.__monitored=!1,this.element=v2.$f(e),this.instant="undefined"!=typeof t?t:this.instant,this.instantWhenValidated="undefined"!=typeof n?n:this.instantWhenValidated,this.__monitor(this.instant)},test:function(){return this.validateHidden||this.element.visible()?this.base():!0},validate:function(){return this.__monitor(this.instantWhenValidated&&!this.__monitored),this.base()},addValidator:function(e,t,n){var i=v2.$v(e);if(null===i)throw new Error(e+" is not a valid validator");"undefined"!=typeof n&&null!==n&&(n=new v2.Message(n,i.getMessage().params));var r=new v2.FieldValidator(this.element,i,v2.array(t),n);return this.add(r),r},getParent:function(){return this.element.getParent()},__monitor:function(e){if(e&&!this.__monitored){this.__monitored=!0;var t=this.parent&&"fieldset"===this.parent.type?this.parent:this,n=t.validate.bind(this);this.element.monitor(function(e){n(e)})}}}),v2.Fieldset=v2.CompositeFormItem.extend({type:"fieldset",constructor:function(e){this.base(),this.element=e},getParent:function(){return this.element}}),v2.FieldValidator=Base.extend({invert:!1,constructor:function(e,t,n,i){this.__field=e,this.__validator=t,this.__params=v2.array(n),this.__message=i||t.__message.copy();var r=this.__message.params;(r.length<1||"field"!==r[0])&&(this.__message.params=["field"].concat(r)),this.__message.values=[this.__field.getName()].concat(this.__params)},test:function(){return this.__validator.test(this.__field,this.__params,this.invert)},validate:function(){return this.test()},getInvalid:function(){return this.test()?null:this},setMessage:function(e){this.__message.message=e},getMessages:function(){return[this.__message.toString()]},add:function(){},remove:function(){},get:function(){},passOnAny:function(){},onSuccess:function(){},onFailure:function(){}}),v2.Form=v2.CompositeFormItem.extend({type:"form",constructor:function(e){this.base(),this.__form=v2.$(e),this.__form.observe("submit",this.validate.bind(this)),this.__buttons=[],this.__activeButton=null},addButton:function(e){this.__buttons.push(e),v2.Element.observe(e,"click",function(){this.__activeButton=e}.bind(this))},validate:function(){var e=arguments.length>0?arguments[0]:null,t=this.__buttons,n=this.__activeButton;if(this.__activeButton=null,t.length>0&&t.indexOf(n)<0)return!0;var i=this.base();return!i&&e&&(e.preventDefault(),e.returnValue=!1),i}},{forms:{},get:function(e){var t,n=v2.$(e);if(null===n||"form"!==n.tagName.toLowerCase())throw new ArgumentError("idOrElement should represent a form element");return v2.empty(t=v2.Form.forms[n.id])?v2.Form.forms[n.id]=new v2.Form(n):t}}),function(){var e=v2.Validator;e.reg("alpha",function(e,t){return/^[a-zA-Z\u00A1-\uFFFF]*$/.test(t)}),e.reg("alphanum",function(e,t){return/^([a-zA-Z\u00A1-\uFFFF0-9])*$/.test(t)}),e.reg("confirmation-of",function(e,t,n){return t===v2.$f(n[0]).getValue()},"field-id","${field} should be an exact match",null,!1),e.reg("email",function(e,t){return/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(t)}),e.reg("max-length",function(e,t,n){return t.length<n[0]},"max"),e.reg("max-val",function(e,t,n){return t<=n[0]},"max"),e.reg("min-length",function(e,t,n){return t.length>=n[0]},"min"),e.reg("min-val",function(e,t,n){return t>=n[0]},"min"),e.reg("numeric",function(e,t){return/^[0-9]*(\.[0-9]+)?$/.test(t)}),e.reg("required",function(e,t){return!(v2.empty(t)||"undefined"!=typeof t.length&&0===t.length)},null,null,"not-empty",!1),e.reg("url",function(e,t){return/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(t)}),e.reg("word",function(e,t){return/^([a-zA-Z\u00A1-\uFFFF0-9_\-\s\t])*$/.test(t)})}(),v2.$msg({alpha:"${field} should only contain letters",alphanum:"${field} should only contain letters and numbers","car-regnum-nor":"${field} should be a valid norwegian auto registration number","confirmation-of":"${field} should be a confirmation of ${field-id}",email:"${field} should be a valid email address","max-length":"${field} should be no more than ${max} characters long","max-val":"${field} should be no bigger than ${min}","min-length":"${field} should be atleast ${min} characters long","min-val":"${field} should be atleast ${min}",numeric:"${field} should only contain numbers","phone-nor":"${field} should be a valid norwegian phone number",required:"${field} is required","ssn-nor":"${field} should be a valid norwegian social security number",url:"${field} should be a valid URL",word:"${field} should only contain letters, numbers and punctuation"}),v2.ErrorReporting={displayErrors:-1,positionErrorsAbove:!0,failureClass:"error",successClass:"",messagesClass:"messages",onFailure:function(){if(!this.parent||"fieldset"!==this.parent.type){var e,t,n,i=this.onSuccess(),r=[],o=this.getMessages();i.addClassName(this.failureClass),i.removeClassName(this.successClass);var s=this.displayErrors,a=this.__errors.length;if(s=0>s||s>a?a:s,0!==s){var l=document.createElement("ul");for(l.id=this.__getId(),l.className=this.messagesClass,e=0;s>e;e++)t=o[e],!t||r.indexOf(t.toString())>=0||(r.push(t.toString()),n=document.createElement("li"),n.innerHTML=t.toString(),l.appendChild(n));this.positionErrorsAbove?i.insertBefore(l,i.firstChild):i.appendChild(l)}}},onSuccess:function(){if(this.parent&&"fieldset"===this.parent.type)return null;var e=v2.$(this.getParent()),t=v2.$(this.__getId());return t&&e===t.parentNode&&e.removeChild(t),e.removeClassName(this.failureClass),e.addClassName(this.successClass),e},__getId:function(){var e=this.element.getElements?this.element.getElements()[0]:null,t=e||this.getParent(),n=t.className,i=((t.id||t.name||n.replace(this.failureClass,""))+"_"+this.failureClass).replace(" ","_").replace(/_+/,"_");return i}},v2.Object.extend(v2.Field.prototype,v2.ErrorReporting),v2.Object.extend(v2.Fieldset.prototype,v2.ErrorReporting),v2.Object.extend(v2.Form.prototype,{scrollToFirstWhenFail:!0,onFailure:function(){if(this.scrollToFirstWhenFail){var e,t,n,i=this.__form;for(n=i.all||i.getElementsByTagName("*"),e=0;t=n[e];e++)if(v2.Element.hasClassName(t,v2.ErrorReporting.failureClass))return v2.Element.scrollTo(t),void 0}}}),v2.Object.extend(v2.Validator,{prefix:""}),v2.Object.extend(v2.Form,{autoValidateClass:"validate",actionButtonClass:"action"}),v2.html={validateAnyClass:"validate_any",validateAllClass:"validate_all",validatorsFromString:function(e){var t,n,i,r,o,s=v2.Validator.prefix,a=new RegExp("^"+s,""),l=[];for(e=e.split(" "),t=0;n=e[t];t++)i=!1,(v2.empty(s)||a.test(n))&&(n=n.replace(a,""),/^not_/.test(n)&&(n=n.replace(/^not_/,""),i=!0),r=n.split("_"),o=r.shift(),o&&(o=v2.$v(o))&&l.push({validator:o,params:r,invert:i}));return l},applyValidators:function(e,t,n){v2.empty(n)||t.setMessage(n);for(var i,r,o=0;i=e[o];o++)r=t.addValidator(i.validator,i.params),r.invert=i.invert;return t}},v2.html.Form=Base.extend({constructor:function(e){this.form=v2.Form.get(e),this.__parsed={},this.parseElement(e,this.form),this.form.passOnAny(v2.$(e).hasClassName(v2.html.validateAnyClass))},parseElement:function(e,t,n){var i,r,o,s,a,l=v2.$$("div, fieldset, input, select, textarea",e);for(this.__parsed[e.id||e.name]=!0,n=n||[],i=0;r=l[i];i++)(0!==n.length||!/^\s*$/.test(r.className)&&!this.__parsed[r.id||r.name])&&(o=r.tagName.toLowerCase(),"input"===o&&v2.Element.hasClassName(r,v2.Form.actionButtonClass)?this.form.addButton(r):"div"!==o&&"fieldset"!==o?(a=n.concat(v2.html.validatorsFromString(r.className)),a.length>0&&(s=new v2.Field(r),v2.html.applyValidators(a,s,r.title),this.__parsed[r.id||r.name]=!0,t.add(s))):this.parseBlock(r,t))},parseBlock:function(e,t){var n=new v2.Fieldset(e),i=!0;if(v2.$(e),e.hasClassName(v2.html.validateAnyClass));else{if(!e.hasClassName(v2.html.validateAllClass))return;i=!1}n.passOnAny(i);var r=v2.html.validatorsFromString(e.className);this.parseElement(e,n,r),/^\s*$/.test(e.title)||n.setMessage(e.title),n.get(0)&&t.add(n)}}),v2.addDOMLoadEvent(function(){for(var e,t=document.getElementsByTagName("form"),n=0;e=t[n];n++)v2.Element.hasClassName(e,v2.Form.autoValidateClass)&&new v2.html.Form(e)}),v2.dsl={__validateTemplate:function(e){return function(){var t=arguments[0],n=t.element||(t.item?t.item.element:null)||null;if(null===n)for(;t&&!t.element;)t=t.get(0);var i=new v2.dsl.Form(n.getElements()[0].form);i.item.passOnAny(e);for(var r,o=0;r=arguments[o];o++)i.item.add(r.item||r);return i}},__andOr:function(e){return function(){var t=new v2.dsl.Collection;t.item.passOnAny(e);for(var n,i=0;n=arguments[i];i++)t.item.add(n.item);return t}}},v2.dsl.expose=function(){var e=v2.dsl;v2.Object.extend(window,{validate:e.validate,validateAll:e.validateAll,validateAny:e.validateAny,and:e.and,or:e.or},!1)},v2.dsl.validateAll=v2.dsl.validate=v2.dsl.__validateTemplate(!1),v2.dsl.validateAny=v2.dsl.__validateTemplate(!0),v2.dsl.and=v2.dsl.__andOr(!1),v2.dsl.or=v2.dsl.__andOr(!0),v2.Object.extend(String.prototype,{is:function(e,t){var n=new v2.dsl.Field(this.toString());return n.addValidator(e,t)}}),function(){var e=String.prototype;e.isA=e.isAn=e.has=e.hasA=e.hasAn=e.is}(),v2.dsl.Field=Base.extend({__currentValidator:null,__and:null,constructor:function(e){this.item=new v2.Field(e)},addValidator:function(e,t,n){if("undefined"!=typeof n){if(null!==this.__and&&this.__and!==n)throw new Error("Field previously set up with "+(this.__and?"AND":"OR")+", unable to shift");this.__and=n,this.item.passOnAny(!n)}return this.__currentValidator=this.item.addValidator(e,t),this},and:function(e,t){if(!this.__currentValidator)throw new Error("Cannot add more validators when no validators are added yet");return this.addValidator(e,t,!0)},or:function(e,t){if(this.__currentValidator)throw new Error("Cannot add more validators when no validators are added yet");return this.addValidator(e,t,!1)},explain:function(e){if(!this.__currentValidator)throw new Error("No active field validator");return this.__currentValidator.setMessage(e),this},help:function(e){return this.item.setMessage(e),this},withName:function(e){return this.item.element.setName(e),this}}),function(){var e=v2.dsl.Field.prototype;e.orIs=e.orIsA=e.orIsAn=e.orHas=e.orHasA=e.orHasAn=e.or,e.andIs=e.andIsA=e.andIsAn=e.andHas=e.andHasA=e.andHasAn=e.and}(),v2.dsl.Collection=Base.extend({constructor:function(){this.item=new v2.CompositeFormItem},explain:function(e){this.item.setMessage(e)}}),v2.dsl.Form=Base.extend({constructor:function(e){this.item=v2.Form.get(e)},on:function(){var e,t;for(e=0;e<arguments.length;e++)t=v2.$(arguments[e]),this.item.addButton("input"!==t.tagName.toLowerCase()?t.getElementsByTagName("input")[0]:t)}}),function(){var e;e={BE:21,BG:20,CZ:21,DK:25,DE:19,EE:20,EL:23,ES:21,FR:5.5,HR:25,IE:23,IT:22,CY:19,LV:21,LT:21,LU:3,HU:27,MT:18,NL:21,AT:20,PL:23,PT:23,RO:24,SI:22,SK:20,FI:24,SE:25,UK:20},Leanpub.VATpricing=function(){var t;return{TAX_RATES:e,vat_percentage:(t=Leanpub.getCountryCode())&&t in e?e[t]/100:0,priceRegex:/[+-]?\d+(\.|,)\d+/g,getPrice:function(e){var t;return null==e&&(e=""),e=e.replace(",","."),t=parseFloat(e),isNaN(t)?0:t},updatePrices:function(){var e,t,n,i,r,o,s,a;for($(".includes-vat").remove(),e=$(".taxamo-price"),a=[],r=0,o=e.length;o>r;r++)n=e[r],t=this.getPrice(null!=(s=$(n).text().match(this.priceRegex))?s[0]:void 0),i="$"+parseFloat(t*(1+this.vat_percentage)).toFixed(2),$(n).text(""+i),a.push(this.indicateVAT(n));return a},updateModalPrices:function(){var e,t,n,i,r,o,s,a;for(e=$(".modal-inner").find(".taxamo-price"),a=[],r=0,o=e.length;o>r;r++)n=e[r],t=this.getPrice(null!=(s=$(n).text().match(this.priceRegex))?s[0]:void 0),i="$"+parseFloat(t*(1+this.vat_percentage)).toFixed(2),$(n).text(""+i),a.push(this.indicateVAT(n));return a},indicateVAT:function(e){var t,n;if(this.vat_percentage>0)return n="<p class='includes-vat'>(including VAT)</p>",t=$(e).parent(".price-detail"),$(e).siblings(".price-text").length&&parent?t.append(n):void 0}}}(),$(function(){return Leanpub.VATpricing.updatePrices()})}.call(this),function(){var e;e=function(){function e(){}var t;return t=null,e.prototype.init=function(e){return null!=e?(t=e,this.bindEvents()):void 0},e.prototype.bindEvents=function(){var e=this;return $(".modal-state").on("click",function(t){var n;return(n=$(t.target)).is(":checked")?e.insertFrame(n):e.removeFrame(n)})},e.prototype.buildFrame=function(e){return"<iframe width='853' height='480' src='//www.youtube.com/embed/"+e.embed+"?rel=0&amp;showinfo=0;"+e.extra+"' frameborder='0' allowfullscreen></iframe>"},e.prototype.insertFrame=function(e){var n;return n=$(e).attr("id"),$("#"+n+"-wrapper").append(this.buildFrame(t[n]))},e.prototype.removeFrame=function(e){var t;return t=$(e).attr("id"),$("#"+t+"-wrapper").empty()},e}(),window.VideoModals=new e}.call(this),function(){window.searchToHash=function(){var e,t,n,i,r,o,s;for(i=location.search.replace(/^\?/,""),t={},s=function(){var e,t,r,o;for(r=i.split(/&/),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(n.split(/\=/));return o}(),r=0,o=s.length;o>r;r++)e=s[r],t[e[0]]=e[1];return t}}.call(this),/*
 *  jQuery OwlCarousel v1.3.3
 *
 *  Copyright (c) 2013 Bartosz Wojciechowski
 *  http://www.owlgraphic.com/owlcarousel/
 *
 *  Licensed under MIT
 *
 */
"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e,t,n){var i={init:function(t,n){var i=this;i.$elem=e(n),i.options=e.extend({},e.fn.owlCarousel.options,i.$elem.data(),t),i.userOptions=t,i.loadContent()},loadContent:function(){function t(e){var t,n="";if("function"==typeof i.options.jsonSuccess)i.options.jsonSuccess.apply(this,[e]);else{for(t in e.owl)e.owl.hasOwnProperty(t)&&(n+=e.owl[t].item);i.$elem.html(n)}i.logIn()}var n,i=this;"function"==typeof i.options.beforeInit&&i.options.beforeInit.apply(this,[i.$elem]),"string"==typeof i.options.jsonPath?(n=i.options.jsonPath,e.getJSON(n,t)):i.logIn()},logIn:function(){var e=this;e.$elem.data({"owl-originalStyles":e.$elem.attr("style"),"owl-originalClasses":e.$elem.attr("class")}),e.$elem.css({opacity:0}),e.orignalItems=e.options.items,e.checkBrowser(),e.wrapperWidth=0,e.checkVisible=null,e.setVars()},setVars:function(){var e=this;return 0===e.$elem.children().length?!1:(e.baseClass(),e.eventTypes(),e.$userItems=e.$elem.children(),e.itemsAmount=e.$userItems.length,e.wrapItems(),e.$owlItems=e.$elem.find(".owl-item"),e.$owlWrapper=e.$elem.find(".owl-wrapper"),e.playDirection="next",e.prevItem=0,e.prevArr=[0],e.currentItem=0,e.customEvents(),e.onStartup(),void 0)},onStartup:function(){var e=this;e.updateItems(),e.calculateAll(),e.buildControls(),e.updateControls(),e.response(),e.moveEvents(),e.stopOnHover(),e.owlStatus(),e.options.transitionStyle!==!1&&e.transitionTypes(e.options.transitionStyle),e.options.autoPlay===!0&&(e.options.autoPlay=5e3),e.play(),e.$elem.find(".owl-wrapper").css("display","block"),e.$elem.is(":visible")?e.$elem.css("opacity",1):e.watchVisibility(),e.onstartup=!1,e.eachMoveUpdate(),"function"==typeof e.options.afterInit&&e.options.afterInit.apply(this,[e.$elem])},eachMoveUpdate:function(){var e=this;e.options.lazyLoad===!0&&e.lazyLoad(),e.options.autoHeight===!0&&e.autoHeight(),e.onVisibleItems(),"function"==typeof e.options.afterAction&&e.options.afterAction.apply(this,[e.$elem])},updateVars:function(){var e=this;"function"==typeof e.options.beforeUpdate&&e.options.beforeUpdate.apply(this,[e.$elem]),e.watchVisibility(),e.updateItems(),e.calculateAll(),e.updatePosition(),e.updateControls(),e.eachMoveUpdate(),"function"==typeof e.options.afterUpdate&&e.options.afterUpdate.apply(this,[e.$elem])},reload:function(){var e=this;t.setTimeout(function(){e.updateVars()},0)},watchVisibility:function(){var e=this;return e.$elem.is(":visible")!==!1?!1:(e.$elem.css({opacity:0}),t.clearInterval(e.autoPlayInterval),t.clearInterval(e.checkVisible),e.checkVisible=t.setInterval(function(){e.$elem.is(":visible")&&(e.reload(),e.$elem.animate({opacity:1},200),t.clearInterval(e.checkVisible))},500),void 0)},wrapItems:function(){var e=this;e.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),e.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),e.wrapperOuter=e.$elem.find(".owl-wrapper-outer"),e.$elem.css("display","block")},baseClass:function(){var e=this,t=e.$elem.hasClass(e.options.baseClass),n=e.$elem.hasClass(e.options.theme);t||e.$elem.addClass(e.options.baseClass),n||e.$elem.addClass(e.options.theme)},updateItems:function(){var t,n,i=this;if(i.options.responsive===!1)return!1;if(i.options.singleItem===!0)return i.options.items=i.orignalItems=1,i.options.itemsCustom=!1,i.options.itemsDesktop=!1,i.options.itemsDesktopSmall=!1,i.options.itemsTablet=!1,i.options.itemsTabletSmall=!1,i.options.itemsMobile=!1,!1;if(t=e(i.options.responsiveBaseWidth).width(),t>(i.options.itemsDesktop[0]||i.orignalItems)&&(i.options.items=i.orignalItems),i.options.itemsCustom!==!1)for(i.options.itemsCustom.sort(function(e,t){return e[0]-t[0]}),n=0;n<i.options.itemsCustom.length;n+=1)i.options.itemsCustom[n][0]<=t&&(i.options.items=i.options.itemsCustom[n][1]);else t<=i.options.itemsDesktop[0]&&i.options.itemsDesktop!==!1&&(i.options.items=i.options.itemsDesktop[1]),t<=i.options.itemsDesktopSmall[0]&&i.options.itemsDesktopSmall!==!1&&(i.options.items=i.options.itemsDesktopSmall[1]),t<=i.options.itemsTablet[0]&&i.options.itemsTablet!==!1&&(i.options.items=i.options.itemsTablet[1]),t<=i.options.itemsTabletSmall[0]&&i.options.itemsTabletSmall!==!1&&(i.options.items=i.options.itemsTabletSmall[1]),t<=i.options.itemsMobile[0]&&i.options.itemsMobile!==!1&&(i.options.items=i.options.itemsMobile[1]);i.options.items>i.itemsAmount&&i.options.itemsScaleUp===!0&&(i.options.items=i.itemsAmount)},response:function(){var n,i,r=this;return r.options.responsive!==!0?!1:(i=e(t).width(),r.resizer=function(){e(t).width()!==i&&(r.options.autoPlay!==!1&&t.clearInterval(r.autoPlayInterval),t.clearTimeout(n),n=t.setTimeout(function(){i=e(t).width(),r.updateVars()},r.options.responsiveRefreshRate))},e(t).resize(r.resizer),void 0)},updatePosition:function(){var e=this;e.jumpTo(e.currentItem),e.options.autoPlay!==!1&&e.checkAp()},appendItemsSizes:function(){var t=this,n=0,i=t.itemsAmount-t.options.items;t.$owlItems.each(function(r){var o=e(this);o.css({width:t.itemWidth}).data("owl-item",Number(r)),(0===r%t.options.items||r===i)&&(r>i||(n+=1)),o.data("owl-roundPages",n)})},appendWrapperSizes:function(){var e=this,t=e.$owlItems.length*e.itemWidth;e.$owlWrapper.css({width:2*t,left:0}),e.appendItemsSizes()},calculateAll:function(){var e=this;e.calculateWidth(),e.appendWrapperSizes(),e.loops(),e.max()},calculateWidth:function(){var e=this;e.itemWidth=Math.round(e.$elem.width()/e.options.items)},max:function(){var e=this,t=-1*(e.itemsAmount*e.itemWidth-e.options.items*e.itemWidth);return e.options.items>e.itemsAmount?(e.maximumItem=0,t=0,e.maximumPixels=0):(e.maximumItem=e.itemsAmount-e.options.items,e.maximumPixels=t),t},min:function(){return 0},loops:function(){var t,n,i,r=this,o=0,s=0;for(r.positionsInArray=[0],r.pagesInArray=[],t=0;t<r.itemsAmount;t+=1)s+=r.itemWidth,r.positionsInArray.push(-s),r.options.scrollPerPage===!0&&(n=e(r.$owlItems[t]),i=n.data("owl-roundPages"),i!==o&&(r.pagesInArray[o]=r.positionsInArray[t],o=i))},buildControls:function(){var t=this;(t.options.navigation===!0||t.options.pagination===!0)&&(t.owlControls=e('<div class="owl-controls"/>').toggleClass("clickable",!t.browser.isTouch).appendTo(t.$elem)),t.options.pagination===!0&&t.buildPagination(),t.options.navigation===!0&&t.buildButtons()},buildButtons:function(){var t=this,n=e('<div class="owl-buttons"/>');t.owlControls.append(n),t.buttonPrev=e("<div/>",{"class":"owl-prev",html:t.options.navigationText[0]||""}),t.buttonNext=e("<div/>",{"class":"owl-next",html:t.options.navigationText[1]||""}),n.append(t.buttonPrev).append(t.buttonNext),n.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(e){e.preventDefault()}),n.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(n){n.preventDefault(),e(this).hasClass("owl-next")?t.next():t.prev()})},buildPagination:function(){var t=this;t.paginationWrapper=e('<div class="owl-pagination"/>'),t.owlControls.append(t.paginationWrapper),t.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(n){n.preventDefault(),Number(e(this).data("owl-page"))!==t.currentItem&&t.goTo(Number(e(this).data("owl-page")),!0)})},updatePagination:function(){var t,n,i,r,o,s,a=this;if(a.options.pagination===!1)return!1;for(a.paginationWrapper.html(""),t=0,n=a.itemsAmount-a.itemsAmount%a.options.items,r=0;r<a.itemsAmount;r+=1)0===r%a.options.items&&(t+=1,n===r&&(i=a.itemsAmount-a.options.items),o=e("<div/>",{"class":"owl-page"}),s=e("<span></span>",{text:a.options.paginationNumbers===!0?t:"","class":a.options.paginationNumbers===!0?"owl-numbers":""}),o.append(s),o.data("owl-page",n===r?i:r),o.data("owl-roundPages",t),a.paginationWrapper.append(o));a.checkPagination()},checkPagination:function(){var t=this;return t.options.pagination===!1?!1:(t.paginationWrapper.find(".owl-page").each(function(){e(this).data("owl-roundPages")===e(t.$owlItems[t.currentItem]).data("owl-roundPages")&&(t.paginationWrapper.find(".owl-page").removeClass("active"),e(this).addClass("active"))}),void 0)},checkNavigation:function(){var e=this;return e.options.navigation===!1?!1:(e.options.rewindNav===!1&&(0===e.currentItem&&0===e.maximumItem?(e.buttonPrev.addClass("disabled"),e.buttonNext.addClass("disabled")):0===e.currentItem&&0!==e.maximumItem?(e.buttonPrev.addClass("disabled"),e.buttonNext.removeClass("disabled")):e.currentItem===e.maximumItem?(e.buttonPrev.removeClass("disabled"),e.buttonNext.addClass("disabled")):0!==e.currentItem&&e.currentItem!==e.maximumItem&&(e.buttonPrev.removeClass("disabled"),e.buttonNext.removeClass("disabled"))),void 0)},updateControls:function(){var e=this;e.updatePagination(),e.checkNavigation(),e.owlControls&&(e.options.items>=e.itemsAmount?e.owlControls.hide():e.owlControls.show())},destroyControls:function(){var e=this;e.owlControls&&e.owlControls.remove()},next:function(e){var t=this;if(t.isTransition)return!1;if(t.currentItem+=t.options.scrollPerPage===!0?t.options.items:1,t.currentItem>t.maximumItem+(t.options.scrollPerPage===!0?t.options.items-1:0)){if(t.options.rewindNav!==!0)return t.currentItem=t.maximumItem,!1;t.currentItem=0,e="rewind"}t.goTo(t.currentItem,e)},prev:function(e){var t=this;if(t.isTransition)return!1;if(t.options.scrollPerPage===!0&&t.currentItem>0&&t.currentItem<t.options.items?t.currentItem=0:t.currentItem-=t.options.scrollPerPage===!0?t.options.items:1,t.currentItem<0){if(t.options.rewindNav!==!0)return t.currentItem=0,!1;t.currentItem=t.maximumItem,e="rewind"}t.goTo(t.currentItem,e)},goTo:function(e,n,i){var r,o=this;return o.isTransition?!1:("function"==typeof o.options.beforeMove&&o.options.beforeMove.apply(this,[o.$elem]),e>=o.maximumItem?e=o.maximumItem:0>=e&&(e=0),o.currentItem=o.owl.currentItem=e,o.options.transitionStyle!==!1&&"drag"!==i&&1===o.options.items&&o.browser.support3d===!0?(o.swapSpeed(0),o.browser.support3d===!0?o.transition3d(o.positionsInArray[e]):o.css2slide(o.positionsInArray[e],1),o.afterGo(),o.singleItemTransition(),!1):(r=o.positionsInArray[e],o.browser.support3d===!0?(o.isCss3Finish=!1,n===!0?(o.swapSpeed("paginationSpeed"),t.setTimeout(function(){o.isCss3Finish=!0},o.options.paginationSpeed)):"rewind"===n?(o.swapSpeed(o.options.rewindSpeed),t.setTimeout(function(){o.isCss3Finish=!0},o.options.rewindSpeed)):(o.swapSpeed("slideSpeed"),t.setTimeout(function(){o.isCss3Finish=!0},o.options.slideSpeed)),o.transition3d(r)):n===!0?o.css2slide(r,o.options.paginationSpeed):"rewind"===n?o.css2slide(r,o.options.rewindSpeed):o.css2slide(r,o.options.slideSpeed),o.afterGo(),void 0))},jumpTo:function(e){var t=this;"function"==typeof t.options.beforeMove&&t.options.beforeMove.apply(this,[t.$elem]),e>=t.maximumItem||-1===e?e=t.maximumItem:0>=e&&(e=0),t.swapSpeed(0),t.browser.support3d===!0?t.transition3d(t.positionsInArray[e]):t.css2slide(t.positionsInArray[e],1),t.currentItem=t.owl.currentItem=e,t.afterGo()},afterGo:function(){var e=this;e.prevArr.push(e.currentItem),e.prevItem=e.owl.prevItem=e.prevArr[e.prevArr.length-2],e.prevArr.shift(0),e.prevItem!==e.currentItem&&(e.checkPagination(),e.checkNavigation(),e.eachMoveUpdate(),e.options.autoPlay!==!1&&e.checkAp()),"function"==typeof e.options.afterMove&&e.prevItem!==e.currentItem&&e.options.afterMove.apply(this,[e.$elem])},stop:function(){var e=this;e.apStatus="stop",t.clearInterval(e.autoPlayInterval)},checkAp:function(){var e=this;"stop"!==e.apStatus&&e.play()},play:function(){var e=this;return e.apStatus="play",e.options.autoPlay===!1?!1:(t.clearInterval(e.autoPlayInterval),e.autoPlayInterval=t.setInterval(function(){e.next(!0)},e.options.autoPlay),void 0)},swapSpeed:function(e){var t=this;"slideSpeed"===e?t.$owlWrapper.css(t.addCssSpeed(t.options.slideSpeed)):"paginationSpeed"===e?t.$owlWrapper.css(t.addCssSpeed(t.options.paginationSpeed)):"string"!=typeof e&&t.$owlWrapper.css(t.addCssSpeed(e))},addCssSpeed:function(e){return{"-webkit-transition":"all "+e+"ms ease","-moz-transition":"all "+e+"ms ease","-o-transition":"all "+e+"ms ease",transition:"all "+e+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(e){return{"-webkit-transform":"translate3d("+e+"px, 0px, 0px)","-moz-transform":"translate3d("+e+"px, 0px, 0px)","-o-transform":"translate3d("+e+"px, 0px, 0px)","-ms-transform":"translate3d("+e+"px, 0px, 0px)",transform:"translate3d("+e+"px, 0px,0px)"}},transition3d:function(e){var t=this;t.$owlWrapper.css(t.doTranslate(e))},css2move:function(e){var t=this;t.$owlWrapper.css({left:e})},css2slide:function(e,t){var n=this;n.isCssFinish=!1,n.$owlWrapper.stop(!0,!0).animate({left:e},{duration:t||n.options.slideSpeed,complete:function(){n.isCssFinish=!0}})},checkBrowser:function(){var e,i,r,o,s=this,a="translate3d(0px, 0px, 0px)",l=n.createElement("div");l.style.cssText="  -moz-transform:"+a+"; -ms-transform:"+a+"; -o-transform:"+a+"; -webkit-transform:"+a+"; transform:"+a,e=/translate3d\(0px, 0px, 0px\)/g,i=l.style.cssText.match(e),r=null!==i&&1===i.length,o="ontouchstart"in t||t.navigator.msMaxTouchPoints,s.browser={support3d:r,isTouch:o}},moveEvents:function(){var e=this;(e.options.mouseDrag!==!1||e.options.touchDrag!==!1)&&(e.gestures(),e.disabledEvents())},eventTypes:function(){var e=this,t=["s","e","x"];e.ev_types={},e.options.mouseDrag===!0&&e.options.touchDrag===!0?t=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:e.options.mouseDrag===!1&&e.options.touchDrag===!0?t=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:e.options.mouseDrag===!0&&e.options.touchDrag===!1&&(t=["mousedown.owl","mousemove.owl","mouseup.owl"]),e.ev_types.start=t[0],e.ev_types.move=t[1],e.ev_types.end=t[2]},disabledEvents:function(){var t=this;t.$elem.on("dragstart.owl",function(e){e.preventDefault()}),t.$elem.on("mousedown.disableTextSelect",function(t){return e(t.target).is("input, textarea, select, option")})},gestures:function(){function i(e){if(void 0!==e.touches)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(void 0===e.touches){if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY};if(void 0===e.pageX)return{x:e.clientX,y:e.clientY}}}function r(t){"on"===t?(e(n).on(l.ev_types.move,s),e(n).on(l.ev_types.end,a)):"off"===t&&(e(n).off(l.ev_types.move),e(n).off(l.ev_types.end))}function o(n){var o,s=n.originalEvent||n||t.event;if(3===s.which)return!1;if(!(l.itemsAmount<=l.options.items)){if(l.isCssFinish===!1&&!l.options.dragBeforeAnimFinish)return!1;if(l.isCss3Finish===!1&&!l.options.dragBeforeAnimFinish)return!1;l.options.autoPlay!==!1&&t.clearInterval(l.autoPlayInterval),l.browser.isTouch===!0||l.$owlWrapper.hasClass("grabbing")||l.$owlWrapper.addClass("grabbing"),l.newPosX=0,l.newRelativeX=0,e(this).css(l.removeTransition()),o=e(this).position(),c.relativePos=o.left,c.offsetX=i(s).x-o.left,c.offsetY=i(s).y-o.top,r("on"),c.sliding=!1,c.targetElement=s.target||s.srcElement}}function s(r){var o,s,a=r.originalEvent||r||t.event;l.newPosX=i(a).x-c.offsetX,l.newPosY=i(a).y-c.offsetY,l.newRelativeX=l.newPosX-c.relativePos,"function"==typeof l.options.startDragging&&c.dragging!==!0&&0!==l.newRelativeX&&(c.dragging=!0,l.options.startDragging.apply(l,[l.$elem])),(l.newRelativeX>8||l.newRelativeX<-8)&&l.browser.isTouch===!0&&(void 0!==a.preventDefault?a.preventDefault():a.returnValue=!1,c.sliding=!0),(l.newPosY>10||l.newPosY<-10)&&c.sliding===!1&&e(n).off("touchmove.owl"),o=function(){return l.newRelativeX/5},s=function(){return l.maximumPixels+l.newRelativeX/5},l.newPosX=Math.max(Math.min(l.newPosX,o()),s()),l.browser.support3d===!0?l.transition3d(l.newPosX):l.css2move(l.newPosX)}function a(n){var i,o,s,a=n.originalEvent||n||t.event;a.target=a.target||a.srcElement,c.dragging=!1,l.browser.isTouch!==!0&&l.$owlWrapper.removeClass("grabbing"),l.dragDirection=l.owl.dragDirection=l.newRelativeX<0?"left":"right",0!==l.newRelativeX&&(i=l.getNewPosition(),l.goTo(i,!1,"drag"),c.targetElement===a.target&&l.browser.isTouch!==!0&&(e(a.target).on("click.disable",function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e(t.target).off("click.disable")}),o=e._data(a.target,"events").click,s=o.pop(),o.splice(0,0,s))),r("off")}var l=this,c={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};l.isCssFinish=!0,l.$elem.on(l.ev_types.start,".owl-wrapper",o)},getNewPosition:function(){var e=this,t=e.closestItem();return t>e.maximumItem?(e.currentItem=e.maximumItem,t=e.maximumItem):e.newPosX>=0&&(t=0,e.currentItem=0),t},closestItem:function(){var t=this,n=t.options.scrollPerPage===!0?t.pagesInArray:t.positionsInArray,i=t.newPosX,r=null;return e.each(n,function(o,s){i-t.itemWidth/20>n[o+1]&&i-t.itemWidth/20<s&&"left"===t.moveDirection()?(r=s,t.currentItem=t.options.scrollPerPage===!0?e.inArray(r,t.positionsInArray):o):i+t.itemWidth/20<s&&i+t.itemWidth/20>(n[o+1]||n[o]-t.itemWidth)&&"right"===t.moveDirection()&&(t.options.scrollPerPage===!0?(r=n[o+1]||n[n.length-1],t.currentItem=e.inArray(r,t.positionsInArray)):(r=n[o+1],t.currentItem=o+1))}),t.currentItem},moveDirection:function(){var e,t=this;return t.newRelativeX<0?(e="right",t.playDirection="next"):(e="left",t.playDirection="prev"),e},customEvents:function(){var e=this;e.$elem.on("owl.next",function(){e.next()}),e.$elem.on("owl.prev",function(){e.prev()}),e.$elem.on("owl.play",function(t,n){e.options.autoPlay=n,e.play(),e.hoverStatus="play"}),e.$elem.on("owl.stop",function(){e.stop(),e.hoverStatus="stop"}),e.$elem.on("owl.goTo",function(t,n){e.goTo(n)}),e.$elem.on("owl.jumpTo",function(t,n){e.jumpTo(n)})},stopOnHover:function(){var e=this;e.options.stopOnHover===!0&&e.browser.isTouch!==!0&&e.options.autoPlay!==!1&&(e.$elem.on("mouseover",function(){e.stop()}),e.$elem.on("mouseout",function(){"stop"!==e.hoverStatus&&e.play()}))},lazyLoad:function(){var t,n,i,r,o,s=this;if(s.options.lazyLoad===!1)return!1;for(t=0;t<s.itemsAmount;t+=1)n=e(s.$owlItems[t]),"loaded"!==n.data("owl-loaded")&&(i=n.data("owl-item"),r=n.find(".lazyOwl"),"string"==typeof r.data("src")?(void 0===n.data("owl-loaded")&&(r.hide(),n.addClass("loading").data("owl-loaded","checked")),o=s.options.lazyFollow===!0?i>=s.currentItem:!0,o&&i<s.currentItem+s.options.items&&r.length&&r.each(function(){s.lazyPreload(n,e(this))})):n.data("owl-loaded","loaded"))},lazyPreload:function(e,n){function i(){e.data("owl-loaded","loaded").removeClass("loading"),n.removeAttr("data-src"),"fade"===s.options.lazyEffect?n.fadeIn(400):n.show(),"function"==typeof s.options.afterLazyLoad&&s.options.afterLazyLoad.apply(this,[s.$elem])}function r(){a+=1,s.completeImg(n.get(0))||o===!0?i():100>=a?t.setTimeout(r,100):i()}var o,s=this,a=0;"DIV"===n.prop("tagName")?(n.css("background-image","url("+n.data("src")+")"),o=!0):n[0].src=n.data("src"),r()},autoHeight:function(){function n(){var n=e(o.$owlItems[o.currentItem]).height();o.wrapperOuter.css("height",n+"px"),o.wrapperOuter.hasClass("autoHeight")||t.setTimeout(function(){o.wrapperOuter.addClass("autoHeight")},0)}function i(){r+=1,o.completeImg(s.get(0))?n():100>=r?t.setTimeout(i,100):o.wrapperOuter.css("height","")}var r,o=this,s=e(o.$owlItems[o.currentItem]).find("img");void 0!==s.get(0)?(r=0,i()):n()},completeImg:function(e){var t;return e.complete?(t=typeof e.naturalWidth,"undefined"!==t&&0===e.naturalWidth?!1:!0):!1},onVisibleItems:function(){var t,n=this;for(n.options.addClassActive===!0&&n.$owlItems.removeClass("active"),n.visibleItems=[],t=n.currentItem;t<n.currentItem+n.options.items;t+=1)n.visibleItems.push(t),n.options.addClassActive===!0&&e(n.$owlItems[t]).addClass("active");n.owl.visibleItems=n.visibleItems},transitionTypes:function(e){var t=this;t.outClass="owl-"+e+"-out",t.inClass="owl-"+e+"-in"},singleItemTransition:function(){function e(e){return{position:"relative",left:e+"px"}}var t=this,n=t.outClass,i=t.inClass,r=t.$owlItems.eq(t.currentItem),o=t.$owlItems.eq(t.prevItem),s=Math.abs(t.positionsInArray[t.currentItem])+t.positionsInArray[t.prevItem],a=Math.abs(t.positionsInArray[t.currentItem])+t.itemWidth/2,l="webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend";t.isTransition=!0,t.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":a+"px","-moz-perspective-origin":a+"px","perspective-origin":a+"px"}),o.css(e(s,10)).addClass(n).on(l,function(){t.endPrev=!0,o.off(l),t.clearTransStyle(o,n)}),r.addClass(i).on(l,function(){t.endCurrent=!0,r.off(l),t.clearTransStyle(r,i)})},clearTransStyle:function(e,t){var n=this;e.css({position:"",left:""}).removeClass(t),n.endPrev&&n.endCurrent&&(n.$owlWrapper.removeClass("owl-origin"),n.endPrev=!1,n.endCurrent=!1,n.isTransition=!1)},owlStatus:function(){var e=this;e.owl={userOptions:e.userOptions,baseElement:e.$elem,userItems:e.$userItems,owlItems:e.$owlItems,currentItem:e.currentItem,prevItem:e.prevItem,visibleItems:e.visibleItems,isTouch:e.browser.isTouch,browser:e.browser,dragDirection:e.dragDirection}},clearEvents:function(){var i=this;i.$elem.off(".owl owl mousedown.disableTextSelect"),e(n).off(".owl owl"),e(t).off("resize",i.resizer)},unWrap:function(){var e=this;0!==e.$elem.children().length&&(e.$owlWrapper.unwrap(),e.$userItems.unwrap().unwrap(),e.owlControls&&e.owlControls.remove()),e.clearEvents(),e.$elem.attr({style:e.$elem.data("owl-originalStyles")||"","class":e.$elem.data("owl-originalClasses")})},destroy:function(){var e=this;e.stop(),t.clearInterval(e.checkVisible),e.unWrap(),e.$elem.removeData()},reinit:function(t){var n=this,i=e.extend({},n.userOptions,t);n.unWrap(),n.init(i,n.$elem)},addItem:function(e,t){var n,i=this;return e?0===i.$elem.children().length?(i.$elem.append(e),i.setVars(),!1):(i.unWrap(),n=void 0===t||-1===t?-1:t,n>=i.$userItems.length||-1===n?i.$userItems.eq(-1).after(e):i.$userItems.eq(n).before(e),i.setVars(),void 0):!1},removeItem:function(e){var t,n=this;return 0===n.$elem.children().length?!1:(t=void 0===e||-1===e?-1:e,n.unWrap(),n.$userItems.eq(t).remove(),n.setVars(),void 0)}};e.fn.owlCarousel=function(t){return this.each(function(){if(e(this).data("owl-init")===!0)return!1;e(this).data("owl-init",!0);var n=Object.create(i);n.init(t,this),e.data(this,"owlCarousel",n)})},e.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:t,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),function(){var e,t,n,i,r;r=function(){var e,t,n,i,r;return r=Leanpub.getWishlist(),e=Leanpub.getBooks(),n=Leanpub.isLoggedIn(),n&&e.indexOf(book_id)>-1?$("#wishlist_button_own").css("display","inline-block"):n&&r.indexOf(book_id)>-1?(i=Leanpub.getUsername(),t="<a href='/u/"+i+"/wishlist' class='wishlist-button generic'>On Your Wish List</a>",$("#wishlist_button_in").css("display","inline-block"),$("#wishlist_button_in").append(t)):n&&$("#wishlist_button_add").css("display","inline-block"),0===$(".wishlist-button:visible").length?$("#wishlist").hide():void 0},t=function(){return setTimeout(function(){return $("#mailchimp-subscribe-form input").prop("disabled",!0)},0)},n=function(){return $("#prospective_reader_survey .row").html("<div class='large-12 columns'><p class='explanation'>You have been successfully subscribed to the mailing list.</p></div>")},e=function(){},i=function(){var e;return e=searchToHash().gift_for,null!=e?$.cookie("giftFor",e,{path:"/"+book_slug}):void 0},$(function(){return $("#wishlist").length>0&&r(),i(),$("#mailchimp-subscribe-form").submit(t).bind("ajax:success",n).bind("ajax:error",e)})}.call(this),function(){!function(){var e;return e=function(){function e(){this.parseCurrentParams(window.location.path),this.checkMatureContent(),this.setActiveLinks(),this.setupLinks(),this.showBooks()}return e.prototype.checkMatureContent=function(){return"erotica"===this.category&&"yes"!==$.cookie("show_mature_content")?(this.hidingMatureContent=!0,window.location.href="/age_verification?redirect_url="+window.location.href):void 0},e.prototype.showBooks=function(){return this.hidingMatureContent||$("#bookstore-view").fadeIn(),$("#bookstore-loading").fadeOut()},e.prototype.setActiveLinks=function(){var e=this;return $(".bookstore-nav-link").each(function(t,n){var i,r,o,s,a;return i=$(n),a=i.data("nav-type"),s=i.data("nav-path"),r=e.isActiveTarget(s,a),"display"===a&&((o=i.data("bookstore-type"))&&e.bookstoreType===o||(r=!1)),r?i.closest("li").addClass("active"):void 0})},e.prototype.setupLinks=function(){return $(".bookstore-nav-link").on("click",function(){return BookstoreNavigator.navigate($(this).data("nav-path"),$(this).data("nav-type"),$(this).data("bookstore-type"))})},e.prototype.isActiveTarget=function(e,t){return this[t]===e},e.prototype.parseCurrentParams=function(){var e,t,n;return t=window.location.pathname,t=-1!==(e=t.indexOf("?"))?t.substr(0,t.indexOf("?")):t,n=t.split("/").slice(2),"bundles"===n[0]?(this.bookstoreType=n[0],this.display=n[1],this.page=n[2]):(this.display=n[0],this.category=n[1],this.language=n[2],this.page=n[3]),this.bookstoreType||(this.bookstoreType="books"),this.display||(this.display="earnings_in_last_7_days"),this.category||(this.category="all"),this.language||(this.language="all"),this.page?void 0:this.page=1},e.prototype.navigate=function(e,t,n){var i;switch(t){case"display":this.display=e;break;case"category":this.category=e;break;case"language":this.language=e}return n&&(this.bookstoreType=n),i="bundles"===this.bookstoreType?"/bookstore/bundles/"+this.display+"/"+this.page:"/bookstore/"+this.display+"/"+this.category+"/"+this.language+"/"+this.page,window.location.href=i},e}(),window.BookstoreNavigator||(window.BookstoreNavigator=new e)}()}.call(this),function(){Leanpub.CheckoutController=void 0}.call(this),Leanpub.CheckoutOldController=function(){var e,t,n,i,r,o,s,a,l,c,u,d,h,f,p={price_per_copy_input:"#purchase_price_before_coupon",taxamo_subtotal_input:"#purchase_taxamo_subtotal",royalty_per_unit_input:"#purchase_royalty_per_unit",cause_royalty_per_unit_input:"#purchase_cause_royalty_per_unit",government_per_unit_input:"#purchase_government_per_unit",price_slider_element:"#purchase_price_before_coupon_slider",government_earnings:".government-earnings",value_element:".ui-slider-value",value_input:".ui-slider-value input",handle_element:".ui-slider-handle",range_element:".ui-slider-range",purchase_form:".purchase_form",total_before_coupon:"#total-before-coupon",savings:"#savings",totals:".total-price",all_totals:"div.total td",paypal_button:"#do_express_checkout_button",charge_credit_card_button:"#charge_credit_card_button",coupon_validity_element:".coupon-validity",coupon_validity_indicator:".coupon-validity .add-on",coupon_code_input:"#purchase_coupon_code",copies_input:"#purchase_quantity",confirm_table:"fieldset.checkout table",free_field_group:"#freeDownload",checkout_fieldset:"fieldset.checkout",free_button:"#purchase_submit",purchase_element:"#purchase",total_before_tax:"tr.subtotal td"},m=200,g={},v=.99,y=1,b=0,_=!1,w=function(e,t){return(t?"":"$")+parseFloat(e).toFixed(2)},C=function(e){return w(e,!0)},x=function(e){var t=parseInt(e);return jQuery.isNumeric(t)&&t>0&&1e3>t?t:1},k=function(e,t){var n=C(e);return jQuery.isNumeric(n)?n:C("function"==jQuery.type(t)?t(a):a)},S=function(e){var t=!1,n=500;return e<g.min+g.min*b?(e=g.min+g.min*b,t=!0):0!=e&&v+v*b>e?(e=v+v*b,t=!0):0>e?(e=0,t=!0):e>n&&(e=n,t=!0),t?e:!1},E=function(e){var t=S(e);return t?t:e},T=function(e){e=parseFloat(e),e/=1+b;var t=0>=e?0:(e*o-s/y)*l;return Math.floor(100*t)/100},N=function(e){e=parseFloat(e),e/=1+b;var t=0>=e?0:(e*o-s/y)*c;return Math.floor(100*t)/100},A=function(e){e=parseFloat(e);var t=0===b?0:e/(1+b)*b;return Math.floor(100*t)/100},I=function(e){e=parseFloat(e);var t=0===e?0:(e/l+s/y)/o;return t+=t*b,Math.ceil(100*t)/100},P=function(e){e=parseFloat(e);var t=0===e?0:E((e/c+s/y)/o);return t+=t*b,Math.ceil(100*t)/100},M=function(e){e=parseFloat(e);var t=e/b;return t=Math.ceil(100*t)/100,price_limit=S(t),jQuery.isNumeric(price_limit)&&(t=price_limit),t},D=function(e){$(p.paypal_button).add(p.charge_credit_card_button)[(e?"remove":"add")+"Class"]("unclickable").attr("disabled",!e)},L=function(){D(!1)},B=function(){D(!0)},F=function(e){return e!=i?!0:void 0},R=function(t){e[(t?"remove":"add")+"Class"]("no_coupon");var n="",i="â";t?(n="valid",i="â",$(".sliders-title-wrapper").hide(),$("#purchase").addClass("coupon")):t||""===$(p.coupon_code_input).val()||(n="invalid",i="â"),$(p.coupon_validity_element).removeClass("valid").removeClass("invalid").addClass(n),$(p.coupon_validity_indicator).text(i)},O=function(e){e.metaKey||(clearTimeout(n),F($(e.target).val())&&(n=setTimeout(j,m)))},j=function(e){clearTimeout(n),(!e||F($(e.target).val()))&&($(p.coupon_validity_indicator).removeClass("valid").removeClass("invalid").empty().spin("tiny"),it())},H=function(){y=x($(this).val()),$(this).val(y),Q(k($(p.price_per_copy_input).val()))},z=function(e){var t=k($(this).val()),n=S(t);jQuery.isNumeric(n)&&(t=n,e.preventDefault()),$(this).val(t),Q(t)},W=function(e){var t=k($(this).val(),I),n=S(I(t));jQuery.isNumeric(n)&&(t=T(n),e.preventDefault()),$(this).val(t),Z(t)},U=function(e){var t=k($(this).val(),P),n=S(P(t));jQuery.isNumeric(n)&&(t=N(n),e.preventDefault()),$(this).val(t),J(t)},V=function(e){var t=k($(this).val(),M),n=S(M(t));jQuery.isNumeric(n)&&(t=A(n),e.preventDefault()),$(this).val(t),et(t)},q=function(e,t){var n=t.value,i=S(n);jQuery.isNumeric(i)&&(n=i,e.preventDefault()),Q(n)},X=function(e,t){var n=t.value,i=S(I(n));jQuery.isNumeric(i)&&(n=T(i),e.preventDefault()),Z(n)},K=function(e,t){var n=t.value,i=S(P(n));jQuery.isNumeric(i)&&(n=N(i),e.preventDefault()),J(n)},Y=function(e,t){var n=t.value,i=S(M(n));return jQuery.isNumeric(i)&&(n=A(i),e.preventDefault()),et(n),!1},G=function(t){b=t/100,0===b?(_=!1,$(p.government_earnings).hide()):e.hasClass("no_coupon")&&(_=!0,$(p.government_earnings).show())},Q=function(t){var n=(t-g.min)/(g.max-g.min);u.data("value",t),r?$(p.taxamo_subtotal_input).val(r):$(p.taxamo_subtotal_input).val(Math.round(100*(t/(1+b)))/100),royaltySliderShown&&h.data("value",T(t)),causeSliderShown&&d.data("value",N(t)),_&&f.data("value",A(t)),u.add(h).add(d).add(f).each(function(){var e=$(this).data("value"),t={},i=100,r=$(this).data("range_color"),o=$.xcolor.gradientlevel(r.min,r.max,Math.min(1,n)*i,i);$(p.range_element,this).css("background-color",o),$(this).slider("value",e),$(p.value_input,this).val(C(e));var s=$(p.value_element,this),a=$(p.handle_element,this).width(),l=s.outerWidth(!0),c=$(this).width(),u=e/g.max,d=l>u*c-a/2;d?(t=jQuery.extend(t,{left:u*c+a/2+parseInt(s.css("margin-right"),10)}),s.closest(".ui-slider-value").addClass("inverse")):(t=jQuery.extend(t,{left:0}),s.closest(".ui-slider-value").removeClass("inverse")),s.css(t)}),e.hasClass("no_coupon")&&(e[(0==t?"add":"remove")+"Class"]("free"),$(p.free_field_group).find(":input").attr("disabled",0!=t)),ot()},Z=function(e){Q(I(e))},J=function(e){Q(P(e))},et=function(e){Q(M(e))},tt=function(){var e=$(p.purchase_form).attr("action")+"/check_double_purchase.js";$.post(e,{username:Leanpub.getUsername},nt,"json")},nt=function(e){e.owned&&$("#double-purchase-warning").show()},it=function(){t&&t.abort(),L(),$(p.all_totals).html("&nbsp;").spin("tiny"),$(p.free_button).parent().spin("tiny");var e=$(p.purchase_form).attr("action")+"/check_coupon.js",n=$(p.coupon_code_input).val();t=jQuery.post(e,{code:n},rt,"json")},rt=function(e){e&&($(p.all_totals).spin(!1),$(p.free_button).parent().spin(!1),R(e.valid),e.valid?(i=e.code,r=e.discounted_price):(i=null,r=null),B(),$("#hidden-coupon-code").val(e.code),ot())},ot=function(){var t,n;i?(t=g.min,n=r):(t=parseFloat($(p.price_per_copy_input).val()),n=t);var o=t-n,s=0===n;$(p.total_before_tax).text(w(n*y)),$(p.total_before_coupon).text(w(t*y)),$(p.savings).text(w(o*y)),r?$(p.totals).text(w(Math.round(100*r*(1+b))/100)):$(p.totals).text(w(n*y)),e[(s?"add":"remove")+"Class"]("free"),$(p.free_field_group).find(":input").attr("disabled",!s)},st=function(e,t){$(p.purchase_form)[("exit"==t?"add":"remove")+"Class"]("form-horizontal")},at=function(){$(p.royalty_per_unit_input).tooltip("hide")},lt=function(){$("#all-gift-fields").removeClass("hide"),royaltySliderShown&&$(".author-earnings").removeClass("hide"),Leanpub.showCoupon&&$("#coupon-input").removeClass("hide"),u=$(p.price_per_copy_input).rangeinput({min:0,unit:"$ ",formatter:C,input_events:{change:z}}),royaltySliderShown&&(h=$(p.royalty_per_unit_input).rangeinput({min:0,unit:"$ ",formatter:C,input_events:{change:W}})),causeSliderShown&&(d=$(p.cause_royalty_per_unit_input).rangeinput({min:0,unit:"$ ",formatter:C,input_events:{change:U}}),$(".cause-earnings").removeClass("hide")),f=$(p.government_per_unit_input).rangeinput({min:0,unit:"$ ",formatter:C,input_events:{change:V}}),$(p.price_slider_value).find("input").val(C($(p.price_per_copy_input).val())),u.add(h).add(d).add(f).each(function(){var e=$('<div class="ui-slider-range"></div><div class="ui-slider-range happy-price"></div>');
$(this).append(e).data("range_color",{min:e.filter(".ui-slider-range:not(.happy-price)").css("background-color"),max:e.filter(".ui-slider-range.happy-price").css("background-color")}),e.remove()}),Q($(p.price_per_copy_input).val()),setTimeout(function(){$(p.royalty_per_unit_input).tooltip({placement:"bottom",trigger:"manual"}).tooltip("show"),setTimeout(function(){at()},4e3)},1500),u.on({slide:q}),royaltySliderShown&&h.on({slide:X}),causeSliderShown&&d.on({slide:K}),f.on({slide:Y});var e=$(p.price_per_copy_input).add(p.royalty_per_unit_input).add(p.government_per_unit_input);e.focus(function(){$(this).select()}).one("mouseup",!1).blur(function(){e.one("mouseup",!1)})},ct=function(t){e=$(t),$(p.price_per_copy_input).add(p.royalty_per_unit_input).css("visibility","visible"),g.min=parseFloat($(p.price_per_copy_input).attr("min")),g.max=parseFloat($(p.price_per_copy_input).attr("max")),o=$(p.purchase_form).data("royaltiesToRevenueRatio"),l=$(p.purchase_form).data("ratioOfRevenueToAuthors"),c=$(p.purchase_form).data("ratioOfRevenueToCauses"),a=$(p.purchase_form).data("suggestedPrice"),s=$(p.purchase_form).data("flatFee"),"undefined"!=typeof _kmq&&($(p.purchase_form).submit(function(){_kmq.push(["record","Proceeded to Payment"])}),$(p.paypal_button).click(function(){_kmq.push(["record","Proceeded to Payment"])})),Leanpub.couponData?(i=Leanpub.couponData.code,$(p.coupon_code_input).val(i)):i=$(p.coupon_code_input).val(),lt(),$(document).on("mediachange.change.mobile",st),$(p.purchase_form).mousedown(function(){at()}),$(p.purchase_form).keypress(function(e){return $(e.originalEvent.target).is($(p.price_per_copy_input).add(p.royalty_per_unit_input).add(p.government_per_unit_input))?13!=e.which:void 0}),$(p.price_per_copy_input).add(p.royalty_per_unit_input).add(p.government_per_unit_input).keypress(function(e){13==e.which&&$(this).blur()}),$(p.coupon_code_input).keydown(O).change(j),$(p.copies_input).change(H),$("html.touch").length&&$(p.price_per_copy_input).add(p.royalty_per_unit_input).add(p.government_per_unit_input).on("touchstart",function(e){e.stopPropagation()}).prop("type","number"),"undefined"!=typeof $(p.coupon_code_input).val()&&it(),tt()};return{init:ct,formatCurrency:w,setVATPercentage:G,updatePrice:Q}}();var hideInputs=function(){Leanpub.checkForUser(),logged_in=Leanpub.isLoggedIn(),$(".show_if_logged_"+(logged_in?"in":"out")).show(),$(".show_if_logged_"+(logged_in?"out":"in")).hide(),$(".hide_if_logged_"+(logged_in?"out":"in")).show(),$(".hide_if_logged_"+(logged_in?"in":"out")).hide(),logged_in&&$(".hide-if-logged-in").hide().find("input").attr("disabled",!0)},setGiftee=function(){var e=$.cookie("giftFor");null!=e&&"undefined"!=typeof e&&($("#purchase_is_gift").attr("checked","checked"),$("#purchase_giftee_email").val(e))},toggleCcForm=function(){cc_btn=$(".payment-method.credit-card"),cc_btn.hasClass("cc-fields-visible")?hideCcForm():showCcForm()},hideCcForm=function(){cc_btn=$(".payment-method.credit-card"),cc_btn.removeClass("cc-fields-visible"),$("#pay-by-credit-card").slideUp(250)},showCcForm=function(){cc_btn=$(".payment-method.credit-card"),cc_btn.addClass("cc-fields-visible"),$("#pay-by-credit-card").slideDown(250)};$(document).ready(function(){var e="#purchase";$(e).length>0&&Leanpub.CheckoutController.init(e),$("#purchase_share_email_with_author").change(function(){var e=$("#purchase_share_email_with_author").prop("checked")?"1":"0";$("#free_purchase_share_email_with_author").val(e)}),$("#purchase_is_gift").change(function(){var e=$("#purchase_is_gift").prop("checked")?"1":"0";$("#free_purchase_is_gift").val(e)}),$("#purchase_giftee_email").change(function(){$("#free_purchase_giftee_email").val($("#purchase_giftee_email").val())}),$("#purchase_gift_note").change(function(){$("#free_purchase_gift_note").val($("#purchase_gift_note").val())}),setGiftee(),$("#purchase_is_gift").prop("checked")&&$("#gift-fields").show(100),$("#purchase_is_gift").change(function(){$("#purchase_is_gift").prop("checked")?$("#gift-fields").show(100):$("#gift-fields").hide(100)}),$("#payment-methods > .credit-card").on("click",toggleCcForm),Leanpub.showCcForm&&showCcForm(),t_0=new Date,hideInputs();for(var t=300;2500>t;t+=300)setTimeout(hideInputs,t)}),function(){var e,t,n,i;(e=document.getElementById("freshness-timestamp"))&&(t=new Date(e.getAttribute("datetime")),n=function(){var e,t,n,i,r;return r=this.seconds,n=this.minutes,t=this.hours,e=this.days,i=this.months,0===n?"Just now!":1===n?"A minute ago":45>n?""+n+" minutes ago":90>n?"~1 hour ago":1440>n?""+t+" hours ago":2880>n?"Yesterday":43200>n?""+e+" days ago":86400>n?"Last month":525960>n?""+i+" months ago":void 0},i=function(){var i,r,o;return o=Math.max(0,Math.floor((new Date-t)/1e3)),i={seconds:o,minutes:Math.floor(o/60),hours:Math.floor(o/3600),days:Math.floor(o/86400),months:Math.floor(o/2628e3)},r=n.call(i),e.innerHTML=r},setInterval(i,6e3),i())}.call(this),function(){var e,t;t=function(){return $("html, body").css("overflow","hidden"),$("#homepage-essay").fadeIn(250)},e=function(){return $("html, body").css("overflow","auto"),$("#homepage-essay").fadeOut(250)},$(function(){var n,i,r,o,s;return n=$("#featured"),i=n.find("#featured_book"),r=i.find(".cms-content"),s=$("#top_books"),o=function(){var e,t,o,a,l;if(i.height("auto"),r.css("overflow","visible").height("auto"),$(this).width()>=768){if(l=s.height(),e=n.height(),t=e-l,0===t)return;return o=0>t?i.height("auto"):r.css("overflow","auto"),a=o.height()-t,o.height(a)}},i&&s&&(o(),$(window).on("resize",o)),document.getElementById("homepage-essay")?(t(),$(".show-home-page").click(e)):void 0})}.call(this),function(){$(function(){return $("#mailchimp-subscribe").bind("ajax:success",function(e,t){return $("#mailchimp-subscribe-button").attr("disabled","disabled").val("You're Subscribed!"),Leanpub.setFlashNotice("alert-info","We have successfully subscribed "+t.email+" to our readers mailing list.")}),$("#mailchimp-unsubscribe").bind("ajax:success",function(e,t){return $("#mailchimp-unsubscribe-button").attr("disabled","disabled").val("You are no longer subscribed"),Leanpub.setFlashNotice("alert-info","We have successfully unsubscribed "+t.email+" from our readers mailing list.")}),$("#mailchimp-subscribe-authors").bind("ajax:success",function(e,t){return $("#mailchimp-subscribe-authors-button").attr("disabled","disabled").val("You're Subscribed!"),Leanpub.setFlashNotice("alert-info","We have successfully subscribed "+t.email+" to our authors mailing list.")}),$("#mailchimp-unsubscribe-authors").bind("ajax:success",function(e,t){return $("#mailchimp-unsubscribe-authors-button").attr("disabled","disabled").val("You are no longer subscribed"),Leanpub.setFlashNotice("alert-info","We have successfully unsubscribed "+t.email+" from our authors mailing list.")})})}.call(this),function(){window.getOffset=function(e){var t,n;if(t=n=0,e.offsetParent)for(t=e.offsetLeft,n=e.offsetTop;e=e.offsetParent;)t+=e.offsetLeft,n+=e.offsetTop;return{left:t,top:n}}}.call(this),function(){var e,t,n,i,r,o;(t=document.getElementById("quick-buy"))&&(o=document.getElementById("quick-buy-trigger"))&&(n=/visible/.test(t.className),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"},i=r[Modernizr.prefixed("transition")],t.addEventListener(i,function(e){var n;if(e.target===t)return/visible/.test(e.target.className)?void 0:null!=(n=e.target.style)?n.display="none":void 0}),e=function(){var e,i,r;return e=o.clientHeight+getOffset(o).top,i=e<window.scrollY,n!==i?(i&&null!=(r=t.style)&&(r.display="block"),setTimeout(function(){return t.className=i?""+t.className+" visible":t.className.replace(/(?:^|\s)visible(?!\S)/,"")},0),n=i):void 0},e(),window.addEventListener("scroll",e),Modernizr.touch&&window.addEventListener("touchmove",e))}.call(this),function(){Leanpub.ShoppingCartController=function(){return{selectors:{addToCartForm:"#add-to-cart-form",editPriceForm:"#edit-price-form",shoppingCartForm:"#edit_shopping_cart",youPayInput:"#you_pay",taxamoSubtotalInput:"#cart_item_taxamo_subtotal",authorEarnsInput:"#author_earns",causeEarns:"#cause_earns",cartTotal:"#cart-total",addButton:".add-to-cart",editItemLinks:".edit-item",valueElement:".ui-slider-value",valueInput:".ui-slider-value input",handleElement:".ui-slider-handle",rangeElement:".ui-slider-range",checkoutForm:"#new_cart_purchase",countryCode:"#cart_purchase_buyer_country_code",creditCard:"#cart_purchase_credit_card_number",checkoutButtons:"#charge_credit_card_button, #free_button, #do_express_checkout_button"},focusedElementId:null,vatPercentage:Leanpub.VATpricing.vat_percentage,purchaseNumCopies:1,lowestNonZeroPrice:.99,keyPressWaitTime:200,HeroSliders:null,ModalSliders:null,submitPurchaseOnSuccess:null,disableButtons:function(){return $(this.selectors.addButton).attr("disabled","disabled"),$(this.selectors.editItemLinks).css("pointer-events","none"),$(this.selectors.checkoutButtons).attr("disabled","disabled")},enableButtons:function(){return $(this.selectors.addButton).removeAttr("disabled"),$(this.selectors.editItemLinks).css("pointer-events","auto"),$(this.selectors.checkoutButtons).removeAttr("disabled")},addCartItem:function(e,t){return this.disableButtons(),e.vat_percentage=this.vatPercentage,t&&(e.coupon_id=t),$.ajax({url:"/cart_items",type:"post",data:e,success:this.goToShoppingCart,error:this.addCartItemError})},updateCartItem:function(e){return e.vat_percentage=this.vatPercentage,$("#edit-price-form").hide(),this.spinner("start"),$.ajax({url:"/cart_items/"+e.cart_item_id,type:"put",data:e,success:this.onUpdateSuccess(e.cart_item_id,e.price),error:function(e,t){return console.log(e,t)}})},onUpdateSuccess:function(e,t){return $(".total-price").filter("[data-cart-item-id='"+e+"']").text("$"+t),this.spinner("stop"),$(".modal-state:checked").prop("checked",!1).change(),$("body").removeClass("noscroll"),Leanpub.setFlashNotice("alert-info","Successfully changed item price.",!0)},addCartItemError:function(e){var t;return t=JSON.parse(e.responseText),Leanpub.ShoppingCartController.enableButtons(),Leanpub.setFlashNotice("alert-error",t.flash,!0),Leanpub.lastNotice=t.flash},deleteCartItem:function(e){var t,n=this;return this.disableButtons(),confirm("Are you sure you want to delete this item from your cart?")?(t={cart_item_id:e},$.ajax({url:"/cart_items/"+e,type:"delete",data:t,success:function(){return n.onDeleteSuccess(e)},error:this.onDeleteError})):this.enableButtons()},onDeleteSuccess:function(e){var t,n;return $("input:hidden[value="+e+"]").remove(),$(".cart-item-wrapper[data-cart-item-id='"+e+"']").remove(),0===$("#cart-items").children().length&&$("#cart-title").remove(),Leanpub.ShoppingCartController.enableButtons(),Leanpub.setFlashNotice("alert-info","Successfully removed item from cart.",!0),t=parseInt($(Leanpub.ShoppingCartController.selectors.cartTotal).text()),n=isNaN(t)?0:t-1,$(Leanpub.ShoppingCartController.selectors.cartTotal).text(n)},onDeleteError:function(e){var t;return t=JSON.parse(e.responseText),Leanpub.ShoppingCartController.enableButtons(),Leanpub.setFlashNotice("alert-error",t.flash,!0),Leanpub.lastNotice=t.flash},updateCart:function(){return $(this.selectors.shoppingCartForm).submit()},submitPurchase:function(e){return Leanpub.ShoppingCartController.submitPurchaseOnSuccess=$(e.currentTarget),Leanpub.ShoppingCartController.updateCart()},goToShoppingCart:function(){return window.location.href="/shopping_cart/"},spinner:function(e,t){var n,i;switch(null==t&&(t=""),n=$(".spinner-container"+t),i=$(".spinner"+t),e){case"start":return n.show(),i.show().spin("large");case"stop":return n.fadeOut(250),i.fadeOut(250).spin(!1)}},requestPackageData:function(e,t,n,i){return null==i&&(i=null),$.ajax({url:"/"+e+"/packages/"+t+"/fetch_details",type:"GET",data:{coupon_id:n},success:function(){return Leanpub.ShoppingCartController.initializeAddToCart("modal",".modal-inner",i),Leanpub.ShoppingCartController.spinner("stop"),Leanpub.ShoppingCartController.initializeModal(),Leanpub.VATpricing.updateModalPrices()},error:function(e,t){return console.log(e,t)}})},requestCartableData:function(e){return $.ajax({url:""+e+"/fetch_details",type:"GET",data:{cartable_id:e},success:function(){return Leanpub.ShoppingCartController.initializeAddToCart("modal",".modal-inner"),Leanpub.ShoppingCartController.spinner("stop"),Leanpub.ShoppingCartController.initializeModal(),Leanpub.VATpricing.updateModalPrices(),$(".modal-inner").find(".purchase-info").show()},error:function(e,t){return console.log(e,t)}})},requestCartItemData:function(e){return $.ajax({url:"/cart_items/"+e+"/fetch_details",type:"GET",data:{},success:function(){return Leanpub.ShoppingCartController.initializeAddToCart("modal-edit","#edit-price-form"),Leanpub.ShoppingCartController.spinner("stop"),Leanpub.ShoppingCartController.initializeModal(),Leanpub.VATpricing.updatePrices(),$("#edit-price-form").show()},error:function(e,t){return console.log(e,t)}})},moveFromList:function(e){return $.ajax({url:"/wishlist/move_to_cart/"+e.wishlistId,type:"get",data:e,success:this.goToShoppingCart,error:function(e,t){return console.log(e,t)}})},initializeModal:function(){return $(".modal-close").on("click",function(){return $("body").removeClass("noscroll")}),$(".modal-window").on("click",function(){return $(".modal-state:checked").prop("checked",!1).change(),$("body").removeClass("noscroll")}),$(".modal-inner").on("click",function(e){return e.stopPropagation()})},showFeatured:function(){return this.spinner("stop"),$(".modal-inner").find(".purchase-info").show(),this.initializeAddToCart("modal",".modal-inner")},initializeFreeButtons:function(){return $(".add-to-cart-free").on("click",function(){var e,t;return t=$(this).data(),e={cartable_type:t.cartableType,cartable_id:t.cartableId,price:0,taxamo_subtotal:0},Leanpub.ShoppingCartController.addCartItem(e)})},initializeAddToCartModalButtons:function(){return $(".add-to-cart-modal").on("click",function(){var e,t,n;switch(n=$(this).data(),$("#cart-modal-switch").prop("checked",!0),$(".modal-inner").find(".purchase-info").hide(),$("body").addClass("noscroll"),Leanpub.ShoppingCartController.spinner("start"),n.type){case"featured":return null===Leanpub.ShoppingCartController.ModalSliders?Leanpub.ShoppingCartController.showFeatured():(Leanpub.ShoppingCartController.spinner("stop"),$(".modal-inner").find(".purchase-info").show());case"quick-buy":return null!=n.cartableId?Leanpub.ShoppingCartController.requestCartableData(n.cartableId):Leanpub.ShoppingCartController.requestPackageData(n.bookSlug,n.packageSlug,n.couponId);case"package":return t=$(this).closest(".package-list-item"),Leanpub.ShoppingCartController.requestPackageData(t.data().bookSlug,t.data().packageSlug,t.data().couponId);case"wishlist":return e=$(this).closest(".book").data(),Leanpub.ShoppingCartController.requestPackageData(e.bookSlug,e.packageSlug,e.wishlistItemId)}})},initializeEditCartItemButtons:function(){return $(".edit-price-button").each(function(){return $(this).filter("[data-cart-item-id='"+$(this).data("cartItemId")+"']").on("click",function(e){var t;return e.stopPropagation(),t=$(e.target).data("cartItemId"),$("#cart-modal-switch").prop("checked",!0),$("#edit-price-form").hide(),$("body").addClass("noscroll"),Leanpub.ShoppingCartController.spinner("start"),Leanpub.ShoppingCartController.requestCartItemData(t)})})},initializeAddToCart:function(e,t,n){switch(null==n&&(n=null),e){case"modal":return this.ModalSliders=new Leanpub.SliderController(e,t,this.vatPercentage,n);case"modal-edit":return this.ModalSliders=new Leanpub.SliderController(e,t,this.vatPercentage);case"hero":return this.HeroSliders=new Leanpub.SliderController(e,t,this.vatPercentage)}},setVATPercentage:function(e){var t,n;return this.vatPercentage=e,null!=(t=this.ModalSliders)&&t.setVATPercentage(e),null!=(n=this.HeroSliders)?n.setVATPercentage(e):void 0},toggleCheckoutForm:function(e){return $(this.selectors.checkoutForm+" :input").prop("readonly",!e),e?$(this.selectors.checkoutForm+" input[type='submit']").removeAttr("disabled"):$(this.selectors.checkoutForm+" input[type='submit']").attr("disabled","disabled")},recalculateTaxamoCheckout:function(e){var t,n,i=this;return this.spinner("start",".cc"),this.toggleCheckoutForm(!1),t={country_code:$(Leanpub.ShoppingCartController.selectors.countryCode).val(),credit_card_prefix:null!=(n=$(Leanpub.ShoppingCartController.selectors.creditCard).val())?n.slice(0,8):void 0},$.ajax({url:"/shopping_cart/"+e+"/update_vat",type:"post",data:t,success:function(){return i.spinner("stop",".cc"),i.toggleCheckoutForm(!0)},error:function(e,t){return i.spinner("stop",".cc"),i.toggleCheckoutForm(!0),console.log(e,t)}})},getIndexForGift:function(e){return e=e.slice(0,-"_is_gift".length),parseInt(e[e.length-1])},getGiftFields:function(e){var t;return t=Leanpub.ShoppingCartController.getIndexForGift(e.id),$(".gift-fields[data-index='"+t+"']")},toggleGiftFields:function(e){var t;return t=Leanpub.ShoppingCartController.getGiftFields(e),e.checked?t.show(100):t.hide(100)},clearEventHandlers:function(){return $(".shopping_cart_cart_items_is_gift").find(":input").off("click"),$(".email-wrapper, .note-wrapper").off("focusout"),$(".is-gift-checkbox").off("click"),$(".delete-from-cart").off("click"),$(this.selectors.checkoutButtons).off("click"),$(this.selectors.shoppingCartForm).off("ajax:success"),$(this.selectors.shoppingCartForm).off("ajax:error"),$("#cart_purchase_buyer_country_code").off("change"),$("#cart_purchase_credit_card_number").off("change")},initializeShoppingCart:function(){var e=this;return this.clearEventHandlers(),Leanpub.ShoppingCartController.focusedElementId&&($(Leanpub.ShoppingCartController.focusedElementId).focus(),Leanpub.ShoppingCartController.focusedElementId=null),$(".shopping_cart_cart_items_is_gift").find(":input").on("click",function(){return Leanpub.ShoppingCartController.toggleGiftFields(this)}),$(".email-wrapper, .note-wrapper").focusout(function(e){var t;return Leanpub.ShoppingCartController.focusedElementId="#"+(null!=(t=e.relatedTarget)?t.id:void 0),Leanpub.ShoppingCartController.updateCart()}),$(".is-gift-checkbox").on("click",function(){return $(this).is(":checked")?void 0:($(".email-wrapper, .note-wrapper").find("input, textarea").val(""),Leanpub.ShoppingCartController.updateCart())}),$(".delete-from-cart").on("click",function(){return Leanpub.ShoppingCartController.deleteCartItem($(this).data("cart-item-id"))}),$(this.selectors.checkoutButtons).on("click",function(e){return Leanpub.ShoppingCartController.disableButtons(),Leanpub.ShoppingCartController.submitPurchase(e),e.preventDefault()}),$(this.selectors.shoppingCartForm).on("ajax:success",function(){var t;return e.submitPurchaseOnSuccess?(t=$("<input>").attr("type","hidden").attr("name",e.submitPurchaseOnSuccess.attr("name")).val("1"),$(e.selectors.checkoutForm).append($(t)),e.submitPurchaseOnSuccess=null,$(e.selectors.checkoutForm).submit()):e.enableButtons()}),$(this.selectors.shoppingCartForm).on("ajax:error",function(){return e.enableButtons(),e.submitPurchaseOnSuccess=null,Leanpub.setFlashNotice("alert-error","Please fix the errors in your shopping cart.",!0)}),$("#cart_purchase_buyer_country_code").on("change",function(){return Leanpub.ShoppingCartController.recalculateTaxamoCheckout(shopping_cart_id)}),$("#cart_purchase_credit_card_number").on("change",function(){return Leanpub.ShoppingCartController.recalculateTaxamoCheckout(shopping_cart_id)}),Leanpub.isLoggedIn()&&$(".hide-if-logged-in").hide(),$("#cart_purchase_buyer_country_code").val()?void 0:$("#cart_purchase_buyer_country_code").val(Leanpub.getCountryCode()).trigger("change")}}}()}.call(this),function(){function e(e){if(i)return i[e];var t=document.cookie.split("; ");i={};for(var n,r=t.length-1;r>=0;r--)n=t[r].split("="),i[n[0]]=decodeURIComponent(n[1]);return i[e]}function t(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var o=escape(t)+(null==n?"":"; expires="+r.toUTCString());document.cookie=e+"="+o,i=null}function n(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",i=null}var i;window.readCookie=e,window.writeCookie=t,window.deleteCookie=n}(),function(){var e,t,n,i,r,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};try{n=null!=(i=JSON.parse(readCookie("user-info")))?i.username:void 0}catch(s){return e=s,void 0}("undefined"!=typeof authorUsernames&&null!==authorUsernames&&o.call(authorUsernames,n)>=0||"undefined"!=typeof editorUsernames&&null!==editorUsernames&&o.call(editorUsernames,n)>=0)&&(t=document.getElementById("edit-book"),null!=t&&null!=(r=t.style)&&(r.display="block"))}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Leanpub.SliderController=function(){function t(t,n,i,r){switch(this.type=t,this.target=n,this.vat=null!=i?i:0,this.wishlistId=null!=r?r:null,this.handleCauseEarnsSlide=e(this.handleCauseEarnsSlide,this),this.handleCauseEarnsInputChange=e(this.handleCauseEarnsInputChange,this),this.handleAuthorEarnsSlide=e(this.handleAuthorEarnsSlide,this),this.handleAuthorEarnsInputChange=e(this.handleAuthorEarnsInputChange,this),this.handleYouPaySlide=e(this.handleYouPaySlide,this),this.handleYouPayInputChange=e(this.handleYouPayInputChange,this),this.formatCurrencyWithoutUnit=e(this.formatCurrencyWithoutUnit,this),this.vatPercentage=this.vat,this.initializeSliders(),this.type){case"modal":this.addToCartButton();break;case"modal-edit":this.editSubmitButton();break;case"hero":this.addToCartButton()}$("html.touch").length&&$("you_pay_"+this.type).add("author_earns_"+this.type).add("cause_earns_"+this.type).on("touchstart",function(e){return e.stopPropagation()}).prop("type","number")}return t.prototype.debugName=null,t.prototype.selectors={valueElement:".ui-slider-value",valueInput:".ui-slider-value input",handleElement:".ui-slider-handle",rangeElement:".ui-slider-range",youPaySlider:".you_pay",authorEarnsSlider:".author_earns",causeEarnsSlider:".cause_earns",youPayInput:".you_pay",taxamoSubtotalInput:"#cart_item_taxamo_subtotal",authorEarnsInput:".author_earns",causeEarns:".cause_earns",editPriceForm:"#edit-price-form"},t.prototype.youPaySliderElement=null,t.prototype.youPayInputElement=null,t.prototype.taxamoSubtotalElement=null,t.prototype.authorEarnsSliderElement=null,t.prototype.causeEarnsSliderElement=null,t.prototype.vatPercentage=Leanpub.VATpricing.vat_percentage,t.prototype.purchaseNumCopies=1,t.prototype.lowestNonZeroPrice=.99,t.prototype.keyPressWaitTime=200,t.prototype.addToCartButton=function(){var e=this;return $(this.target).find(".add-to-cart").on("click",function(t){var n,i;return i=$(t.target).data(),n={cartable_type:i.cartableType,cartable_id:i.cartableId,price:$("#you_pay_"+e.type).val(),taxamo_subtotal:e.taxamoSubtotalElement.val()},$(e.target).parents("#wishlist-modal")&&e.wishlistId?(n.wishlistId=e.wishlistId,Leanpub.ShoppingCartController.moveFromList(n,e.cartItem.coupon.id)):Leanpub.ShoppingCartController.addCartItem(n,e.cartItem.coupon.id)})},t.prototype.editSubmitButton=function(){var e=this;return $(".edit-item-submit").on("click",function(t){var n;return n={cart_item_id:$(t.target).data("cart-item-id"),price:$("#you_pay_"+e.type).val(),taxamo_subtotal:e.taxamoSubtotalElement.val()},Leanpub.ShoppingCartController.updateCartItem(n)})},t.prototype.initializeCartable=function(){var e,t;return t={},e={cartable:{priceRange:{}},coupon:{}},this.target===this.selectors.editPriceForm?(t=this.target,e.price=$(t).data("total-price"),e.taxamo_subtotal=$(t).data("taxamo-subtotal")):t=$(this.target).find(".add-to-cart-form"),e.cartable.royaltySliderShown=$(t).data("show-what-author-gets"),e.cartable.causeSliderShown=$(t).data("show-what-cause-gets"),e.cartable.priceRange.min=$(t).data("coupon-min"),(null===e.cartable.priceRange.min||void 0===e.cartable.priceRange.min)&&(e.cartable.priceRange.min=$(t).data("min")),e.cartable.priceRange.max=$(t).data("max"),e.cartable.suggestedPrice=$(t).data("suggested-price"),e.coupon.discount=$(t).data("coupon-min"),e.coupon.id=$(t).data("coupon-id"),e.cartable.royaltyToRevenueRatio=$(t).data("royalties-to-revenue-ratio"),e.cartable.authorRoyaltyRatio=$(t).data("ratio-of-revenue-to-authors"),e.cartable.causeRoyaltyRatio=$(t).data("ratio-of-revenue-to-causes"),e.cartable.flatFee=$(t).data("flat-fee"),e},t.prototype.initializeSliders=function(){var e,t,n,i,r,o;return this.cartItem=this.initializeCartable(),n=$(this.target).find(".sliders-wrapper"),this.target===this.selectors.editPriceForm?o=this.cartItem.price:(o=this.cartItem.coupon.discount,(null===o||void 0===o)&&(o=this.cartItem.cartable.suggestedPrice)),o*=1+this.vatPercentage,r=n.find(this.selectors.youPaySlider),r.attr("id","you_pay_"+this.type),this.youPaySliderElement=$(r).rangeinput({min:0,unit:"$ ",formatter:this.formatCurrencyWithoutUnit,input_events:{change:this.handleYouPayInputChange}}),this.taxamoSubtotalElement=$(this.selectors.taxamoSubtotalInput),("undefined"!=typeof royaltySliderShown&&null!==royaltySliderShown||this.cartItem.cartable.royaltySliderShown)&&(e=n.find(this.selectors.authorEarnsSlider),e.attr("id","author_earns_"+this.type),this.authorEarnsSliderElement=$(e).rangeinput({min:0,unit:"$ ",formatter:this.formatCurrencyWithoutUnit,input_events:{change:this.handleAuthorEarnsInputChange}})),("undefined"!=typeof causeSliderShown&&null!==causeSliderShown||this.cartItem.cartable.causeSliderShown)&&(t=n.find(this.selectors.causeEarnsSlider),t.attr("id","cause_earns_"+this.type),this.causeEarnsSliderElement=$(t).rangeinput({min:0,unit:"$ ",formatter:this.formatCurrencyWithoutUnit,input_events:{change:this.handleCauseEarnsInputChange}})),i=n.find(this.selectors.youPayInput),this.youPayInputElement=i,i.val(this.formatCurrencyWithoutUnit(o)),this.youPaySliderElement.add(this.authorEarnsSliderElement).add(this.causeEarnsSliderElement).each(function(){var e;return e=$('<div class="ui-slider-range"></div><div class="ui-slider-range happy-price"></div>'),$(this).append(e).data("range_color",{min:e.filter(".ui-slider-range:not(.happy-price)").css("background-color"),max:e.filter(".ui-slider-range.happy-price").css("background-color")}),e.remove()}),this.updatePrice(i.val()),this.youPaySliderElement.on({slide:this.handleYouPaySlide}),("undefined"!=typeof royaltySliderShown&&null!==royaltySliderShown||this.cartItem.cartable.royaltySliderShown)&&this.authorEarnsSliderElement.on({slide:this.handleAuthorEarnsSlide}),"undefined"!=typeof causeSliderShown&&null!==causeSliderShown||this.cartItem.cartable.causeSliderShown?this.causeEarnsSliderElement.on({slide:this.handleCauseEarnsSlide}):void 0},t.prototype.updatePrice=function(e){var t,n;return n=(e-this.cartItem.cartable.priceRange.min)/(this.cartItem.cartable.priceRange.max-this.cartItem.cartable.priceRange.min),this.youPaySliderElement.data("value",e),$(this.selectors.taxamoSubtotalInput).val(Math.round(100*(e/(1+this.vatPercentage)))/100),("undefined"!=typeof royaltySliderShown&&null!==royaltySliderShown||this.cartItem.cartable.royaltySliderShown)&&this.authorEarnsSliderElement.data("value",this.authorEarningsFromPrice(e)),("undefined"!=typeof causeSliderShown&&null!==causeSliderShown||this.cartItem.cartable.causeSliderShown)&&this.causeEarnsSliderElement.data("value",this.causeEarningsFromPrice(e)),t=this,this.youPaySliderElement.add(this.authorEarnsSliderElement).add(this.causeEarnsSliderElement).each(function(){var e,i,r,o,s,a,l,c,u,d,h;if(null!==this)return o=$(this).data("value"),d={},e=100,a=$(this).data("range_color"),r=$.xcolor.gradientlevel(a.min,a.max,Math.min(1,n)*e,e),$(t.selectors.rangeElement,this).css("background-color",r),$(this).slider("value",o),$(t.selectors.valueInput,this).val(t.formatCurrencyWithoutUnit(o)),u=$(t.selectors.valueElement,this),i=$(t.selectors.handleElement,this).width(),h=u.outerWidth(!0),c=$(this).width(),s=o/t.cartItem.cartable.priceRange.max,l=h>s*c-i/2,l?(d=jQuery.extend(d,{left:s*c+i/2+parseInt(u.css("margin-right"),10)}),u.closest(t.selectors.valueElement).addClass("inverse")):(d=jQuery.extend(d,{left:0}),u.closest(t.selectors.valueElement).removeClass("inverse")),u.css(d)})},t.prototype.formatCurrency=function(e,t){return(t?"":"$")+parseFloat(e).toFixed(2)},t.prototype.formatCurrencyWithoutUnit=function(e){return this.formatCurrency(e,!0)},t.prototype.sanitizePrice=function(e,t){var n,i;return i=this.formatCurrencyWithoutUnit(e),n="function"===jQuery.type(t)?t(this.cartItem.cartable.suggestedPrice):this.cartItem.cartable.suggestedPrice,$.isNumeric(i)?i:n},t.prototype.handleYouPayInputChange=function(e){var t,n;return t=this.sanitizePrice($(e.currentTarget).val()),n=this.subjectToPriceLimiting(t),jQuery.isNumeric(n)&&(t=n,e.preventDefault()),$(e.currentTarget).val(t),this.updatePrice(t)},t.prototype.handleYouPaySlide=function(e,t){var n,i;return n=t.value,i=this.subjectToPriceLimiting(n),jQuery.isNumeric(i)&&(n=i,e.preventDefault()),this.updatePrice(n)},t.prototype.handleAuthorEarnsInputChange=function(e){var t,n;return t=this.sanitizePrice($(e.currentTarget).val(),this.priceFromAuthorEarnings),n=this.subjectToPriceLimiting(this.priceFromAuthorEarnings(t)),jQuery.isNumeric(n)&&(t=this.authorEarningsFromPrice(n),e.preventDefault),$(e.currentTarget).val(t),this.updateAuthorEarnings(t)},t.prototype.handleAuthorEarnsSlide=function(e,t){var n,i;return n=t.value,i=this.subjectToPriceLimiting(this.priceFromAuthorEarnings(n)),jQuery.isNumeric(i)&&(n=this.authorEarningsFromPrice(i),e.preventDefault()),this.updateAuthorEarnings(n)},t.prototype.handleCauseEarnsInputChange=function(e){var t,n;return t=this.sanitizePrice($(e.currentTarget).val(),this.priceFromCauseEarnings),n=this.subjectToPriceLimiting(this.priceFromCauseEarnings(t)),jQuery.isNumeric(n)&&(t=this.causeEarningsFromPrice(n),e.preventDefault()),$(e.currentTarget).val(t),this.updateCauseEarnings(t)},t.prototype.handleCauseEarnsSlide=function(e,t){var n,i;return n=t.value,i=this.subjectToPriceLimiting(this.priceFromCauseEarnings(n)),jQuery.isNumeric(i)&&(n=this.causeEarningsFromPrice(i),e.preventDefault()),this.updateCauseEarnings(n)},t.prototype.subjectToPriceLimiting=function(e){var t,n;return t=!1,n=500,e=parseFloat(e),e<this.cartItem.cartable.priceRange.min+this.cartItem.cartable.priceRange.min*this.vatPercentage?(e=this.cartItem.cartable.priceRange.min+this.cartItem.cartable.priceRange.min*this.vatPercentage,t=!0):0!==e&&e<this.lowestNonZeroPrice+this.lowestNonZeroPrice*this.vatPercentage&&(e=this.lowestNonZeroPrice+this.lowestNonZeroPrice*this.vatPercentage,t=!0),0>e?e=0:e>n&&(e=n,t=!0),t?e:!1},t.prototype.priceLimitedPrice=function(e){var t;return t=this.subjectToPriceLimiting(e),t?t:e},t.prototype.authorEarningsFromPrice=function(e){var t;return e=parseFloat(e),e/=1+this.vatPercentage,t=0>=e?0:(e*this.cartItem.cartable.royaltyToRevenueRatio-this.cartItem.cartable.flatFee/this.purchaseNumCopies)*this.cartItem.cartable.authorRoyaltyRatio,Math.floor(100*t)/100},t.prototype.causeEarningsFromPrice=function(e){var t;return e=parseFloat(e),e/=1+this.vatPercentage,t=0>=e?0:(e*this.cartItem.cartable.royaltyToRevenueRatio-this.cartItem.cartable.flatFee/this.purchaseNumCopies)*this.cartItem.cartable.causeRoyaltyRatio},t.prototype.priceFromAuthorEarnings=function(e){var t;return e=parseFloat(e),t=0===e?0:(e/this.cartItem.cartable.authorRoyaltyRatio+this.cartItem.cartable.flatFee/this.purchaseNumCopies)/this.cartItem.cartable.royaltyToRevenueRatio,t+=t*this.vatPercentage,Math.ceil(100*t)/100},t.prototype.priceFromCauseEarnings=function(e){var t;return e=parseFloat(e),t=0===e?0:this.priceLimitedPrice((e/this.cartItem.cartable.causeRoyaltyRatio+this.cartItem.cartable.flatFee/this.purchaseNumCopies)/this.cartItem.cartable.royaltyToRevenueRatio),t+=t*this.vatPercentage,Math.ceil(100*t)/100},t.prototype.updateAuthorEarnings=function(e){return this.updatePrice(this.priceFromAuthorEarnings(e))},t.prototype.updateCauseEarnings=function(e){return this.updatePrice(this.priceFromCauseEarnings(e))},t.prototype.setVATPercentage=function(e){var t;return this.vatPercentage=e,t=this.cartItem.price||this.cartItem.cartable.suggestedPrice,this.updatePrice(t*(1+this.vatPercentage))},t}()}.call(this),function(){$(function(){return $("#receipt-button").click(function(){return setTimeout($("#receipt-button").val("Sending..."),1)}),$("#receipt-form").bind("ajax:success",function(e,t){return $("#receipt-button").attr("disabled","disabled").val("Receipt sent"),Leanpub.setFlashNotice("alert-info","We have sent a receipt to "+t.email+". It should arrive in the next 10 minutes or so.",!0)}),$("#receipt-form").bind("ajax:error",function(e,t){var n;return n=$.parseJSON(t.responseText),$("#receipt-button").removeAttr("disabled").html("Send me a receipt"),Leanpub.setFlashNotice("alert-error","There was an error while sending a receipt to "+n.email+".",!0)
}),$("#custom-info-link").click(function(e){return $("#custom-receipt-info-input").show(250),$("#custom-info-link").hide(),e.preventDefault()}),$(".share_email_with_author").bind("ajax:success",function(e){var t;return t=$(e.currentTarget).find(".share_email_with_author-button"),t.removeAttr("data-disable-with"),t.attr("disabled","disabled").val("Email Shared!"),Leanpub.setFlashNotice("alert-info","We have successfully shared your email.",!0)}),$(".share_email_with_author").bind("ajax:error",function(e){var t;return t=$(e.currentTarget).find(".share_email_with_author-button"),t.removeAttr("disabled").val("Share Email"),Leanpub.setFlashNotice("alert-error","There was an error sharing your email.",!0)})})}.call(this),function(){}.call(this);