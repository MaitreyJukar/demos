/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> !*/
var g_strAmp = "&";
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+g_strAmp+"MMplayerType="+ad+g_strAmp+"MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=g_strAmp+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=g_strAmp+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();

if(typeof(SpeechStream) =="undefined"){ var SpeechStream = new function(){};}var baa ="r\x77DontA\x6cter";var caa ="r\x77T\x48c\x6fmp";var daa ="r\x77THgen";var eaa ="r\x77THpgen";var faa = ["ScanSoft Emily_Full_22kHz","ScanSoft Samantha_Full_22kHz","ScanSoft Paulina_Full_22kHz","ScanSoft Isabel_Full_22kHz","ScanSoft Virginie_Full_22kHz","ScanSoft Julie_Full_22kHz","ScanSoft Steffi_Full_22kHz","ScanSoft Silvia_Full_22kHz","ScanSoft Claire_Full_22kHz","ScanSoft Ingrid_Full_22kHz","ScanSoft Karen_Full_22kHz","ScanSoft Raquel_Full_22kHz","ScanSoft Joana_Full_22kHz","Vocalizer Expressive Yuri Premium High 22kHz","Vocalizer Expressive Ewa Premium High 22kHz","Vocalizer Expressive Tarik Premium High 22kHz","Vocalizer Expressive Tian-tian Premium High 22kHz","Vocalizer Expressive Sora Premium High 22kHz"]; var gaa = [ ["\x43lick\x20\x54\x6f\x20Spe\x61k\x20M\x6fde","\x53elect\x20this\x20then\x20cli\x63k\x20anywher\x65\x20in\x20the\x20bo\x6fk\x20t\x6f\x20st\x61rt\x20rea\x64ing\x20text","\x48az\x20cli\x63\x20para\x20el\x20mo\x64\x6f\x20\x68abla\x64o"], ["\x53peak\x20The\x20Current\x20Select\x69on","\x53p\x65ak\x20t\x68e\x20c\x75rrent\x20s\x65lection","\x4ceer\x20en\x20voz\x20alta\x20e\x6c\x20texto\x20s\x65\x6c\x65\x63cionad\x6f"], ["\x50aus\x65\x20Sp\x65ech","\x50ause\x20\x53peech","\x44isc\x75rso\x20\x64e\x20paus\x61"], ["\x53top\x20S\x70ee\x63h","\x53tops\x20speec\x68\x20playba\x63k","\x50\x61rar\x20v\x6fz"], ["\x54ranslat\x65\x20W\x6frd","\x44oub\x6ce-c\x6ci\x63k\x20a\x20word\x20in\x20t\x68e\x20book\x20and\x20\x63lick\x20this\x20\x69con\n"+"t\x6f\x20translat\x65\x20t\x68e\x20\x77ord\x20into\x20\x53panish","\x54raducir\x20pa\x6cabr\x61"], ["\x46act\x20Fin\x64er","\x53elect\x20som\x65\x20text\x20\x69n\x20the\x20book\x20and\x20click\x20t\x68\x69s\x20i\x63on\x20to\n"+"\x70\x65rform\x20a\x20Goo\x67le\x20search","\x42usc\x61dor\x20d\x65\x20datos"], ["\x44iction\x61ry","\x44ou\x62\x6ce-cl\x69ck\x20a\x20\x77\x6fr\x64\x20in\x20t\x68e\x20book\x20and\x20click\x20th\x69s\x20icon\x20to\n"+"s\x65e\x20d\x69ctionar\x79\x20\x64efinit\x69ons","\x44i\x63c\x69onario"], ["\x48ig\x68\x6cig\x68t\x20C\x79an","\x4da\x6be\x20a\x20sele\x63tion\x20in\x20the\x20book\x20and\x20click\x20this\x20ic\x6fn\x20to\n"+"\x63reate\x20a\x20b\x6cue\x20\x68ig\x68l\x69ght","\x52ealc\x65\x20azul\x20v\x65r\x64\x6fso"], ["\x48i\x67hli\x67ht\x20\x4dagent\x61","\x4da\x6be\x20a\x20sel\x65ction\x20in\x20the\x20\x62oo\x6b\x20and\x20click\x20this\x20icon\x20to\n"+"\x63reate\x20\x61\x20pink\x20\x68\x69gh\x6cight","\x52e\x61l\x63e\x20morado"], ["\x48ig\x68light\x20Yello\x77","\x4dak\x65\x20a\x20se\x6cection\x20in\x20th\x65\x20boo\x6b\x20and\x20clic\x6b\x20this\x20ic\x6fn\x20t\x6f\n"+"\x63reat\x65\x20a\x20yel\x6co\x77\x20highli\x67\x68t","\x52ealce\x20\x61m\x61rillo"], ["\x48ighlig\x68t\x20Gr\x65en","\x4dake\x20a\x20select\x69on\x20in\x20th\x65\x20book\x20\x61n\x64\x20click\x20this\x20\x69con\x20to\n"+"\x63reate\x20\x61\x20gr\x65en\x20\x68ighlig\x68t","\x52\x65alce\x20v\x65rde"], ["\x52\x65move\x20H\x69g\x68lights","\x52\x65move\x20\x61ll\x20your\x20\x68\x69\x67\x68l\x69g\x68ts\x20\x66ro\x6d\x20th\x69s\x20page","\x42orrar\x20re\x61lc\x65"], ["\x43o\x6cle\x63t\x20High\x6cights","\x43ollect\x20\x61\x6cl\x20\x79our\x20hig\x68l\x69ghts\x20\x61nd\x20d\x69splay\x20them\n"+"\x69n\x20a\x20\x77indow,\x20\x67roup\x65d\x20\x62y\x20\x63\x6flor","\x52ecopil\x61r\x20re\x61l\x63es"], ["\x43lick\x20\x68ere\x20to\x20s\x65l\x65ct\x20th\x65\x20text","\x43\x6c\x69ck\x20here\x20to\x20select\x20th\x65\x20t\x65xt","clic aqu"+ String.fromCharCode(237) +"\x20para\x20destac\x61r"], ["\x4dP3\x20Maker","\x4dP3\x20Mak\x65r","\x4d\x503\x20Maker"], ["\x43\x61lculator","\x43\x61lculat\x6fr","\x43alcu\x6cator"], ["\x47en\x65rate\x20Ca\x63h\x65","\x47\x65nerat\x65\x20Cac\x68e","\x47ener\x61te\x20Cach\x65"], ["\x43\x68\x65\x63k\x20C\x61che","\x43hec\x6b\x20Cach\x65","\x43h\x65ck\x20Cache"], ["\x50i\x63ture\x20Dicti\x6fn\x61ry","\x50\x69cture\x20Dict\x69onary","\x44iccion\x61rio\x20visual"], ["\x53\x70el\x6c\x20Check\x65r","\x53p\x65l\x6c\x20Chec\x6ber","\x53pell\x20\x43\x68\x65cker"], ["\x48\x6fmoph\x6fne\x20Checker","\x48omop\x68\x6fne\x20Checker","\x48omo\x70hone\x20Che\x63\x6ber"], ["\x50re\x64iction\x20C\x68eck\x65r","\x50redict\x69on\x20C\x68ec\x6b\x65r","\x50redi\x63tion\x20Checker"], ["\x53ubmit","\x53ub\x6dit","\x53ub\x6dit"], ["\x53tic\x6by\x20note","\x53tic\x6b\x79\x20note","\x53tick\x79\x20not\x65"], ["\x43reate\x20pr\x6fnunciat\x69\x6fn","\x43r\x65\x61te\x20pr\x6fnunciat\x69on","\x43re\x61t\x65\x20\x70ron\x75n\x63iation"], ["\x45\x64it\x20pronun\x63iat\x69on","\x45dit\x20pron\x75nci\x61ti\x6fn","\x45d\x69t\x20pronunc\x69ation"], ["\x56oc\x61bulary\x20lookup","\x56\x6fcab\x75l\x61r\x79\x20lookup","\x56oc\x61bulary\x20\x6coo\x6bup"], ["\x53trike\x20t\x68rough","\x4dake\x20a\x20s\x65lect\x69on\x20in\x20the\x20book\x20and\x20click\x20t\x68is\x20\x69con\x20to\n"+"s\x65t\x20strike-t\x68rough\x20styl\x65","\x53tri\x6b\x65\x20throug\x68"], ["\x53peec\x68\x20Recor\x64er","\x53p\x65ech\x20Record\x65r","\x53p\x65ec\x68\x20Re\x63\x6frder"], ["\x53cr\x65en\x20Mask","\x53creen\x20Mask","\x53\x63reen\x20M\x61sk"]];var haa = 0;var iaa = haa++;var jaa = haa++;var kaa = haa++;var laa = haa++;var maa = haa++;var naa = haa++;var oaa = haa++;var paa = haa++;var qaa = haa++;var raa =haa++;var saa = haa++;var taa = haa++;var uaa = haa++;var vaa = haa++;var waa = haa++;var xaa = haa++;var yaa = haa++;var zaa = haa++;var Aba = haa++;var Bba = haa++;var Cba = haa++;var Dba = haa++;var Eba = haa++;var Fba = haa++;var Gba = haa++;var Hba = haa++;var Iba = haa++;var Jba = haa++;var Kba = haa++;var Lba = haa++;var Mba = haa++; var Nba = haa++; var Oba = 0;var Pba = 1;var Qba = 2;var Rba = 3;var Sba = 4;var Tba = 5;var Uba = 6;var Vba = 7;var Wba = 8;var Xba = 9;var Yba = 10;var Zba = 11;var aba = 12;var bba = 13;var cba = 14;var dba = 15;var eba = 16;var fba = [ 0, 33, 66, 99, 132, 165, 198, 264, 297, 330, 363, 396, 429, 0, 528, 462, 561, 594, 231, 0, 0, 0, 0, 495, 627, 660, 759, 792, 825, 858, 693, 726 ];var gba ="t\x65xth\x65l\x70StopC\x6fntinu\x6fus";var hba ="t\x65xth\x65lpSkip";var FAST_SPEED = 55;var MEDIUM_SPEED = 40;var DEFAULT_SPEED = MEDIUM_SPEED;var SLOW_SPEED = 25;var VERY_SLOW_SPEED = 15;var READING_AGE_4 = 25;var READING_AGE_5 = 25;var READING_AGE_6 = 26;var READING_AGE_7 = 27;var READING_AGE_8 = 28;var nba = 29;var READING_AGE_10 = 30;var READING_AGE_11 = 35;var READING_AGE_12 = 40;var READING_AGE_13 = 44;var READING_AGE_14 = 46;var READING_AGE_15 = 48;var READING_AGE_16 = 50;var oba ="eba_language ENG_UK  ENGLISH UK ENG_US ENGLISH_US SPANISH SPANISH_US ESPANOL SPANISH_ES "+"FRENCH FRENCH_CA FRENCH_CN GERMAN ITALIAN DUTCH SWEDISH AUSTRALIAN PORTUGUESE PORTUGUESE_BR "+"PORTUGUES PORTUGUES_PT"; var ENG_UK = 0;var UK = 0; var ENGLISH = 0; var ENGLISH_UK = 0; var ENG_US = 1;var ENGLISH_US = 1;var SPANISH = 2;var SPANISH_US = 2;var ESPANOL = 3; var SPANISH_ES = 3;var FRENCH = 4;var FRENCH_CA = 5; var FRENCH_CN = 5; var GERMAN = 6;var ITALIAN = 7;var DUTCH = 8;var SWEDISH = 9;var AUSTRALIAN = 10;var PORTUGUESE = 11;var PORTUGUESE_BR = 11;var PORTUGUES = 12; var Jca = 12;var Kca = 13;var Lca = 14;var Mca = 15;var CHINESE = 16;var Oca = 17;var Pca ="eba_locale LOCALE_UK LOCALE_US ";var LOCALE_UK ="UK";var LOCALE_US ="US";var clicktospeak_icon = 1;var play_icon = 2;var search_icons = 28;var translation_icon = 4;var translate_icon = 4; var translator_icon = 4; var factfinder_icon = 8;var dictionary_icon = 16;var language_icons = 224;var spelling_icon = 32;var homophone_icon = 64;var prediction_icon = 128;var highlight_icons = 3840;var highlightcyan_icon = 256;var highlightmagenta_icon = 512;var highlightyellow_icon = 1024;var highlightgreen_icon = 2048;var collect_icon = 4096;var sticky_icon = 16384;var funplay_icon = 32768;var proncreate_icon = 65536;var createpron_icon = 65536; var pronCreate_icon = 65536; var pronedit_icon = 131072;var pronEdit_icon = 131072; var editpron_icon = 131072; var selectspeed_icon = 262144;var selectSpeed_icon = 262144; var pause_icon = 524288;var mp3_icon = 1048576;var calculator_icon = 2097152;var generatecache_icon = 4194304;var checkcache_icon = 8388608;var picturedictionary_icon = 16777216;var imagedictionary_icon = 16777216;var vocabulary_icon = 33554432;var strike_icon = 67108864;var record_icon = 134217728;var screenmask_icon = 268435456;var stop_icon = 536870912;var fullbrowsealoud_icons = 7967;var standardbrowsealoud_icons = 31;var minbrowsealoud_icons = 1;var submit_icon = 8192;var no_bar = 0;var main_icons = 7967;var standard_icons = 31;var min_icons = 1;var title_rw = 0;var title_ba = 1;var title_ebooks = 2;var title_th = 3;var title_portal = 4;SpeechStream.EnumPlacement ={ LEFT:1, RIGHT:2};if (!Array.prototype.indexOf){ Array.prototype.indexOf = function(elt) { var Gwa = this.length; var from = Number(arguments[1]) || 0; from = (from < 0) ? Math.ceil(from) : Math.floor(from); if (from < 0) { from += Gwa; } for (; from < Gwa; from++) { if (from in this && this[from] === elt) { return from; } } return -1; };}String.prototype.trimTH = function(){ return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"");};String.prototype.trimStartTH = function(){ return this.replace(/^[\s\xA0]+/,"");};String.prototype.trimEndTH = function(){ return this.replace(/[\s\xA0]+$/,"");};String.prototype.equalsTH = function(s){ if (this.length != s.length) { return false; } for (var i = 0; i < this.length; i += 1) { if (this.charAt(i) != s.charAt(i)) { return false; } } return true;};String.prototype.trimSpaceTH = function(){ return this.replace(/^[\t\r\n ]+/,"").replace(/[\t\r\n ]+$/,"");};String.prototype.trimSpaceStartTH = function(){ return this.replace(/^[\t\r\n ]+/,"");};String.prototype.trimSpaceEndTH = function(){ return this.replace(/[\t\r\n ]+$/,"");};/* Copyright 2005-2008 Texthelp Systems Ltd
*/var Uca = true;var Vca = true;var Wca ="dtdType ls_teacherFlag FAST_SPEED DEFAULT_SPEED MEDIUM_SPEED SLOW_SPEED VERY_SLOW_SPEED pause_icon mp3_icon calculator_icon generatecache_icon checkcache_icon picturedictionary_icon test sentence";var dga;var Yca = false;var Zca = null;var aca = false; var bca = false;var cca = false;var eba_actual_version ="194";var dca ="3";var eca ="194"; var fca ="166"; var gca = -1;var hca ="speechus.texthelp.com";var ica = fullbrowsealoud_icons;var jca = -1;var kca = 0;var lca = hca;var mca = hca;var nca = null; var oca = null;var pca = null;var qca = null;var rca = null;var sca = null;var tca = null;var uca ="SpeechStream"; var vca ="/SpeechStream/"; var wca ="ScanSoft Samantha_Full_22kHz";var xca = null; var yca = null; var zca = null; var Ada = -1;var Bda ="rwonline"; var Cda ="rwonline";var Dda = 0; var Eda = false; var Fda ="US"; var Gda = 40; var Hda = -1; var Ida = false;var Jda = false; var Kda = false;var Lda = false;var Mda = false;var Nda = false;var Oda = false;var Pda = false;var Qda = null;var Rda = 1;var Sda = false;var Tda = false;var Uda = 3; var Vda = 10; var Wda = false;var Xda = false; var Yda = false; var Zda ="*"; var ada ="*"; var bda ="*"; var cda ="*"; var dda = false; var eda = false; var fda = true; var gda ="portal.texthelp.com"; var hda = null; var ida = null; var jda =""; var kda = true;var lda = null;var mda = null;var nda = false;var oda = false;var pda = null;var qda = 10 * 1024;var rda = false;var sda = false;var tda = false;var uda = -1;var vda = -1;var wda = -1;var xda = -1;var yda = -1;var zda = false;var Aea = false;var Bea = false;var Cea = false;var Dea = true;var Eea = null;var Fea = false;var Gea = false;var Hea = false;var Iea = false;var Jea = false;var Kea = false;var Lea = true;var Mea = true;var Nea = true;var Oea = null;var Pea = null;var Qea = false;var Rea = null;var Sea = null; var Tea = 0; var Uea = 0; var Vea = 0; var Wea = new Array(); var Xea = -1; var Yea = 0; var Zea = 0; var aea = false;var bea = false;var cea = false;var dea = null;var eea = false;var fea = 0;var gea ="";function $rw_getAutoCacheMissingCount(){ return fea;};function $rw_getAutoCacheError(){ return gea ||"";};var hea = false;var dtdType; var jea = false;var kea = false;var g_icons = new Array();var lea = new Array();var mea = 0;var nea = 0;var oea = 300;var pea = { x:0,y:0 };var qea = { x:0,y:0 };var rea = null;var sea = false;var tea = 5;var uea = false;var vea = 0;var wea ="";var xea = 1.0;var yea = 0.01;var zea = true;var Afa = 8;var Bfa = 60;var Cfa = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00, 1.00,1.00,1.00,1.00];var Dfa = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00, 0.20,0.20,0.20,0.20];var Efa = [300, 300, 300, 300, 600, 250, 220, 660, 240, 300, 300, 100, 380, 380, 300, 300, 300];var Ffa = [40, 40, 40, 40, 40, 250, 40, 60, 256, 30, 30, 312, 227, 420, 338, 420];var Gfa = [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];var $g_bMouseSpeech = false;var Hfa ="";var Ifa = false;var Jfa = false;var Kfa = navigator.appName =="\x4d\x69cros\x6fft\x20\x49nternet\x20Exp\x6corer";var Lfa = navigator.appVersion.indexOf("MSIE 6.") > -1;var Mfa = navigator.appVersion.indexOf("MSIE 7.") > -1;var Nfa = navigator.appVersion.indexOf("MSIE 8.") > -1;var Ofa = navigator.appVersion.indexOf("MSIE 9.") > -1;var Pfa = navigator.appVersion.indexOf("MSIE 10.") > -1;var Qfa = false; var Rfa = false;var Sfa = -1; var Tfa;var Ufa;var Xga = navigator.userAgent.toLowerCase();var Wfa = Xga.indexOf("\x63hro\x6de") > -1;var Xfa = Xga.indexOf("\x61pp\x6ceweb\x6b\x69t") > -1; var Yfa = (Xfa && !Wfa)?(Xga.indexOf("s\x61f\x61ri")==-1):false;var Zfa = Xga.indexOf("\x66irefox") > -1;if(!Kfa && !Wfa && !Xfa && !Zfa){ Qfa = Xga.indexOf("trident") > -1; if(Qfa) { Kfa = true; } else { Zfa = true; }}if(Kfa){ if(Lfa) { if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Rfa = true; } } } else if(Mfa) { Nfa = true; if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Rfa = true; } else { Ifa = true; } } if(document.documentMode) { Sfa = document.documentMode; } } else { Ifa = true; Sfa = document.documentMode; } if(Sfa >= 9) { Ufa = true; Tfa = false; } else { Ufa = false; Tfa = true; }}var afa = (Xga.indexOf("ipad") > -1 || Xga.indexOf("ipod") > -1 || Xga.indexOf("iphone") > -1 || Xga.indexOf("android") > -1);var bfa = Xga.indexOf("ipad") > -1 || Xga.indexOf("ipod") > -1 || Xga.indexOf("iphone") > -1 ;var gfa = 0;if(bfa){ gfa = parseInt(Xga.substring(Xga.indexOf("cpu os ") + 7, Xga.indexOf("_"))); if(isNaN(gfa)) { gfa = 6; }}var dfa = !(top === self) && bfa;if(dfa){ xea = 2000;}var efa = Xga.indexOf("android") > -1;var ffa;var gfa = 0;if(bfa){ gfa = parseInt(Xga.substring(Xga.indexOf("cpu os ") + 7, Xga.indexOf("_"))); if(isNaN(gfa)) { gfa = 6; }}function iOS6Workaround(){ if($rw_getTouchSelection) { $rw_getTouchSelection(); }}if(gfa >= 6 && dfa){ setInterval("iOS6Workaround();", 100);}var ifa ="\x6c\x6fca\x6chost";var g_speakableTextAreaTarget = null;var g_nSpeakableTextAreaTimerId = 0;var lfa = 1;var mfa = false;var nfa = false;var ofa = false;var pfa = false;var qfa = new Array();var rfa = new Object();var sfa ="-:minus;+:plus;/:divided by;*:multiplied by;<:less than;>:greater than;=:equals;^:raised to the power of;<=:less than or equal to;>=:greater than or equal to;";var tfa = false;var ufa = false;var vfa = false;var wfa = false;var xfa ="mp3";var yfa = false;var zfa = null;var Aga = 20;var Bga = true;var Cga = false;var Dga ="texthelpswa"; var Ega = null;var Fga = null;var Gga = null;var Hga = null;var Iga = false;var Jga = false;var Kga = false;var Lga = null;var Mga = null;var Nga = null;var Oga = null;var Pga= false;var Qga = null;var Rga = true;var Sga = null;var eba_server_version;var eba_serverVersion; var eba_client_version;var eba_clientVersion; var eba_login_name; var eba_login_password; var eba_loginName; var eba_loginPassword; var eba_server; var eba_speech_server; var eba_speechServer; var eba_speech_server_backup;var eba_speechServerBackup; var eba_folder;var eba_client_folder;var eba_clientFolder; var eba_speech_stream_server_version = -1;var eba_voice; var eba_hover_flag; var eba_bubble_mode; var eba_bubble_freeze_on_shift_flag; var eba_voice_from_lang_flag; var eba_voice_language_map; var eba_speed_value; var eba_speedValue; var eba_speed_offset; var eba_volume_value; var eba_initial_speech_on; var eba_continuous_reading; var eba_play_start_point; var eba_speech_redirect_callback; var eba_speech_started_callback; var eba_rendering_speech_callback; var eba_speech_complete_callback; var eba_page_complete_callback; var eba_speak_selection_by_sentence; var eba_page_complete_after_selection; var eba_dont_extend_selection; var eba_translate_complete_callback; var eba_use_container; var eba_override_x; var eba_override_y; var eba_icons;var eba_no_display_icons; var eba_no_title; var eba_noTitleFlag;var eba_hidden_bar; var eba_speech_range_style; var eba_speech_word_style; var eba_allow_alerts_flag; var eba_alerts;var eba_language; var eba_locale; var eba_ignore_buttons;var eba_max_word_count;var eba_logo_url = null; var eba_inline_img; var eba_cache_buster; var eba_dictionary_server; var eba_custom_dictionary_url; var eba_alt_dictionary_url; var eba_picturedictionary_server; var eba_imagedictionary_server;var eba_translate_server; var eba_translation_server; var eba_translate_source; var eba_translate_target; var eba_translate_type; var eba_language_server;var eba_spelling_server;var eba_homophone_server;var eba_prediction_server;var eba_mp3_id; var eba_mp3_limit; var eba_mp3_callback; var eba_cust_id; var eba_custId; var eba_book_id; var eba_bookId; var eba_page_id; var eba_pageId; var eba_use_annotations;var eba_annotate_confirm_delete_note; var eba_annotate_persist_notes; var eba_annotate_persist_highlights; var eba_annotate_note_editor_id; var eba_annotate_highlight_editor_id; var eba_annotate_storage_url; var eba_annotate_note_storage_url; var eba_annotate_highlight_storage_url; var eba_annotate_note_reader_id; var eba_annotate_highlight_reader_id; var eba_annotate_highlight_store_text; var eba_speechCacheGenerateFlag;var eba_cache_building_mode;var eba_speechCacheFlag;var eba_speech_cache_flag;var eba_cache_mode; var eba_cache_live_generation;var eba_autoCachePage;var eba_cacheResult =""; var eba_cache_retry; var eba_cache_retry_timeout; var eba_cache_selection; var eba_cache_user_text; var eba_split_cache_path; var eba_autocache_generate;var eba_autocache_check;var eba_autocache_allspeeds;var eba_autocache_callback;var eba_autocache_no_alert;var eba_clientside_pronunciation; var eba_check_pronunciation_before_cache; var eba_skip_on_error; var eba_alter_browser_for_consistency;var eba_ssl_flag; var eba_ssl_speech; var eba_ssl_toolbar; var eba_search_speech_server; var eba_replace_speech_server; var eba_no_flash; var eba_handle_radio_checkbox_click; var eba_bypass_dom_check = false; var eba_limit_cookies; var eba_ignore_frames; var eba_math; var eba_maths; var eba_symbol_text; var eba_abbr_array = null; var eba_date_filter_mode;var eba_build_cache_for_external_use;var eba_use_html5;var eba_speech_file_type;var eba_use_vocab; var eba_use_vocabulary;var eba_vocabulary_server;var eba_vocabulary_limit;var eba_break_list;var eba_use_commands;var eba_tinymce;var eba_tinymce_id;var eba_swa;var eba_prediction_placement;var eba_prediction_placement_id;var eba_homophone_placement;var eba_homophone_placement_id;var eba_spelling_placement;var eba_spelling_placement_id;var eba_grammar_placement;var eba_grammar_placement_id;var eba_disable_speech; var eba_no_scroll;var eba_ignore_hidden;var eba_screen_mask_letterbox_depth = 40;var eba_screen_mask_opacity = 50;var $jq;var eba_apip; var eba_apip_data;var eba_apip_order;var eba_chrome_extension;var eba_local_file_path;var ls_teacherFlag = false; var eba_reading_age;if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.DataTypes = {};SpeechStream.DataTypes.PageData = function(){ var self = this; var Uga ="~p~br~head~body~hr~div~h1~h2~h3~h4~h5~h6~blockquote~table~tbody~tr~td~th~"; var Vga ="~em~strong~b~i~u~tt~font~kbd~dfn~cite~sup~sub~a~embed~span~small~nobr~wbr~acronym~"+"abbr~code~s~chunk~th:pron~img~/th:pron~w~/w~lic/lic~break~silence~"; this.eja = Uga; this.fja = Vga; this.strHighlightTag ="span"; this.placeholder = document.body; this.isInBreakList = function(Gwb) { return self.eja.indexOf("~"+Gwb+"~") > -1; }; this.isInStyleList = function(Gwb) { return self.fja.indexOf("~"+Gwb+"~") > -1; };};SpeechStream.DataTypes.ControlData = function(){ this.bIgnoreSkipSection = false; this.bOnloadFinished = false; };SpeechStream.DataTypes.HighlightData = function(){ this.strSpeechRangeColours ="color:#000000; background:#FFFF00"; this.strSpeechWordColours ="color:#FFFFFF; background:#0000FF; border-radius: 1px;"; };SpeechStream.DataTypes.BrowserData = function(){ var IAc = navigator.appVersion; this.bIE = navigator.appName =="\x4dicroso\x66t\x20Int\x65rnet\x20Explorer"; this.bIE6 = IAc.indexOf("MSIE 6.") > -1; this.bIE7 = IAc.indexOf("MSIE 7.") > -1; this.bIE8 = IAc.indexOf("MSIE 8.") > -1; this.bIE9 = IAc.indexOf("MSIE 9.") > -1; this.bIE10 = IAc.indexOf("MSIE 10.") > -1; this.bIE11 = false; this.bIEBackCompat = false; this.nIEDocumentMode = -1; this.bIEOld = false; this.bIENew = false; this.dtdType =""; this.bXDTDType = false; this.bLooseType = false; if(this.bIE) { if(this.bIE6) { if(document.compatMode) { if(document.compatMode !="CSS1Compat") { this.bIEBackCompat = true; } } } else if(this.bIE7) { this.bIE8 = true; if (document.compatMode) { if(document.compatMode !="CSS1Compat") { this.bIEBackCompat = true; } else { this.bXDTDType = true; } } if(document.documentMode) { this.nIEDocumentMode = document.documentMode; } } else { this.bXDTDType = true; this.nIEDocumentMode = document.documentMode; } } if(this.bIE) { if(this.nIEDocumentMode >= 9) { this.bIENew = true; this.bIEOld = false; } else { this.bIENew = false; this.bIEOld = true; } } var Xga = navigator.userAgent.toLowerCase(); this.bChrome = Xga.indexOf("\x63hrome") > -1; this.bSafari = Xga.indexOf("\x61pplewe\x62kit") > -1; this.bWebkit = (this.bSafari && !this.bChrome)?(Xga.indexOf("s\x61fari")==-1):false; this.bFireFox = Xga.indexOf("\x66\x69ref\x6fx") > -1; if(!this.bIE && !this.bChrome && !this.bSafari && !this.bFireFox) { this.bIE11 = Xga.indexOf("trident"> -1); if(this.bIE11) { this.bIE = true; } else { this.bFireFox = true; } }};SpeechStream.DataTypes.BubbleData = function(){ this.bBubbleMode = false; this.bBubbleFreezeOnShiftFlag = true; this.bBubbleModeStartDisabled = false;};SpeechStream.DataTypes.Paths = function(){ var Yga ="strFileLoc strSwfLoc"; this.strFileLoc =""; this.strSwfLoc ="";};SpeechStream.Data = function(){ this.browser = new SpeechStream.DataTypes.BrowserData(); this.paths = new SpeechStream.DataTypes.Paths(); this.pageData = new SpeechStream.DataTypes.PageData(); this.controlData = new SpeechStream.DataTypes.ControlData(); this.highlightData = new SpeechStream.DataTypes.HighlightData(); this.bubbleData = new SpeechStream.DataTypes.BubbleData();};SpeechStream.data = new SpeechStream.Data();var Zga = SpeechStream.data;function $rw_getVersion(){ return eba_actual_version;}function $rw_getRevision(){ return dca;}function $rw_setIconsToLoad(p_nIcons){ var aga = false; if((p_nIcons & clicktospeak_icon) == clicktospeak_icon) { if(!Zga.bubbleData.bBubbleMode) { uda = iya('hover', gaa[iaa][Dda],fba[iaa],true); } aga = true; } if((p_nIcons & play_icon) == play_icon) { if(! (Mda && !Lda && !Nda) ) { if(!Zga.bubbleData.bBubbleMode) { iya('play', gaa[jaa][Dda], fba[jaa],false); } aga = true; } } if((p_nIcons & pause_icon) == pause_icon) { iya('pause', gaa[kaa][Dda], fba[kaa],false); } var bga = false; if((p_nIcons & funplay_icon) == funplay_icon) { iya('funplay', gaa[jaa][Dda], fba[Mba],false); bga = true; aga = false; } if((p_nIcons & stop_icon) == stop_icon) { aga = true; } if(aga) { iya('stop', gaa[laa][Dda], fba[laa],false); } if(bga) { iya('funstop', gaa[laa][Dda], fba[Nba],false); } if((p_nIcons & translation_icon) == translation_icon) { iya('trans', gaa[maa][Dda], fba[maa],false); } if((p_nIcons & factfinder_icon) == factfinder_icon) { iya('ffinder', gaa[naa][Dda], fba[naa],false); } if((p_nIcons & dictionary_icon) == dictionary_icon) { iya('dictionary', gaa[oaa][Dda], fba[oaa],false); } if((p_nIcons & picturedictionary_icon) == picturedictionary_icon) { iya('picturedictionary', gaa[Aba][Dda], fba[Aba],false); } if((p_nIcons & spelling_icon) == spelling_icon) { wda = iya('spell', gaa[Bba][Dda],fba[Bba],true); } if((p_nIcons & homophone_icon) == homophone_icon) { xda = iya('homophone', gaa[Cba][Dda],fba[Cba],true); } if((p_nIcons & prediction_icon) == prediction_icon) { yda = iya('pred', gaa[Dba][Dda],fba[Dba],true); } var cga = false; if((p_nIcons & highlightcyan_icon) == highlightcyan_icon) { iya('cyan', gaa[paa][Dda], fba[paa], false); cga = true; } if((p_nIcons & highlightmagenta_icon) == highlightmagenta_icon) { iya('magenta', gaa[qaa][Dda], fba[qaa], false); cga = true; } if((p_nIcons & highlightyellow_icon) == highlightyellow_icon) { iya('yellow', gaa[raa][Dda],fba[raa], false); cga = true; } if((p_nIcons & highlightgreen_icon) == highlightgreen_icon) { iya('green', gaa[saa][Dda],fba[saa], false); cga = true; } if((p_nIcons & strike_icon) == strike_icon) { iya('strike', gaa[Jba][Dda], fba[Jba], false); cga = true; } if(cga) { iya('clear', gaa[taa][Dda], fba[taa],false); } if((p_nIcons & collect_icon) == collect_icon) { iya('collect', gaa[uaa][Dda],fba[uaa] ,false); } if((p_nIcons & vocabulary_icon) == vocabulary_icon) { iya('vocabulary', gaa[Iba][Dda], fba[Iba],false); } if((p_nIcons & mp3_icon) == mp3_icon) { iya('mp3', gaa[waa][Dda],fba[waa] ,false); } if((p_nIcons & calculator_icon) == calculator_icon) { iya('calculator', gaa[xaa][Dda],fba[xaa] ,false); } if((p_nIcons & record_icon) == record_icon) { iya('recorder', gaa[Kba][Dda],fba[Kba] ,false); } if((p_nIcons & generatecache_icon) == generatecache_icon) { iya('generate_cache', gaa[yaa][Dda], fba[yaa],false); } if((p_nIcons & checkcache_icon) == checkcache_icon) { iya('check_cache', gaa[zaa][Dda],fba[zaa] ,false); } if((p_nIcons & submit_icon) == submit_icon) { iya('submit', gaa[Eba][Dda], fba[Eba],false); } if((p_nIcons & sticky_icon) == sticky_icon) { vda = iya('sticky', gaa[Fba][Dda],fba[Fba] ,true); } if(xca != null && yca != null && zca != null) { if((p_nIcons & pronCreate_icon) == pronCreate_icon) { iya('pronCreate', gaa[Gba][Dda],fba[Gba] ,false); } if((p_nIcons & pronEdit_icon ) == pronEdit_icon ) { iya('pronEdit', gaa[Hba][Dda],fba[Hba] ,false); } } if((p_nIcons & screenmask_icon) == screenmask_icon) { iya('screenmask', gaa[Lba][Dda], fba[Lba], false); }}var dga = 0;function $rw_setVoice(Gwb){ if(typeof(Gwb) =="string") { if(Gwb != null && Gwb.length > 0 && Gwb != wca) { eba_voice = Gwb; wca = Gwb; try { var sga = Xab.getConnector(); if(sga != null) { sga.setVoiceName(wca); } } catch(err) { thLogE(err); } } }}function $rw_setVoiceForLanguage(Gwb, p_languageCode){ var TJb; if(typeof(p_languageCode) =="string") { TJb = hga(p_languageCode); if(TJb == -1) { try { TJb = parseInt(p_languageCode, 10); } catch(err) { thLogE(err); return; } } } else if(typeof(p_languageCode) =="number") { TJb = p_languageCode; } else { return; } if(typeof(Gwb) =="string"&& Gwb != null && Gwb.length > 0 && TJb >= 0 && TJb < faa.length) { faa[TJb] = Gwb; }}function hga(iga){ var Ihb = iga.toLowerCase(); if(Ihb =="english"|| Ihb =="english_uk") { return ENG_UK; } else if(Ihb =="english_us") { return ENG_US; } else if(Ihb =="spanish") { return SPANISH; } else if(Ihb =="espanol") { return ESPANOL; } else if(Ihb.substr(0, 4) =="espa"&& Ihb == ("espa"+ String.fromCharCode(241) +"ol")) { return ESPANOL; } else if(Ihb =="french") { return FRENCH; } else if(Ihb.substr(0, 4) =="fran"&& Ihb == ("fran"+ String.fromCharCode(231) +"ais")) { return FRENCH; } else if(Ihb =="french_ca") { return FRENCH_CA; } else if(Ihb =="german") { return GERMAN; } else if(Ihb =="italian") { return ITALIAN; } else if(Ihb =="dutch") { return DUTCH; } else if(Ihb =="swedish") { return SWEDISH; } else if(Ihb =="australian") { return AUSTRALIAN; } else if(Ihb =="portuguese") { return PORTUGUESE; } else if(Ihb =="portugues") { return PORTUGUES; } else { return -1; }}function kga(xfb){ try { var gja = xfb.split("~"); var qzb = gja.length; var i; var Ihb; var vMb; for(i=0; i<qzb; i+=2) { vMb = gja[i]; Ihb = gja[i+1]; $rw_setVoiceForLanguage(vMb, Ihb); } } catch(e) {}}function $rw_setSpeedValue(p_nSpeedValue){ if(typeof(p_nSpeedValue) =="number") { if(p_nSpeedValue > -4 && p_nSpeedValue < 101 && p_nSpeedValue != Gda) { eba_speedValue = p_nSpeedValue; eba_speed_value = p_nSpeedValue; eba_reading_age = p_nSpeedValue; Gda = p_nSpeedValue; try { if(jea) { var sga = Xab.getConnector(); if(sga != null) { sga.setSpeedValue(""+ Gda); } } } catch(err) { thLogE(err); } } } else if(typeof(p_nSpeedValue) =="string") { var tlb = p_nSpeedValue.toUpperCase(); if(tlb =="VERY_SLOW_SPEED") { $rw_setSpeedValue(VERY_SLOW_SPEED); } else if(tlb =="SLOW_SPEED") { $rw_setSpeedValue(SLOW_SPEED); } else if(tlb =="MEDIUM_SPEED") { $rw_setSpeedValue(MEDIUM_SPEED); } else if(tlb =="FAST_SPEED") { $rw_setSpeedValue(FAST_SPEED); } else { var Qub = parseInt(p_nSpeedValue, 10); $rw_setSpeedValue(Qub); } }}function $rw_setVolumeValue(p_nVolumeValue){ if(typeof(p_nVolumeValue) =="number") { if(p_nVolumeValue >= -1 && p_nVolumeValue <= 100 && p_nVolumeValue != Hda) { eba_volume_value = p_nVolumeValue; Hda = p_nVolumeValue; try { if(jea) { var sga = Xab.getConnector(); if(sga != null) { sga.setVolumeValue(""+ Hda); } } } catch(err) { thLogE(err); } } }}function $rw_setBarVisibility(bKb){ if(typeof(bKb) =="\x62\x6folean") { var tga = document.getElementById("r\x77Drag"); if(bKb) { tga.style.visibility ="\x76is\x69ble"; tga.style.display ="\x69nline"; } else { tga.style.visibility ="\x68idden"; tga.style.display ="n\x6fne"; } Jda = !bKb; CKb(); }}function $rw_enableClickToSpeak(p_bEnable){ if(p_bEnable && !$g_bMouseSpeech) { $rw_event_hover(null, uda); } else if(!p_bEnable && $g_bMouseSpeech) { $rw_event_hover(null, uda); if(uda > -1) { var Nta = vea; vea = 0; BIb("hover"+"", uda, true); vea = Nta; } }}function $rw_enableSpeachByBubbleMode(PEb){ var vga = false; if(typeof(SpeechStream.bubbleSpeech) =="undefinded"|| typeof(SpeechStream.bubbleSpeech.initSpeechBubble) =="undefinded") { Zga.bubbleData.bBubbleModeStartDisabled = !PEb; return; } if(Zga.controlData.bOnloadFinished) { Zga.bubbleData.bBubbleMode = PEb; if(!Zga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStartBubble(); SpeechStream.bubbleSpeech.hideStopBubble(); $rw_stopSpeech(); } } else { Zga.bubbleData.bBubbleModeStartDisabled = !PEb; }}function $rw_enableContinuousReading(PEb){ Dea = PEb; eba_continuous_reading = PEb; if(!Dea) { Eea = null; Lea = false; } else { if(typeof(eba_speak_selection_by_sentence) =="boolean") { Lea = eba_speak_selection_by_sentence; } else { Lea = true; } if($rw_isSpeaking() && mKb != null && Eea == null) { XIb(); cIb(mKb); } }}function $rw_getUserTarget(){ return Sga;}var wga ="The SpeechStream object will contain parameter objects in the future. It holds actionOnError cacheMode and pronunciation";SpeechStream.EnumActionOnError = {STOP:0,SKIP:1};SpeechStream.ActionOnError = function(){ this.action = SpeechStream.EnumActionOnError.STOP;};var xga = function(){ this.NONE = 0; this.CACHE_WITH_LIVE_SERVER = 1; this.CACHE_ONLY = 2; this.CACHE_BUILDING_MODE = 3; this.mode = this.NONE; this.getLiveServer = function() { if(this.mode == this.NONE) { return mca; } else if(this.mode == this.CACHE_ONLY) { return null; } else if(this.mode == this.CACHE_WITH_LIVE_SERVER) { return nca; } else if(this.mode == this.CACHE_BUILDING_MODE) { if(nca != null) { return nca; } else { return mca; } } }; this.useBackupForLiveRequests = function() { if(this.mode == this.NONE) { return false; } else if(this.mode == this.CACHE_ONLY) { return false; } else if(this.mode == this.CACHE_WITH_LIVE_SERVER) { return nca != null; } else if(this.mode == this.CACHE_BUILDING_MODE) { return nca != null; } }; this.setCacheMode = function(p_nMode) { try { var flash = Xab.getConnector(); if(flash != null) { switch(p_nMode) { case this.NONE: this.mode = this.NONE; eba_cache_mode = false; eba_cache_building_mode = false; eba_cache_live_generation = false; Mda = false; Lda = false; Nda = false; flash.setCacheMode(false, false); break; case this.CACHE_WITH_LIVE_SERVER: this.mode = this.CACHE_WITH_LIVE_SERVER; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = true; Mda = true; Lda = false; Nda = true; flash.setCacheMode(true, true); break; case this.CACHE_ONLY: this.mode = this.CACHE_ONLY; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = false; Mda = true; Lda = false; Nda = false; flash.setCacheMode(true, false); break; case this.CACHE_BUILDING_MODE: this.mode = this.CACHE_BUILDING_MODE; eba_cache_mode = false; eba_cache_building_mode = true; eba_cache_live_generation = false; Mda = false; Lda = true; Nda = false; flash.setCacheMode(true, true); break; default: Fya("Tried to set to an invalid mode, "+ p_nMode +" is not recognised."); } } } catch(err) { } };};SpeechStream.actionOnError = new SpeechStream.ActionOnError();SpeechStream.cacheMode = new xga();function $rw_stopSpeech(){ $rw_event_stop();}var zga = 200;function $rw_speakFromId(id){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Nga != null) { var CBc = document.getElementById(id); SSAPIP.apipHandler.checkElement(CBc, SSAPIP.apipHandler.Type.DEFAULT); return; } var target = Mha(id); if(target != null) { $rw_stopSpeech(); if(Lea) { var Uta; Uta = fta(target, false); Oea = null; if(Uta != null) { target = Uta; } } Sga = target; rw_speakHoverTarget(target); } else { var CBc = document.getElementById(id); if(CBc != null) { CBc = SSDOM.getNextTextNodeNoBlank(CBc, false, null); dga = 0; $rw_speakCurrentSentence(CBc, 0); } }}function $rw_speakById(id){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Nga != null) { var CBc = document.getElementById(id); SSAPIP.apipHandler.checkElement(CBc, SSAPIP.apipHandler.Type.SINGLE_ITEM); return; } var target = Mha(id); if(target != null) { $rw_stopSpeech(); var Uta; if(Lea) { Uta = fta(target, false); if(Uta == null) { Oea = target; } } else { Uta = target; Uta.allowContinuous = false; } if(Uta != null) { target = Uta; rw_speakHoverTarget(target); } else { target.blockCache = !Sda; rw_speakHoverTarget(target); } Sga = target; }}function $rw_speakByIdFromFile(id, PMb){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var target = Mha(id); if(target != null) { $rw_stopSpeech(); Sga = target; LMb(target, PMb); }}function $rw_speakByIdHighlightOnly(id){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var target = Mha(id); if(target != null) { $rw_stopSpeech(); Sga = target; rw_speechHighlightOnly(target); }}function $rw_speakByIdWithSpeaker(id){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var target = Mha(id); if(target != null) { $rw_stopSpeech(); Rea = id; Sga = target; rw_speakHoverTarget(target); } else { var CBc = document.getElementById(id); if(CBc != null && CBc.nodeType==1 && CBc.firstChild == null) { Rea = id; dga = 0; $rw_speakFromId(id); } }}function Mha(id){ var kfb = document.getElementById(id); if(kfb != null) { if(kfb.nodeType == 1 && kfb.tagName =="img"&& kfb.getAttribute("msg") == null) { return new THHoverTarget(kfb.ownerDocument.body, SSDOM.getPositionInDom(kfb), null); } var Nha = kfb.innerHTML; if(Nha.length > 0) { var jNb = SSDOM.getFirstChildTextNode(kfb, true); if(jNb == null || jNb.nodeType != 3) { if(jNb != null && jNb.nodeType == 1 && jNb.tagName =="img") { var attr = jNb.getAttribute("msg"); if(attr != null && attr.length > 0) { } else { return null; } } else { return null; } } var Osb = SSDOM.getLastChildTextNode(kfb, true); if(Osb == null || Osb.nodeType != 3) { if(Osb != null && Osb.nodeType == 1 && Osb.tagName =="img") { var attr = Osb.getAttribute("msg"); if(attr != null && attr.length > 0) { } else { return null; } } else { return null; } } var rnb = RTb(jNb, 0); var snb = (Osb.nodeType == 3)? RTb(Osb, Osb.nodeValue.length) : RTb(Osb, 0); var Tbb = new THRange(kfb.ownerDocument.body, rnb, snb); var target = new THHoverTarget(null, null, Tbb); return target; } } return null;}function $rw_setSentenceFromSelection(){ try { var onb = $rw_getTHCaretRangeFromSelection(); if(onb == null) { return; } var Yfb = SSDOM.getSentenceBreakToLeft(onb.Yfb); var Zfb = SSDOM.getSentenceBreakToRight(onb.Zfb); if(Yfb != null && Zfb != null) { var Wha = new Yqa(Yfb, Zfb); var Tbb = LPb(Wha); if(Tbb != null) { Sga = new THHoverTarget(null, null, Tbb); } } } catch(err) { thLogE(err); }}function $rw_speakSentenceAtNode(Xsb, tfb){ if(!Xsb && (Xsb.nodeType != 1 || Xsb.nodeType != 3) ) { return; } $rw_speakCurrentSentence(Xsb, tfb);}function $rw_speakCurrentSentence(Xsb, tfb){ var XJb = (new Date).getTime(); var Zha = (XJb - dga); if(Zha < zga ) { return; } dga = XJb; var Xia = lha(Xsb, tfb); if(Xia != null) { if(Xia.equals(Sga)) { if(Zha < zga * 5) { return; } } $rw_stopSpeech(); Sga = Xia; rw_speakHoverTarget(Xia); }}function $rw_speakCurrentSentenceHighlightOnly(Xsb, tfb){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var Xia = lha(Xsb, tfb); if(Xia != null) { $rw_stopSpeech(); Sga = Xia; rw_speechHighlightOnly(Xia); }}function eha(Xsb, tfb){ var OAc; if(typeof(tfb) =="undefined") { OAc = new Sqa(Xsb, 0, true); } else { OAc = new Sqa(Xsb, tfb, true); } var Yfb = SSDOM.getSentenceBreakToLeft(OAc); var Zfb = SSDOM.getSentenceBreakToRight(OAc); if(Yfb == null || Zfb == null) { return null; } return new Yqa(Yfb, Zfb);}function lha(Xsb, tfb){ var Tbb; var Xia; if(typeof(Xsb) =="undefined"|| Xsb == null) { if(Sga == null) { var onb = SSDOM.getFirstSentence(document.body); if(onb == null) { return null; } Tbb = LPb(onb); Xia = new THHoverTarget(null, null, Tbb); } else { Xia = Sga; } } else { if(Xsb instanceof Yqa) { Tbb = LPb(Xsb); } else { var onb = eha(Xsb, tfb); if(onb == null) { return null; } Tbb = LPb(onb); } Xia = new THHoverTarget(null, null, Tbb); } return Xia;}function $rw_getCurrentTarget(){ return Sga;}function $rw_setCurrentTarget(RMb){ Sga = RMb; if(typeof(RMb) =="undefined") { Sga = null; } else { Sga = RMb; }}function $rw_speakFirstSentence(XMb){ var ysb = null; if(XMb && XMb.nodeType) { ysb = XMb; } else { if( Zca != null && Zca !="") { try { ysb = uha(window, Zca); } catch(e) { } } if(ysb == null) { ysb = document.body; } } if(!(ysb.nodeType == 3 && Nya(ysb.nodeValue))) { ysb = SSDOM.getNextTextNodeNoBlank(ysb, false, null); } $rw_speakCurrentSentence(ysb, 0);}function uha(vha, Gwb){ var CBc = vha.document.getElementById(Gwb); if(CBc != null) { return CBc; } var qzb = vha.length; for(var i=0; i<qzb; i++) { var Jdb = vha[i]; CBc = uha(Jdb, Gwb); if(CBc != null) { return CBc; } } return null;}function $rw_speakNextSentence(){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Sga == null) { dga = 0; $rw_speakCurrentSentence(); return; } var Uia = Sga.getCaretRange(); var qqa = hqa(Uia.Zfb.node); if(qqa.length > 0) { var Oia = null; for(var i=0; i<qqa.length; i++) { var cmd = qqa[i]; if(cmd.command == cmd.CMD_JUMP) { if(document.getElementById(cmd.IEb) != null) { Oia = cmd.IEb; } } } if(Oia != null) { $rw_stopSpeech(); dga = 0; $rw_speakFromId(Oia); return; } } var iIb = SSDOM.getNextSentence(Uia); if(iIb == null) { return; } if(WMb(Uia.Yfb.node, iIb.Yfb.node)) { return; } var Tbb = LPb(iIb); var Xia = new THHoverTarget(null, null, Tbb); $rw_stopSpeech(); Sga = Xia; rw_speakHoverTarget(Xia);}function $rw_speakNextSentenceHighlightOnly(){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Sga == null) { dga = 0; $rw_speakCurrentSentenceHighlightOnly(); return; } var Uia = Sga.getCaretRange(); var iIb = SSDOM.getNextSentence(Uia); if(iIb == null) { return; } var Tbb = LPb(iIb); var Xia = new THHoverTarget(null, null, Tbb); $rw_stopSpeech(); Sga = Xia; rw_speechHighlightOnly(Xia);}function $rw_speakPreviousSentence(){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Sga == null) { dga = 0; $rw_speakCurrentSentence(); return; } var Uia = Sga.getCaretRange(); var qqa = hqa(Uia.Zfb.node); if(qqa.length > 0) { var Oia = null; for(var i=0; i<qqa.length; i++) { var cmd = qqa[i]; if(cmd.command == cmd.CMD_JUMPBACK) { if(document.getElementById(cmd.IEb) != null) { Oia = cmd.IEb; } } } if(Oia != null) { $rw_stopSpeech(); dga = 0; $rw_speakFromId(Oia); return; } } var Via = SSDOM.getPreviousSentence(Uia); if(Via == null) { return; } if(WMb(Via.Zfb.node, Uia.Zfb.node)) { return; } var Tbb = LPb(Via); var Xia = new THHoverTarget(null, null, Tbb); $rw_stopSpeech(); Sga = Xia; rw_speakHoverTarget(Xia);}function $rw_speakPreviousSentenceHighlightOnly(){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; if(Sga == null) { dga = 0; $rw_speakCurrentSentenceHighlightOnly(); return; } var Uia = Sga.getCaretRange(); var Via = SSDOM.getPreviousSentence(Uia); if(Via == null) { return; } var Tbb = LPb(Via); var Xia = new THHoverTarget(null, null, Tbb); $rw_stopSpeech(); Sga = Xia; rw_speechHighlightOnly(Xia);}function $rw_getTHCaretRangeFromSelection(){ var oRb = mRb(); if(oRb != null && oRb.range instanceof THRange) { return jPb(oRb.range); } return null;}function $rw_isTextSelectedForPlay(){ if(jea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { return true; } if(g_nSpeakableTextAreaTimerId != 0) { return false; } return true; } else { if($rw_isPaused()) { return true; } var Pta = mRb(); if(Pta != null && Pta.range != null) { var Tbb = Pta.range; if(Tbb instanceof String) { return true; } else { var target = new THHoverTarget(null, null, Tbb); var xsb = target.getTextPreparedForSpeech(); if(xsb != null && xsb.length > 0) { return true; } } } } } catch(err) { thLogE(err); } } return false;}function $rw_getNumberOfHighlights(){ if(typeof(Obb) !="undefined") { return Obb.length; } else { return 0; }}function $rw_getHighlightText(index){ if(typeof(Obb) !="undefined"&& index > -1 && index < Obb.length) { if (Tfa) { return Obb[index].text; } else { return Obb[index].toString(); } } return"";}function $rw_getHighlightColor(index){ if(typeof(Pbb) !="undefined"&& index > -1 && index < Pbb.length) { return Pbb[index]; } return"";}function $rw_getHighlightColour(index){ return $rw_getHighlightColor(index);}function $rw_isPageLoaded(){ return (Zga.controlData.bOnloadFinished && jea);}function $rw_highlightOnlyWTSFailed(){}function $rw_log(DOb){ Fya(DOb);}function $rw_setReadingAge(p_nAge){ if(typeof(p_nAge) =="string") { try { p_nAge = parseInt(p_nAge, 10); } catch(e) { thLogE(e); return; } } if(typeof(p_nAge) =="number") { switch(p_nAge) { case 1: case 2: case 3: case 4: $rw_setSpeedValue(READING_AGE_4); break; case 5: $rw_setSpeedValue(READING_AGE_5); break; case 6: $rw_setSpeedValue(READING_AGE_6); break; case 7: $rw_setSpeedValue(READING_AGE_7); break; case 8: $rw_setSpeedValue(READING_AGE_8); break; case 9: $rw_setSpeedValue(nba); break; case 10: $rw_setSpeedValue(READING_AGE_10); break; case 11: $rw_setSpeedValue(READING_AGE_11); break; case 12: $rw_setSpeedValue(READING_AGE_12); break; case 13: $rw_setSpeedValue(READING_AGE_13); break; case 14: $rw_setSpeedValue(READING_AGE_14); break; case 15: $rw_setSpeedValue(READING_AGE_15); break; case 16: $rw_setSpeedValue(READING_AGE_16); break; default: $rw_setSpeedValue(READING_AGE_10); } }}function $rw_getVoice(){ return eba_voice;}function $rw_getSpeed(){ return eba_speed_value;}function $rw_setCustomerId(p_strVal){ try { if(typeof(p_strVal) =="string") { var iia = pUb(p_strVal.trimTH()); if(xca != iia) { xca = iia; eba_cust_id = xca; var flash = Xab.getConnector(); if(flash != null) { flash.setCustomerId(xca); } var CBc = document.getElementById("editPageMsg"); if(CBc != null) { CBc.innerHTML =""; } if(ofa ) { UWb.deleteAll(); XXb(); } lia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setBookId(p_strVal){ try { if(typeof(p_strVal) =="string") { var iia = pUb(p_strVal.trimTH()); if(yca != iia) { yca =iia; eba_book_id = yca; var flash = Xab.getConnector(); if(flash != null) { flash.setBookId(yca); } var CBc = document.getElementById("editPageMsg"); if(CBc != null) { CBc.innerHTML =""; } if(ofa ) { UWb.deleteAll(); XXb(); } lia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setPageId(p_strVal){ try { if(typeof(p_strVal) =="string") { var iia = pUb(p_strVal.trimTH()); if(zca != iia) { zca = iia; eba_page_id = zca; var flash = Xab.getConnector(); if(flash != null) { flash.setPageId(zca); } var CBc = document.getElementById("editPageMsg"); if(CBc != null) { CBc.innerHTML =""; } if(ofa ) { UWb.deleteAll(); XXb(); } lia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setSymbolText(Awb){ if(Awb != null && typeof(Awb) =="string"&& Awb.length > 0) { pfa = true; qfa = new Array(); rfa = new Object(); EUb(sfa); EUb(Awb); }}function lia(){ if(Yda) { if(ada !="*"&& typeof(agb) !="undefined") { var Zeb = Yda; Yda = false; Edb(true); Yda = Zeb; } if(Zda !="*"&& typeof(fkb) !="undefined") { sjb(); } if(ada !="*"&& typeof(agb) !="undefined") { agb(); } else { if(Zda !="*"&& typeof(fkb) !="undefined") { fkb(); } } }}function nia(){ Wea = tia(); Tea = 0; Uea = 1; if(aea) { Rda = 1; $rw_setSpeedValue(SLOW_SPEED); } Sea = SSDOM.getFirstSentence(document.body); Tea = pia(Sea); Vea = Wea.length; Xea = -1; Dja(true);}function pia(qia){ var jJb = qia; var i = 0; while(jJb != null) { i++; jJb = SSDOM.getNextSentence(jJb); } i += Wea.length; if(aea) { return i * 3; } else { return i; }}function tia(){ var ria = new Array(); if(Fea) { return ria; } var sia = document.getElementsByTagName("img"); var qzb = sia.length; var i; for(i=0; i<qzb;i++) { var via = sia[i]; if(via.style.display =="none"&& Rga) { continue; } if(SSDOM.isIgnored(via)) { continue; } if(via.getAttribute("msg")!= null) { continue; } var NQb = via.getAttribute("title"); if(NQb != null && NQb.length > 0) { if(NQb.trimTH().length > 0) { ria.push(via); } } else { NQb = via.getAttribute("alt"); if(NQb != null && NQb.length > 0) { if(NQb.trimTH().length > 0) { ria.push(via); } } } } return ria;}function xia(Xsb){ if(Xsb == null) { return""; } var gnb = Xsb.getAttribute("title"); if(gnb != null && gnb.length > 0) { return gnb; } else { var hnb = Xsb.getAttribute("alt"); if(hnb != null && hnb.length > 0) { return hnb; } else { var inb = Xsb.getAttribute("msg"); if(inb != null && inb.length > 0) { return inb; } } } return"";}function Dja(Eja){ var KBc =""; var Fja =""; var Gja = null; if(Sea == null) { var tvb = false; if(Xea < Vea ) { if(Xea > -1 && Xea < Wea.length) { var Ija = xia(Wea[Xea]); if(Ija.trimTH().length > 0) { if(Eda) { Gja = sIb(Wea[Xea]); } var ENb = new SpeechStream.SpeechRequest(); ENb.setString(Ija, SpeechStream.SpeechRequestBookmarks.OUTER); Fja = ENb.getText(); KBc = ENb.getFinalText(); tvb = true; } } } if(!tvb) { if(Eja) { $rw_autogenSpeechFilesCallback("Success"); } else { $rw_checkAutogenCachedFilesCallback("Success"); } return; } } else { var hOb = tMb(Sea, new Array()); Gja = hOb.voice; if(hOb.uAc != null) { Sea = hOb.uAc; Tea++; } KBc = hOb.xsb; Fja = hOb.DMb; } var flash = Xab.getConnector(); if(flash != null) { var oOb = APb(); var Rua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Rua = AQb(KBc); } else { Rua = AQb(Fja); } if(Kga) { oOb = Vua(oOb); Rua = Yua(Rua); } if(Oda) { var uOb = BPb(Rua); oOb = oOb +"/"+ uOb; } if(Eja) { var Uua = eya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.autogenSpeechFiles(KBc, oOb, Rua, !nfa, Uua); } else { var Enb = oOb +"/"+ Rua; flash.checkAutogenCachedFiles(Enb); } }}function $rw_autogenSpeechFilesCallback(Vja){ if(Vja =='Success') { var Wja = false; if(aea ) { if(Rda == 1 || Rda == 2) { Rda++; } else { Rda = 1; Wja = true; } switch(Rda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Wja = true; } if(Wja) { Sea = SSDOM.getNextSentence(Sea, null); if(Sea != null) { Uea++; if(Tea >= Uea) { $rwj('#pb1').progressBar((Uea / Tea) * 100); if(Bga) { var target = new THHoverTarget(null,null, LPb(Sea)); uqa(target); } Dja(true); } else { $rwj.unblockUI(); gea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!eea) { alert(gea); } if(typeof(dea) =="string") { gwa(dea); } } } else { if(Vea > 0 && Xea < (Vea - 1)) { ++Uea; $rwj('#pb1').progressBar((Uea / Tea) * 100); ++Xea; Dja(true); } else { $rwj.unblockUI(); var Uua = eya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; var flash = Xab.getConnector(); flash.autoGenComplete(Uua); if(dea == null && !eea) { alert("Page Cached Successfully!"); } } } } else { Uea++; Dja(true); } } else { $rwj.unblockUI(); gea = Vja; if(!eea) { alert(Vja); } if(typeof(dea) =="string") { gwa(dea); } }}function Uja(){ Wea = tia(); Tea = 0; Uea = 1; Yea = 0; Zea = 0; if(aea) { Rda = 1; $rw_setSpeedValue(SLOW_SPEED); } Sea = SSDOM.getFirstSentence(document.body); Tea = pia(Sea); Vea = Wea.length; Xea = -1; Dja(false);}function $rw_checkAutogenCachedFilesCallback(Vja){ if(Vja =='Success') { ++Yea; } else { ++Zea; } var Wja = false; if(aea) { if(Rda == 1 || Rda == 2) { Rda++; } else { Rda = 1; Wja = true; } switch(Rda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Wja = true; } if(Wja) { Sea = SSDOM.getNextSentence(Sea, null); if(Sea != null) { Uea++; if(Tea >= Uea) { $rwj('#pb1').progressBar((Uea / Tea) * 100); Dja(false); } else { $rwj.unblockUI(); gea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!eea) { alert(gea); } if(typeof(dea) =="string") { gwa(dea); } } } else { if(Vea > 0 && Xea < (Vea-1)) { ++Uea; $rwj('#pb1').progressBar((Uea / Tea) * 100); ++Xea; Dja(false); } else { $rwj.unblockUI(); if(Zea > 0) { gea ="Missing files!  Checked page and found that "+ Zea +" sentences out of "+ Uea +" where not cached."; fea = Zea; if(!eea) { alert(gea); } } if(typeof(dea) =="string") { gwa(dea); } else { if(Zea == 0 && !eea) { alert("Checked page and found that all "+ Uea +" sentences were cached."); } } } } } else { Uea++; Dja(false); }}function $rw_autogenCompleteCallback(Vja){ if(Vja !="Success") { gea = Vja; if(!eea) { alert("Finished autogeneration process.  "+ Vja); } } if(typeof(dea) =="string") { gwa(dea); } }function $rw_setTranslateSource(yZb){ SpeechStream.translatorData.setSource(yZb);}function $rw_setTranslateTarget(p_strTarget){ SpeechStream.translatorData.setTarget(p_strTarget);}var Xja = null;var Yja = null;var Zja = 0;function $rw_getTouchSelection(){ var Udb; var bja; if (window.getSelection().rangeCount>0 && !window.getSelection().isCollapsed) { Udb = window.getSelection().getRangeAt(0).cloneRange(); bja = window; } else { Udb = null; bja = null; var Jdb = SSDOM.getFrameSelection(window); if(Jdb) { var kAc = Jdb.getSelection(); if (kAc.rangeCount>0 && !kAc.isCollapsed) { Udb = kAc.getRangeAt(0).cloneRange(); bja = Jdb; } } } if(bfa && gfa >= 6 && dfa && Udb == null || bja == null) { ++Zja; if(Zja>=10) { Xja = Udb; Yja = bja; Zja = 0; } } else { Xja = Udb; Yja = bja; Zja = 0; }}function $rw_setBreakList(fAc){ var eja = Zga.pageData.eja; var fja = Zga.pageData.fja; var gja = fAc.split("~"); var i; for(i=0; i<gja.length; i++) { var Ivb = gja[i]; if(Ivb.length > 0) { if(Ivb.charAt(0) =="!") { Ivb = Ivb.substring(1); if(Zga.pageData.isInBreakList(Ivb)) { var Esb = eja.indexOf("~"+ Ivb +"~"); var Fsb = Esb + 1 + Ivb.length; eja = eja.substring(0, Esb) + eja.substring(Fsb); } if(!Zga.pageData.isInStyleList(Ivb)) { fja += Ivb +"~"; } } else { if(Zga.pageData.isInBreakList(Ivb)) { eja += Ivb +"~"; } if(Zga.pageData.isInStyleList(Ivb)) { var Esb = fja.indexOf("~"+ Ivb +"~"); var Fsb = Esb + 1 + Ivb.length; fja = fja.substring(0, Esb) + fja.substring(Fsb); } } } } Zga.pageData.eja = eja; Zga.pageData.fja = fja;}function $rw_parseNewSection(Xsb){ try { if(Xsb != null) { $rw_tagSentencesForDynamicSection(Xsb); if(Zda !="*"&& typeof(fkb) !="undefined") { if(aib != -1) { Tjb(aib); var Klb = function(){$rw_parseNewSection(Xsb);}; setTimeout(Klb, 100); return; } sjb(); } if(typeof($rw_refreshHighlights) =="function"&& Yda) { if(Hfb == 1) { Hfb = 2; } $rw_refreshHighlights(); } else { if(typeof(fkb) =="function"&& Yda) { fkb(); } } } } catch(err) { Fya(err.message); }}var lCb ="[\\x21\\x2E\\x3F\\x3A]";var mCb = /[\n\r\t ]{2,}/g;function $rw_tagSentencesForDynamicSection(Xsb){ if(Xsb == null) { return; } try { var nCb = false; var bNb = SSDOM.getNextNodeAllowMoveToChild(Xsb, false, Xsb); while(bNb != null) { if(bNb.nodeType == 3) { var iQb = bNb.parentNode.tagName.toLowerCase(); if(iQb =="textarea") { bNb = SSDOM.getNextNode(bNb, false, Xsb); continue; } var xsb = bNb.nodeValue; var sCb = xsb.trimSpaceTH(); var VDb = sCb.length > 0; if(oda && iQb =="a") { VDb = false; } if(!VDb) { if(Yda || Mda && (Aea || Xda || Kea) ) { if(nCb) { if(!oda) { bNb.nodeValue =" "; } nCb = false; bNb = SSDOM.getNextNode(bNb, false, Xsb); } else { var IAc = bNb; bNb = SSDOM.getNextNode(bNb, false, Xsb); if(!oda) { IAc.parentNode.removeChild(IAc); } } } else { bNb = SSDOM.getNextNode(bNb, false, Xsb); } } else { if(!oda) { if(Yda || Mda && (Aea || Xda || Kea) ) { if(sCb.length < xsb.length) { var cbb = false; sCb = xsb.trimSpaceStartTH(); if((xsb.length - sCb.length) > 0) { if(nCb) { xsb =" "+ sCb; } else { xsb = sCb; } cbb = true; } sCb = xsb.trimSpaceEndTH(); if((xsb.length - sCb.length) > 1) { xsb = sCb +" "; nCb = false; cbb = true; } if(cbb) { bNb.nodeValue = xsb; } } sCb = xsb.replace(mCb," "); if(sCb.length < xsb.length) { xsb = sCb; cbb = true; } } } var bzb; bzb = xsb.search(lCb); var xCb = (bNb.parentNode.getAttribute("texthelpSkip") != null); var yCb = bNb; if(bzb > -1 && bzb < (xsb.length - 1)) { var zCb = true; while(true) { var Ggb = eDb(xsb, bzb, bNb); if(Ggb) { break; } else { var BDb = xsb.substring(bzb + 1); var Cob = BDb.search(lCb); if(Cob > -1) { bzb = bzb + 1 + Cob; } else { zCb =false; break; } } } if(zCb) { var DDb = xsb.substring(0, bzb + 1); var EDb = xsb.substring(bzb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(DDb); var HDb = document.createTextNode(EDb); var ODb = bNb.parentNode; ODb.insertBefore(HDb, bNb); ODb.insertBefore(span, HDb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = HDb; yCb = NDb; } else { if(bNb.previousSibling != null || bNb.nextSibling != null || xCb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(xsb); var ODb = bNb.parentNode; ODb.insertBefore(span, bNb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = NDb; } yCb = bNb; bNb = SSDOM.getNextNode(bNb, false, null); } } else { if(bNb.previousSibling != null || bNb.nextSibling != null || xCb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(xsb); var ODb = bNb.parentNode; ODb.insertBefore(span, bNb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = NDb; } yCb = bNb; bNb = SSDOM.getNextNode(bNb, false, null); } if(Yda || Mda && (Aea || Xda || Kea) ) { var PDb = yCb.nodeValue; var QDb = yCb.nodeValue.length; if(QDb > 0 && PDb.charCodeAt(QDb - 1) == 32) { nCb = false; } else { nCb = true; } } } } else if(bNb.nodeType == 1) { if(Yda) { if(!SSDOM.isStyleNode(bNb)) { if(SSDOM.isLineBreakNode(bNb)) { nCb = false; } } else if(bNb.tagName.toLowerCase() =="img") { nCb = true; } } if(Aea) { if(bNb.tagName.toLowerCase() =="img") { var NQb = bNb.getAttribute("title"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } } } else if(Fea) { if(bNb.tagName.toLowerCase() =="img") { var NQb = bNb.getAttribute("msg"); if(!(NQb != null && NQb.length > 0)) { NQb = bNb.getAttribute("title"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } else { NQb = bNb.getAttribute("alt"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } } } } } var ZDb = bNb.getAttribute(caa); var aDb = bNb.getAttribute(baa); if(bNb.tagName.toLowerCase() =="pre"|| (ZDb != null && ZDb.length > 0) || (aDb != null && aDb.length > 0)) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, Xsb); } else { bNb = SSDOM.getNextNode(bNb, false, Xsb); } } else { bNb = SSDOM.getNextNode(bNb, false, Xsb); } } if(Yda) { bNb = SSDOM.getNextNodeAllowMoveToChild(Xsb, false, Xsb); while(bNb != null) { if(bNb.nodeType==3) { var VDb = bNb.nodeValue.trimTH().length > 0; if(VDb) { var WDb = bNb.parentNode; var YDb = WDb.getAttribute("rwthgen"); while((YDb != null && YDb.length > 0)) { WDb = WDb.parentNode; YDb = WDb.getAttribute("rwthgen"); } var XDb = WDb.getAttribute("id"); if(XDb != null && XDb.substr(0,14) =="rwTHnoteMarker") { var Okb = XDb; WDb.id =""; XDb = null; if(WDb.nextSibling == null && WDb.previousSibling == null && (WDb.parentNode.id==null||WDb.parentNode.id=="") ) { WDb.parentNode.id = Okb; } else { var TBb = WDb.ownerDocument.createElement("span"); WDb.id = Okb; while(WDb.firstChild != null) { TBb.appendChild(WDb.firstChild); } WDb.appendChild(TBb); WDb = TBb; } } if(XDb == null || XDb.length == 0 ) { var iyb = mka(bNb); if(iyb != null) { WDb.id = iyb; } } } bNb = SSDOM.getNextNode(bNb, false, Xsb); } else if(bNb.nodeType == 1) { if(Djb(bNb)) { if(bNb.tagName.toLocaleLowerCase() =="img") { var YDb = bNb.getAttribute("id"); if(YDb != null && YDb.substr(0,14) =="rwTHnoteMarker") { var Okb = YDb; bNb.id =""; YDb = null; if(bNb.nextSibling == null && bNb.previousSibling == null && (bNb.parentNode.id==null||bNb.parentNode.id=="") ) { bNb.parentNode.id = Okb; } else { var TBb = bNb.ownerDocument.createElement("span"); TBb.id = Okb; bNb.parentNode.insertBefore(TBb, bNb); TBb.appendChild(bNb); } } if(YDb == null || YDb.length == 0) { var iyb = qka(bNb); if(iyb != null) { bNb.id = iyb; } } } } var ZDb = bNb.getAttribute(caa); var aDb = bNb.getAttribute(baa); if( bNb.tagName.toLowerCase() =="pre"|| (ZDb != null && ZDb.length > 0) || (aDb != null && aDb.length > 0)) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, Xsb); } else { bNb = SSDOM.getNextNode(bNb, false, Xsb); } } else { bNb = SSDOM.getNextNode(bNb, false, Xsb); } } } } catch(exception) { Fya("Error in $rw_tagSentences: "+ exception); } zda = true;}function mka(Xsb){ if(Xsb != null && Xsb.nodeType == 3) { var fub = Xsb.ownerDocument; var Fob = fub.body; var xsb = Xsb.nodeValue; if(xsb != null) { xsb = xsb.replace(/\s+/g,""); var BHb = Xsb.parentNode; while(BHb != null && BHb.parentNode != null) { BHb = BHb.parentNode; if(BHb.id != null&&BHb.id.length>0) { if(BHb.id.substr(0, 4) !="rwTH") { xsb = BHb.id + xsb; break; } } if(BHb == Fob) { break; } } var iyb ="rwTH"+ HOb(xsb); if(fub.getElementById(iyb) != null) { var n = 1; while(fub.getElementById(iyb + n) != null) { ++n; } iyb = iyb + n; } return iyb; } } return null;}function qka(Xsb){ if(Xsb != null && Xsb.nodeType == 1 && Xsb.tagName.toLocaleLowerCase() =="img") { var fub = Xsb.ownerDocument; var Fob = fub.body; var xsb = Xsb.src; if(xsb != null) { xsb = xsb.replace(/\s+/g,""); var BHb = Xsb; while(BHb != null && BHb.parentNode != null) { BHb = BHb.parentNode; if(BHb.id != null&&BHb.id.length>0) { if(BHb.id.substr(0, 4) !="rwTH") { xsb = BHb.id + xsb; break; } } if(BHb == Fob) { break; } } var iyb ="rwTH"+ HOb(xsb); if(fub.getElementById(iyb) != null) { var n = 1; while(fub.getElementById(iyb + n) != null) { ++n; } iyb = iyb + n; } return iyb; } } return null;}if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.annotateBlock = {};SpeechStream.annotateBlock.m_bUseAnnotations = true;SpeechStream.annotateBlock.setUseAnnotations = function(p_bUse){ SpeechStream.annotateBlock.m_bUseAnnotations = p_bUse;};SpeechStream.annotateBlock.getUseAnnotations = function(){ return SpeechStream.annotateBlock.m_bUseAnnotations;};function $rw_isCustId(p_id){ if(p_id==1600) { return Xda; } else { return false; }}function $rw_disableSpeech(){ if(!Jga) { try { var IEb = SpeechStream.EnumIconParameter; for (var i = 0; i < mea; i++) { var enb = g_icons[i][IEb.ICON_NAME]; if (GEb.indexOf(enb) > -1) { Zza(g_icons[i][IEb.ICON_NAME],"mask", g_icons[i][IEb.ICON_OFFSET], false); } } } catch(err) { thLogE(err); } } Jga = true; $rw_divPress(Rba); $rw_divPress(Pba); $rw_divPress(Zba);}function $rw_enableSpeech(){ if(Jga) { try { var IEb = SpeechStream.EnumIconParameter; for (var i = 0; i < mea; i++) { var enb = g_icons[i][IEb.ICON_NAME]; if (GEb.indexOf(enb) > -1) { Zza(g_icons[i][IEb.ICON_NAME],"flat", g_icons[i][IEb.ICON_OFFSET], false); } } } catch(err) { thLogE(err); } } Jga = false; $rw_divPress(Rba); $rw_divPress(Pba); $rw_divPress(Zba);}function $rw_setApipFolder(Wua){ Lga = Wua;}function $rw_setApipFile(Zua){ Mga = Zua;}if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.Dom = function(p_dat){ var self = this; this.bIE = false; this.bIEOld = false; if(typeof(p_dat) !="undefined") { self.bIE = p_dat.browser.bIE; self.bIEOld = p_dat.browser.bIEOld; } else { try { window.console.log("Data not available when setting up the SpeechStream.Dom"); } catch(err) { } }};SpeechStream.dom = new SpeechStream.Dom(Zga);var SSDOM = SpeechStream.dom;SSDOM.toString = function(){ return"Singleton instance to control DOM requests.";};SSDOM.alert = function(){ alert("testing SSDOM "+ SSDOM.toString());};SSDOM.getPreviousNode = function(Xsb, p_bGoByStyle, eSb){ if(Xsb == null || Xsb == eSb) { return null; } var ZTb = Xsb; if (ZTb.previousSibling != null) { ZTb = ZTb.previousSibling; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(ZTb)) { return null; } } if(ZTb != null && SSDOM.isInvalidNode(ZTb)) { if(eSb == ZTb) { return null; } ZTb = SSDOM.getPreviousNode(ZTb, p_bGoByStyle, eSb); } else { while(ZTb != null && ZTb.lastChild != null) { if(ZTb.nodeType == 1 && ZTb.tagName.toLowerCase() =="math") { break; } ZTb = ZTb.lastChild; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(ZTb)) { ZTb = null; } } if(ZTb != null && SSDOM.isInvalidNode(ZTb)) { if(eSb == ZTb) { return null; } ZTb = SSDOM.getPreviousNode(ZTb, p_bGoByStyle, eSb); break; } } } } else { ZTb = ZTb.parentNode; if(p_bGoByStyle && ZTb != null) { if(!SSDOM.isStyleNode(ZTb)) { ZTb = null; } } } return ZTb;};SSDOM.getNextNodeImpl = function(Xsb, p_bGoByStyle, eSb, p_bDeferEndNodeCheck, p_bAlwaysIgnoreChild){ if(Xsb == null || (Xsb == eSb && !p_bDeferEndNodeCheck)) { return null; } var Jla = SSDOM.isInvalidNode(Xsb); if(Xsb.nodeType == 1 && Xsb.tagName.toLowerCase() =="math") { Jla = true; } var SNb = null; if(Xsb == eSb && p_bDeferEndNodeCheck) { if(!Jla && Xsb.firstChild != null) { SNb = Xsb.firstChild; } else { return null; } } else { SNb = Xsb; if(SNb.firstChild != null && !Jla && !p_bAlwaysIgnoreChild) { SNb = SNb.firstChild; } else if(SNb.nextSibling != null) { SNb = SNb.nextSibling; } else { while (SNb != null && SNb.nextSibling == null) { SNb = SNb.parentNode; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(SNb)) { SNb = null; } } if(eSb == SNb) { break; } } if (SNb != null && eSb != SNb) { SNb = SNb.nextSibling; } } } if(SNb != null) { if(p_bGoByStyle) { if(!SSDOM.isStyleNode(SNb)) { SNb = null; } } } if(SNb != null && SSDOM.isInvalidNode(SNb)) { SNb = SSDOM.getNextNodeImpl(SNb, p_bGoByStyle, eSb, false, p_bAlwaysIgnoreChild); if(p_bDeferEndNodeCheck && SNb == eSb && Xsb == eSb) { SNb = null; } } return SNb;};SSDOM.getNextNode = function(Xsb, p_bGoByStyle, eSb){ return SSDOM.getNextNodeImpl(Xsb, p_bGoByStyle, eSb, false, false);};SSDOM.getNextNodeAllowMoveToChild = function(Xsb, p_bGoByStyle, eSb){ return SSDOM.getNextNodeImpl(Xsb, p_bGoByStyle, eSb, true, false);};SSDOM.getPreviousNodeIgnoreChildren = function(Xsb, p_bGoByStyle, eSb){ if(Xsb == null || Xsb == eSb) { return null; } var ZTb = Xsb; if (ZTb.previousSibling != null) { ZTb = ZTb.previousSibling; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(ZTb)) { ZTb = null; } } if(ZTb != null && SSDOM.isInvalidNode(ZTb)) { if(eSb == ZTb) { ZTb = null; } else { ZTb = SSDOM.getPreviousNodeIgnoreChildren(ZTb, p_bGoByStyle, eSb); } } } else { ZTb = ZTb.parentNode; if(p_bGoByStyle && ZTb != null) { if(!SSDOM.isStyleNode(ZTb)) { ZTb = null; } } } return ZTb;};SSDOM.getNextNodeIgnoreChildren = function(Xsb, p_bGoByStyle, eSb){ return SSDOM.getNextNodeImpl(Xsb, p_bGoByStyle, eSb, false, true);};SSDOM.getFirstChildTextNode = function(Xsb, p_bAllowImg){ if(Xsb == null) { return null; } if(Xsb.firstChild == null || SSDOM.isInvalidNode(Xsb)) { return Xsb; } if(Xsb.nodeType == 1 && Xsb.tagName.toLowerCase() =="textarea") { return Xsb; } if(Xsb.nodeType == 1 && Xsb.tagName.toLowerCase() =="math") { return Xsb; } var Sub = Xsb.firstChild; if(Sub.nodeType == 3) { return Sub; } else if(Sub.nodeType == 1 && p_bAllowImg && Sub.tagName.toLowerCase() =="img"&& Sub.getAttribute("msg") != null && Sub.getAttribute("msg").length > 0) { return Sub; } else { if(p_bAllowImg) { return SSDOM.getNextTextNode(Sub, false, Xsb); } else { return SSDOM.getNextTextNodeNoImg(Sub, false, Xsb, true); } }};SSDOM.getLastChildTextNode = function(Xsb, p_bAllowImg){ if(Xsb == null) { return null; } if(Xsb.lastChild == null || SSDOM.isInvalidNode(Xsb)) { return Xsb; } if(Xsb.nodeType == 1 && Xsb.tagName.toLowerCase() =="textarea") { return Xsb; } if(Xsb.nodeType == 1 && Xsb.tagName.toLowerCase() =="math") { return Xsb; } var Sub = Xsb.lastChild; while(Sub != null) { if(Sub.nodeType == 3) { return Sub; } else if(Sub.nodeType == 1 && p_bAllowImg && Sub.tagName.toLowerCase() =="img"&& Sub.getAttribute("msg") != null && Sub.getAttribute("msg").length > 0) { return Sub; } else if(SSDOM.isInvalidNode(Sub) || Sub.lastChild == null) { var Cjb; if(p_bAllowImg) { Cjb = SSDOM.getPreviousTextNode(Sub, false, Xsb); } else { Cjb = SSDOM.getPreviousTextNodeNoImg(Sub, false, Xsb, true); } return Cjb; } else { Sub = Sub.lastChild; } } return Xsb;};SSDOM.getNextNodeIEBugFix = function(MVb){ var Jla = SSDOM.isInvalidNode(MVb); var SNb = MVb; if (SNb.firstChild != null && !Jla) { SNb = SNb.firstChild; } else if(SNb.nextSibling != null) { var bNb = SNb; SNb = SNb.nextSibling; var Sub = SNb; var Fob = Sub.ownerDocument.body; while(Sub != null && Sub != Fob) { if(Sub == bNb) { throw"DOM Error"; } Sub = Sub.parentNode; } } else { while (SNb != null && SNb.nextSibling == null) { SNb = SNb.parentNode; } if (SNb != null) { var bNb = SNb; SNb = SNb.nextSibling; var Sub = SNb; var Fob = Sub.ownerDocument.body; while(Sub != null && Sub != Fob) { if(Sub == bNb) { throw"DOM Error"; } Sub = Sub.parentNode; } } } if(SNb != null && SSDOM.isInvalidNode(SNb)) { SNb = SSDOM.getNextNodeIEBugFix(SNb); } return SNb;};SSDOM.getSentenceBreakToLeft = function(gib, eSb){ if(typeof(eSb) =="undefined") { eSb = null; } if(gib == null || gib.node == null) { return null; } var node = gib.node; var Nyb = gib.offset; if(gib.node.nodeType == 1 && gib.node.tagName.toLowerCase() =="math") { return gib; } if(gib.forwardBias) { if(node.nodeType == 3 && Nyb == node.nodeValue.length) { node = SSDOM.getNextTextNode(node, true, eSb); Nyb = 0; if(node == null) { node = gib.node; Nyb = gib.offset; } } } else { if(Nyb > 0) { --Nyb; } else { node = SSDOM.getPreviousTextNode(node, true, eSb); if(node == null) { return gib; } if(node.nodeType == 3) { Nyb = node.nodeValue.length - 1; } else { Nyb = 0; if(node.tagName.toLowerCase() =="math") { return gib; } } } } if(node.nodeType == 3) { var sib = node.nodeValue.charAt(Nyb); if(sib =='.'|| sib =='!'|| sib =='?'|| sib ==':') { if(Nyb > 0) { --Nyb; } else { node = SSDOM.getPreviousTextNode(node, true, eSb); if(node == null) { return gib; } if(node.nodeType == 3) { Nyb = node.nodeValue.length - 1; } else { Nyb = 0; if(node.tagName.toLowerCase() =="math") { return gib; } } } } } var ela = node; var fla = Nyb; var ZTb = node; var UNb = Nyb; var BVb = false; var hla =' '; while(!BVb) { if(ZTb.nodeType == 3) { var xsb = ZTb.nodeValue; if(xsb.length > 0) { if(UNb == -1) { UNb = xsb.length; } xsb = xsb.replace(/[\x21\x3f\x3a]/g,"."); var bzb = xsb.lastIndexOf(".", UNb); while(bzb > -1) { if(eDb(xsb, bzb, ZTb)) { if(bzb < xsb.length - 1) { ela = ZTb; fla = bzb + 1; BVb = true; break; } else { if(!cxa(hla)) { BVb = true; break; } } } if(bzb == 0) { bzb = -1; } else { bzb = xsb.lastIndexOf(".", bzb - 1); } } if(BVb) { break; } if(xsb.trimTH().length > 0) { ela = ZTb; fla = 0; } hla = xsb.charAt(0); } } else { if(SSDOM.isSpecialCase(ZTb) && ZTb.getAttribute("ignore") == null) { if(ZTb.tagName.toLowerCase() =="math") { BVb = true; break; } ela = ZTb; fla = 0; } } ZTb = SSDOM.getPreviousNode(ZTb, true, eSb); UNb = -1; if(ZTb == null) { BVb = true; break; } if(ZTb.nodeType == 3 && SSDOM.checkForSpecialParent(ZTb) != null) { ZTb = SSDOM.checkForSpecialParent(ZTb); if(ZTb == null) { BVb = true; break; } } } if(ela.nodeType == 3) { var xsb = ela.nodeValue; if(fla < xsb.length) { while(fla < xsb.length) { if(Aya(xsb.charAt(fla))) { ++fla; } else { break; } } } } return new Sqa(ela, fla, true);};SSDOM.getSentenceBreakToRight = function(gib, eSb){ if(typeof(eSb) =="undefined") { eSb = null; } if(gib == null || gib.node == null) { return null; } var SNb = gib.node; var VNb = gib.offset; var ela = SNb; var fla = VNb; var BVb = false; var hla =' '; while(!BVb) { if(SNb.nodeType == 3) { var xsb = SNb.nodeValue; if(xsb.length > 0) { if(hla =='.') { var jla = xsb.charAt(VNb); if(!cxa(jla)) { BVb = true; break; } } xsb = xsb.replace(/[\x21\x3f\x3a]/g,"."); var bzb = xsb.indexOf(".", VNb); while(bzb > -1) { if(eDb(xsb, bzb, SNb)) { if(bzb < xsb.length - 1) { ela = SNb; fla = bzb + 1; BVb = true; } break; } VNb = bzb + 1; bzb = xsb.indexOf(".", VNb); } if(BVb) { break; } if(xsb.trimTH().length > 0) { ela = SNb; fla = xsb.length; } hla = xsb.charAt(xsb.length -1); if(hla =='.') { if(!eDb(xsb, xsb.length -1, SNb)) { hla =' '; } } } SNb = SSDOM.getNextNode(SNb, true, eSb); } else { if(SSDOM.isSpecialCase(SNb) && SNb.getAttribute("ignore") == null) { if(SNb.tagName.toLowerCase() =="math") { BVb = true; break; } ela = SNb; fla = 0; SNb = SSDOM.getNextNodeIgnoreChildren(SNb, true, eSb); } else { SNb = SSDOM.getNextNode(SNb, true, eSb); } } VNb = 0; if(SNb == null) { BVb = true; break; } } if(ela.nodeType == 3) { var xsb = ela.nodeValue; if(fla > 0 && fla <= xsb.length) { while(fla > 0) { if(Aya(xsb.charAt(fla - 1))) { --fla; } else { break; } } } } return new Sqa(ela, fla, false);};SSDOM.getPreviousTextNode = function(Xsb, p_bGoByStyle, eSb){ var ZTb = Xsb; var tvb = false; while (ZTb != null && ZTb != eSb) { ZTb = SSDOM.getPreviousNode(ZTb, p_bGoByStyle, eSb); if(ZTb != null) { if (ZTb.nodeType == 3 && ZTb.parentNode.tagName.toLowerCase() !="textarea") { if(ZTb.nodeValue.length > 0) { tvb = true; } } if (ZTb.nodeType == 1 && ZTb.tagName.toLowerCase() =="math") { tvb = true; } else if(ZTb.nodeType == 1 && ZTb.tagName.toLowerCase() =="img") { var NQb = ZTb.getAttribute("msg"); if (NQb != null && NQb.length > 0) { tvb = true; } } if(tvb) { return ZTb; } } } return null;};SSDOM.getPreviousTextNodeNoBlank = function(Xsb, p_bGoByStyle, eSb){ var ZTb = Xsb; while(ZTb != null && ZTb != eSb) { ZTb = SSDOM.getPreviousTextNode(ZTb, p_bGoByStyle, eSb); if(ZTb != null) { var wla = (ZTb.nodeType == 3)? ZTb.nodeValue.trimTH() : ZTb.getAttribute("msg").trimTH(); if(Nya(wla)) { return ZTb; } } } return null;};SSDOM.getPreviousTextNodeNoImg = function(Xsb, p_bGoByStyle, eSb, p_bIncludeBlanks){ var ZTb = (p_bIncludeBlanks)? SSDOM.getPreviousTextNode(Xsb, p_bGoByStyle, eSb) : SSDOM.getPreviousTextNodeNoBlank(Xsb, p_bGoByStyle, eSb); while(ZTb != null && ZTb.nodeType != 3 && ZTb != eSb) { if(ZTb.tagName.toLowerCase() =="math") { break; } ZTb = (p_bIncludeBlanks)? SSDOM.getPreviousTextNode(ZTb, p_bGoByStyle, eSb) : SSDOM.getPreviousTextNodeNoBlank(ZTb, p_bGoByStyle, eSb); } return ZTb;};SSDOM.getNextTextNode = function(Xsb, p_bGoByStyle, eSb){ var SNb = Xsb; var tvb = false; while (SNb != null && SNb != eSb) { SNb = SSDOM.getNextNode(SNb, p_bGoByStyle, eSb); if(SNb != null) { if (SNb.nodeType == 3 && SNb.parentNode.tagName.toLowerCase() !="textarea") { if(SNb.nodeValue.length > 0) { tvb = true; } } if (SNb.nodeType == 1 && SNb.tagName.toLowerCase() =="math") { tvb = true; } else if(SNb.nodeType == 1 && SNb.tagName.toLowerCase() =="img") { var NQb = SNb.getAttribute("msg"); if (NQb != null && NQb.length > 0) { tvb = true; } } if(tvb) { return SNb; } } } return null;};SSDOM.getNextTextNodeNoBlank = function(Xsb, p_bGoByStyle, eSb){ var SNb = Xsb; while(SNb != null && SNb != eSb) { SNb = SSDOM.getNextTextNode(SNb, p_bGoByStyle, eSb); if(SNb != null) { var wla; if(SNb.nodeType == 3) { wla = SNb.nodeValue.trimTH(); } else { if(SNb.tagName.toLowerCase() =="img") { wla = SNb.getAttribute("msg").trimTH(); } else if(SNb.tagName.toLowerCase() =="math") { wla = SSDOM.getTextFromMathMl(SNb); } } if(Nya(wla)) { return SNb; } } } return null;};SSDOM.getNextTextNodeNoImg = function(Xsb, p_bGoByStyle, eSb, p_bIncludeBlanks){ var SNb = (p_bIncludeBlanks)? SSDOM.getNextTextNode(Xsb, p_bGoByStyle, eSb) : SSDOM.getNextTextNodeNoBlank(Xsb, p_bGoByStyle, eSb); while(SNb != null && SNb.nodeType != 3 && SNb != eSb) { if(SNb.tagName.toLowerCase() =="math") { break; } SNb = (p_bIncludeBlanks)? SSDOM.getNextTextNode(SNb, p_bGoByStyle, eSb) : SSDOM.getNextTextNodeNoBlank(SNb, p_bGoByStyle, eSb); } return SNb;};SSDOM.getFirstSentence = function(BWb){ var Yma = SSDOM.getFirstChildTextNode(BWb, true); var Yfb = new Sqa(Yma, 0, true); var Zfb = SSDOM.getSentenceBreakToRight(Yfb, BWb); Yfb = SSDOM.getSentenceBreakToLeft(Zfb, BWb); if(Yfb == null || Zfb == null) { return null; } var onb = new Yqa(Yfb, Zfb); var Ima = false; while(!Ima) { Ima = Xya(onb) && SSDOM.checkSentence(onb); if(!Ima) { var Jma = SSDOM.getNextSentence(onb, BWb); if(Jma == null || (Zfb.node == Jma.Zfb.node && Zfb.offset == Jma.Zfb.offset) || (Yfb.node == Jma.Yfb.node && Yfb.offset == Jma.Yfb.offset)) { break; } else { onb = Jma; } } } return onb;};SSDOM.getLastSentence = function(BWb){ var Yma = SSDOM.getLastChildTextNode(BWb, true); var Zfb; if(Yma.nodeType == 3) { Zfb = new Sqa(Yma, Yma.nodeValue.length, false); } else { Zfb = new Sqa(Yma, -1, false); } var Yfb = SSDOM.getSentenceBreakToLeft(Zfb, BWb); Zfb = SSDOM.getSentenceBreakToRight(Yfb, BWb); if(Yfb == null || Zfb == null) { return null; } var onb = new Yqa(Yfb, Zfb); var Ima = false; while(!Ima) { Ima = Xya(onb) && SSDOM.checkSentence(onb); if(!Ima) { var Jma = SSDOM.getPreviousSentence(onb, BWb); if(Jma == null || (Zfb.node == Jma.Zfb.node && Zfb.offset == Jma.Zfb.offset) || (Yfb.node == Jma.Yfb.node && Yfb.offset == Jma.Yfb.offset)) { break; } else { onb = Jma; } } } return onb;};SSDOM.getSentenceFromPoint = function(gib){ var Zfb = SSDOM.getSentenceBreakToRight(gib); var Yfb = SSDOM.getSentenceBreakToLeft(Zfb); if(Yfb == null || Zfb == null) { return null; } return new Yqa(Yfb, Zfb);};SSDOM.getSentenceFromPointByLang = function(gib){ var Zfb = SSDOM.getSentenceBreakToRight(gib); var vMb = sIb(gib.node); var wMb = FJb(gib.node, Zfb.node, vMb); if(wMb != null) { Zfb = wMb; } var Yfb = SSDOM.getSentenceBreakToLeft(Zfb); vMb = sIb(Yfb.node); var Qma = LJb(Yfb.node, Zfb.node, vMb); if(Qma != null) { Yfb = Qma; } if(Yfb == null || Zfb == null) { return null; } return new Yqa(Yfb, Zfb);};SSDOM.getSentenceFromPoints = function(YNb,ZNb){ var Yfb = SSDOM.getSentenceBreakToLeft(YNb, null); var Zfb = SSDOM.getSentenceBreakToRight(ZNb, null); if(Yfb == null || Zfb == null) { return null; } return new Yqa(Yfb, Zfb);};SSDOM.getNextSentence = function(OPb, eSb){ if(OPb == null) { return null; } if(typeof(eSb) =="undefined") { eSb = null; } var bNb = OPb.Zfb.node; var dma = OPb.Zfb.offset; if(OPb.Zfb.isSpecialCase()) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, eSb); dma = 0; } var Zfb; var Yfb; while(bNb != null) { if(bNb.nodeType == 3 && dma < bNb.nodeValue.length) { Zfb = SSDOM.getSentenceBreakToRight( new Sqa(bNb, dma, false), eSb); if(Zfb == null) { return null; } if(Zfb.node == bNb && Zfb.offset == dma) { var Yma = SSDOM.getNextTextNodeNoBlank(bNb, false, eSb); if(Yma == null) { return null; } Zfb = SSDOM.getSentenceBreakToRight(new Sqa(Yma, 0, false), eSb); } } else { var Yma = SSDOM.getNextTextNodeNoBlank(bNb, false, eSb); if(Yma == null) { return null; } Zfb = SSDOM.getSentenceBreakToRight(new Sqa(Yma, 0, false), eSb); } Yfb = SSDOM.getSentenceBreakToLeft(Zfb, null); if(Yfb == null) { return null; } if(OPb.Yfb.node != Yfb.node || OPb.Yfb.offset != Yfb.offset) { var onb = new Yqa(Yfb, Zfb); if(SSDOM.checkSentence(onb) && Xya(onb)) { return onb ; } } bNb = Zfb.node; if(bNb.nodeType == 3) { var nyb = bNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var czb = nyb.indexOf(".", Zfb.offset + 1); if(czb == -1) { dma = nyb.length; } else { dma = czb; } } } return null;};SSDOM.getPreviousSentence = function(OPb, eSb){ if(typeof(eSb) =="undefined") { eSb = null; } var bNb = OPb.Yfb.node; var dma = OPb.Yfb.offset; var Yfb; var Zfb; while(bNb != null) { if(bNb.nodeType == 3) { var nyb = bNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var czb; if(dma > 0) { czb = nyb.lastIndexOf(".", dma); } else if(dma == 0) { czb = -1; } else { czb = nyb.lastIndexOf("."); } while(czb > -1) { dma = czb; Zfb = SSDOM.getSentenceBreakToRight(new Sqa(bNb, dma, true), eSb); if(Zfb == null) { return null; } if(Zfb.node != OPb.Zfb.node || Zfb.offset != OPb.Zfb.offset) { Yfb = SSDOM.getSentenceBreakToLeft(Zfb, eSb); if(Yfb == null) { return null; } var onb = new Yqa(Yfb, Zfb); if(SSDOM.checkSentence(onb) && Xya(onb)) { return onb ; } } if(czb == 0) { czb = -1; } else { czb = nyb.lastIndexOf(".", czb - 1); } } } dma = -1; Sub = SSDOM.getPreviousTextNodeNoImg(bNb, true, eSb, false); if(Sub != null) { bNb = Sub; } else { bNb = SSDOM.getPreviousTextNodeNoBlank(bNb, false, eSb); if(bNb != null) { if(bNb.nodeType == 3) { Zfb = SSDOM.getSentenceBreakToRight(new Sqa(bNb, bNb.nodeValue.length, false), eSb); } else { Zfb = SSDOM.getSentenceBreakToRight(new Sqa(bNb, 0, false), eSb); } if(Zfb == null) { return null; } if(Zfb.node != OPb.Zfb.node || Zfb.offset != OPb.Zfb.offset) { Yfb = SSDOM.getSentenceBreakToLeft(Zfb, eSb); if(Yfb == null) { return null; } return new Yqa(Yfb, Zfb); } } } } return null;};SSDOM.checkSentence = function(OPb){ var ysb = OPb.Yfb.node; var Fob = ysb.ownerDocument.body; while(ysb != null && ysb != Fob) { if(ysb.nodeType == 1) { if(ysb.className =="rwDictDefin"|| ysb.className =="rwPopupContent"|| ysb.className =="rwToolbarBarCollect") { break; } if(ysb.getAttribute(caa) != null) { return false; } } ysb = ysb.parentNode; } var Ufb = OPb.Zfb.node; if(Ufb != ysb) { while(Ufb != null && Ufb != Fob) { if(Ufb.className =="rwDictDefin"|| Ufb.className =="rwPopupContent"|| Ufb.className =="rwToolbarBarCollect") { break; } if(Ufb.nodeType == 1 && Ufb.getAttribute(caa) != null) { return false; } Ufb = Ufb.parentNode; } } return true;};SSDOM.getStartOfParagraph = function(Xsb){ var IAb; var match = Xsb; var Cjb = SSDOM.getPreviousNode(Xsb, true, null); while(Cjb != null) { IAb = false; if(Cjb.nodeType == 1) { if(SSDOM.isSpecialCase(Cjb)) { if(Cjb.getAttribute("ignore") != null) { IAb = true; } } else { IAb = true; } } else if(Cjb.nodeType == 3) { if(Cjb.nodeValue.trimTH().length == 0) { IAb = true; } } if(!IAb) { match = Cjb; } Cjb = SSDOM.getPreviousNode(Cjb, true, null); } return match;};SSDOM.getEndOfParagraph = function(Xsb){ var IAb; var match = Xsb; var nextNode = SSDOM.getNextNode(Xsb, true, null); while(nextNode != null) { IAb = false; if(nextNode.nodeType == 1) { if(SSDOM.isSpecialCase(nextNode)) { if(nextNode.getAttribute("ignore") != null) { IAb = true; } } else { IAb = true; } } else if(nextNode.nodeType == 3) { if(nextNode.nodeValue.trimTH().length == 0) { IAb = true; } } if(!IAb) { match = nextNode; } nextNode = SSDOM.getNextNode(nextNode, true, null); } return match;};SSDOM.getEndOfWordAsCaret = function(ffb){ var PAc = null; var node = ffb.node; if(node.nodeType != 3) { return null; } var xsb = node.nodeValue; var Nyb = ffb.offset; var tvb = false; var i; var c; var uma = false; while(!tvb) { for(i=Nyb;i<xsb.length; i++) { c = xsb.charCodeAt(i); if(!Kya(c)) { if(uma) { return new Sqa(node, i, false); } else { return PAc; } } else { uma = true; } } if(!tvb) { if(uma) { PAc = new Sqa(node, xsb.length, false); uma = false; } node = SSDOM.getNextTextNode(node, true, null); if(node == null) { break; } if(node.nodeType != 3) { break; } xsb = node.nodeValue; Nyb = 0; } } return PAc;};SSDOM.Bnb = function(o, p, q){ function r(a) { var b; if(typeof DOMParser !="undefined") { b = (new DOMParser()).parseFromString(a,"application/xml"); } else { var c = ["MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]; for(var i = 0; i < c.length && !b; i++) { try { b = new ActiveXObject(c[i]); b.loadXML(a); } catch(e) { } } } return b; } function s(a, b, c) { a[b] = function() { return eval(c); }; } function t(b, c, d) { if(typeof d =="undefined") { d = 1; } if(d > 1) { if(c.nodeType == 1) { var e = document.createElement(c.nodeName); var f = {}; for(var a = 0,g = c.attributes.length; a < g; a++) { var h = c.attributes[a].name,k = c.attributes[a].value,l = (h.substr(0, 2) =="on"); if(l) { f[h] = k; } else { switch(h) { case"class":e.className = k;break;case"for":e.htmlFor = k;break;default:e.setAttribute(h, k); } } } b = b.appendChild(e); for(l in f) { s(b, l, f[l]); } } else if(c.nodeType == 3) { var m = (c.nodeValue ? c.nodeValue :""); var n = m.replace(/^\s*|\s*$/g,""); if(n.length < 7 || (n.indexOf("<!--") != 0 && n.indexOf("-->") != (n.length - 3))) { b.appendChild(document.createTextNode(m)); } } } for(var i = 0,j = c.childNodes.length; i < j; i++) { t(b, c.childNodes[i], d + 1); } } p ="<root>"+ p +"</root>"; var u = r(p); if(o && u) { if(q != false) { while(o.lastChild) { o.removeChild(o.lastChild); } } t(o, u.documentElement); }};SSDOM.isStyleNode = function(Xsb){ if(Xsb == null) { return false; } if(Xsb.nodeType != 1) { return Xsb.nodeType == 3; } var enb = Xsb.tagName.toLowerCase().trimTH(); if(enb == Zga.pageData.strHighlightTag) { var xjb = Xsb.getAttribute("started"); if(xjb != null && xjb =="1") { return false; } } if(enb =="span"&& Xsb.getAttribute(hba) != null) { return false; } return Zga.pageData.isInStyleList(enb);};SSDOM.isInvalidNode = function(Xsb){ if(Xsb == null) { return true; } if(Xsb.nodeType != 1) { return Xsb.nodeType != 3; } var attr; attr = Xsb.getAttribute("ignore"); if(attr != null) { return true; } attr = Xsb.getAttribute(hba); if(attr != null && Zga.controlData.bIgnoreSkipSection) { return true; } if(Rga) { var xma = SSDOM.getComputedStyle(Xsb); if(xma != null) { if(xma.visibility =="hidden"|| xma.display =="none") { return true; } } } var enb = Xsb.tagName.toLowerCase(); return enb =="link"|| enb =="area"|| enb =="script"|| enb =="noscript"|| enb =="annotation"|| enb =="style"|| enb =="!--"|| enb =="title"|| enb =="html:script"; };SSDOM.isInvalidNodeNested = function(Xsb){ if(Xsb == null) { return true; } var Fob = Xsb.ownerDocument.body; var Sub = Xsb; while(Sub != null) { if(SSDOM.isInvalidNode(Sub)) { return true; } if(Sub==Fob) { break; } Sub = Sub.parentNode; } return false;};SSDOM.isIgnored = function(Xsb){ if(Xsb != null && Xsb.nodeType == 3) { Xsb = Xsb.parentNode; } if(Xsb == null) { return true; } var Fob = Xsb.ownerDocument.body; var Sub = Xsb; while(Sub != null && Sub.nodeType == 1) { if(Sub.getAttribute("ignore") != null) { return true; } if(Sub==Fob) { break; } Sub = Sub.parentNode; } return false;};SSDOM.isLineBreakNode = function(MVb){ if(MVb.nodeType != 1) { return false; } var enb = MVb.tagName.toLowerCase().trimTH(); return Zga.pageData.isInBreakList(enb);};SSDOM.isFollowedBySpace = function(ffb){ var node = ffb.node; var Nyb = ffb.offset; if(node.nodeType != 3) { return false; } if(Nyb == node.nodeValue.length) { Nyb = 0; node = SSDOM.getNextTextNodeNoImg(node, true, null, true); if(node == null) { return false; } } var c = node.nodeValue.charCodeAt(Nyb); return c == 32 || c == 160;};SSDOM.isFollowedByWordBreak = function(ffb){ if(!ffb.forwardBias) { ffb = ffb.clone(); ffb.forwardBias = true; } if(ffb.offset == ffb.node.nodeValue.length) { ffb = SSDOM.moveCaret(ffb, 0, true); if(ffb == null) { return true; } } var c = ffb.node.nodeValue.charCodeAt(ffb.offset); if(c == 39) { if(arguments.length > 1 && arguments[1] === true) { return true; } else { var Fna = SSDOM.moveCaret(ffb, 1, true); if(Fna == null) { return true; } return SSDOM.isFollowedByWordBreak(Fna, true); } } else { return !Wxa(c); }};SSDOM.isFollowingWordBreak = function(ffb){ if(ffb.forwardBias) { ffb = ffb.clone(); ffb.forwardBias = true; } if(ffb.offset == 0) { ffb = SSDOM.moveCaret(ffb, 0, true); if(ffb == null) { return true; } } var c = ffb.node.nodeValue.charCodeAt(ffb.offset - 1); if(c == 39) { if(arguments.length > 1 && arguments[1] === true) { return true; } else { var Gna = SSDOM.moveCaret(ffb, -1, true); if(Gna == null) { return true; } return SSDOM.isFollowingWordBreak(Gna, true); } } else { return !Wxa(c); }};SSDOM.isSpecialCase = function(Xsb){ if(Xsb == null) { return false; } if(Xsb.nodeType == 1) { var tagName = Xsb.tagName.toLowerCase(); if(tagName =="span") { var attr = Xsb.getAttribute("pron"); if(attr != null) { return true; } attr = Xsb.getAttribute("chunk"); if(attr != null) { return true; } } else if(tagName =="acronym"|| tagName =="abbr") { var attr = Xsb.getAttribute("title"); if(attr != null) { return true; } } else if(tagName =="chunk") { return true; } else if(tagName =="img") { var attr = Xsb.getAttribute("msg"); if(attr != null) { return true; } } else if(tagName =="math") { var vTb = SSDOM.getTextFromMathMl(Xsb); if(vTb.length > 0) { return true; } } if(Xsb.getAttribute("ignore") != null) { return true; } } return false;};SSDOM.isSpecialCaseHighlightable = function(Xsb){ if(Xsb.nodeType == 1) { var tagName = Xsb.tagName.toLowerCase(); if(tagName =="span") { var attr = Xsb.getAttribute("pron"); if(attr != null) { return true; } attr = Xsb.getAttribute("chunk"); if(attr != null && attr =="1") { return true; } } else if(tagName =="acronym"|| tagName =="abbr") { var attr = Xsb.getAttribute("title"); if(attr != null) { return true; } } else if(tagName =="math") { var vTb = SSDOM.getTextFromMathMl(Xsb); if(vTb.length > 0) { return true; } } } return false;};SSDOM.checkForSpecialParent = function(Xsb){ if(Xsb != null) { var Fob = SSDOM.getBody(Xsb); var Sub = Xsb; while(Sub != null && Sub != Fob) { if(SSDOM.isSpecialCase(Sub)) { return Sub; } Sub = Sub.parentNode; } if(Sub == Fob) { if(Sub.getAttribute("ignore") != null) { return Sub; } } } return null;};SSDOM.getContainingNode = function(XMb, p_attr, p_attrVal){ var Fob = SSDOM.getBody(XMb); var Sub = XMb; if(Sub.nodeType == 3) { Sub = Sub.parentNode; } while(Sub != null && Sub != Fob) { if(p_attr =="class"&& Kfa) { if(Sub.className == p_attrVal) { return Sub; } if(Sub.getAttribute("className") == p_attrVal) { return Sub; } } if(Sub.getAttribute(p_attr) != null) { if(p_attrVal == null || Sub.getAttribute(p_attr) == p_attrVal) { return Sub; } } Sub = Sub.parentNode; } return null;};SSDOM.getAllTextFromNode = function(Xsb){ var xsb =""; if(Xsb.nodeType == 3) { if(!SSDOM.isInvalidNode(Xsb.parentNode) && Xsb.parentNode.tagName.toLowerCase() !="textarea") { xsb = Xsb.nodeValue; } } else if(Xsb.nodeType == 1) { if(Xsb.getAttribute("ignore") != null) { xsb =""; BVb = true; } else { var iQb = Xsb.tagName.toLowerCase(); var BVb = false; if(iQb =="img") { var NQb = Xsb.getAttribute("msg"); if(NQb != null && NQb.trimTH().length > 0) { xsb =" "+ NQb.trimTH() +" "; } BVb = true; } else if(iQb =="span") { var NQb = Xsb.getAttribute("pron"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); BVb = true; } } else if(iQb =="acronym"|| iQb =="abbr") { var NQb = Xsb.getAttribute("pron"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); } else { NQb = Xsb.getAttribute("title"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); BVb = true; } } } else if(iQb =="math") { xsb = SSDOM.getTextFromMathMl(Xsb); } } if(!BVb) { var Dpa = Xsb.firstChild; while(Dpa != null) { xsb += SSDOM.getAllTextFromNode(Dpa); Dpa = Dpa.nextSibling; } } } return xsb;};SSDOM.getTextFromNode = function(Xsb){ var xsb =""; if(Xsb.nodeType == 3) { if(!SSDOM.isInvalidNode(Xsb.parentNode) && Xsb.parentNode.tagName.toLowerCase() !="textarea") { xsb = Xsb.nodeValue; } } else if(Xsb.nodeType == 1) { if(Xsb.getAttribute("ignore") != null) { xsb =""; } else { var iQb = Xsb.tagName.toLowerCase(); if(iQb =="img") { var NQb = Xsb.getAttribute("msg"); if(NQb != null && NQb.trimTH().length > 0) { xsb =" "+ NQb.trimTH() +" "; } } else if(iQb =="span") { var NQb = Xsb.getAttribute("pron"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); } NQb = Xsb.getAttribute("chunk"); if(NQb != null && NQb =="1") { xsb = Xsb.innerHTML; } } else if(iQb =="acronym"|| iQb =="abbr") { var NQb = Xsb.getAttribute("pron"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); } else { NQb = Xsb.getAttribute("title"); if(NQb != null && NQb.trimTH().length > 0) { xsb = NQb.trimTH(); } } } else if(iQb =="math") { xsb = SSDOM.getTextFromMathMl(Xsb); } } } return xsb;};SSDOM.getTextOverRange = function(BWb, iMb, p_domRefRight){ try { if(iMb == null || p_domRefRight == null) { return""; } var uAc = SSDOM.getCaretPairFromDomPosition(BWb, iMb.path, iMb.offset, p_domRefRight.path, p_domRefRight.offset); return SSDOM.getTextOverCaretRange(uAc); } catch(err) { Fya("Error getTextOverRange: "+ err.message); return""; }};SSDOM.getTextOverCaretRange = function(uMb){ try { if(uMb == null || uMb.Yfb == null || uMb.Zfb == null) { return""; } var Yfb = uMb.Yfb; var Zfb = uMb.Zfb; var ZTb = Yfb.node; var SNb = Zfb.node; var eNb = true; var bNb = ZTb; var xsb =""; while(bNb != null) { var IAc =""; if(bNb.nodeType == 3) { if(!SSDOM.isInvalidNode(bNb.parentNode) && bNb.parentNode.tagName.toLowerCase() !="textarea") { IAc = bNb.nodeValue; } } if(IAc != null && IAc !="") { if(bNb == SNb && Zfb.offset > -1) { IAc = IAc.substring(0, Zfb.offset); } if(bNb == ZTb && Yfb.offset > -1) { IAc = IAc.substring(Yfb.offset); } xsb += IAc; } if(eNb) { bNb = SSDOM.getNextNodeAllowMoveToChild(bNb, false, SNb); } else { bNb = SSDOM.getNextTextNode(bNb, false, SNb); } eNb = false; } return xsb.trimTH(); } catch(err) { Fya("Error getTextOverCaretRange: "+ err.message); return""; }};SSDOM.getTextSpokenOverCaretRange = function(uMb){ try { if(uMb == null || uMb.Yfb == null || uMb.Zfb == null) { return""; } var Yfb = uMb.Yfb; var Zfb = uMb.Zfb; var ZTb = Yfb.node; var SNb = Zfb.node; var Uya = false; var bNb = ZTb; var xsb =""; while(bNb != null) { Uya = SSDOM.isSpecialCase(bNb); if(Uya || bNb.nodeType == 3) { var IAc = SSDOM.getTextFromNode(bNb); if(IAc != null && IAc !="") { if(!Uya) { if(bNb == SNb && Zfb.offset > -1) { IAc = IAc.substring(0, Zfb.offset); } if(bNb == ZTb && Yfb.offset > -1) { IAc = IAc.substring(Yfb.offset); } } xsb += IAc; } } if(Uya) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, SNb); } else { bNb = SSDOM.getNextNode(bNb, false, SNb); } } return xsb.trimTH(); } catch(err) { Fya("Error getTextOverCaretRange: "+ err.message); return""; }};SSDOM.textFromFormTH = function(MVb){ var mgb = null; var iQb = MVb.tagName.toLowerCase(); var Hkb = SSDOM.getPositionInDom(MVb); if(iQb =="input") { var fab = MVb.getAttribute("type"); if(fab != null) { fab = fab.toLowerCase(); } var sXb =""; if(fab == null || fab.equalsTH("") || fab.equalsTH("text")) { sXb = MVb.value; } else if(fab.equalsTH("password")) { sXb ="Masked password field"; } else if(fab.equalsTH("image")) { sXb =""; } else if(fab.equalsTH("button") || fab.equalsTH("submit") || fab.equalsTH("reset")) { sXb = MVb.getAttribute("value"); } if(!sXb.equalsTH("")) { mgb ="form:"+ Hkb +";"+ sXb; } } else if(iQb =="select") { var sXb =""; var oTb = MVb.selectedIndex; var Dsb =""; for(var xvb = 0; xvb < MVb.options.length; xvb++) { Dsb += MVb.options[xvb].text +" "; } if(!Dsb.equalsTH("")) { if(oTb > -1) { sXb = MVb.options[oTb].text; sXb +=" selected from the list "+ Dsb; } else { sXb ="No selection from the list "+ Dsb; } mgb ="form"+ Hkb +";"+ sXb; } } else if(iQb =="textarea") { var sXb = MVb.value; mgb ="form"+ Hkb +";"+ sXb; } else if(iQb =="option") { var sXb = MVb.value; mgb ="form"+ Hkb +";"+ sXb; } return mgb;};SSDOM.getTargetElement = function(evt){ var OLb; if(Kfa) { OLb = evt.srcElement; } else if(Xfa) { OLb = evt.target; } else { OLb = evt.target; } return OLb;};SSDOM.getClickPoint = function(evt){ var vsb = null; var OLb; if(Kfa) { OLb = evt.srcElement; if(OLb.nodeType == 1 && OLb.tagName.toLowerCase() =="textarea") { } else { vsb = rw_getTargetNodeAsCaretIE(evt, true); if(vsb != null) { if(vsb.node == null || vsb.node.parentNode == null || vsb.node.parentNode != OLb) { vsb = null; return null; } else { if(vsb.node.nodeType == 3) { vsb.node = SSDOM.mergeTextNodes(vsb.node); } } } } } else if(Xfa) { OLb = evt.target; if(OLb != null) { if(rKb) { if(OLb.firstChild != null && OLb.firstChild.nodeType == 3 && OLb.tagName.toLowerCase() !="textarea") { var HVb = OLb.firstChild.nodeValue; if(HVb.trimTH().length > 0) { OLb = OLb.firstChild; } } } else if(qKb) { if(evt.fromElement != null && OLb.nodeType == 1 && OLb.tagName.toLowerCase() !="textarea") { if(evt.fromElement.nodeType == 3) { OLb = evt.fromElement; } } else { if(OLb.nodeType == 1 && OLb.firstChild != null && OLb.firstChild.nodeType == 3 && OLb.tagName.toLowerCase() !="textarea") { var HVb = OLb.firstChild.nodeValue; if(HVb.trimTH().length > 0) { OLb = OLb.firstChild; } } } } } } else { if(evt.explicitOriginalTarget.nodeValue != null) { if(evt.target.tagName.toLowerCase() =="textarea") { OLb = evt.target; } else { OLb = evt.explicitOriginalTarget; var aRb = window.getSelection(); if(aRb.anchorNode == null || aRb.anchorNode != OLb) { return null; } else { vsb = new Sqa(aRb.anchorNode, aRb.anchorOffset, true); } } } else { OLb = evt.target; } } if(vsb == null && OLb != null) { vsb = new Sqa(OLb, 0, true); } return vsb;};SSDOM.getPositionInDom = function(p_theNode){ var Hkb =""; var Ioa = 0; var Joa =""; if(p_theNode != null && p_theNode.ownerDocument != null) { var Woa = false; var Voa = false; var Fob = p_theNode.ownerDocument.body; while(p_theNode != null && p_theNode != Fob) { if(SSDOM.isSpecialCase(p_theNode)) { Hkb =""; } Woa = (p_theNode.nodeType == 3) || (p_theNode.nodeType == 1 && p_theNode.tagName.toLowerCase() == Zga.pageData.strHighlightTag && p_theNode.getAttribute("rwstate") != null); var MVb = p_theNode.previousSibling; while(MVb != null) { Voa = (MVb.nodeType == 3) || (MVb.nodeType == 1 && MVb.tagName.toLowerCase() == Zga.pageData.strHighlightTag && MVb.getAttribute("rwstate") != null); if(Woa && Voa) { } else { ++Ioa; } MVb = MVb.previousSibling; Woa = Voa; } Hkb = Hkb + Ioa +"~"; Ioa = 0; p_theNode = p_theNode.parentNode; if(p_theNode != null && p_theNode.getAttribute != null && p_theNode.tagName != null) { var Ooa = p_theNode.getAttribute("chunk"); if(p_theNode.tagName.toLowerCase() =="span"&& Ooa =="1") { var Poa = SSDOM.getPositionInDom(p_theNode); Joa ="#^th*"+ Poa +"#^th*"; } } } } return Joa + Hkb;};SSDOM.getNodeFromPosition = function(p_theBody, Dsa){ var wsb = p_theBody; if(Dsa.lastIndexOf("*") > -1) { var bzb = Dsa.lastIndexOf("*"); Dsa = Dsa.substring(bzb + 1); } var Soa = Dsa.split("~"); var qzb = Soa.length; var i; for(i = qzb - 2; i > -1; i--) { wsb = wsb.firstChild; if(wsb == null) { return null; } var Qub; if(Soa[i].length == 0) { Qub = 0; } else { Qub = parseInt(Soa[i], 10); } var Voa = false; var Woa = (wsb.nodeType == 3) || (wsb.nodeType == 1 && wsb.tagName.toLowerCase() == Zga.pageData.strHighlightTag && wsb.getAttribute("rwstate") != null); while(Qub > 0) { wsb = wsb.nextSibling; if(wsb == null) { return null; } Voa = (wsb.nodeType == 3) || (wsb.nodeType == 1 && wsb.tagName.toLowerCase() == Zga.pageData.strHighlightTag && wsb.getAttribute("rwstate") != null); if(Voa && Woa) { } else { --Qub; Woa = Voa; } } } return wsb;};SSDOM.getCaretFromDomPosition = function(p_theBody, Dsa, ucb, Ysb, p_bForceSpecial){ if(typeof(p_bForceSpecial) =="undefined") { p_bForceSpecial = false; } try { if(p_theBody == null) { return null; } var wsb = SSDOM.getNodeFromPosition(p_theBody, Dsa); if(p_bForceSpecial) { var Qyb = new Sqa(wsb, 0, Ysb); Qyb.setSpecialCase(true); return Qyb; } if(SSDOM.isSpecialCase(wsb)) { if(SSDOM.isSpecialCaseHighlightable(wsb)) { if(Ysb) { var ysb = SSDOM.getFirstChildTextNode(wsb, false); if(ysb != null) { return new Sqa(ysb, 0, Ysb); } else { return new Sqa(wsb, 0, Ysb); } } else { var Ufb = SSDOM.getLastChildTextNode(wsb, false); if(Ufb != null) { if(Ufb.nodeType == 3) { return new Sqa(Ufb, Ufb.length, Ysb); } else { return new Sqa(Ufb, 0, Ysb); } } else { return new Sqa(wsb, 0, Ysb); } } } else { return new Sqa(wsb, 0, Ysb); } } var Nyb = 0; if(!Ysb) { ++Nyb; } if(ucb > -1) { if(wsb == null) { return null; } var tvb = false; var Ufb = wsb.parentNode; var eoa = wsb; var nyb; while(!tvb) { if(wsb.nodeType == 3) { nyb = wsb.nodeValue; if(ucb < (Nyb + nyb.length)) { tvb = true; break; } eoa = wsb; Nyb += wsb.nodeValue.length; wsb = SSDOM.getNextNode(wsb, false, Ufb); } else if(wsb.nodeType == 1) { if(SSDOM.isSpecialCase(wsb)) { var goa = ucb - Nyb; if(goa > 0) { Nyb += 1; } else { tvb = true; break; } wsb = SSDOM.getNextNodeIgnoreChildren(wsb, false, Ufb); } else { wsb = SSDOM.getNextNode(wsb, false, Ufb); } } if(wsb == null || wsb == Ufb) { if(eoa != null) { wsb = eoa; if(wsb.nodeType == 3) { Nyb = ucb - wsb.nodeValue.length; } else { Nyb = 0; } if(!Ysb) { ++Nyb; } break; } else { return null; } } } if(Ysb) { return new Sqa(wsb, ucb - Nyb, Ysb); } else { return new Sqa(wsb, ucb - (Nyb - 1), Ysb); } } else { return new Sqa(wsb, ucb, Ysb); } } catch(err) { Fya("getCaretFromDomPosition error: "+ err); return null; }};SSDOM.getCaretPairFromDomPosition = function(p_theBody, p_strPathLeft, p_nPosLeft, p_strPathRight, p_nPosRight){ var Yfb = SSDOM.getCaretFromDomPosition(p_theBody, p_strPathLeft, p_nPosLeft, true); var Zfb; if(p_strPathLeft == p_strPathRight && p_nPosLeft >= p_nPosRight) { Zfb = Yfb; } else { Zfb = SSDOM.getCaretFromDomPosition(p_theBody, p_strPathRight, p_nPosRight, false); } return new Yqa(Yfb, Zfb);};SSDOM.getClass = function(Xsb){ if(Xsb == null) { return""; } if(Xsb.className) { return Xsb.className; } else { return Xsb.getAttribute("class"); }};SSDOM.getComputedStyle = function(Vob){ if(Vob == null) { return null; } if(Vob.nodeType == 3) { Vob = Vob.parentNode; if(Vob == null) { return null; } } if(SSDOM.bIEOld) { return Vob.currentStyle; } else { return window.getComputedStyle(Vob, null); }};SSDOM.getTextFromMathMl = function(Xsb){ if(Xsb.previousSibling != null || Xsb.nextSibling != null) { var joa = document.createElement("span"); Xsb.parentNode.replaceChild(joa, Xsb); joa.appendChild(Xsb); } if(Kfa) { var vTb = Xsb.outerHTML; if(vTb == null) { return""; } else { if(vTb.indexOf("<?import namespace") > -1) { var n = vTb.indexOf("/>"); if(n > -1) { vTb = vTb.substring(n + 2); vTb = vTb.replace(/m:/gi,""); } } return vTb; } } else { var vTb = Xsb.parentNode.innerHTML; if(vTb != null && vTb.length > 0) { return vTb; } else { return""; } }};SSDOM.getFrameSelection = function(vha){ if(!tda && vha.frames && vha.length>0) { var i; var qzb = vha.length; for(i = 0; i<qzb; i++) { try { var kAc = vha[i].getSelection(); if(kAc != null && !kAc.isCollapsed) { return vha[i]; } else { if(vha[i].length > 0) { var uoa = SSDOM.getFrameSelection(vha[i]); if(uoa) { return uoa; } } } } catch(e) { } } } return null;};SSDOM.getFrameSelectionSFF = function(vha){ var cRb = {}; var IAc = SSDOM.getFrameSelection(vha); if(IAc!= null) { cRb.zUb = IAc; cRb.bRb = IAc.getSelection(); } return cRb;};SSDOM.getFrameSelectionOldIE = function(vha){ var cRb = {}; var range; if(!tda && vha.frames && vha.length>0) { var i; var qzb = vha.length; for(i = 0; i<qzb; i++) { try { var Jdb = vha[i]; range = Jdb.document.selection.createRange(); if(range != null && range.text != null && range.text.length > 0) { cRb.zUb = Jdb; cRb.VRb = range; break; } else { if(Jdb.length > 0) { var uoa = SSDOM.getFrameSelectionOldIE(Jdb); if(uoa.VRb) { cRb = uoa; break; } } } } catch(e) { } } } return cRb;};SSDOM.getByClassName = function(p_strClass, BWb, p_strTagName){ var FAc; if(!Kfa) { FAc = []; var yoa = BWb.getElementsByClassName(p_strClass); var qzb = yoa.length; var i; for(i=0;i<qzb;i++) { FAc.push(yoa[i]); } } else { FAc = SSDOM.getElementsByClass(p_strClass, BWb, p_strTagName); } return FAc;};SSDOM.getElementsByClass = function(p_strClassName, Xsb, p_strTagName){ var yoa = []; if(p_strTagName == null || p_strTagName =="*") { p_strTagName = Zga.pageData.strHighlightTag; } var FAc = Xsb.getElementsByTagName(p_strTagName); var qzb = FAc.length; var Bpa = new RegExp("(^|\\s)"+p_strClassName+"(\\s|$)"); var i; for (i=0; i<qzb; i++) { if( Bpa.test(FAc[i].getAttribute("className")) ) { yoa.push(FAc[i]); } else if( Bpa.test(FAc[i].getAttribute("class")) ) { yoa.push(FAc[i]); } } return yoa;};SSDOM.getContentDocument = function(Vob){ return Vob.contentDocument ? Vob.contentDocument: Vob.contentWindow.document;};SSDOM.allTextFromNodeTH = function(MVb){ var xsb =""; if (MVb.nodeType == 3) { xsb = MVb.nodeValue; } else if (MVb.nodeType == 1) { var Dpa = MVb.firstChild; while (Dpa != null) { if (Dpa.nodeType == 3) { xsb += Dpa.nodeValue; } else if (Dpa.nodeType == 1) { xsb += SSDOM.allTextFromNodeTH(Dpa); } Dpa = Dpa.nextSibling; } } return xsb;};SSDOM.getListOfHighlightableNodes = function(p_startCaret, p_endCaret){ var Epa = Rga; Rga = false; var vzb = new Array(); try { var ysb = p_startCaret.node; var Ufb = p_endCaret.node; if(ysb.nodeType != 3) { if(ysb.nodeType == 1 && ysb.tagName.toLowerCase() =="math") { vzb.push(ysb); if(ysb == Ufb) { return vzb; } else { ysb = SSDOM.getNextTextNode(ysb, false, Ufb); } } else if(Kfa && ysb.nodeType == 1 && ysb.firstChild != null && ysb.firstChild.tagName.toLowerCase() =="math") { vzb.push(ysb.firstChild); if(ysb == Ufb) { return vzb; } else { ysb = ysb.firstChild; ysb = SSDOM.getNextTextNode(ysb, false, Ufb); } } else { ysb = SSDOM.getFirstChildTextNode(ysb, false); if(ysb == null) { return vzb; } } } if(ysb == Ufb) { if(ysb.nodeType == 3) { var xsb = ysb.nodeValue; if(xsb.length > 0 && p_startCaret.offset < xsb.length && p_endCaret.offset > 0 && p_endCaret.offset > p_startCaret.offset) { vzb.push(ysb); } } } else { if(ysb.nodeType == 3) { var xsb = ysb.nodeValue; if(xsb.length > 0 && p_startCaret.offset < xsb.length) { vzb.push(ysb); } } else { if(ysb.nodeType == 1 && ysb.tagName.toLowerCase() =="math") { vzb.push(ysb); } else if(Kfa && ysb.nodeType == 1 && ysb.firstChild != null && ysb.firstChild.tagName.toLowerCase() =="math") { ysb = ysb.firstChild; vzb.push(ysb); } } var Sub = SSDOM.getNextTextNodeNoImg(ysb, false, Ufb, true); while (Sub != null) { if (Sub == Ufb) { if(Ufb.nodeType == 3) { var xsb = Ufb.nodeValue; if(xsb.length > 0 && p_endCaret.offset > 0) { vzb.push(Ufb); } } else { if(Sub.nodeType == 1 && Sub.tagName.toLowerCase() =="math") { vzb.push(Sub); } else if(Kfa && Sub.nodeType == 1 && Sub.firstChild != null && Sub.firstChild.tagName.toLowerCase() =="math") { vzb.push(Sub.firstChild); } } break; } else { vzb.push(Sub); } Sub = SSDOM.getNextTextNodeNoImg(Sub, false, Ufb, true); } } } catch(err){Fya("getListOfHighlightableNodes error:"+ err.message);} Rga = Epa; return vzb;};SSDOM.getListOfNodes = function(p_startCaret, p_endCaret){ var vzb = new Array(); try { var ysb = p_startCaret.node; var Ufb = p_endCaret.node; if(ysb == Ufb) { vzb.push(ysb); } else { vzb.push(ysb); var Sub = SSDOM.getNextTextNode(ysb, false, Ufb, true); while (Sub != null) { vzb.push(Sub); Sub = SSDOM.getNextTextNodeNoImg(Sub, false, Ufb, true); } } } catch(err){Fya("getListOfNodes error:"+ err.message);} return vzb;};SSDOM.getRangeFromSelectionPoint = function(p_sel){ try { var xsb = p_sel +""; xsb = xsb.trimTH(); p_sel.collapseToStart(); var ysb = p_sel.anchorNode; var Spa = p_sel.anchorOffset; if(ysb.nodeType != 3) { ysb = SSDOM.getNextTextNodeNoBlank(ysb, false, null); Spa = 0; } else if(Spa == ysb.nodeValue.length) { ysb = SSDOM.getNextTextNodeNoBlank(ysb, false, null); Spa = 0; } if(ysb != null && ysb.nodeType == 3) { var nyb = ysb.nodeValue.substring(Spa); var Upa = nyb.trimStartTH(); while(nyb.length > Upa.length) { if(Upa.length == 0) { ysb = SSDOM.getNextTextNodeNoBlank(ysb, false, null); Spa = 0; if(ysb == null || ysb.nodeType != 3) { break; } } else { Spa += nyb.length - Upa.length; } nyb = ysb.nodeValue.substring(Spa); Upa = nyb.trimStartTH(); } } var range = SSDOM.getRangeObject(); if(ysb == null) { range.setStart(p_sel.anchorNode, p_sel.anchorOffset); range.setEnd(p_sel.anchorNode, p_sel.anchorOffset); } else { if(ysb.nodeType != 3) { range = SSDOM.getNodesForText(ysb, Spa, xsb); } else { if((Spa + xsb.length) < ysb.nodeValue.length) { range.setStart(ysb, Spa); range.setEnd(ysb, Spa + xsb.length); } else { range = SSDOM.getNodesForText(ysb, Spa, xsb); } } } return range; } catch(ignore) { var range = SSDOM.getRangeObject(); range.setStart(p_sel.anchorNode, p_sel.anchorOffset); range.setEnd(p_sel.anchorNode, p_sel.anchorOffset); return range; }};SSDOM.getNodesForText = function(XMb, tfb, DOb){ var range = SSDOM.getRangeObject(XMb.ownerDocument.body); range.setStart(XMb, tfb); range.setEnd(XMb, tfb); var qzb = 0; var Wpa = DOb.length + tfb; var Sub = XMb; while(Sub != null && qzb < Wpa) { if(Sub.nodeType == 3) { var xsb = Sub.nodeValue; qzb += xsb.length; } if(qzb < Wpa) { Sub = SSDOM.getNextTextNodeNoBlank(Sub, false, null); } else { var Zpa = qzb - Wpa; range.setEnd(Sub, Sub.nodeValue.length - Zpa); } } return range;};SSDOM.getSelectionObject = function(){ var VRb = null; if(window.getSelection) {if(Xja!=null) { return null; } var aRb = window.getSelection(); var bRb = null; if(!aRb.isCollapsed) { bRb = aRb; } else { aRb = SSDOM.getFrameSelectionSFF(window); if(aRb.bRb) { bRb = aRb.bRb; } } if(bRb == null) { return null; } VRb = bRb; } else if(document.selection) {var range = document.selection.createRange(); if(range.text.length > 0) { zUb = window; VRb = range; } else { var IAc = SSDOM.getFrameSelectionOldIE(window); if(IAc.VRb) { VRb = IAc.VRb; } } } return VRb;};SSDOM.getPageText = function(){ var xsb =""; if (SSDOM.bIEOld) { var range = document.body.createTextRange(); range.expand("textedit"); xsb = range.text; } else { var range = document.createRange(); range.setStartBefore(document.body); range.setEndAfter(document.body); xsb = range.toString(); } return xsb;};SSDOM.getTextFromElement = function(Xsb){ if(Xsb.textContent) { return Xsb.textContent; } else if(Xsb.innerText) { return Xsb.innerText; } else { return""; }};SSDOM.getRangeObject = function(BWb){ if(typeof(BWb) =='undefined'|| BWb == null) { BWb = document.body; } if (SSDOM.bIEOld) { return BWb.createTextRange(); } else { var fub = BWb.ownerDocument; return fub.createRange(); }};SSDOM.getBody = function(Xsb){ if(Xsb.document) { return Xsb.document.body; } else { return Xsb.ownerDocument.body; }};SSDOM.getWindow = function(Xsb){ try { if(Xsb == null) { return window; } if(top.frames.length === 0) { return window; } else { var gpa = Xsb.ownerDocument.body; var hpa = window.document.body; if(gpa === hpa) { return window; } if(!tda) { var i; var qzb = top.frames.length; for(i = 0; i<qzb; i++) { try { var QWb = top.frames[i].document.body; if(QWb === gpa) { return top.frames[i]; } } catch(e) { } } } } } catch(err) { Fya("Error getWindow: "+ err); } return window;};SSDOM.splitText = function(Xsb, ucb){ if(Xsb == null || Xsb.nodeType != 3 || Xsb.parentNode == null) { return Xsb; } var kpa = 0; var rjb = Xsb.parentNode; var mpa = rjb.parentNode; if(mpa != null && rjb.tagName.toLowerCase() =="span"&& mpa.tagName.toLowerCase() =="span"&& rjb.getAttribute(daa) != null && (mpa.getAttribute(daa) != null || mpa.getAttribute(eaa) != null)) { kpa = 2; if(Xsb.nextSibling != null || Xsb.previousSibling != null) { kpa = 1; } } else if(rjb.tagName.toLowerCase() =="span"&& (rjb.getAttribute(daa) != null || rjb.getAttribute(eaa) != null)) { kpa = 1; } if(Xsb.nodeValue.length == 0 || ucb <= 0 || ucb >= Xsb.nodeValue.length) { if(kpa == 0) { var span = document.createElement("span"); span.setAttribute(daa,"1"); var tpa = document.createElement("span"); tpa.setAttribute(daa,"1"); rjb.insertBefore(span, Xsb); span.appendChild(tpa); tpa.appendChild(Xsb); } else if(kpa == 1) { var span = document.createElement("span"); span.setAttribute(daa,"1"); rjb.insertBefore(span, Xsb); span.appendChild(Xsb); } return Xsb; } var xsb = Xsb.nodeValue; var DDb = xsb.substring(0, ucb); var EDb = xsb.substring(ucb); var tpa = document.createElement("span"); var upa = document.createElement("span"); var NDb = document.createTextNode(DDb); var HDb = document.createTextNode(EDb); tpa.appendChild(NDb); upa.appendChild(HDb); tpa.setAttribute(daa,"1"); upa.setAttribute(daa,"1"); if(kpa == 2) { mpa.insertBefore(upa, rjb); mpa.insertBefore(tpa, upa); mpa.removeChild(rjb); } else if(kpa == 1) { rjb.insertBefore(tpa, Xsb); rjb.insertBefore(upa, Xsb); rjb.removeChild(Xsb); } else { var span = document.createElement("span"); span.setAttribute(daa,"1"); span.appendChild(tpa); span.appendChild(upa); rjb.insertBefore(span, Xsb); rjb.removeChild(Xsb); } return HDb;};SSDOM.createObjectWithNameAttr = function(Gwb, p_attrList, Xpb, p_strClass, p_strNameAttr){ if(SSDOM.bIEOld) { return SSDOM.createObject("<"+ Gwb +" name='"+ p_strNameAttr +"'>", p_attrList, Xpb, p_strClass); } else { var NAc = SSDOM.createObject(Gwb, p_attrList, Xpb, p_strClass); NAc.setAttribute("name",p_strNameAttr); NAc.name = p_strNameAttr; return NAc; }};SSDOM.createObject = function(Gwb, p_attrList, Xpb, p_strClass){ var Kza = document.createElement(Gwb); if(Xpb != null) { Kza.id = Xpb; } if(p_strClass != null) { Kza.className = p_strClass; } if(p_attrList != null) { var qzb = p_attrList.length; if(SSDOM.bIEOld) { for(var i = 0; i < qzb; i += 2) { if(p_attrList[i] =="style") { SSDOM.setStyle(Kza, p_attrList[i + 1]); } else { Kza.setAttribute(p_attrList[i], p_attrList[i + 1]); } } } else { for(var i = 0; i < qzb; i += 2) { Kza.setAttribute(p_attrList[i], p_attrList[i + 1]); } } } return Kza;};SSDOM.createObjectFromMap = function(Gwb, p_attrMap, Xpb, p_strClass){ var Kza = document.createElement(Gwb); if(Xpb != null) { Kza.id = Xpb; } if(p_strClass != null) { Kza.className = p_strClass; } if(p_attrMap != null) { if(SSDOM.bIEOld) { for(var i in p_attrMap) { if(i =="style") { SSDOM.setStyle(Kza, p_attrMap[i]); } else { Kza.setAttribute(i, p_attrMap[i]); } } } else { for(var i in p_attrMap) { Kza.setAttribute(i, p_attrMap[i]); } } } return Kza;};SSDOM.setStyle = function(p_theObj, p_strStyles){ var Cqa = p_strStyles.indexOf(":"); var Dqa = p_strStyles.indexOf(";", Cqa); var Iqb; var sXb; var mgb = p_strStyles; while(Cqa > -1) { Iqb = mgb.substring(0, Cqa); if(Dqa > -1) { sXb = mgb.substring(Cqa + 1, Dqa); mgb = mgb.substr(Dqa + 1); Cqa = mgb.indexOf(":"); Dqa = mgb.indexOf(";", Cqa); } else { sXb = mgb.substr(Cqa + 1); Cqa = -1; } if(SSDOM.bIE) { if(Iqb ==" background-position") { Iqb =" backgroundPosition"; } } eval("p_theObj.style."+ Iqb +"=\""+ sXb +"\";"); }};SSDOM.addContentToPage = function(p_strHTML, p_strTag){ var element = document.createElement(p_strTag); element.innerHTML = p_strHTML; document.body.appendChild(element);};SSDOM.addContentToPageWithAttr = function(p_strHTML, p_strTag, p_astrAttr){ var element = document.createElement(p_strTag); var qzb = p_astrAttr.length; for(i = 0; i < qzb; i += 2) { element.setAttribute(p_astrAttr[i], p_astrAttr[i + 1]); } element.innerHTML = p_strHTML; document.body.appendChild(element);};SSDOM.moveCaret = function(ffb, p_nCount, p_bGoByStyle){ var Sub; var node = ffb.node; var Nyb = ffb.offset; var Kqa = ffb.forwardBias; if(node.nodeType != 3) { return null; } while(node) { var qzb = node.nodeValue.length; if(qzb == 0) { if(p_nCount > 0 || (p_nCount == 0 && Kqa)) { Sub = SSDOM.getNextTextNodeNoImg(node, p_bGoByStyle, null, true); if(Sub==null) { if(p_nCount == 0) { return new Sqa(node, node.nodeValue.length, Kqa); } else { return null; } } node = Sub; Nyb=0; } else { Sub = SSDOM.getPreviousTextNodeNoImg(node, p_bGoByStyle, null, true); if(Sub==null) { if(p_nCount == 0) { return new Sqa(node, 0, Kqa); } else { return null; } } node = Sub; Nyb=node.nodeValue.length; } } else { Nyb += p_nCount; if(Nyb<0 || (Nyb==0 && !Kqa)) { p_nCount = Nyb; Sub = SSDOM.getPreviousTextNodeNoImg(node, p_bGoByStyle, null, true); if(Sub==null) { if(p_nCount == 0) { return new Sqa(node, 0, Kqa); } else { return null; } } node = Sub; Nyb=node.nodeValue.length; } else if(Nyb>qzb || (Nyb==qzb && Kqa)) { p_nCount = Nyb - qzb; Sub = SSDOM.getNextTextNodeNoImg(node, p_bGoByStyle, null, true); if(Sub==null) { if(p_nCount == 0) { return new Sqa(node, node.nodeValue.length, Kqa); } else { return null; } } node = Sub; Nyb=0; } else { return new Sqa(node, Nyb, Kqa); } } } return null;};SSDOM.insertAfter = function(Xsb, p_newNode){ var parent = Xsb.parentNode; if(Xsb.nextSibling != null) { parent.insertBefore(p_newNode, Xsb.nextSibling); } else { parent.appendChild(p_newNode); }};SSDOM.mergeTextNodes = function(Xsb){ if(Xsb == null) { return Xsb; } var BHb = Xsb.parentNode; if(BHb != null && Xsb.nodeType == 3) { var fub = Xsb.ownerDocument; while(Xsb.previousSibling != null && Xsb.previousSibling.nodeType == 3) { var xsb = Xsb.previousSibling.nodeValue + Xsb.nodeValue; var Ilb = fub.createTextNode(xsb); BHb.removeChild(Xsb.previousSibling); BHb.replaceChild(Ilb, Xsb); Xsb = Ilb; } while(Xsb.nextSibling != null && Xsb.nextSibling.nodeType == 3) { var xsb = Xsb.nodeValue + Xsb.nextSibling.nodeValue; var Ilb = fub.createTextNode(xsb); BHb.removeChild(Xsb.nextSibling); BHb.replaceChild(Ilb, Xsb); Xsb = Ilb; } } return Xsb;};function Sqa(Xsb, tfb, Ysb){ this.node = Xsb; this.offset = tfb; this.forwardBias = Ysb; this.specialCase = false; if(SSDOM.isSpecialCase(this.node)) { this.specialCase = true; this.offset = 0; }}Sqa.prototype.setSpecialCase = function(p_bSpecialCase){ this.specialCase = p_bSpecialCase;};Sqa.prototype.isSpecialCase = function(){ return this.specialCase;};Sqa.prototype.check = function(){ var Ggb = true; if(this.node == null || this.node.parentNode == null) { Ggb = false; } else { if( this.node.nodeType != 3) { if(this.node.nodeType == 1 && this.specialCase) { } else { Ggb = false; } } else if(this.offset < 0 || this.offset >this.node.nodeValue.length) { Ggb = false; } } return Ggb;};Sqa.prototype.toString = function(){ var xsb ="TH"+"Caret "; if(this.node != null) { if(this.node.nodeType == 3) { xsb += this.node.nodeValue +" "+ this.node.parentNode.tagName +" "; } else if(this.node.nodeType == 1) { xsb += this.node.tagName +" "; } } xsb += this.offset; return xsb;};Sqa.prototype.equals = function(ffb){ if(ffb == null) { return false; } return this.node == ffb.node && this.offset == ffb.offset && this.forwardBias == ffb.forwardBias;};Sqa.prototype.clone = function(){ return new Sqa(this.node, this.offset, this.forwardBias);};function Yqa(YNb, ZNb){ this.Yfb = YNb; this.Zfb = ZNb;}Yqa.prototype.equals = function(OPb){ if(OPb == null) { return false; } return this.Yfb.equals(OPb.Yfb) && this.Zfb.equals(OPb.Zfb);};Yqa.prototype.toString = function(){ return SSDOM.getTextOverCaretRange(this);};function cqa(dqa){ this.command = null; this.IEb = null; if(dqa != null) { var bzb = dqa.indexOf(":"); if(bzb > -1) { this.command = dqa.substr(0, bzb).toLowerCase(); this.IEb = dqa.substr(bzb + 1); } else { this.command = dqa.toLowerCase(); } }}cqa.prototype.CMD_LIST ="list";cqa.prototype.CMD_STOP ="stop";cqa.prototype.CMD_STOPAFTER ="stopafter";cqa.prototype.CMD_JUMP ="jump";cqa.prototype.CMD_JUMPBACK ="jumpback";cqa.prototype.CMD_VOICE ="voice";cqa.prototype.CMD_PAGEID ="pageid";cqa.prototype.CMD_BOOKID ="bookid";cqa.prototype.CMD_EXEC ="exec";cqa.prototype.CMD_EXECAFTER ="execafter";function hqa(Xsb){ var eqa = []; if(Xsb != null) { var Fob = Xsb.ownerDocument.body; var IAc = Xsb; if(IAc.nodeType == 3) { IAc = IAc.parentNode; } if(IAc.nodeType != 1) { return eqa; } while(IAc != null && IAc != Fob) { if(IAc.getAttribute("texthelpCmd") != null) { var Bfb = IAc.getAttribute("texthelpCmd").trimTH(); if(Bfb == cqa.prototype.CMD_LIST || Bfb == (cqa.prototype.CMD_LIST +":")) { var xvb = 1; Bfb = IAc.getAttribute(("texthelpCmd"+ xvb)); while(Bfb != null) { eqa.push(new cqa(Bfb)); ++xvb; Bfb = IAc.getAttribute(("texthelpCmd"+ xvb)); } } else { eqa.push(new cqa(Bfb)); } break; } IAc = IAc.parentNode; } } return eqa;}function nqa(Xsb){ if(Xsb != null) { var Fob = Xsb.ownerDocument.body; var IAc = Xsb; if(IAc.nodeType == 3) { IAc = IAc.parentNode; } if(IAc.nodeType != 1) { return null; } while(IAc != null && IAc != Fob) { if(IAc.getAttribute("texthelpCmd") != null) { return IAc; } IAc = IAc.parentNode; } } return null;}function uqa(RMb){ if(Bga) { var Qyb = RMb.getCaretRange(); if(Qyb != null) { var qqa = hqa(Qyb.Zfb.node); if(qqa.length > 0) { var xSb = false; for(var i=0; i<qqa.length; i++) { var cmd = qqa[i]; if(cmd.command == cmd.CMD_STOP) { xSb = true; } else if(cmd.command == cmd.CMD_STOPAFTER) { RMb.allowContinuous = false; } else if(cmd.command == cmd.CMD_JUMP) { RMb.jumpId = cmd.IEb; } else if(cmd.command == cmd.CMD_VOICE) { RMb.voice = cmd.IEb; } else if(cmd.command == cmd.CMD_PAGEID) { RMb.pageId = cmd.IEb; } else if(cmd.command == cmd.CMD_BOOKID) { RMb.bookId = cmd.IEb; } else if(cmd.command == cmd.CMD_EXEC) { try { eval(cmd.IEb); } catch(err) { thLogE(err.message); } } else if(cmd.command == cmd.CMD_EXECAFTER) { var tqa ="try{eval(\""+ cmd.IEb +"\");}catch(err){thLogE(err.message);}"; VIb.push(tqa); } } if(xSb) { RMb.valid = false; } } } }}SpeechStream.DateFilterModes = {DATE:2,NUMBER:1,NONE:0};SpeechStream.dateFilter = new function(){ var wqa = 2; var xqa = SpeechStream.DateFilterModes; var yqa = /^[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+|[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+$/g;this.setMode = function(p_nMode) { var zqa = parseInt(p_nMode, 10); if(zqa == xqa.NONE || zqa == xqa.NUMBER || zqa == xqa.DATE) { wqa = zqa; } else if(typeof(p_nMode) =="string") { var Ara = p_nMode.toUpperCase(); if(Ara =="NONE") { wqa = xqa.NONE; } else if(Ara =="NUMBER") { wqa = xqa.NUMBER; } else if(Ara =="DATE") { wqa = xqa.DATE; } } };this.getMode = function() { return wqa; };this.checkDatesFromString = function(Awb) { var cbb = false; var wordList = Awb.split(" "); cbb = this.checkDatesFromList(wordList); if(cbb) { var qzb = wordList.length; var ZUb =""; for(i=0; i<qzb - 1; i++) { ZUb += wordList[i]; ZUb +=" "; } ZUb += wordList[qzb - 1]; return ZUb; } else { return Awb; } };this.checkDatesFromList = function(lwb) { var Ivb; var cbb = false; var qzb = lwb.length; var i; for(i=0; i<qzb; i++) { Ivb = Qra(lwb[i]); if(Ivb != lwb[i]) { lwb[i] = Ivb; cbb = true; } } return cbb; };function Jra(qqb) { var zhb; switch(wqa) { case 0: zhb = qqb; break; case 1: if(Nra(qqb)) { zhb =" "+ qqb.substring(0, 1) +","+ qqb.substring(1, 4) +" "; } else { zhb = qqb; } break; case 2: if(Nra(qqb)) { var qgb = parseInt(qqb, 10); var Mra = parseInt(qqb.substring(2,4), 10); if(qgb < 1000) { zhb = qqb; } else if( ( (qgb >= 1000 && qgb < 2000) || qgb >= 2100 ) && Mra == 0 ) { zhb =" "+ qqb.substring(0, 2) +" hundred "; } else if( ( (qgb >= 1000 && qgb < 2000) || qgb >= 2100 ) && ( Mra > 0 && Mra < 10 ) ) { zhb =" "+ qqb.substring(0, 2) +" oh "+ qqb.substring(3, 4) +" "; } else if( ( (qgb >= 1000 && qgb < 2000) || qgb >= 2010 ) && Mra >= 10 ) { zhb =" "+ qqb.substring(0, 2) +" "+ qqb.substring(2, 4) +" "; } else if(qgb == 2000) { zhb =" two thousand "; } else if(qgb > 2000 && qgb < 2010) { zhb =" two thousand and "+ qqb.substring(3, 4) +" "; } else { zhb = qqb; } } else { zhb = qqb; } break; default: zhb = qqb; break; } return zhb; }; function Nra(qqb) { if(qqb.length == 4) { if(!isNaN(qqb)) { if(parseInt(qqb, 10) >= 1000) { return true; } } } return false; };function Qra(Awb) { if(Awb == null) { return Awb; } var KBc = Awb.replace(yqa,''); if(KBc.length == 4) { var ZUb = Jra(KBc); if(ZUb != KBc) { var n = Awb.indexOf(KBc); return Awb.substring(0, n) + ZUb + Awb.substring(n + 4); } } return Awb; };};var Tra = -1;var Ura = 0;var Vra = 1;var Wra = 2;var Xra = 3;var Yra = 4;var Zra = 5;var ara = 6;var bra = 7;var cra = 8;function dra(XMb, kra, eSb, lra){ this.body = XMb.ownerDocument.body; this.OAc = new Sqa(XMb, kra, true); this.PAc = new Sqa(eSb, lra, false); this.rnb = RTb(XMb, kra); this.snb = RTb(eSb, lra);}dra.prototype.refresh = function(){ with (this) { if(OAc.check() == false || PAc.check() == false) { var uAc = SSDOM.getCaretPairFromDomPosition(this.body, this.rnb.path, this.rnb.offset, this.snb.path, this.snb.offset); var OAc = uAc.Yfb; var PAc = uAc.Zfb; if(OAc == null && PAc == null) { OAc = new Sqa(document.body, 0, true); PAc = new Sqa(document.body, 0, false); } else if(OAc == null || PAc == null) { if(OAc == null) { OAc = new Sqa(PAc.node, PAc.offset, true); } else { PAc = new Sqa(OAc.node, OAc.offset, false); } } } }};dra.prototype.toString = function(){ this.refresh(); var range = SSDOM.getRangeObject(this.body); range.setStart(this.OAc.node, this.OAc.offset); range.setEnd(this.PAc.node, this.PAc.offset); return range.toString();};dra.prototype.getStartAsRange = function(){ var range = SSDOM.getRangeObject(this.body); range.setStart(this.OAc.node, this.OAc.offset); range.setEnd(this.OAc.node, this.OAc.offset); return range;};dra.prototype.getEndAsRange = function(){ var range = SSDOM.getRangeObject(this.body); range.setStart(this.PAc.node, this.PAc.offset); range.setEnd(this.PAc.node, this.PAc.offset); return range;};dra.prototype.equals = function(RMb){ return (this.rnb.path == RMb.rnb.path && this.rnb.offset == RMb.rnb.offset && this.snb.path == RMb.snb.path && this.snb.offset == RMb.snb.offset);};dra.prototype.compareRange = function(RMb){ if(this.equals(RMb)) { return Ura; } this.refresh(); RMb.refresh(); var pra = this.getStartAsRange(); var qra = this.getEndAsRange(); var rra = RMb.getStartAsRange(); var sra = RMb.getEndAsRange(); var tra = pra.compareBoundaryPoints("START_TO_START", rra); var ura = pra.compareBoundaryPoints("START_TO_START", sra); var vra = qra.compareBoundaryPoints("START_TO_START", rra); var wra = qra.compareBoundaryPoints("START_TO_START", sra); var Xdb = Tra; if(ura > -1) { Xdb = Vra; } else if(vra < 1) { Xdb = Wra; } else if(tra == -1) { if(wra == -1) { Xdb = ara; } else { Xdb = Xra; } } else if(tra == 0) { if(wra == -1) { Xdb = bra; } else if(wra == 0) { Xdb = Ura; } else { Xdb = Xra; } } else { if(wra == -1) { Xdb = Yra; } else if(wra == 0) { Xdb = cra; } else { Xdb = Zra; } } return Xdb;};function THDomRefPt(Dsa, tfb){ this.path = Dsa; this.offset = tfb;}THDomRefPt.prototype.toString = function(){ return"THDomRefPt "+ this.path +" "+ this.offset;};function THHoverTarget(BWb, Dsa, Esa){ this.body = BWb; this.path = Dsa; this.range = Esa; this.VUb = null; this.blockCache = false; this.textToSpeak = null; this.textToSpeakNoChanges = null; this.allowContinuous = true; this.useHighlighting = true; this.prepared = false; this.valid = true; this.jumpId = null; this.voice = null; this.pageId = null; this.bookId = null;}THHoverTarget.prototype.isRange = function(){ return this.range != null; };THHoverTarget.prototype.isValid = function(){ return this.valid && !Jga;};THHoverTarget.prototype.isOverridingGlobal = function(){ return this.voice != null || this.pageId != null || this.bookId != null;};THHoverTarget.prototype.getCaretRange = function(){ var uAc; if(this.isRange()) { uAc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.rnb.path, this.range.rnb.offset, this.range.snb.path, this.range.snb.offset); } else { var caret = SSDOM.getCaretFromDomPosition(this.body, this.path, -1, true); uAc = new Yqa(caret, caret); } return uAc;};THHoverTarget.prototype.getTextPreparedForSpeech = function(){ this.prepareTextForSpeech(); return this.textToSpeak;};THHoverTarget.prototype.prepareTextForSpeech = function(){ if(this.prepared) { return; } var Hsa; var Isa; if(this.isRange()) { this.VUb = new Array(); var Jsa = gMb(this.range.body, this.range.rnb, this.range.snb, this.VUb); this.voice = Jsa.voice; if(Jsa.uAc != null) { var zMb = Jsa.uAc; this.range = LPb(zMb); } Hsa = Jsa.xsb; Isa = Jsa.DMb; } else { var caret = SSDOM.getCaretFromDomPosition(this.body, this.path, -1, true); if(caret != null && caret.node != null) { var Msa = kTb(caret.node); if(Msa.trimTH().length == 0) { Hsa =""; Isa =""; } else { if(Eda) { this.voice = sIb(caret.node); } else { this.voice = null; } var ENb = new SpeechStream.SpeechRequest(); ENb.setString(Msa, SpeechStream.SpeechRequestBookmarks.OUTER); Hsa = ENb.getFinalText(); Isa = ENb.getText(); } } else { Hsa =""; Isa =""; } } this.textToSpeak = Hsa; this.textToSpeakNoChanges = Isa; this.prepared = true;};THHoverTarget.prototype.highlightRange = function(){ try { if(this.range != null) { var uAc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.rnb.path, this.range.rnb.offset, this.range.snb.path, this.range.snb.offset); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Zfb != null) { rw_setSpeechRangeImpl(Yfb.node, Yfb.offset, Zfb.node, Zfb.offset,"sp"); } else { } } } catch(err) { Fya("Error in THHoverTargetClass:highlightRange: "+ err.message); }};THHoverTarget.prototype.unhighlightRange = function(){ try { if(this.range != null) { var uAc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.rnb.path, this.range.rnb.offset, this.range.snb.path, this.range.snb.offset); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Zfb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(Yfb, Zfb), false); } else { } } } catch(err) { Fya("Error in THHoverTarget:unhighlightRange: "+err.message); }};THHoverTarget.prototype.equals = function(vnb){ if(vnb == null) { return false; } if(this.isRange() != vnb.isRange()) { return false; } if(this.isRange()) { return this.range.equals(vnb.range); } else { return this.path.equalsTH(vnb.path); }};THHoverTarget.prototype.equalsAprox = function(vnb){ if(vnb == null) { return false; } if(this.isRange() != vnb.isRange()) { return false; } if(this.isRange()) { if(this.range.equals(vnb.range)) { return true; } var r1 = this.getCaretRange(); var r2 = vnb.getCaretRange(); r1 = sta(r1); r2 = sta(r2); return r1.equals(r2); } else { return this.path.equalsTH(vnb.path); }};THHoverTarget.prototype.toString = function(){ var xsb ="THHoverTarget "; if(this.path != null) { xsb+="path="+ this.path; } else if(this.range != null) { xsb+= this.range.toString(); } return xsb;};SpeechStream.pronunciation = new function(){ this.NONE = 0; this.SERVER_PRONUNCIATION = 1; this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE = 2; this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER = 3; this.mode = this.SERVER_PRONUNCIATION; this.checkPronunciation = function() { return (this.mode != this.NONE && SpeechStream.cacheMode.mode != SpeechStream.cacheMode.CACHE_ONLY && this.mode != this.SERVER_PRONUNCIATION); }; this.fetchData = function() { if(this.mode == this.NONE || SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { return false; } if(this.mode != this.SERVER_PRONUNCIATION) { return true; } else { if( (ica & pronCreate_icon) == pronCreate_icon || (ica & pronEdit_icon) == pronEdit_icon ) { return true; } } return false; }; this.encodeData = function() { return (this.mode != this.NONE && this.mode != this.SERVER_PRONUNCIATION); }; this.setPronunciation = function(p_nMode) { if(p_nMode == this.NONE || p_nMode == this.SERVER_PRONUNCIATION || p_nMode == this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE || p_nMode == this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { this.mode = p_nMode; } };}; SpeechStream.Dictionary = function(){function Vsa(msa) { return(this["+"+ msa]); }function Ysa(msa) { var dsa ="+"+ msa; this[dsa] = null; delete this[dsa]; var bzb = this.Keys$__.indexOf(msa); if(bzb > -1) { this.Keys$__.splice(bzb, 1); } bzb = this.AllPageKeys$__.indexOf(msa); if(bzb > -1) { this.AllPageKeys$__.splice(bzb, 1); } if(msa.indexOf(" ") > -1) { var bzb = msa.indexOf(" "); var sOb = msa.substring(0, bzb); bzb = this.MultiwordStart$__.indexOf(sOb); if(bzb > -1) { this.MultiwordStart$__.splice(bzb, 1); } } }function esa(msa, Mwa, hsa) { var dsa ="+"+ msa; if(msa.substr(msa.length - 3) =="$__") { msa = msa.substr(0, msa.length - 1); } if(msa != null && msa.length > 0 && Mwa != null && Mwa.length > 0) { var isa = false; if(this[dsa] != null) { isa = true; if(hsa && !this.isAllPage$__(msa)) { return; } } this[dsa] = Mwa; if(this.Keys$__.indexOf(msa) == -1) { this.Keys$__[this.Keys$__.length] = msa; } if(hsa) { if(this.AllPageKeys$__.indexOf(msa) == -1) { this.AllPageKeys$__[this.AllPageKeys$__.length] = msa; } } else { if(this.AllPageKeys$__.indexOf(msa) > -1) { this.AllPageKeys$__.splice(this.AllPageKeys$__.indexOf(msa), 1); } } if(!isa) { if(msa.indexOf(" ") > -1) { var bzb = msa.indexOf(" "); var sOb = msa.substring(0, bzb); this.MultiwordStart$__.push(sOb); } } } }function lsa(msa) { return this.AllPageKeys$__.indexOf(msa) > -1; } this.add$__ = esa; this.get$__ = Vsa; this.remove$__ = Ysa; this.isAllPage$__ = lsa; this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array();};SpeechStream.Dictionary.prototype.deleteAll = function(){ if(typeof(this.Keys$__) !="undefined") { var Ivb; var i; for(i=0; i< this.Keys$__.length; i++) { Ivb = this.Keys$__[i]; this["+"+ Ivb] = null; delete this["+"+ Ivb]; } this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array(); }};function THRange(BWb, qsa, rsa){ this.body = BWb; this.rnb = qsa; this.snb = rsa;}THRange.prototype.equals = function(RMb){ return ( this.body == RMb.body && this.rnb.path == RMb.rnb.path && this.rnb.offset == RMb.rnb.offset && this.snb.path == RMb.snb.path && this.snb.offset == RMb.snb.offset);};THRange.prototype.toString = function(){ var range = this.getAsRange(); if(range != null) { if(Tfa) { return this.getAsRange().text; } else { return this.getAsRange().toString(); } } else { return""; }};THRange.prototype.getAsRange = function(){ var range = null; if(Tfa) { range = rw_getAsTextRange(this.body, this.rnb.path, this.rnb.offset, this.snb.path, this.snb.offset); } else { range = SSDOM.getRangeObject(this.body); var uAc = SSDOM.getCaretPairFromDomPosition(this.body, this.rnb.path, this.rnb.offset, this.snb.path, this.snb.offset); var OAc = uAc.Yfb; var PAc = uAc.Zfb; if(OAc != null && PAc != null) { range.setStart(OAc.node, OAc.offset); range.setEnd(PAc.node, PAc.offset); } else { range = null; Fya("Error in THRange:getAsRange: Failed to get the start or end caret."); } } return range;};THRange.prototype.clone = function(){ return new THRange(this.body, this.rnb, this.snb);};SpeechStream.SpeechRequestBookmarks = {NONE:0, OUTER:1, ALL:2};SpeechStream.SpeechRequest = function(){ this.m_strText = null; this.m_strFinalText = null; this.m_bChanged = false; this.m_wordList = null;};SpeechStream.SpeechRequest.prototype.setString = function(Awb, p_nBookmarks){ var wordList = Awb.split(" "); var i; var qzb = wordList.length - 1; for(i=0; i<qzb; i++) { wordList[i] = wordList[i] +" "; } this.setWordList(wordList, p_nBookmarks);};SpeechStream.SpeechRequest.prototype.setWordList = function(lwb, p_nBookmarks){ var xsa = null; if(typeof(eba_build_cache_for_external_use) =="boolean"&& eba_build_cache_for_external_use) { var IAc =""; var qzb = lwb.length; for(i=0; i<qzb; i++) { IAc += lwb[i]; } xsa = IAc; } var cbb = false; if(pfa) { if(dUb(lwb)) { cbb = true; } } if(SpeechStream.dateFilter.getMode() != SpeechStream.DateFilterModes.NONE) { if(SpeechStream.dateFilter.checkDatesFromList(lwb)) { cbb = true; } } this.m_strText = this.buildString(lwb, p_nBookmarks); var Fmb; var i, bzb, RAc, SAc, bSub; var qzb = lwb.length; for(i=0;i<qzb;i++) { var IAc = lwb[i]; bzb = IAc.indexOf("-"); if(bzb > 0) { RAc = IAc.substr(0, bzb); SAc = IAc.substr(bzb + 1); if(SAc.length == 0 || SAc.indexOf("-") > -1) { break; } if(!isNaN(RAc) &&!isNaN (SAc)) { Fmb = [RAc,"to", SAc]; SpeechStream.dateFilter.checkDatesFromList(Fmb); lwb[i] = Fmb.join(" "); cbb = true; bSub = true; } } } if(bSub) { this.m_strFinalText = this.buildString(lwb, p_nBookmarks); } if(SpeechStream.pronunciation.checkPronunciation()) { if(xWb(lwb)) { cbb = true; this.m_strFinalText = this.buildString(lwb, p_nBookmarks); } } this.m_bChanged = cbb; if(this.m_strFinalText == null) { this.m_strFinalText = this.m_strText; } if(xsa != null) { this.m_strText = xsa; }};SpeechStream.SpeechRequest.prototype.buildString = function(lwb, p_nBookmarks){ if(lwb.length == 0) { return""; } var wlb = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.ALL); var Fta = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.OUTER); var IAc =""; var qzb = lwb.length; if(Fta) { IAc += jKb +"0"+ kKb; } for(i=0; i<qzb; i++) { if(wlb) { IAc += jKb + i + kKb; } if(SpeechStream.pauseHandler.hasPauseKey(lwb[i])) { var Ita = LNb(lwb[i]); var Jta = SpeechStream.pauseHandler.decodedPause(Ita); IAc += Jta.join(""); } else { IAc += LNb(lwb[i]); } } if(Fta || wlb) { IAc += jKb + qzb + kKb; } return IAc;};SpeechStream.SpeechRequest.prototype.isChanged = function(){ return this.m_bChanged;};SpeechStream.SpeechRequest.prototype.getFinalText = function(){ return this.m_strFinalText;};SpeechStream.SpeechRequest.prototype.getText = function(){ return this.m_strText;};var Kta = null;var Lta = null;function $rw_event_click(event, i){ return $rw_event_hover(event, i);}function $rw_isTouchDevice(){ return afa;}function $rw_event_hover(event, i){ if(rda && Xfa) { $rw_tagSentences(); } if(!jea) { return; } if(!zda) { if(Lda) { throw"The page has not fully loaded, click and speak is not available yet."; } else { cya("The page has not fully loaded, click and speak is not available yet."); } return; } $g_bMouseSpeech = !$g_bMouseSpeech; var Olb = SpeechStream.EnumIconParameter; if(i > -1) { g_icons[i][Olb.ICON_TOGGLE_STATE] = $g_bMouseSpeech; if(afa && !$g_bMouseSpeech) { Zza(g_icons[i][Olb.ICON_NAME],"flat", g_icons[i][Olb.ICON_OFFSET], true); } else { Zza(g_icons[i][Olb.ICON_NAME],"toggleOn", g_icons[i][Olb.ICON_OFFSET], true); } } if(mfa && $g_bMouseSpeech) { if(vda > -1 && typeof($rw_event_sticky) !="undefined") { $rw_event_sticky(event, vda); var Nta = vea; vea = 0; BIb("sticky"+"", vda, true); vea = Nta; } } if(!$g_bMouseSpeech) { if(Pga) { window.postMessage( { type:"1757FROM_PAGE", command:"saveOnClickHover", settings:{'clickHoverOn': false } },'*'); } Xab.enableTouchEvents(false); $rw_event_stop(); KEb(false); MEb(false); Xab.enableTouchEvents(false); } else { if(Pga) { window.postMessage( { type:"1757FROM_PAGE", command:"saveOnClickHover", settings:{'clickHoverOn': true } },'*'); } KEb(true); Xab.enableTouchEvents(true); }}function $rw_isPaused(){ return (jea && Xab.getConnector && $rw_isSpeaking() && Xab.getConnector() != null && Xab.getConnector().isPaused());}function $rw_event_play(){ if(jea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { $rw_event_pause(); return; } if(g_nSpeakableTextAreaTimerId != 0) { clearTimeout(g_nSpeakableTextAreaTimerId); g_nSpeakableTextAreaTimerId = 0; if(g_speakableTextAreaTarget == null) { $rw_event_play(); return; } } var Ota = g_speakableTextAreaTarget; Ota.focus(); g_speakableTextAreaTarget = null; $rw_event_stop(); rw_speakHoverTarget(new THHoverTarget(Ota.ownerDocument.body, SSDOM.getPositionInDom(Ota), null)); } else { if($rw_isPaused()) { $rw_event_pause(); return; } var Pta = mRb(); if(Pta != null && Pta.range != null) { var Tbb = Pta.range; if(Tbb instanceof String) { $rw_event_stop(); rw_speakHoverTarget(Tbb); } else { if(Tfa) { var range = SSDOM.getSelectionObject(); if(range != null) { range.collapse(); range.select(); } } else { var range = SSDOM.getSelectionObject(); if(range != null) { range.collapseToStart(); } } var target = new THHoverTarget(null, null, Tbb); var Udb = Tbb.clone(); var xsb = target.getTextPreparedForSpeech(); var Tta = false; if(!Udb.equals(target.range)) { Tta = true; } if(xsb == null || xsb.length == 0) { return; } $rw_event_stop(); var Uta; if(Lea) { if(Tta) { Uta = fta(new THHoverTarget(null, null, Udb), true); } else { Uta = fta(target, true); } if(Uta == null) { Oea = target; } } else { Uta = target; } if(Uta != null) { target = Uta; rw_speakHoverTarget(target); } else { target.blockCache = !Sda; rw_speakHoverTarget(target); } } } else { if(Zca != null || arguments[0]) { $rw_event_stop(); if(Sga == null || aca) { aca = false; $rw_speakFirstSentence(arguments[0]); } else { $rw_speakCurrentSentence(); } } } } } catch(err) { thLogE(err); } }}function fta(RMb, hta){ if(RMb == null) { return null; } Pea = null; var uAc = RMb.getCaretRange(); uAc = sta(uAc); var dOb = hta ? SSDOM.getSentenceFromPointByLang(uAc.Yfb) : SSDOM.getSentenceFromPoint(uAc.Yfb); if(dOb == null) { return null; } if(dOb.Zfb.node == uAc.Zfb.node) { if(dOb.Zfb.offset == uAc.Zfb.offset) { return null; } var Sub = dOb.Zfb.node; if(Sub.nodeType == 3) { var Yta = Sub.nodeValue.substring(dOb.Zfb.offset, uAc.Zfb.offset).trimTH(); if(Yta.length == 0) { return null; } } } var Zta = hta ? SSDOM.getSentenceFromPointByLang(uAc.Zfb) : SSDOM.getSentenceFromPoint(uAc.Zfb); if(Zta == null) { return null; } if(dOb.equals(Zta)) { return null; } else { var ata; if(!Mea) { ata = dOb; dOb = new Yqa(uAc.Yfb, dOb.Zfb); } if(!Xya(dOb)) { dOb = SSDOM.getNextSentence(dOb, Zta.Zfb.node); if(dOb == null) { return null; } if(dOb.equals(Zta)) { return null; } } if(!Xya(Zta)) { Zta = SSDOM.getPreviousSentence(Zta, null); if(Zta == null) { return null; } if(dOb.equals(Zta)) { return null; } if(ata) { if(ata.equals(Zta)) { return null; } } } if(!Mea) { var bta = new Yqa(Zta.Yfb, uAc.Zfb); Pea = new THHoverTarget(null, null, LPb(bta)); } var cta; var dta; var Tbb = LPb(dOb ); cta = new THHoverTarget(null, null, Tbb); Zta = new Yqa(sta(Zta).Yfb, Zta.Zfb); Tbb = LPb(Zta ); dta = new THHoverTarget(null, null, Tbb); Oea = dta; return cta; }}function sta(OPb){ var cbb = false; var SNb; var Fgb; var ZTb; var Cgb; try { var Sub; var ota; if(!OPb.Zfb.isSpecialCase()) { SNb = OPb.Zfb.node; Fgb = OPb.Zfb.offset; var pta = SNb.nodeValue; while(true) { if(Fgb == 0) { Sub = SSDOM.getPreviousTextNode(SNb, false, ZTb); if(Sub == null) { break; } if(Sub.nodeType == 1) { SNb = Sub; Fgb = 0; cbb = true; break; } SNb = Sub; pta = SNb.nodeValue; Fgb = pta.length; cbb = true; } if(Fgb > 0) { ota = pta.charAt(Fgb - 1); if(Aya(ota)) { --Fgb; cbb = true; } else { break; } } else { break; } } } if(!OPb.Yfb.isSpecialCase()) { ZTb = OPb.Yfb.node; Cgb = OPb.Yfb.offset; var qta = ZTb.nodeValue; var qzb = qta.length; while(true) { if(Cgb == qzb) { Sub = SSDOM.getNextTextNode(ZTb, false, SNb); if(Sub == null) { break; } if(Sub.nodeType == 1) { ZTb = Sub; Cgb = 0; qzb = 0; cbb = true; break; } ZTb = Sub; qta = ZTb.nodeValue; Cgb = 0; qzb = qta.length; cbb = true; } if(Cgb < qzb) { ota = qta.charAt(Cgb); if(Aya(ota)) { ++Cgb; cbb = true; } else { break; } } else { break; } } } } catch(err) { thLogE(err); } if(!cbb) { return OPb; } else { return (new Yqa(new Sqa(ZTb, Cgb, true), new Sqa(SNb, Fgb, false))); }}function $rw_event_funplay(){ $rw_event_play();}var uta = null;function $rw_speakText(Awb){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; $rw_event_stop(); Awb = SpeechStream.pauseHandler.encodePauseFromString(Awb); var ENb = new SpeechStream.SpeechRequest(); ENb.setString(Awb, SpeechStream.SpeechRequestBookmarks.NONE); var KBc = ENb.getText(); var Cua = ENb.getFinalText(); Dua(Cua, !Tda, KBc);}function $rw_speak(Awb, p_bNoCache, p_bFilter){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; $rw_event_stop(); if(p_bFilter) { var ENb = new SpeechStream.SpeechRequest(); ENb.setString(Awb, SpeechStream.SpeechRequestBookmarks.NONE); var KBc = ENb.getText(); var Cua = ENb.getFinalText(); Dua(Cua, p_bNoCache, KBc); } else { Dua(Awb, p_bNoCache, Awb); }}function Dua(Awb, Fua, Gua){ if(!iwa(Awb)){ return; } if(typeof(eba_no_flash) =="boolean"&& eba_no_flash) { rw_sendSocketMessage("THStart"+ Awb +"THEnd"); return; } if(Awb == null && Awb.length == 0) { $rw_doSelection(-1); return; } if(!jea) { $rw_doSelection(-1); return; } try { Awb = SpeechStream.stringAssist.filterNbsp(Awb); if(typeof(Gua) =="undefinded"|| Gua == null ) { Gua = Awb; } else { Gua = SpeechStream.stringAssist.filterNbsp(Gua); } var flash = Xab.getConnector(); if(flash != null) { if(mKb && mKb.isRange()) { KEb(true); MEb(true); $rw_doSelection(0); } if(Fua && Mda && Nda) { flash.startSpeechFromBackup(Awb, !nfa); kwa(); } else { if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { var oOb = APb(); var Rua = AQb(Gua); if(Kga) { oOb = Vua(oOb); Rua = Yua(Rua); } var Enb; if(Oda) { var uOb = BPb(Rua); oOb = oOb +"/"+ uOb ; Enb = oOb +"/"+Rua; } else { Enb = oOb +"/"+ Rua; } flash.startSpeechFromCache(Enb, Awb, false); kwa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER) { var oOb = APb(); var Rua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Rua = AQb(Awb); } else { Rua = AQb(Gua); } if(Kga) { oOb = Vua(oOb); Rua = Yua(Rua); } var Enb; if(Oda) { var uOb = BPb(Rua); oOb = oOb +"/"+ uOb ; Enb = oOb +"/"+Rua; } else { Enb = oOb +"/"+ Rua; } flash.startSpeechFromCacheWithGen(Enb, Awb, oOb, Rua, !nfa); kwa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_BUILDING_MODE) { var oOb = APb(); var Rua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Rua = AQb(Awb); } else { Rua = AQb(Gua); } if(Kga) { oOb = Vua(oOb); Rua = Yua(Rua); } var Enb; if(Oda) { var uOb = BPb(Rua); oOb = oOb +"/"+ uOb ; Enb = oOb +"/"+Rua; } else { Enb = oOb +"/"+ Rua; } var Uua = eya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.startSpeechGenerateCache(Enb, Awb, oOb, Rua, !nfa, Uua ); kwa(); } else { flash.startSpeech(Awb, !nfa); kwa(); } } }} catch(err) { thLogE(err); }}function Vua(Wua){ if(Lga != null) { return Lga; } else { return Wua; }}function Yua(Zua){ if(Mga != null) { return Mga; } else { return Zua; }}function bua(Twa, Awb){ if(Awb.indexOf("\n") > -1) { var vZb = eya(true) + mca +"/SpeechCache/"+ Twa +".xml"; var fua = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"); fua.open("HEAD", vZb, false); fua.send(); return (fua.status == 404); } return false;}function hua(Awb, PMb){ if(Awb == null && Awb.length == 0) { $rw_doSelection(-1); return; } if(!jea) { $rw_doSelection(-1); return; } try { var flash = Xab.getConnector(); if(flash != null) { KEb(true); $rw_doSelection(0); flash.startSpeechFromFile(Awb, PMb, !nfa); kwa(); } } catch(err) { thLogE(err); }}function nua(Awb){ if(Awb == null && Awb.length == 0) { $rw_doSelection(-1); return; } if(!jea) { $rw_doSelection(-1); return; } try { var flash = Xab.getConnector(); if(flash != null) { KEb(true); $rw_doSelection(0); flash.startHighlighting(Awb); } } catch(err) { thLogE(err); }}var g_nPauseEventTimeout = 0;function $rw_event_pause(){ if(g_nPauseEventTimeout > 0) { clearTimeout(g_nPauseEventTimeout); g_nPauseEventTimeout = 0; } if($rw_isSpeaking()) { var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var flash = Xab.getConnector(); if(flash != null) { if(!flash.canPause()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); return; } if(flash.isPaused()) { if(!flash.resume()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } } else { if(!flash.pause()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } } } } else { if(CEb) { var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } }}function $rw_event_funstop(){ $rw_event_stop();}function $rw_event_stop(){ if(!jea) { return; } try { if(Zga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStopBubble(); } XIb(); Eea = null; Oea = null; if(qLb > 0) { clearTimeout(qLb); qLb = 0; } oLb.length = 0; if(iLb) { setTimeout($rw_event_stop, 100); return; } if(nKb > 0) { clearTimeout(nKb); nKb = 0; } if(oKb > 0) { clearTimeout(oKb); oKb = 0; } KEb(false); MEb(false); var flash = Xab.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } lKb = null; } catch(err) { thLogE(err); }}function $rw_event_stop_limited(){ if(!jea) { return; } try { XIb(); Eea = null; KEb(false); MEb(false); var flash = Xab.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } } catch(err) { thLogE(err); }}function $rw_event_mp3(){ try { var uua = null; if(pda != null) { var target = document.getElementById(pda); if(target!= null) { uua = SSDOM.getAllTextFromNode(target); } } else { uua = Lva(); } if(uua != null) { uua = uua.trimTH(); if (uua.length > 0) { if(uua.length > qda) { alert("Too much text was selected for making an MP3 file, there is a "+ (qda/1024) +"k limit."); return; } var flash = Xab.getConnector(); if(flash != null) { var xsb ="<br>The MP3 file for the text is being generated, <br> "+"this could take some time depending on the amount of text selected.<br><p align=\"center\">"+"<img alt=\"loading\" src=\""+ Zga.paths.strFileLoc +"rwimgs/request-processing.gif\"> </p>"; VKb(Oba, xsb); aKb(true, Oba); flash.getMP3File(uua, !nfa); } } } } catch(err) { thLogE(err); }}function $rw_mp3reply(xsb){ try { if(typeof(eba_mp3_callback) !="undefined") { aKb(false, Oba); eval(""+ eba_mp3_callback +"('"+ xsb +"')"); } else { if(xsb.length > 0) { var Mzb ="Save Target As..."; if(!Kfa) { if(Wfa) { Mzb ="Save Link As..."; } else if(Xfa) { Mzb ="Download Linked File"; } else { Mzb ="Save Link As..."; } } xsb ="<br>Right click on the link below and select "+"'"+ Mzb +"' to save the mp3 file to your hard drive.<p></p>"+"<a type='application/octet-stream' href=\""+ xsb +"\">Download speech mp3 file.</a><p></p>"; VKb(Oba, xsb); aKb(true, Oba); } } } catch(err) { thLogE(err); }}var yua ="setWarning";function setWarning(){ $rw_lexiSubmitEvent();}function $rw_lexiSubmitEvent(){ uea = true;}function Ava(){ if (Tfa) {var range = document.selection.createRange(); if (range.text.length > 0) { return true; } if(!tda && top.frames.length > 0) { var i = 0; var qzb = top.frames.length; for (i = 0; i < qzb; i++) { try { var Jdb = top.frames[i]; range = Jdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return true; } } catch(e) { } } } } else {if(Xja!=null) { return true; } if (window.getSelection() != null && !window.getSelection().isCollapsed) { return true; } if(!tda && top.frames.length > 0) { var i = 0; var qzb = top.frames.length; for (i = 0; i < qzb; i++) { try { if (top.frames[i].getSelection() != null && !top.frames[i].getSelection().isCollapsed) { return true; } } catch(e) { } } } } return false;}function Eva(){ if (Tfa) {var range = document.selection.createRange(); if(range.text == null || range.text.length == 0) { if(!tda && top.frames.length > 0) { var i = 0; var qzb = top.frames.length; for (i = 0; i < qzb; i++) { try { var Jdb = top.frames[i]; range = Jdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return range.parentElement(); } } catch(e) { } } } } else { return range.parentElement(); } } else { if(Xja!=null) { return Xja.startContainer; } var aRb = window.getSelection(); if(aRb.isCollapsed || aRb.toString().trimTH().length == 0) { if(rDb && rDb.selectionStart != rDb.selectionEnd) { return rDb; } if(!tda && top.frames.length>0) { var i=0; var qzb = top.frames.length; for(i = 0; i<qzb; i++) { try { var kAc = top.frames[i].getSelection(); if(kAc != null && !kAc.isCollapsed) { return kAc; } } catch(e) { } } } } else { return aRb.focusNode; } } return null;}function Lva(){ var xsb =''; if (Tfa) {var range = document.selection.createRange(); if (range.text == null || range.text.length == 0) { if(!tda && top.frames.length > 0) { var i = 0; var qzb = top.frames.length; for (i = 0; i < qzb; i++) { try { var Jdb = top.frames[i]; range = Jdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { break; } } catch(e) { } } } } xsb = range.text; var Udb = range.duplicate(); Udb.collapse(); var Nkb = Udb.parentElement(); if(SSDOM.isIgnored(Nkb)) { xsb =""; } } else { if(Xja!=null) { return Xja.toString(); } var aRb = window.getSelection(); if(aRb.isCollapsed || aRb.toString().trimTH().length == 0) { if(rDb && rDb.selectionStart != rDb.selectionEnd) { return rDb.value.substring( rDb.selectionStart, rDb.selectionEnd); } if(!tda && top.frames.length>0) { var i=0; var qzb = top.frames.length; for(i = 0; i<qzb; i++) { try { var kAc = top.frames[i].getSelection(); if(kAc != null && !kAc.isCollapsed) { aRb = kAc; break; } } catch(e) { } } } } if(aRb.anchorNode) { if(SSDOM.isIgnored(aRb.anchorNode)) { return""; } } if(aRb.focusNode && aRb.focusNode.id) { if(aRb.focusNode.id =="flashcontent") { return""; } } if(!aRb.isCollapsed) { xsb = aRb.toString(); } else { xsb =""; } } return xsb;}function Tva(){ KEb(false); MEb(false); }var Uva = -1;function $rw_doSelection(HIb){ if (HIb < 0) { if(HIb == -2 && $rw_isSpeaking()) { $rw_speechCompleteCallback("Stopped"); } else if(HIb == -3) { $rw_speechErrorCallback(); } HEb = setTimeout(Tva, 200); OEb(false); if(Zga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStopBubble(); } } else { OEb(true); } if(mKb && mKb.isRange()) { if(HIb != Uva) { if (HIb == -1 || HIb == -2 || HIb == -3) { if (Uva > -1 && mKb.VUb != null) { try { var VUb = mKb.VUb; var qzb = VUb.length; if (Uva < qzb) { var Tbb = VUb[Uva].range; var uAc = SSDOM.getCaretPairFromDomPosition(Tbb.body, Tbb.rnb.path, Tbb.rnb.offset, Tbb.snb.path, Tbb.snb.offset); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Zfb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(Yfb, Zfb), true); } else { Fya("Cannot determine valid range to remove speech highlight from. "+ Yfb +" "+ Zfb); } } } catch(err) { Fya("$rw_doSelection:clear last speech:"+ err.toString()); } } Uva = -1; try { mKb.unhighlightRange(); } catch(err){Fya("$rw_doSelection:unhighlightRange:"+ err.message);} } else if(mKb.VUb != null) { if (Uva == HIb) { return; } var VUb = mKb.VUb; var qzb = VUb.length; try { if (Uva > -1 && Uva < qzb) { var Tbb = VUb[Uva].range; var uAc = SSDOM.getCaretPairFromDomPosition(Tbb.body, Tbb.rnb.path, Tbb.rnb.offset, Tbb.snb.path, Tbb.snb.offset); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Zfb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(Yfb, Zfb), true); } else { Fya("Cannot determine valid range to remove speech highlight from. "+ Yfb +" "+ Zfb); } } } catch(err) { thLogE(err); } if (HIb < 0 || HIb >= qzb) { return; } Uva = HIb; var Tbb = VUb[HIb].range; try { var uAc = SSDOM.getCaretPairFromDomPosition(Tbb.body, Tbb.rnb.path, Tbb.rnb.offset, Tbb.snb.path, Tbb.snb.offset); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Zfb != null) { try { var tvb = false; var mva = SSDOM.getComputedStyle(Yfb.node); if(mva != null && (mva.display =="none"|| mva.visibility =="hidden")) { tvb = true; } else { var Sub = Yfb.node; var Fob = Sub.ownerDocument.body; while(Sub != Fob) { Sub = Sub.parentNode; if(SSDOM.getComputedStyle(Sub).display =="none") { tvb = true; break; } } } if(tvb) { var $tmpFunc = function() { $rw_stopSpeech(); $rw_setCurrentTarget(null); }; setTimeout($tmpFunc, 1); return; } } catch(e) {} var result = rw_setSpeechRangeImpl(Yfb.node, Yfb.offset, Zfb.node, Zfb.offset,"csp"); if(result != null && result.node != null) { qRb(result.node); } else { qRb(Yfb.node); } } else { Fya("Cannot determine valid range to add speech highlight from. "+ Yfb +" "+ Zfb); } } catch(err) { Fya("error with highlight speech range in rw_doSelection:"+ err.message); } } } } if (HIb == -1 || HIb == -2 || HIb == -3) { Uva = -1; mKb = null; var qva = null; if(VIb.length > 0) { qva = new Array(); } while(VIb.length > 0) { if(typeof(VIb[0])=="string") { if(VIb[0].indexOf("$rw_readNextTarget") > -1) { break; } } qva.push(VIb.shift()); } if(HIb == -1) { if(VIb.length > 0) { qva.push(VIb.shift()); } } else if(HIb == -3) { var flash = Xab.getConnector(); var sva = flash.getLastError(); var hAc="An error occurred with speech.  "+ sva; if(SpeechStream.actionOnError.action == SpeechStream.EnumActionOnError.SKIP) { Fya(hAc); if(VIb.length > 0) { qva.push(VIb.shift()); } } else { cya(hAc); } } if(qva != null && qva.length > 0) { pIb(qva); } }}function $displayMe(xsb){ cya(xsb);}function xva(yva, zva, Awa, Bwa, a_bool_scrollbars, a_bool_resizable, a_bool_menubar, a_bool_toolbar, a_bool_addressbar, a_bool_statusbar, a_bool_fullscreen){ var uva = (screen.width - Awa) / 2; var vva = (screen.height - Bwa) / 2; var wva ='height='+ Bwa +',width='+ Awa +',top='+ vva +',left='+ uva +',scrollbars='+ a_bool_scrollbars +',resizable='+ a_bool_resizable +',menubar='+ a_bool_menubar +',toolbar='+ a_bool_toolbar +',location='+ a_bool_addressbar +',statusbar='+ a_bool_statusbar +',fullscreen='+ a_bool_fullscreen +''; var Cwa = window.open(yva, zva, wva); if (parseInt(navigator.appVersion, 10) >= 4) { Cwa.window.focus(); }}function Ewa(Swa){ var start = document.cookie.indexOf(Swa +"="); var Gwa = start + Swa.length + 1; if (( !start ) && ( Swa != document.cookie.substring(0, Swa.length) )) { return null; } if (start == -1) { return null; } var end = document.cookie.indexOf(";", Gwa); if (end == -1) { end = document.cookie.length; } return unescape(document.cookie.substring(Gwa, end));}function Kwa(Swa, Mwa, Nwa, Twa, Uwa, Qwa){ var Iwa = new Date(); Iwa.setTime(Iwa.getTime()); if (Nwa) { Nwa = Nwa * 1000 * 60 * 60 * 24; } var Jwa = new Date(Iwa.getTime() + (Nwa)); document.cookie = Swa +"="+ escape(Mwa) + ( ( Nwa ) ?";expires="+ Jwa.toGMTString() :"") + ( ( Twa ) ?";path="+ Twa :"") + ( ( Uwa ) ?";domain="+ Uwa :"") + ( ( Qwa ) ?";secure":"");}function Rwa(Swa, Twa, Uwa){ if (Ewa(Swa)) { document.cookie = Swa +"="+ ( ( Twa ) ?";path="+ Twa :"") + ( ( Uwa ) ?";domain="+ Uwa :"") +";expires=Thu, 01-Jan-1970 00:00:01 GMT"; }}function Xwa(){ if(Yeb()) { var KBc = fdb(); VKb(Sba, KBc); aKb(true, Sba); var gKb = VEb("rwcollatewrapper"); var Ywa = document.getElementById("rwCollect"); if(Ywa != null) { if(parseInt(gKb.scrollHeight, 10) >= 380) { var rwTextCollect = VEb("rwTextCollect"); rwTextCollect.style.height ="360px"; } else { var rwTextCollect = VEb("rwTextCollect"); rwTextCollect.style.height = (gKb.scrollHeight + 24); } }}}function $rw_event_axendolink(){ document.location ="http://www.browsealoud.info";}function dis(node){ cya(node.tagName +"|"+ node.nodeValue +"|"+ SSDOM.getPositionInDom(node));}function dwa(Gwb, fwa){ if(Gwb == null) { return; } try { var tvb = false; var qzb = Gwb.length; if(qzb > 0) { if(Gwb.charAt(qzb-1) ==")"|| Gwb.substr(qzb-1) ==";") { tvb = true; } } else { return; } if(tvb) { eval(Gwb); } else { try { if(typeof(fwa) !="undefined"&& fwa != null) { eval(Gwb +"("+ fwa +");"); } else { eval(Gwb +"();"); } } catch(innerErr) { eval(Gwb); } } } catch(err) { thLogE(err); }}function gwa(XUb){ try { (new Function(XUb))(); } catch(err) { thLogE(err.message); }}function iwa(Awb){ if(eba_speech_redirect_callback && typeof(eba_speech_redirect_callback) =="function") { return eba_speech_redirect_callback(Awb); } return true;}function kwa(){ if(typeof(eba_speech_started_callback) =="string") { dwa(eba_speech_started_callback.trimTH()); }}function $rw_renderingSpeechCallback(){ if(typeof(eba_rendering_speech_callback) =="string") { dwa(eba_rendering_speech_callback.trimTH()); }}function $rw_speechCompleteCallback(p_strParam){ try { if(typeof(p_strParam) =="undefined"|| p_strParam == null) { p_strParam ="Complete"; } if(typeof(eba_speech_complete_callback) =="string") { dwa(eba_speech_complete_callback.trimTH(),"'"+ p_strParam +"'"); } if(Kga && p_strParam =="Complete") { SSAPIP.apipHandler.handleSpeechComplete(); } } catch(e) {}}function $rw_speechErrorCallback(){ try { if(typeof(eba_speech_complete_callback) =="string") { dwa(eba_speech_complete_callback.trimTH(),"'Error'"); } } catch(e) {}}function rw_pageCompleteCallBack(){ try { if(typeof(eba_page_complete_callback) =="string") { dwa(eba_page_complete_callback.trimTH()); } } catch(e) {}} function $rw_event_calculator() { try { VKb(Wba,""); aKb(true, Wba); rw_calClearMem(); rw_calAddDigit('0'); } catch(err) { thLogE(err); } }function $rw_event_recorder(){ try { VKb(aba,""); aKb(true, aba); var mwa = document.getElementById("rw_micDisplay"); mwa.style.visibility="visible"; var nwa = document.getElementById("rw_micRecordingOn"); nwa.style.visibility="visible"; } catch(err) { thLogE(err); }}function $rw_event_generate_cache(){ try { if(typeof($rwj) =="undefined") { setTimeout($rw_event_generate_cache, 1000); return; } $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Caching page please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); nia(); } catch(err) { thLogE(err); }}function $rw_event_check_cache(){ try { if(typeof($rwj) =="undefined") { setTimeout($rw_event_check_cache, 1000); return; } $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Reading Cache please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); Uja(); } catch(err) { $rwj.unblockUI(); thLogE(err); }}function $rw_event_screenmask(event, i){ var Olb = SpeechStream.EnumIconParameter, isToggled = g_icons[i][Olb.ICON_TOGGLE_STATE] == true; g_icons[i][Olb.ICON_TOGGLE_STATE] = !isToggled; swa(event ? event : window.event);}var pwa = 60;var qwa;function swa(e){ var rwa = eba_screen_mask_opacity, Bxa = eba_screen_mask_letterbox_depth, viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(), posX = e && e.pageX ? e.pageX : 0, posY = e && e.pageY ? e.pageY - $jq(window).scrollTop() : 0, maskTopHeight = posY - Bxa, maskBottomHeight = viewportHeight - posY - Bxa, maskVisible = false, firstTime = false, zwa = null, bottomMask = null; if($jq("#rwMaskTop").length === 0) { zwa = $jq("<div />") .attr("id","rwMaskTop") .addClass("rwScreenMaskOverlay") .css({"opacity": rwa / 100,"top": 0,"height": maskTopHeight +"px"}) .appendTo("body"); if($rw_isTouchDevice()) { upArrow = $jq("<a />") .attr({"id":"rwMaskUpArrow","class":"rwScreenMaskArrow","ignore":"1","href":"#"}) .css({"top":"0"}) .html("<span><img src=\""+ Zga.paths.strFileLoc +"/rwimgs/arrow_up.png\" alt=\"\" /></span>") .appendTo("body"); downArrow = $jq("<a />") .attr({"id":"rwMaskDownArrow","class":"rwScreenMaskArrow","ignore":"1","href":"#"}) .css({"top":"50%"}) .html("<span><img src=\""+ Zga.paths.strFileLoc +"/rwimgs/arrow_down.png\" alt=\"\" /></span>") .appendTo("body"); $jq(".rwScreenMaskArrow").on("touchstart", function (e) { var twa = $jq(this).attr("id") ==="rwMaskUpArrow"; xwa(e, twa); qwa = setInterval(function () { xwa(e, twa); }, 250); }) .on("touchend", function () { clearInterval(qwa); g_lastTapTarget = null; }); vwa = setInterval(ywa, 100); CKb(); document.getElementById('rwDrag').style.zIndex = 99993; } maskVisible = true; firstTime = true; } else { zwa = $jq("#rwMaskTop"); } if($jq("#rwMaskBottom").length === 0) { bottomMask = $jq("<div />") .attr("id","rwMaskBottom") .addClass("rwScreenMaskOverlay") .css({"opacity": rwa / 100,"bottom": 0,"height": maskBottomHeight +"px"}) .appendTo("body"); maskVisible = true; firstTime = true; } else { bottomMask = $jq("#rwMaskBottom"); } if(maskVisible && firstTime) { if(!$rw_isTouchDevice()) { $jq(document).on("mousemove", Cxa); } } else { maskVisible = zwa.is(":visible"); vwa = setInterval(ywa, 100); if(maskVisible) { $jq("#rwMaskTop,#rwMaskBottom,#rwMaskUpArrow,#rwMaskDownArrow").hide(); if(!$rw_isTouchDevice()) { $jq(document).off("mousemove"); } else { CKb(); clearInterval(vwa); } } else { $jq("#rwMaskTop,#rwMaskBottom,#rwMaskUpArrow,#rwMaskDownArrow").show(); if(!$rw_isTouchDevice()) { $jq(document).on("mousemove", Cxa); } else { CKb(); } } }}var uwa = null, g_lastTapTarget = null;function xwa(e, twa){ if(event.touches.length === 1) { if((g_lastTapTarget === null || e.target === g_lastTapTarget) && (uwa === null || new Date() - uwa > 500)) { g_lastTapTarget = e.target; uwa = new Date(); Axa(twa ? (pwa * -1) : pwa); } e.preventDefault(); } return false;}var vwa, g_currentHeight = 0, g_currentWidth = 0;function ywa(){ var zwa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), tmHeight = zwa.height(), bmHeight = bottomMask.height(), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(); if(viewportWidth !== g_currentWidth || viewportHeight !== g_currentHeight) { g_currentWidth = viewportWidth; g_currentHeight = viewportHeight; bottomMask.css({"height": (viewportHeight - tmHeight - (eba_screen_mask_letterbox_depth * 2)) +"px"}); }}function Axa(pixelChange){ var zwa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), tmHeight = zwa.height(), bmHeight = bottomMask.height(), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(); if(zwa.height() < pwa && pixelChange < 0) { pixelChange = zwa.height() * -1; } if(bottomMask.height() < pwa && pixelChange > 0) { pixelChange = bottomMask.height(); } zwa.animate({"height": (tmHeight + pixelChange) +"px"}, 250); bottomMask.animate({"height": (bmHeight - pixelChange) +"px"}, 250);}function Cxa(e){ var Bxa = eba_screen_mask_letterbox_depth, zwa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(), posX = e.pageX, posY = e.pageY - $jq(window).scrollTop(), maskTopHeight = posY - Bxa, maskBottomHeight = viewportHeight - posY - Bxa; zwa.css({"height": maskTopHeight +"px"}); bottomMask.css({"height": maskBottomHeight +"px"});}function Dxa(xsb){ if(xsb == null) { return""; } xsb = xsb.trimTH(); var jsb =""; var i = 0; var n = xsb.length; var Esb = -1; var Fsb = -1; for(i = 0; i < n; i++) { var Qub = xsb.charCodeAt(i); if((Qub > 64 && Qub < 91) || (Qub > 96 && Qub < 123 )) { if(Esb == -1) { Esb = i; } } else { if(Esb > -1) { if(Qub == 39) { if(i < (n - 1)) { nValNext = xsb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 )) { ++i; } else { Fsb = i; break; } } else { Fsb = i; break; } } else { Fsb = i; break; } } } } if(Esb > -1) { if(Fsb > -1) { jsb = xsb.substring(Esb, Fsb); } else { jsb = xsb.substring(Esb); } } return jsb;}function Ixa(xsb){ if(xsb == null) { return""; } xsb = xsb.trimTH(); xsb = xsb.replace(/[\s\xA0]+/g," "); var jsb =""; var i = 0; var n = xsb.length; var Esb = -1; var Fsb = -1; for(i = 0; i < n; i++) { var Qub = xsb.charCodeAt(i); if((Qub > 64 && Qub < 91) || (Qub > 96 && Qub < 123 ) || Qub > 127) { if(Esb == -1) { Esb = i; } } else { if(Esb > -1) { if(Qub == 39) { if(i < (n - 1)) { nValNext = xsb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 ) || Qub > 127) { ++i; } else { Fsb = i; break; } } else { Fsb = i; break; } } else { Fsb = i; break; } } } } if(Esb > -1) { if(Fsb > -1) { jsb = xsb.substring(Esb, Fsb); } else { jsb = xsb.substring(Esb); } } return jsb;}function Nxa(DOb){ if(DOb == null) { return""; } var jsb = DOb.trimTH(); if(jsb.length == 0) { return""; } jsb = jsb.replace(/[\s\xA0]+/g," "); var sSb = 0; var bzb = jsb.indexOf(' '); while(bzb > -1) { ++sSb; if(sSb == 3) { jsb = jsb.substr(0, bzb); break; } bzb = jsb.indexOf(' ', bzb + 1); } return jsb;}function Sxa(vyb){ if(vyb && vyb.length > 0) { var n=-1; var i; for(i=vyb.length-1; i>=0; i--) { if(Wxa(vyb.charCodeAt(i))) { break; } n=i; } if(n>-1) { vyb = vyb.substr(0, n); } } return vyb;}function Uxa(vyb){ if(vyb && vyb.length > 0) { var n=-1; var i; for(i=0; i<vyb.length; i++) { if(Wxa(vyb.charCodeAt(i))) { break; } n=i; } if(n>-1) { vyb = vyb.substr(n); } } return vyb;}function Wxa(CZb){ return (CZb > 64 && CZb < 91) || (CZb > 96 && CZb < 123 ) || (CZb > 127 && CZb != 160);}function Yxa(CZb){ return (CZb > 64 && CZb < 91) || (CZb > 96 && CZb < 123);}function axa(CZb){ return (CZb > 47 && CZb < 58);}function cxa(CZb){ return (CZb > 47 && CZb < 58) || (CZb > 63 && CZb < 91) || (CZb > 94 && CZb < 123);}function exa(CZb){ return ( (CZb > 127 && CZb != 160) || cxa(CZb) );}function hxa(xsb){ if(xsb == null) { return false; } for(var i = 0; i < xsb.length; i++) { var Qub = xsb.charCodeAt(i); if(Qub == 39 || (Qub > 47 && Qub < 58) || (Qub > 64 && Qub < 91) || Qub == 96 || (Qub > 96 && Qub < 123)) { return true; } } return false;}function kxa(lxa){ if(lxa == null || lxa.length == 0) { return lxa; } var qzb = lxa.length; for(var i = 0; i < qzb; i++) { var Qub = lxa.charCodeAt(i); if(! (Qub == 39 || Qub == 44 || Qub == 46 || (Qub > 47 && Qub < 58) || (Qub > 63 && Qub < 91) || (Qub > 94 && Qub < 123))) { lxa = lxa.replace(lxa.charAt(i),' '); } } return lxa.trimTH();}function nxa(range){ var xsb =""; if(range.text) { xsb = range.text; } else { xsb = range.toString(); } return xsb;}function pxa(){ var oRb = SSDOM.getSelectionObject(); if(oRb == null) { return; } if(oRb.collapseToStart) { oRb.collapseToStart(); } else if(oRb.execCommand) { oRb.execCommand("UnSelect", false, null); }}function wxa(Xsb){ if(Xsb != null) { if(Tfa) { var range = SSDOM.getRangeObject(Xsb.ownerDocument.body); range.moveToElementText(Xsb) ; range.select(); } else { var Sub = SSDOM.getNextNodeIgnoreChildren(Xsb, false, null); if(Sub != null) { var range = new dra(Xsb, 0, Sub, 0); yxa(range); } } }}function yxa(Zdb){ if(Tfa) { Zdb.select(); } else { var start = Zdb.OAc; var end = Zdb.PAc; var zUb = SSDOM.getWindow(start.node); if(!Xfa) { var Ofb = zUb.getSelection(); Ofb.collapse(start.node, start.offset); if(Ofb.extend) { Ofb.extend(end.node, end.offset); } else { var range = zUb.document.createRange(); range.setStart(start.node, start.offset); range.setEnd(end.node, end.offset); Ofb.addRange(range); } } else { zUb.getSelection().setBaseAndExtent(start.node, start.offset, end.node, end.offset); } }}function Aya(Bya){ return (Bya.search(/[\s\xa0]/) > -1);}function Cya(NAc){ var Dya = NAc +"  "; if(NAc.tagName != null) { Dya += NAc.tagName +" "; } if(NAc.className != null) { Dya += NAc.className +" "; } for(prop in NAc) { Dya += prop +"  "+" | "; } alert(Dya);}function Eya(NAc){ var Dya = NAc +"  "; for(prop in NAc) { Dya += prop +"  "+" | "; } return Dya;}function Fya(inb){ if(typeof(window.console) !=="undefined"&& typeof(window.console.log) !=="undefinded") { try { window.console.log(inb); } catch(err) { } } if(typeof($rw_dump) =='function') { try { $rw_dump(inb +"\n"); } catch(err) { } }}function thLogE(error){ if(error != null) { if(error.name && error.message) { Fya("Error: "+""+ error.name +". : "+ error.message); } else if(error.message) { Fya("Error: "+""+ error.message); } }}function $rw_logMe(vyb){ Fya(vyb);}function $rw_alertMe(vyb){ alert(vyb);}function $rw_inputFieldFilter(vyb){ if(vyb == null || vyb.length == 0) { return vyb; } var i; var qzb = vyb.length; for(i = qzb - 1; i >= 0; i--) { var c = vyb.charCodeAt(i); if((c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { vyb = vyb.substring(0, i) + vyb.substr(i + 1); } } return vyb;}function $rw_handleFieldInput(Zzb){ var pre = Zzb.value; var post = $rw_inputFieldFilter(pre); if(pre != post) { Zzb.value = post; }}function $rw_handleFieldKeyDownInput(evt){ if(!evt.ctrlKey) { var c = evt.keyCode; if((c > 32 && c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { return false; } } return true;}function Kya(c){ return (c > 64 && c < 91) || (c > 96 && c < 123) || c == 39 || (c > 128 && c != 160);}function Nya(qqb){ var qzb = qqb.length; var i = 0; var Qub; for(i=0; i<qzb; i++) { Qub = qqb.charCodeAt(i); if((Qub > 63 && Qub < 91) || (Qub > 96 && Qub < 123) || (Qub > 127 && Qub != 160)) { return true; } else if(Qub > 46 && Qub < 58) { return true; } else if((Qub > 35 && Qub < 39) || Qub == 43 || Qub == 61) { return true; } else if(Qub == 42 || Qub == 45 || Qub == 92 || (Qub > 93 && Qub < 97)) { if(wca !="VW Kate") { return true; } } } if(pfa) { if(RUb(qqb)) { return true; } } return false;}function Xya(uMb){ try { if(uMb == null || uMb.Yfb == null || uMb.Zfb == null) { return false; } var Yfb = uMb.Yfb; var Zfb = uMb.Zfb; var ZTb = Yfb.node; var SNb = Zfb.node; var eNb = true; var Uya = false; var bNb = ZTb; var xsb =""; while(bNb != null) { Uya = SSDOM.isSpecialCase(bNb); if(SpeechStream.pauseHandler.isPauseElement(bNb)) { Uya = true; } if(Uya || bNb.nodeType == 3) { var IAc = SSDOM.getTextFromNode(bNb); if(IAc != null && IAc !="") { if(!Uya) { if(bNb == SNb && Zfb.offset > -1) { IAc = IAc.substring(0, Zfb.offset); } if(bNb == ZTb && Yfb.offset > 0) { IAc = IAc.substring(Yfb.offset); } } if(Nya(IAc)) { return true; } } } if(Uya) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, SNb); } else { if(eNb) { bNb = SSDOM.getNextNodeAllowMoveToChild(bNb, true, SNb); } else { bNb = SSDOM.getNextNode(bNb, false, SNb); } } eNb = false; } } catch(err) { thLogE(err); } return false;}function aya(d){ return d.toString(16);}function bya(h){ return parseInt(h,16);}function cya(vyb){ if(cca) { alert(vyb); } else { Fya(vyb); }}function $rw_enable_alerts(p_bEnable){ if(typeof(p_bEnable) =="boolean") { cca = p_bEnable; }}function $rw_uriEncode(vyb){ return encodeURIComponent(vyb);}function eya(ICb){ if(ICb) { return ((Gea||Hea)?"https://":"http://"); } else { return ((Gea||Iea)?"https://":"http://"); }}/*Code designed and developed by Stuart McWilliams.*/SpeechStream.EnumIconParameter ={ ICON_NAME:0, ICON_ALT_TEXT:1, ICON_OFFSET:2, ICON_IS_TOGGLE:3, ICON_TOGGLE_STATE:4};function iya(Gwb, Fza, IWb, IIb){ var gya = SpeechStream.EnumIconParameter; var bzb = mea; g_icons[mea] = new Array(5); g_icons[mea][gya.ICON_NAME] = Gwb; g_icons[mea][gya.ICON_ALT_TEXT] = Fza; g_icons[mea][gya.ICON_OFFSET] = IWb; g_icons[mea][gya.ICON_IS_TOGGLE] = IIb; g_icons[mea][gya.ICON_TOGGLE_STATE] = false; mea++; return bzb;}function tya(Gwb){ var i; for(i=0; i<g_icons.length; i++) { if(g_icons[i][SpeechStream.EnumIconParameter.ICON_NAME] == Gwb) { return i; } } return -1;}function vya(i){ var nya = SpeechStream.EnumIconParameter; var enb = g_icons[i][nya.ICON_NAME]; var hnb = g_icons[i][nya.ICON_ALT_TEXT]; var Cgb = g_icons[i][nya.ICON_OFFSET]; var rya = g_icons[i][nya.ICON_IS_TOGGLE]; var sya = false; if(rya) { if(enb =="hover"+""&& typeof(eba_initial_speech_on) =="boolean"&& eba_initial_speech_on) { g_icons[i][nya.ICON_TOGGLE_STATE] = true; sya = true; } } var MKb = 33; if(enb.equalsTH("submit"+"")) { MKb = 53; } Afa += MKb; var xya = Cza(enb,"flat"+"", hnb, MKb, Cgb, true, sya); if(bfa && (gfa < 6 || !dfa)) { tDb(xya,"touchstart", function() { $rw_getTouchSelection(); }); } tDb(xya,"mouseover", function() { if(!afa) { if(!g_icons[i][nya.ICON_TOGGLE_STATE]) { xHb(enb, i, rya); } } }); tDb(xya,"mouseout", function() { if(!g_icons[i][nya.ICON_TOGGLE_STATE]) { BIb(enb, i, rya); } }); tDb(xya,"mousedown", function() { if(!afa) { if(!g_icons[i][nya.ICON_TOGGLE_STATE]) { FIb(enb, i, rya); } } wea = enb; }); tDb(xya,"mouseup", function(e) { if(wea.equalsTH(enb)) { if($rw_blockClick(enb)) { return true; } else { SpeechStream.ipadUtils.tinyMceBlurFix(); var hAc; hAc ='$rw_event_'+ enb +'(e, '+ i +');'; eval(hAc); } } if(!afa) { if(!g_icons[i][nya.ICON_TOGGLE_STATE]) { xHb(enb, i, rya); } } }); return xya; }function Cza(Gwb, HBb, Fza, Gza, HIb, bKb, Jza){ var zya = Gza * tya(Gwb); var Aza = 0; if(Jza) { Aza = 66; } var cBb = {}; cBb["ignore"] ="1"; cBb["name"] = Gwb + HBb; cBb["width"] =""+ Gza; cBb["height"] ="32"; cBb["title"] = Fza; cBb["unselectable"] ="on"; if(bKb) { cBb["style"] ="left:"+ zya +"px; background-position: -"+ HIb +"px -"+ Aza +"px;"; } else { cBb["style"] ="left:"+ zya +"px; background-position: -"+ HIb +"px -"+ Aza +"px;"; } var Kza = SSDOM.createObjectFromMap("span", cBb, Gwb, null, false); if(Kfa) { Kza.onselectstart = function() { return false; }; } else { Kza.onmousedown = function() { return false; }; } return Kza;}function Mza(){ Afa += 100; nLeftPosition = 33 * mea; var cBb = {}; cBb["ignore"] ="1"; if(Kfa) { cBb["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;backgroundColor:#f1efe5"; } else { cBb["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;background-color:#f1efe5"; } var Nza = SSDOM.createObjectFromMap("select", cBb, null, null, true); uDb(Nza,"change", function() { $rw_setSpeedValue(parseInt(Nza.value, 10)); }); var Oza; cBb = {}; cBb["ignore"] ="1"; cBb["value"] =""+ SLOW_SPEED; if(Gda == -3 || Gda == SLOW_SPEED) { cBb["selected"] ="1"; } Oza = SSDOM.createObjectFromMap("option", cBb, null, null, true); Oza.innerHTML ="Slow"; var Pza; cBb = {}; cBb["ignore"] ="1"; cBb["value"] =""+ MEDIUM_SPEED; if(Gda == -2 || Gda == MEDIUM_SPEED) { cBb["selected"] ="1"; } Pza = SSDOM.createObjectFromMap("option", cBb, null, null, true); Pza.innerHTML ="Medium"; var Qza; cBb = {}; cBb["ignore"] ="1"; cBb["value"] =""+ FAST_SPEED; if(Gda == -1 || Gda == FAST_SPEED) { cBb["selected"] ="1"; } Qza = SSDOM.createObjectFromMap("option", cBb, null, null, true); Qza.innerHTML ="Fast"; Nza.appendChild(Oza); Nza.appendChild(Pza); Nza.appendChild(Qza); return Nza;}function Tza(Gwb, HBb){ var Rza = null; if(HBb != null) { Rza = document.images[Gwb + HBb]; if(Rza != null) { var Yza = Rza.style; Yza.visibility ="\x76isible"; Yza.display ="\x69n\x6cine"; Yza.width ="\x326\x70x"; } if(HBb !="\x6fff") { Rza = document.images[Gwb +"off"]; if(Rza != null) { var Yza = Rza.style; Yza.visibility ="\x68idden"; Yza.display ="n\x6fn\x65"; Yza.width ="\x30px"; } } else if(HBb !="\x6fn") { Rza = document.images[Gwb +"on"]; if(Rza != null) { var Yza = Rza.style; Yza.visibility ="\x68idden"; Yza.display ="n\x6fne"; Yza.width ="\x30px"; } } }}function Zza(Gwb, HBb, tfb, dza){ if(HBb != null) { var Yza = document.getElementById(Gwb); if(Gwb =="s\x75bmit") { Yza.width ="\x353px"; } else { Yza.width ="\x333px"; } } if(HBb =="\x66\x6c\x61t") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px 0px;"); } if(HBb =="hover") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px -33px;"); } if(HBb =="toggle") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px -66px;"); } if(HBb =="mask") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px -99px;"); } if(dza) { if(HBb =="toggleOn") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px -66px;"); } if(HBb =="mask") { SSDOM.setStyle(Yza,"backgroundPosition: -"+ tfb +"px -99px;"); } }}SpeechStream.tinymceipadfix ="thtinymceipadbugworkaround";SpeechStream.tinymceipadfocusbugworkaround = function(){ SpeechStream.ipadUtils.tinyMceBlurFix();};function fza(Gwb){ if (document.getElementById(Gwb)) { var icon = g_icons[tya(Gwb)]; icon[SpeechStream.EnumIconParameter.ICON_TOGGLE_STATE] = false; Zza(Gwb,"flat", icon[SpeechStream.EnumIconParameter.ICON_OFFSET], false); }}function $rw_barInit(){ if(!QAb()) { return false; } if( (typeof(eba_custId) =="string"&& eba_custId =="200") || (typeof(eba_cust_id) =="string"&& eba_cust_id =="200") ) { oAb(); } RAb(); ffa = afa && !(Xga.indexOf("android") > -1) && (ica&clicktospeak_icon)!=clicktospeak_icon && (ica&sticky_icon)!=sticky_icon && (kca&clicktospeak_icon)!=clicktospeak_icon && (kca&sticky_icon)!=sticky_icon; Zga.pageData.placeholder = QBb(); Ada = parseInt(xca, 10); if(Ada == 300) { tAb(); } if(Ada >= 500 && Ada < 600) { Bea = true; } if(Ada >= 810 && Ada <820) { oda = true; } if(Ada >= 1220 && Ada <1229) { rda = true; } if(Kfa && !nda) { var JLb = TCb(); if(!JLb) { Cea = true; if(Lda) { } else { cya("The embedded speech toolbar cannot be added due to invalid html tag markup in this page .\n"+"Try using FireFox or Safari to view this page or contact the page author to notify them of this error."); return false; } } } SpeechStream.calculatePaths.initPaths(); var strFileLoc = Zga.paths.strFileLoc; try { if(typeof(SpeechStream.swaConfig) !="undefined"&& SpeechStream.swaConfig != null && typeof(SpeechStream.swaConfig.getBlockedToolbar) =="function") { var Qub = SpeechStream.swaConfig.getBlockedToolbar(); var pvb = ica & Qub; ica -= pvb; } } catch(err){} if(ica == 0) { zea = false; } if(zea) { VBb(); } KBb(); OBb(); eCb(); if((ica & calculator_icon) == calculator_icon) { var lza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpCalc.js"]); Zga.pageData.placeholder.appendChild(lza); } if((ica & record_icon) == record_icon) { $rw_barRecInit(); } if((ica & generatecache_icon) == generatecache_icon) { $rw_barCacheInit(); } if(Iga) { SSDOM.Bnb(Zga.pageData.placeholder,"<link "+"href=\""+ strFileLoc +"rwLanguageSWA.css\" type=\"text/css\" rel=\"stylesheet\" />", false); var mza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"SSLS.js"]); Zga.pageData.placeholder.appendChild(mza); var nza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSwa.js"]); Zga.pageData.placeholder.appendChild(nza); } if((ica & dictionary_icon) == dictionary_icon || (ica & factfinder_icon) == factfinder_icon || (ica & translation_icon) == translation_icon || (ica & mp3_icon) == mp3_icon) { var oza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSearch.js"]); Zga.pageData.placeholder.appendChild(oza); } if((ica & highlightcyan_icon) == highlightcyan_icon || (ica & highlightgreen_icon) == highlightgreen_icon || (ica & highlightmagenta_icon) == highlightmagenta_icon || (ica & highlightyellow_icon) == highlightyellow_icon || (ica & collect_icon) == collect_icon || Yda || (ica & vocabulary_icon) == vocabulary_icon || (ica & strike_icon) == strike_icon) { var pza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSS.js"]); Zga.pageData.placeholder.appendChild(pza); } if((ica & sticky_icon) == sticky_icon || Yda) { var qza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSticky.js"]); Zga.pageData.placeholder.appendChild(qza); } if((ica & pronCreate_icon) == pronCreate_icon || (ica & pronEdit_icon) == pronEdit_icon) { var rza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpPron.js"]); Zga.pageData.placeholder.appendChild(rza); } if((ica & generatecache_icon) == generatecache_icon || (ica & checkcache_icon) == checkcache_icon) { var tza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"jquerycombined.js"]); Zga.pageData.placeholder.appendChild(tza); } if((ica & screenmask_icon) == screenmask_icon) { if(!YEb()) { var tza = SSDOM.createObject("script", ["type","text/javascript","src","//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"]); Zga.pageData.placeholder.appendChild(tza); XEb(); } else { $jq = jQuery; } } if(!Kfa) { var uza = document.getElementsByTagName('input'); for (var i = 0; i < uza.length; i++) { var vza = uza.item(i); var attr = vza.getAttribute("t\x79pe"); if(attr != null && attr =="t\x65xt") { tDb(vza,"\x6do\x75seu\x70", sDb); } } } if(Cga && bfa) { var wza = null; if(typeof(eba_tinymce_id) =="string") { wza = document.getElementById(eba_tinymce_id); } if(wza) { try { var Fob = document.body; var Jkb = Fob.firstChild; while(Jkb != null) { if(JAb(Jkb,Dga)) { Jkb = SSDOM.getNextNodeIgnoreChildren(Jkb, false, Fob); } else { if(Jkb.nodeType == 1) { tDb(Jkb,"touchstart", SpeechStream.tinymceipadfocusbugworkaround); } Jkb = SSDOM.getNextNode(Jkb, false, Fob); } } } catch(err) { thLogE(err.message); } var ta = document.createElement("input"); ta.setAttribute("type","text"); ta.setAttribute("style","opacity:0;color:#ffffff;padding:0px;margin:0px;"+"border-top-color:#FFFFFF;border-right-color:#FFFFFF;border-bottom-color:#FFFFFF;border-left-color:#FFFFFF;"+"border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;"+"height:1px;width:1px"); ta.setAttribute("id", SpeechStream.tinymceipadfix); var kpb = document.getElementById("rwDrag"); if(kpb != null) { kpb.appendChild(ta); } else { wza.parentNode.insertBefore(ta, wza); } OAb(false); } } if(bfa) { var kpb = document.getElementById("rwDrag"); if(kpb != null) { tDb(kpb,'dragstart', UHb); tDb(kpb,'touchend', tHb); tDb(kpb,'touchmove', nHb); tDb(kpb,'touchstart', RHb); } } if(Zga.bubbleData.bBubbleMode) { if(!nda) { var SIb = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpBubble.js"]); Zga.pageData.placeholder.appendChild(SIb); } } if(typeof(eba_initial_speech_on) =="boolean") { if(eba_initial_speech_on) { $g_bMouseSpeech = true; KEb(true); Xab.enableTouchEvents(eba_initial_speech_on); } } var CBc = document.getElementById( eba_tinymce_id ); if(CBc) { var DAb = CBc.getAttribute("ongrammarclick"); if(DAb && DAb.length > 0) { Ega = DAb; } var EAb = CBc.getAttribute("onspellingclick"); if(EAb && EAb.length > 0) { Fga = EAb; } var FAb = CBc.getAttribute("onhomophoneclick"); if(FAb && FAb.length > 0) { Gga = FAb; } var GAb = CBc.getAttribute("onpredictionclick"); if(GAb && GAb.length > 0) { Hga = GAb; } } return true;}function JAb(MAb, Xpb){ if(MAb.id != null && MAb.id.indexOf(Xpb) > -1 ) { return true; } var Jkb = MAb.firstChild; var IAb; while(Jkb != null) { IAb = false; if(Jkb.id != null && Jkb.id.indexOf(Xpb) > -1 ) { return true; } Jkb = SSDOM.getNextNode(Jkb, false, MAb); } return false;}function OAb(PAb){ try { var QWb = document.getElementById(eba_tinymce_id+"_ifr").contentDocument.body; if(QWb && typeof(QWb.ipadTinyMceFocus) =="undefined") { QWb.ipadTinyMceFocus = PAb; uDb(QWb,"click", function(){QWb.ipadTinyMceFocus = true;}); uDb(document.getElementById(eba_tinymce_id+"_ifr").contentWindow,"focus", function(){QWb.ipadTinyMceFocus = true;}); } return QWb; } catch(e){} return null;}function QAb(){ if(typeof(eba_bypass_dom_check) =="boolean"&& eba_bypass_dom_check) { nda = true; } return true; }function RAb(){ ECb(); if(typeof(pktTitleId) !="\x75n\x64\x65f\x69ne\x64"|| xca =="1600") { KCb(); } if(xca == null || xca.length == 0 || yca == null || yca.length == 0 || zca == null || zca.length == 0) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.NONE; SpeechStream.cacheMode.mode = SpeechStream.cacheMode.NONE; } if(oca == null || pca == null || qca == null) { var nzb =".speechstream.net"; var TAb = nzb.length; var UAb = false; var VAb = SpeechStream.cacheMode.getLiveServer(); if(VAb != null && (VAb =="speechus.texthelp.com"|| (VAb.length > TAb && VAb.substring(VAb.length - TAb) == nzb) )) { UAb = true; } if(UAb) { VAb = GCb(VAb, false); if(oca == null) { oca = VAb; } if(pca == null) { pca = VAb; } if(qca == null) { qca = VAb; } } } if(zfa == null) { zfa = pca; } if(typeof(eba_annotate_storage_url) =="string"|| typeof(eba_annotate_highlight_editor_id) =="string"|| typeof(eba_annotate_note_editor_id) =="string"|| typeof(eba_annotate_note_storage_url) =="string"|| typeof(eba_annotate_highlight_storage_url) =="string") { JCb(); } if(Dda == SPANISH && typeof(eba_voice) =="undefined"&& typeof(pktVoice) =="undefined"&& !Eda) { wca ="\x53c\x61nSoft\x20Paulina_\x46ull_22\x6bHz"; } if(typeof(dtdType) !="undefined"&& Zfa) { Hfa = dtdType; if(dtdType =="xtran") { Ifa = true; } else if(dtdType =="loose") { Jfa = true; } } XAb(); if(typeof(eba_use_html5) =="boolean") { if(!eba_use_html5) { kea = true; } } else { kea = !((typeof(mca) =="string"&& mca =="speechus.texthelp.com") || (typeof(nca) =="string"&& nca =="speechus.texthelp.com")); } if(Nga != null) { SSAPIP.apipHandler.init(Nga, Oga); }}function XAb(){ var sAb; try { sAb = window.location.search; } catch(err) { sAb =""; } if(typeof(eba_autocache_generate) =="boolean"&& eba_autocache_generate) { bea = true; } else { var sXb = eAb(sAb,"speechstreamautocache"); bea = (sXb!= null) && (sXb.toLowerCase() =="true"); } if(!bea) { if(typeof(eba_autocache_check) =="boolean"&& eba_autocache_check) { cea = true; } else { var sXb = eAb(sAb,"speechstreamautocachecheck"); cea = (sXb!= null) && (sXb.toLowerCase() =="true"); } } if(typeof(eba_autocache_no_alert) =="boolean"&& eba_autocache_no_alert) { eea = true; } else { var sXb = eAb(sAb,"speechstreamautocachenoalert"); eea = (sXb!= null) && (sXb.toLowerCase() =="true"); } if(bea || cea) { kca = kca | generatecache_icon; kca = kca | checkcache_icon; kea = true; } else { if(typeof(eba_icons) =="number"&& eba_icons > 0) { if( (eba_icons & generatecache_icon) == generatecache_icon || (eba_icons & checkcache_icon) == checkcache_icon ) { kea = true; } } if(typeof(eba_no_display_icons) =="number"&& eba_no_display_icons > 0) { if( (eba_no_display_icons & generatecache_icon) == generatecache_icon || (eba_no_display_icons & checkcache_icon) == checkcache_icon) { kea = true; } } } if(typeof(eba_autocache_callback) =="string") { dea = eba_autocache_callback; } else { var sXb = eAb(sAb,"speechstreamautocachecallback"); if(sXb != null && sXb.length > 0) { sXb = decodeURIComponent(sXb); dea = sXb; } } if(dea && dea.length > 0) { dea = hUb(dea,"\\amp;","&"); } if(typeof(eba_autocache_allspeeds) =="boolean") { aea = eba_autocache_allspeeds; }}function eAb(fAb, gAb){ var sXb = null; var dAb = gAb +"="; dAb = dAb.toLowerCase(); var qzb = dAb.length; var Esb; var Fsb; var kAb; var lAb = fAb.toLowerCase(); Esb = lAb.indexOf(dAb); while(Esb > 0) { kAb = fAb.charAt(Esb - 1); if(kAb =="?"|| kAb =="&") { Fsb = fAb.indexOf("&", Esb + qzb); if(Fsb == -1) { sXb = fAb.substr(Esb + qzb); } else { sXb = fAb.substring(Esb + qzb, Fsb); } break; } else { Esb = lAb.indexOf(dAb, Esb + 1); } } return sXb;}function oAb(){ var mAb = false; var nAb = false; Aea = true; if(Bda == null) { Bda ="s\x63holast\x69c"; Cda ="s\x63holast\x69\x63"; } var pAb = document.getElementsByTagName("meta"); var qzb = pAb.length; var i; for(i=0; i<qzb; i++ ) { var rAb = pAb[i]; if(rAb.name != null) { if(rAb.name.toLowerCase() =="assetid"&& rAb.content != null && rAb.content.length > 0) { zca = rAb.content; nAb = true; } else if(rAb.name.toLowerCase() =="pcode"&& rAb.content != null && rAb.content.length > 0) { yca = rAb.content; mAb = true; } } } var sAb = window.location.search; Esb = sAb.indexOf("id="); while(Esb > 0) { kAb = sAb.charAt(Esb - 1); if(kAb =="?"|| kAb =="&") { Fsb = sAb.indexOf("&", Esb + 3); if(Fsb == -1) { zca = sAb.substr(Esb + 3); } else { zca = sAb.substring(Esb + 3, Fsb); } Esb = -1; } else { Esb = sAb.indexOf("id=", Esb + 1); } } Esb = sAb.indexOf("product_id="); while(Esb > 0) { kAb = sAb.charAt(Esb - 1); if(kAb =="?"|| kAb =="&") { Fsb = sAb.indexOf("&", Esb + 11); if(Fsb == -1) { yca = sAb.substr(Esb + 11); mAb = true; } else { yca = sAb.substring(Esb + 11, Fsb); nAb = true; } Esb = -1; } else { Esb = sAb.indexOf("product_id=", Esb + 1); } } if(!mAb && (yca == null || yca =="")) { yca ="none"; } if(!nAb && (zca == null || zca =="")) { zca ="none"; } }function tAb(){ yca ="index"; zca ="1"; var uAb = document.location; if(uAb != null) { var Ivb = uAb.pathname; if(Ivb.length > 0) { var wAb = Ivb.lastIndexOf("/"); if(wAb > -1) { Ivb = Ivb.substr(wAb + 1); var xAb = Ivb.indexOf(".html"); if(xAb > -1) { Ivb = Ivb.substring(0, xAb); yca = Ivb; } } } }}function BBb(){ var yAb; var zAb; var ABb; this.initPaths = function() { yAb = eya(false) + lca +"/"; zAb = eya(true) + mca +"/"; if(nca != null) { ABb = eya(true) + nca +"/"; } else { ABb = null; } DBb(); var EBb = FBb(); GBb(EBb); }; this.getServerUrl = function() { return yAb; }; this.getSpeechServerUrl = function() { return zAb; }; this.getSpeechServerUrlBackup = function() { return ABb; }; function DBb() { if(uca == null) { uca =""; } while(uca.length > 0 && uca.charAt(0) =='/') { uca = uca.substr(1); } while(uca.length > 0 && uca.charAt(uca.length - 1) =='/') { uca = uca.substr(0, uca.length - 1); } if(uca =="") { uca ="SpeechStream"; } } function FBb() { var EBb; if(eca.length > 0) { if(eca =="latest") { EBb = uca +"/"+ eca; } else { EBb = uca +"/v"+ eca; } } else { EBb = uca; } return EBb; } function GBb(HBb) { if(Qga != null) { if(eca =="latest") { Zga.paths.strFileLoc = Qga + eca +"/"; } else { Zga.paths.strFileLoc = Qga+"v"+ eca +"/"; } } else { if(HBb.length > 0) { Zga.paths.strFileLoc = yAb + HBb +"/"; } else { Zga.paths.strFileLoc = yAb; } Zga.paths.strSwfLoc = vca; } }}SpeechStream.calculatePaths = new BBb();function KBb(){ var IBb; var mBb = nBb(); if(Afa > 0) { if(bca) { if(Zfa) { tfa = true; IBb = SSDOM.createObject("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } else { IBb = SSDOM.createObject("div", ["rwTHComp","1","style","position:relative;visibility:hidden;display:none"],"rwDrag"); } } else { IBb = SSDOM.createObject("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } var ZBb = bBb(); if(!Yca) { ZBb.appendChild(hBb()); } ZBb.appendChild(mBb); IBb.appendChild(ZBb); } else { IBb = SSDOM.createObject("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); var ZBb = SSDOM.createObject("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); IBb.appendChild(ZBb); } Zga.pageData.placeholder.appendChild(IBb);}function OBb(){ var kpb = document.getElementById("WebToSpeech"); if(kpb == null) { kpb = document.createElement("span"); kpb.id ="WebToSpeech"; Zga.pageData.placeholder.appendChild(kpb); } yBb(SpeechStream.calculatePaths.getServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrlBackup() );}function $rw_barDynamicStart(){ hea = true;}function QBb(){ var PBb; if(Pga){ PBb = document.getElementById("thSpeechStreamTBPlaceHolder"); } else { PBb = document.getElementById("speechStreamPlaceholder"); } if(PBb == null) { if(hea) { PBb = document.body; } else { if(bca || (Kfa && Tfa)) { var IAc = document.body; var match; while(IAc != null) { if(IAc != null && IAc.nodeType == 1) { match = IAc; } IAc = IAc.lastChild; } if(match == document.body) { PBb = match; } else { var SBb = match.parentNode; var TBb = document.createElement("span"); if(Pga) { TBb.id ="thSpeechStreamTBPlaceHolder"; } else { TBb.id ="speechStreamPlaceholder"; } SBb.insertBefore(TBb, match); PBb = TBb; } } else { PBb = document.body; } } } return PBb;}function VBb(){ var strFileLoc = Zga.paths.strFileLoc; if(Bea) { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMain500Bar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var WBb = ica; if(jca != -1) { WBb = jca; } var XBb = clicktospeak_icon + play_icon + pause_icon + stop_icon; if( (WBb | XBb) == XBb) { SSDOM.Bnb(Zga.pageData.placeholder,"<link "+"href=\""+ strFileLoc +"rwMainTHSpeechBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var YBb = XBb + search_icons + picturedictionary_icon; if( (WBb | YBb) == YBb) { if(Pga) { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainExtSearchBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainTHSearchBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } } else { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainTHFullBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } } }}function bBb(){ var ZBb; if(Pga) { Afa = Afa + 250; } var Iqb ="width:"+ Afa +"px;"+"visibility:hidden;"; if(Jda || Yca) { Iqb +="display:none;"; } var cBb = {}; cBb["style"] = Iqb; if(!Yca) { ZBb = SSDOM.createObjectFromMap("div", cBb,"rwMainOutline","rwToolbarOutline"); } else { ZBb = SSDOM.createObjectFromMap("div", cBb,"rwMainOutline", null); } return ZBb;}function hBb(){ var strFileLoc = Zga.paths.strFileLoc; var eBb; var gnb; var Mzb; if(eba_logo_url == null) { if(Bea || Xda) { gnb =""; Mzb = null; } else { gnb ="Click here to go to www.texthelp.com"; Mzb ="www.texthelp.com"; } } else if(eba_logo_url =="none") { gnb =""; Mzb = null; } else { gnb ="Click here to go to "+ eba_logo_url; Mzb = eba_logo_url; if(Mzb.substr(0, 7) =="http://") { Mzb = Mzb.substr(7); } else if (Mzb.substr(0, 8) =="https://") { Mzb = Mzb.substr(8); } } eBb = SSDOM.createObject("div", null,"rwDragMe","rwToolbarCaption"); if(Pga) { var iBb = SSDOM.createObject("div", null,"rwToolbarTitleRW", null); iBb.setAttribute('ignore'); var content = document.createTextNode("Read&Write for Google"); iBb.appendChild(content); eBb.appendChild(iBb); } var kBb; if(Mzb == null) { cBb = {}; cBb["border"] ="0"; cBb["ignore"] ="1"; cBb["align"] ="right"; if(Bea) { cBb["src"] = strFileLoc +"rwimgs500/logo500.gif"; cBb["style"] ="margin: 5px; cursor:default;"; } else if(Pga) { cBb["src"] = strFileLoc +"rwimgs/logoEXT.gif"; cBb["style"] ="cursor:default"; } else { cBb["src"] = strFileLoc +"rwimgs/logo.gif"; cBb["style"] ="cursor:default"; } cBb["title"] =""; cBb["alt"] =""; if(Pga) { kBb = SSDOM.createObjectFromMap("img", cBb, null,"rwCaptionIcon"); } else { kBb = SSDOM.createObjectFromMap("img", cBb, null, null); } eBb.appendChild(kBb); } else { cBb = {}; cBb["border"] ="0"; cBb["ignore"] ="1"; cBb["align"] ="right"; if(Bea) { cBb["src"] = strFileLoc +"rwimgs500/logo500.gif"; cBb["style"] ="margin: 5px;"; } else if(Pga) { cBb["src"] = strFileLoc +"rwimgs/logoEXT.gif"; } else { cBb["src"] = strFileLoc +"rwimgs/logo.gif"; } cBb["title"] = gnb; cBb["alt"] = gnb; if(Pga) { kBb = SSDOM.createObjectFromMap("img", cBb, null,"rwCaptionIcon"); } else { kBb = SSDOM.createObjectFromMap("img", cBb, null, null); } var lBb; cBb = {}; cBb["href"] = eya(false) + Mzb; cBb["target"] ="new"; if(!Xfa) { cBb["style"] ="cursor:hand"; } lBb = SSDOM.createObjectFromMap("a", cBb, null, null); lBb.appendChild(kBb); eBb.appendChild(lBb); } return eBb;}function nBb(){ var mBb; if(Yca) { mBb = SSDOM.createObject("div", null, null,"rwToolbarBarNoBorder"); } else { mBb = SSDOM.createObject("div", null, null,"rwToolbarBar"); } var oBb = SSDOM.createObject("div", null,"rwToolbarList", null); $rw_setIconsToLoad(ica); var pBb = false; for (var i = 0; i < mea; i++) { pBb = true; oBb.appendChild(vya(i)); } if((ica & selectSpeed_icon) == selectSpeed_icon) { pBb = true; oBb.appendChild(Mza()); } if(pBb && Afa< 110) { Afa = 110; } else if(!pBb) { Afa = 0; } if(Pga) { var qBb; cBb = {}; cBb["border"] ="0"; cBb["ignore"] ="1"; cBb["align"] ="right"; cBb["src"] = strFileLoc +"rwimgs/texthelp.png"; cBb["title"] ="Click here to go to www.texthelp.com"; cBb["alt"] ="Click here to go to www.texthelp.com"; cBb["style"] ="height:24px;width:82px"; qBb = SSDOM.createObjectFromMap("img", cBb, null, null); var rBb; cBb = {}; cBb["href"] = eya(false) +"www.texthelp.com"; cBb["target"] ="new"; cBb["style"] ="cursor:hand"; rBb = SSDOM.createObjectFromMap("a", cBb, null, null); var sBb; cBb = {}; cBb["id"] ="texthelpLogo"; cBb["ignore"] ="1"; cBb["width"] ="82"; cBb["height"] ="24"; cBb["title"] ="Click here to go to www.texthelp.com"; cBb["unselectable"] ="on"; cBb["style"] ="left:132px;cursor:hand"; sBb = SSDOM.createObjectFromMap("div", cBb, null, null); rBb.appendChild(qBb); var tBb; cBb = {}; cBb["href"] = eya(false) +"rw.texthelp.com/drive/Support/featurepreview"; cBb["title"] ="Click here to learn more"; cBb["target"] ="new"; cBb["style"] ="cursor:hand; padding-top: 4px;"; tBb = SSDOM.createObjectFromMap("a", cBb, null, null); var content = document.createTextNode("Feature Preview. Learn more..."); var vBb; cBb = {}; cBb["id"] ="texthelpPreviewText"; vBb = SSDOM.createObjectFromMap("div", cBb, null, null); tBb.appendChild(content); vBb.appendChild(tBb); sBb.appendChild(vBb); sBb.appendChild(rBb); oBb.appendChild(sBb); } mBb.appendChild(oBb); return mBb;}function yBb(zBb, ACb, BCb){ var wBb = {}; var strSwfLoc = Zga.paths.strSwfLoc; if(Bda != null && Cda != null) { wBb.userName = Bda; wBb.userPassword = Cda; } else { } wBb.lessonServerLoc = zBb; wBb.speechServerLoc = ACb; wBb.speedValue = Gda; if(gca >= 3) { wBb.useServices ="true"; } else if(gca == -1) { if( (mca != null && mca.indexOf(".speechstream.net") > -1) || (nca != null && nca.indexOf(".speechstream.net") > -1) ) { wBb.useServices ="true"; } else { wBb.useServices ="false"; } } else { wBb.useServices ="false"; kea = true; } if(oca != null) { wBb.translateServerLoc = oca; } if(pca != null) { wBb.dictionaryServerLoc = pca; } if(qca != null) { wBb.imagedictionaryServerLoc = qca; } if(rca != null) { wBb.predictionServerLoc = rca; } if(sca != null) { wBb.spellingServerLoc = sca; } if(tca != null) { wBb.homophoneServerLoc = tca; } if(Lda || Mda ) { wBb.cacheMode ="true"; if(BCb != null) { wBb.cacheLiveFallover ="true"; } } if(BCb != null) { wBb.speechServerBackupLoc = BCb; } if(xca != null && yca != null && zca != null) { wBb.custID = xca; wBb.bookID = yca; wBb.pageID = zca; } if(Uda > -1) { wBb.cacheCount = Uda; } if(Vda > -1) { wBb.cacheTimeDelay = Vda; } wBb.locale = Fda; wBb.speechName = wca; if(lda != null && mda != null) { wBb.searchString = lda; wBb.replaceString = mda; } if(strSwfLoc == null || strSwfLoc =="") { strSwfLoc = eya(false) + lca +"/"; } else if(strSwfLoc.charAt(0) =='.') { if(strSwfLoc.charAt(strSwfLoc.length -1) !='/') { strSwfLoc = lca +"/"; } } else { if(strSwfLoc.charAt(0) !='/') { strSwfLoc ="/"+ strSwfLoc; } if(strSwfLoc.charAt(strSwfLoc.length -1) !='/') { strSwfLoc = strSwfLoc +"/"; } strSwfLoc = eya(false) + lca + strSwfLoc; } Zga.paths.strSwfLoc = strSwfLoc; if(Gea) { wBb.SSLSpeech ="true"; wBb.SSLToolbar ="true"; } else { if(Hea) { wBb.SSLSpeech ="true"; } if(Iea) { wBb.SSLToolbar ="true"; } } if(Kfa && (Gea||Hea)) { wBb.IESSL ="true"; } jca = ica; ica = ica | kca; if( (ica & pronCreate_icon) == pronCreate_icon || (ica & pronEdit_icon) == pronEdit_icon || Wda) { wBb.cacheBuster ="true"; } if(Hda > -1) { wBb.volumeValue =""+ Hda; } var jeb = {}; jeb.allowScriptAccess ="always"; jeb.movie = strSwfLoc +'WebToSpeech'+ fca +'.swf'; jeb.quality="high"; jeb.bgcolor="#ffffff"; SpeechStream.m_flashVars = wBb; SpeechStream.setUpControllerFactory(); if(Xab.doesSupportHtml5()) { Xab.getConnector().initialise(wBb, zBb, ACb, BCb); Xab.setSwaConntector(Xab.getConnector()); } else { try { if(Ufa && !Qfa) { g_strAmp="&amp;"; } swfobject.embedSWF(strSwfLoc +'WebToSpeech'+ fca +'.swf',"WebToSpeech","1","1","9.0.0", false, wBb, jeb); } catch(err) {g_strAmp="&amp;"; swfobject.embedSWF(strSwfLoc +'WebToSpeech'+ fca +'.swf',"WebToSpeech","1","1","9.0.0", false, wBb, jeb); } if(Zfa) { var DCb = new SpeechStream.HTML5Controller(); DCb.initialise(wBb, zBb, ACb, BCb); Xab.setSwaConntector(DCb); } }}function ECb(){ if(typeof(eba_use_container) =="boolean") { bca = eba_use_container; } if(typeof(eba_allow_alerts_flag) =="boolean") { cca = eba_allow_alerts_flag; } if(typeof(eba_alerts) =="boolean") { cca = eba_alerts; } if(typeof(eba_no_title) =="boolean") { Yca = eba_no_title; } if(typeof(eba_noTitleFlag) =="boolean") { Yca = eba_noTitleFlag; } if(typeof(eba_hidden_bar) =="boolean") { Jda = eba_hidden_bar; } if(typeof(eba_continuous_reading) =="boolean") { Dea = eba_continuous_reading; } if(typeof(eba_speak_selection_by_sentence) =="boolean") { if(Dea) { Lea = eba_speak_selection_by_sentence; } else { Lea = false; } } else { if(!Dea) { Lea = false; } } if(typeof(eba_dont_extend_selection) =="boolean") { Mea = !eba_dont_extend_selection; } if(typeof(eba_ignore_buttons) =="boolean") { Kda = eba_ignore_buttons; } if(typeof(eba_page_complete_after_selection) =="boolean") { Nea = eba_page_complete_after_selection; } if(typeof(eba_speechCacheGenerateFlag) =="boolean") { Lda = eba_speechCacheGenerateFlag; if(Lda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } if(typeof(eba_cache_building_mode) =="boolean") { Lda = eba_cache_building_mode; if(Lda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } var FCb = false; if(typeof(eba_speechCacheFlag) =="boolean") { Mda = eba_speechCacheFlag; FCb = true; } if(typeof(eba_speech_cache_flag) =="boolean") { Mda = eba_speech_cache_flag; FCb = true; } if(typeof(eba_cache_mode) =="boolean") { Mda = eba_cache_mode; FCb = true; } if(FCb && Mda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_ONLY; } if(typeof(eba_cache_live_generation) =="boolean") { Nda = eba_cache_live_generation; if(Nda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER; } } if(typeof(eba_split_cache_path) =="boolean") { Oda = eba_split_cache_path; } if(typeof(eba_autoCachePage) =="boolean") { Pda = eba_autoCachePage; } if(typeof(eba_voice_from_lang_flag) =="boolean") { Eda = eba_voice_from_lang_flag; } if(typeof(eba_bubble_mode) =="boolean") { Zga.bubbleData.bBubbleMode = eba_bubble_mode; } if(typeof(eba_bubble_freeze_on_shift_flag) =="boolean") { Zga.bubbleData.bBubbleFreezeOnShiftFlag = eba_bubble_freeze_on_shift_flag; } if(typeof(eba_hover_flag) =="boolean") { Uca = !eba_hover_flag; } if(typeof(eba_ssl_flag) =="boolean") { Gea = eba_ssl_flag; Hea = Gea; Iea = Gea; } if(typeof(eba_ssl_speech) =="boolean") { Hea = eba_ssl_speech; } if(typeof(eba_ssl_toolbar) =="boolean") { Iea = eba_ssl_toolbar; } if(typeof(eba_clientside_pronunciation) =="boolean") { if(eba_clientside_pronunciation) { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } else { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } } if(typeof(eba_alter_browser_for_consistency) =="boolean") { Kea = eba_alter_browser_for_consistency; } if(typeof(eba_cache_selection) =="boolean") { Sda = eba_cache_selection; } if(typeof(eba_cache_user_text) =="boolean") { Tda= eba_cache_user_text; } if(typeof(eba_skip_on_error) =="boolean") { if(eba_skip_on_error) { SpeechStream.actionOnError.action = SpeechStream.EnumActionOnError.SKIP; } } if(typeof(eba_cache_buster) =="boolean") { if(eba_cache_buster) { Wda = true; } } if(typeof(eba_handle_radio_checkbox_click) =="boolean") { if(eba_handle_radio_checkbox_click) { Qea = true; } } if(typeof(eba_inline_img) =="boolean") { Fea = eba_inline_img; } if(typeof(eba_ignore_hidden) =="boolean") { Rga = eba_ignore_hidden; } if(typeof(eba_limit_cookies) =="boolean") { sda = eba_limit_cookies; } if(typeof(eba_ignore_frames) =="boolean") { tda = eba_ignore_frames; } if(typeof(eba_math) =="boolean") { pfa = eba_math; } if(typeof(eba_maths) =="boolean") { pfa = eba_maths; } if(typeof(eba_use_vocabulary) =="boolean") { yfa = eba_use_vocabulary; } if(typeof(eba_use_vocab) =="boolean") { yfa = eba_use_vocab; } if(typeof(eba_use_commands) =="boolean") { Bga = eba_use_commands; } if(typeof(eba_tinymce) =="boolean") { Cga = eba_tinymce; } if(typeof(eba_swa) =="boolean") { Iga = eba_swa; } if(typeof(eba_disable_speech) =="boolean") { Jga = eba_disable_speech; } if(typeof(eba_apip) =="boolean") { Kga = eba_apip; } if(typeof(eba_chrome_extension) =="boolean") { Pga = eba_chrome_extension; } if(typeof(eba_icons) =="number") { ica = eba_icons; } if(typeof(eba_no_display_icons) =="number") { kca = eba_no_display_icons; } if(typeof(eba_language) =="number") { Dda = eba_language; if(Dda == 3) { Dda = 2; } else if(Dda > 3 || Dda < 0) { Dda = 0; } if(Eda) { if(eba_language >= 0 && eba_language < faa.length) { wca = faa[eba_language]; } } } if(typeof(eba_speedValue) =="number") { Gda = eba_speedValue; } if(typeof(eba_speed_value) =="number") { Gda = eba_speed_value; } if(typeof(eba_reading_age) =="number") { $rw_setReadingAge(eba_reading_age); } if(typeof(eba_speed_offset) =="number") { Gda += eba_speed_offset; } if(typeof(eba_volume_value) =="number") { Hda = eba_volume_value; } if(typeof(eba_cache_retry) =="number") { Uda = eba_cache_retry; } if(typeof(eba_cache_retry_timeout) =="number") { Vda = eba_cache_retry_timeout; } if(typeof(eba_mp3_limit) =="number") { if(eba_mp3_limit < 1000) { qda = qda * 1024; } else { qda = eba_mp3_limit; } } if(typeof(eba_max_word_count =="number")) { FNb = eba_max_word_count; } if(typeof(eba_date_filter_mode =="number") || typeof(eba_date_filter_mode) =="string") { SpeechStream.dateFilter.setMode(eba_date_filter_mode); } if(typeof(eba_vocabulary_limit) =="number") { Aga = eba_vocabulary_limit; } if(typeof(eba_server_version) =="string") { eca = eba_server_version; } if(typeof(eba_serverVersion) =="string") { eca = eba_serverVersion; } if(typeof(eba_client_version) =="string") { if(eba_client_version !="latest") { fca = eba_client_version; } } if(typeof(eba_clientVersion) =="string") { if(eba_clientVersion !="latest") { fca = eba_clientVersion; } } if(typeof(eba_server) =="string") { lca = eba_server; if(lca.length > 6 && lca.substring(0, 7) =="http://") { lca = lca.substring(7); } else if(lca.length > 7 && lca.substring(0, 8) =="https://") { lca = lca.substring(8); } } if(typeof(eba_speech_server) =="string") { mca = eba_speech_server; } if(typeof(eba_speechServer) =="string") { mca = eba_speechServer; } if(typeof(eba_speech_server_backup) =="string") { nca = eba_speech_server_backup; } if(typeof(eba_speechServerBackup) =="string") { nca = eba_speechServerBackup; } if(typeof(eba_translation_server) =="string") { oca = GCb(eba_translation_server, false); } if(typeof(eba_translate_server) =="string") { oca = GCb(eba_translate_server, false); } if(typeof(eba_dictionary_server) =="string") { pca = GCb(eba_dictionary_server, false); } if(typeof(eba_imagedictionary_server) =="string") { qca = GCb(eba_imagedictionary_server, false); } if(typeof(eba_picturedictionary_server) =="string") { qca = GCb(eba_picturedictionary_server, false); } if(typeof(eba_language_server) =="string") { rca = GCb(eba_language_server, false); sca = GCb(eba_language_server, false); tca = GCb(eba_language_server, false); } if(typeof(eba_spelling_server) =="string") { sca = GCb(eba_spelling_server, false); } if(typeof(eba_homophone_server) =="string") { tca = GCb(eba_homophone_server, false); } if(typeof(eba_prediction_server) =="string") { rca = GCb(eba_prediction_server, false); } if(typeof(eba_vocabulary_server) =="string") { zfa = GCb(eba_vocabulary_server, false); } if(typeof(eba_folder) =="string") { uca = eba_folder; } if(typeof(eba_client_folder) =="string") { vca = eba_client_folder; } if(typeof(eba_clientFolder) =="string") { vca = eba_clientFolder; } if(typeof(eba_voice) =="string") { wca = eba_voice; if(wca =="ScanSoft Daniel_Full_22kHz") { faa[ENG_UK] = wca; } else if(wca =="ScanSoft Tom_Full_22kHz") { faa[ENG_US] = wca; } else if(wca =="ScanSoft Jill_Full_22kHz") { faa[ENG_US] = wca; } } if(typeof(eba_custId) =="string") { eba_cust_id = eba_custId; } if(typeof(eba_cust_id) =="string") { xca = pUb(eba_cust_id.trimTH()); } if(typeof(eba_bookId) =="string") { eba_book_id = eba_bookId; } if(typeof(eba_book_id) =="string") { yca = pUb(eba_book_id.trimTH()); } if(typeof(eba_pageId) =="string") { eba_page_id = eba_pageId; } if(typeof(eba_page_id) =="string") { zca = pUb(eba_page_id.trimTH()); } if(typeof(eba_loginName) =="string") { eba_login_name = eba_loginName; } if(typeof(eba_login_name) =="string") { Bda = eba_login_name; } if(typeof(eba_loginPassword) =="string") { eba_login_password = eba_loginPassword; } if(typeof(eba_login_password) =="string") { Cda = eba_login_password; } else { Cda = Bda; } if(typeof(eba_locale) =="string") { Fda = eba_locale; } if(typeof(eba_speech_range_colors) =="string") { Zga.highlightData.strSpeechRangeColours = eba_speech_range_colors; } if(typeof(eba_speech_range_colours) =="string") { Zga.highlightData.strSpeechRangeColours = eba_speech_range_colours; } if(typeof(eba_speech_range_style) =="string") { Zga.highlightData.strSpeechRangeColours = eba_speech_range_style; } if(typeof(eba_speech_word_colors) =="string") { Zga.highlightData.strSpeechWordColours = eba_speech_word_colors; } if(typeof(eba_speech_word_colours) =="string") { Zga.highlightData.strSpeechWordColours = eba_speech_word_colours; } if(typeof(eba_speech_word_style) =="string") { Zga.highlightData.strSpeechWordColours = eba_speech_word_style; } if(typeof(eba_mp3_id) =="string") { pda = eba_mp3_id; } if(typeof(eba_search_speech_server) =="string") { lda = eba_search_speech_server; } if(typeof(eba_replace_speech_server) =="string") { mda = eba_replace_speech_server; } if(typeof(eba_play_start_point) =="string") { Zca = eba_play_start_point; } if(typeof(eba_speech_stream_server_version) =="string"|| typeof(eba_speech_stream_server_version) =="number") { if(typeof(eba_speech_stream_server_version) =="number") { gca = eba_speech_stream_server_version; } else { try { gca = parseInt(eba_speech_stream_server_version, 10); } catch(e) { } } } else { if(eba_cust_id =="810") { gca = 3; } } if(typeof(eba_symbol_text) =="string") { EUb(eba_symbol_text); } if(typeof(eba_speech_file_type) =="string") { eba_speech_file_type = eba_speech_file_type.toLowerCase(); if(eba_speech_file_type =="mp3"|| eba_speech_file_type =="ogg"|| eba_speech_file_type =="wav") { xfa = eba_speech_file_type; } } if(typeof(eba_voice_language_map) =="string") { kga(eba_voice_language_map); } if(typeof(eba_break_list) =="string") { $rw_setBreakList(eba_break_list); } if(typeof(eba_tinymce_id) =="string") { Dga = eba_tinymce_id; } if(typeof(eba_local_file_path) =="string") { Qga = eba_local_file_path; } if(typeof(eba_apip_data) =="object") { Nga = eba_apip_data; } if(typeof(eba_apip_order =="object")) { Oga = eba_apip_order; }}function GCb(HCb, ICb){ if(HCb.length < 4 || HCb.substring(0, 4) !="http") { HCb = eya(ICb) + HCb; } if(HCb.substr(HCb.length - 1, 1) !="/") { HCb +="/"; } return HCb;}function JCb(){ if(yca == null) { cya("Persistent annotations is enabled but no book id was provided, "+"this feature will not work in this page."); return; } if(zca == null) { cya("Persistent annotations is enabled but no page id was provided, "+"this feature will not work in this page."); return; } if(typeof(eba_use_annotations) =="boolean") { Yda = eba_use_annotations; } else { Yda = true; } if(typeof(eba_annotate_note_editor_id) =="string") { Zda = pUb(eba_annotate_note_editor_id); } if(typeof(eba_annotate_highlight_editor_id) =="string") { ada = pUb(eba_annotate_highlight_editor_id); } if(typeof(eba_annotate_note_reader_id) =="string") { bda = pUb(eba_annotate_note_reader_id); } if(typeof(eba_annotate_highlight_reader_id) =="string") { cda = pUb(eba_annotate_highlight_reader_id); } if(typeof(eba_annotate_persist_notes) =="boolean"&& Zda !="*") { dda = eba_annotate_persist_notes; } if(typeof(eba_annotate_persist_highlights) =="boolean"&& ada !="*") { eda = eba_annotate_persist_highlights; } if(typeof(eba_annotate_highlight_store_text) =="boolean") { fda = eba_annotate_highlight_store_text; } if(typeof(eba_annotate_storage_url) =="string") { gda = eba_annotate_storage_url; if(typeof(eba_server) =="undefined") { lca = gda; } } else { if(Mda) { if(nca != null) { gda = nca; } else { gda = lca; } } else { gda = mca; } } if(typeof(eba_annotate_note_storage_url) =="string") { hda = eba_annotate_note_storage_url; } if(typeof(eba_annotate_highlight_storage_url) =="string") { ida = eba_annotate_highlight_storage_url; } if(typeof(eba_annotate_confirm_delete_note) =='boolean') { kda = eba_annotate_confirm_delete_note; } if(dda) { if((ica & sticky_icon) != sticky_icon ) { if(ica == no_bar) { kca += sticky_icon; } else { ica += sticky_icon; } } }}function KCb(){ Xda = true; if(typeof(eba_use_annotations) =="boolean") { Yda = eba_use_annotations; } else { Yda = true; } if(typeof(pktIsTeacher) =="boolean") { dda = Yda && pktIsTeacher; } if(typeof(pktTitleId) =="string") { yca = pktTitleId; } if(typeof(pktPageId) =="string") { zca = pktPageId; } if(typeof(pktStudentId) =="string") { if(!dda && Yda) { eda = true; } ada = pUb(pktStudentId); bda = pUb(pktStudentId); } if(typeof(pktTeacherId) =="string") { Zda = pUb(pktTeacherId); cda = pUb(pktTeacherId); } if(typeof(pktStorageUrl) =="string") { gda = pktStorageUrl; if(typeof(eba_server) =="undefined") { lca = gda; } } else { gda = lca; } if(typeof(pktSpeechServerUrl) =="string") { mca = pktSpeechServerUrl; } if(typeof(pktVoice) =="string") { wca = pktVoice; } if(typeof(pktCustCode) =='string') { jda = pktCustCode; } if(typeof(pktConfirmOnDelete) =='boolean') { kda = pktConfirmOnDelete; } if(dda) { if((ica & sticky_icon) != sticky_icon ) { if(ica == no_bar) { kca += sticky_icon; } else { ica += sticky_icon; } } }}function TCb(){ if(!tda && top.frames.length > 0) { var i; var qzb = top.frames.length; for (i = 0; i < qzb; i++) { var kCb = top.frames[i]; try { var fCb = kCb.document; var b = VCb(fCb.body); if(!b) { return false; } } catch(e) { } } } if(document.body != null) { return VCb(document.body); } else { return true; }}function VCb(BWb){ if(BWb.firstChild != null) { var MVb = BWb.firstChild; var Fob = MVb.ownerDocument.body; try { while(MVb != null && MVb != Fob) { MVb = SSDOM.getNextNodeIEBugFix(MVb); } } catch(er) { return false; } } return true;}var QCb = 0;var RCb = 500;var SCb = false;function $rw_versionCheck(){ try { jea = Xab.doesSupportSpeech(); $rw_setSpeedValue(Gda); } catch (err) { jea = false; } if(!jea) { QCb++; if(QCb < RCb) { setTimeout($rw_versionCheck, 100); } else { if(!SCb) { if(Lda) { } else { cya("A necessary flash component failed to load.  This page will not work as intended.\n"+"Could not load file from: "+ Zga.paths.strSwfLoc +'WebToSpeech'+ fca +'.swf'); } SCb = true; } } }}var XCb = -1;function $rw_getFlashVersion(){ if(XCb < 0) { try { var flash = Xab.getConnector(); var jab = flash.getVersion(); XCb = parseInt(jab, 10); } catch(err) { XCb = parseInt(fca, 10); thLogE(err); } } return XCb;}function aCb(bCb, dCb){ if(bCb == null || dCb == null) { return false; } if(bCb = dCb) { return true; } if(bCb.frames.length > 0) { var i; for(i=0; i<bCb.frames.length; i++) { if(dCb == bCb.frames[i]) { return true; } else { if(bCb.frames[i].length > 0) { if(aCb(bCb.frames[i], dCb)) { return true; } } } } return false; } else { return false; }}function eCb(){ uDb(window,'scroll', CKb); uDb(window,'resize', CKb); uDb(window,'scroll', EKb); uDb(window,'resize', EKb); if(!hea) { uDb(window,'load', LIb); } uDb(window,'beforeunload', TIb); uDb(document,'click', WHb); tDb(document,'mouseout', vHb); tDb(document,'mouseup', sHb); tDb(document,'mousemove', cHb); tDb(document,'mouseover', XHb); tDb(document,'mousedown', QHb); if(gfa >= 6 && Cga) { } else { tDb(document,'dragstart', SHb); tDb(document,'touchend', sHb); tDb(document,'touchmove', cHb); tDb(document,'touchstart', QHb); } if(Pga) { g_ExtBackgroundScriptCommObj = new SpeechStream.ExtBackgroundScriptComm(); window.addEventListener("message", g_ExtBackgroundScriptCommObj.onMessageFromBG, false); document.addEventListener("webkitvisibilitychange", SpeechStream.handleVisibilityChange, false); }}function $rw_addEventsToFrame(vha){ try { var fCb = vha.document; tDb(fCb,'mouseout', vHb); tDb(fCb,'mouseup', sHb); tDb(fCb,'click', WHb); tDb(fCb,'mousemove', cHb); tDb(fCb,'mouseover', XHb); tDb(fCb,'mousedown', QHb); if(gfa >= 6 && Cga) { } else { tDb(fCb,'dragstart', SHb); tDb(fCb,'touchend', sHb); tDb(fCb,'touchmove', cHb); tDb(fCb,'touchstart', QHb); } } catch(er) { } if(vha.frames.length > 0) { if(!tda) { var i; for(i=0;i<vha.frames.length; i++) { $rw_addEventsToFrame(vha.frames[i]); } } }}function $rw_pageSetup(){ $rw_tagSentencesWithFrames(window); if(!tda && window.frames.length > 0) { var i = 0; try { var qzb = window.frames.length; for (i = 0; i < qzb; i++) { $rw_addEventsToFrame(window.frames[i]); } } catch(e) { } } hKb = document.getElementById('rwDrag').style; hKb.display ="inline"; QCb = 0; $rw_versionCheck(); iCb(); Rga = true;}function iCb(){ if(!jea) { if(QCb < RCb) { setTimeout(iCb, 109); } return; } nfa = false; var hCb = false; if(jea && typeof(XXb) =="function") { if(SpeechStream.pronunciation.fetchData()) { hCb = true; } } if(hCb) { if(xca != null && xca.length > 0 && yca != null && yca.length > 0 && zca != null && zca.length > 0) { ofa = true; UWb.deleteAll(); XXb(); } }}function $rw_tagSentencesWithFrames(vha){ if(typeof(vha) =="undefined") { vha = window; } if(vha.document && vha.document.body) { $rw_tagSentences(vha.document.body); } if(!tda) { if (vha.frames.length > 0) { var i; var qzb = vha.frames.length; for (i = 0; i < qzb; i++) { try { var kCb = vha.frames[i]; if(kCb.frames.length > 0) { $rw_tagSentencesWithFrames(kCb.frames); } else { if(kCb.document && kCb.document.body) { $rw_tagSentences(kCb.document.body); } } } catch(err) { } } } }}var lCb ="[\\x21\\x2E\\x3F\\x3A]";var mCb = /[\n\r\t ]{2,}/g;function $rw_tagSentences(BWb){ if(typeof(BWb) =='undefinded'|| BWb == null) { BWb = document.body; } try { var nCb = false; var oCb = false; if(Ada >= 200 && Ada < 300) { oCb = true; } Aea = oCb; var bNb = BWb; while(bNb != null) { if(bNb.nodeType == 3) { var iQb = bNb.parentNode.tagName.toLowerCase(); if(iQb =="textarea") { bNb = SSDOM.getNextNode(bNb, false, null); continue; } var xsb = bNb.nodeValue; var sCb = xsb.trimSpaceTH(); var VDb = sCb.length > 0; if(oda && iQb =="a") { VDb = false; } if(!VDb) { if(Yda || Mda && (Aea || Xda || Kea) ) { if(nCb) { if(!oda) { bNb.nodeValue =" "; } nCb = false; bNb = SSDOM.getNextNode(bNb, false, null); } else { var IAc = bNb; bNb = SSDOM.getNextNode(bNb, false, null); if(!oda) { IAc.parentNode.removeChild(IAc); } } } else { bNb = SSDOM.getNextNode(bNb, false, null); } } else { if(!oda) { if(Yda || Mda && (Aea || Xda || Kea) ) { if(sCb.length < xsb.length) { var cbb = false; sCb = xsb.trimSpaceStartTH(); if((xsb.length - sCb.length) > 0) { if(nCb) { xsb =" "+ sCb; } else { xsb = sCb; } cbb = true; } sCb = xsb.trimSpaceEndTH(); if((xsb.length - sCb.length) > 1) { xsb = sCb +" "; nCb = false; cbb = true; } if(cbb) { bNb.nodeValue = xsb; } } sCb = xsb.replace(mCb," "); if(sCb.length < xsb.length) { xsb = sCb; cbb = true; } } } var bzb; bzb = xsb.search(lCb); var xCb = (bNb.parentNode.getAttribute("texthelpSkip") != null); var yCb = bNb; if(bzb > -1 && bzb < (xsb.length - 1)) { var zCb = true; while(true) { var Ggb = eDb(xsb, bzb, bNb); if(Ggb) { break; } else { var BDb = xsb.substring(bzb + 1); var Cob = BDb.search(lCb); if(Cob > -1) { bzb = bzb + 1 + Cob; } else { zCb =false; break; } } } if(zCb) { var DDb = xsb.substring(0, bzb + 1); var EDb = xsb.substring(bzb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(DDb); var HDb = document.createTextNode(EDb); var ODb = bNb.parentNode; ODb.insertBefore(HDb, bNb); ODb.insertBefore(span, HDb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = HDb; yCb = NDb; } else { if(bNb.previousSibling != null || bNb.nextSibling != null || xCb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(xsb); var ODb = bNb.parentNode; ODb.insertBefore(span, bNb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = NDb; } yCb = bNb; bNb = SSDOM.getNextNode(bNb, false, null); } } else { if(bNb.previousSibling != null || bNb.nextSibling != null || xCb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var NDb = document.createTextNode(xsb); var ODb = bNb.parentNode; ODb.insertBefore(span, bNb); span.appendChild(NDb); ODb.removeChild(bNb); bNb = NDb; } yCb = bNb; bNb = SSDOM.getNextNode(bNb, false, null); } if(Yda || Mda && (Aea || Xda || Kea) ) { var PDb = yCb.nodeValue; var QDb = yCb.nodeValue.length; if(QDb > 0 && PDb.charCodeAt(QDb - 1) == 32) { nCb = false; } else { nCb = true; } } } } else if(bNb.nodeType == 1) { if(Yda) { if(!SSDOM.isStyleNode(bNb)) { if(SSDOM.isLineBreakNode(bNb)) { nCb = false; } } else if(bNb.tagName.toLowerCase() =="img") { nCb = true; } } if(oCb) { if(bNb.tagName.toLowerCase() =="img") { var NQb = bNb.getAttribute("title"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } } } else if(Fea) { if(bNb.tagName.toLowerCase() =="img") { var NQb = bNb.getAttribute("msg"); if(!(NQb != null && NQb.length > 0)) { NQb = bNb.getAttribute("title"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } else { NQb = bNb.getAttribute("alt"); if(NQb != null && NQb.length > 0) { bNb.setAttribute("msg", NQb); } } } } } var ZDb = bNb.getAttribute(caa); var aDb = bNb.getAttribute(baa); if(bNb.tagName.toLowerCase() =="pre"|| (ZDb != null && ZDb.length > 0) || (aDb != null && aDb.length > 0)) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, null); } else { bNb = SSDOM.getNextNode(bNb, false, null); } } else { bNb = SSDOM.getNextNode(bNb, false, null); } } if(Yda) { bNb = BWb; while(bNb != null) { if(bNb.nodeType==3) { var VDb = bNb.nodeValue.trimTH().length > 0; if(VDb) { var WDb = bNb.parentNode; var XDb = WDb.getAttribute("id"); if(XDb == null || XDb.length == 0) { WDb.id ="rwTHnoteMarker"+ lfa; ++lfa; } } bNb = SSDOM.getNextNode(bNb, false, null); } else if(bNb.nodeType == 1) { if(Djb(bNb)) { var YDb = bNb.getAttribute("id"); if(YDb == null || YDb.length == 0) { bNb.id ="rwTHnoteMarker"+ lfa; ++lfa; } } var ZDb = bNb.getAttribute(caa); var aDb = bNb.getAttribute(baa); if( bNb.tagName.toLowerCase() =="pre"|| (ZDb != null && ZDb.length > 0) || (aDb != null && aDb.length > 0)) { bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, null); } else { bNb = SSDOM.getNextNode(bNb, false, null); } } else { bNb = SSDOM.getNextNode(bNb, false, null); } } } } catch(exception) { Fya("Error in $rw_tagSentences: "+ exception); } zda = true;}function eDb(DOb, ucb, Xsb){ var bDb = true; var qzb = DOb.length; if(qzb > ucb + 1) { var hWb = DOb.charCodeAt(ucb + 1); if(cxa(hWb)) { bDb = false; } if(pfa && hWb == 61) { if(RUb("!=")) { if(Xsb != null && Xsb.nodeValue.charAt(ucb) =='!') { bDb = false; } } } } if(bDb) { if(Xsb != null && Xsb.nodeValue.charAt(ucb) !='.') { return true; } } if(bDb) { if(ucb > 1) { var ryb = DOb.substring(ucb - 2, ucb); if( (ryb.charAt(0) ==' '|| ryb.charAt(0) =='\n'|| ryb.charAt(0) =='\r'|| ryb.charAt(0) =='\t') && ryb.charCodeAt(1) > 63 && ryb.charCodeAt(1) < 91) { bDb = false; } else if(ryb.charAt(0) =='.'&& cxa(ryb.charCodeAt(1))) { bDb = false; } else { if(ryb =="Dr"|| ryb =="Mr"|| ryb =="Ms"|| ryb =="Av"|| ryb =="St"|| ryb =="eg") { bDb = false; } else if(ucb > 2) { var qyb = DOb.substring(ucb - 3, ucb); if(qyb =="Mrs"|| qyb =="etc"|| qyb =="i.e"|| qyb =="P.O"|| qyb =="PhD") { bDb = false; } else if(ucb > 3) { var kDb = DOb.substring(ucb - 4, ucb); if(kDb =="Ph.D") { bDb = false; } } } } } else { try { if(Xsb != null && ucb == 0) { if(rda) { var wNb = null; if(Xsb.previousSibling != null && Xsb.previousSibling.nodeType == 1) { wNb = Xsb.previousSibling; } else if(Xsb.parentNode.previousSibling != null && Xsb.parentNode.previousSibling.nodeType == 1) { wNb = Xsb.parentNode.previousSibling; } else { var bNb = Xsb.parentNode; while(bNb != null && bNb.parentNode.tagName.toLowerCase() =="span") { if(bNb.parentNode.previousSibling != null && bNb.parentNode.previousSibling.nodeType == 1) { wNb = bNb.parentNode.previousSibling; break; } bNb = bNb.parentNode; } } if(wNb != null) { if(wNb.nodeType == 1 && wNb.tagName.toLowerCase() =="span") { NQb = wNb.getAttribute(("class")); sNb = wNb.getAttribute(("className")); var uNb; uNb = (NQb != null && (NQb.toLowerCase() =="x2"|| NQb.toLowerCase() =="x3")) || (sNb != null && (sNb.toLowerCase() =="x2"|| sNb.toLowerCase() =="x3")); if(uNb) { if(wNb.lastChild.nodeType == 1) { while(wNb != null && wNb.lastChild != null && wNb.lastChild.nodeType != 3) { wNb = wNb.lastChild; } } if(wNb != null && wNb.lastChild.nodeType == 3 && wNb != Xsb) { return eDb(wNb.lastChild.nodeValue + DOb, wNb.lastChild.nodeValue.length, null); } else { return true; } } } } } else { var Sub = SSDOM.getPreviousTextNode(Xsb, true, null); if(Sub != null && Sub.nodeType ==3 && Sub != Xsb) { if(!eDb(Sub.nodeValue + DOb, Sub.nodeValue.length, null)) { return false; } else { return true; } } } } } catch(err) { } } } if(bDb && eba_abbr_array != null && typeof(eba_abbr_array) =="object"&& typeof(eba_abbr_array.length) =="number") { var pDb = eba_abbr_array.length; var i; var qDb; for(i=0; i< pDb; i++) { qDb = eba_abbr_array[i]; if(typeof(qDb) =="string") { if(ucb - qDb.length > -1) { if(DOb.substring(ucb - qDb.length, ucb) == qDb) { bDb = false; break; } } } } } return bDb;}var rDb = null;function sDb(event){ rDb = event.currentTarget;}function tDb(NAc, eventType, jqb){ if(ffa) { if(NAc.document && NAc.document.body && NAc.document.body.screen) { return true; } if(NAc.location) { return true; } } return uDb(NAc, eventType, jqb);}function uDb(NAc, eventType, jqb){ if (NAc.addEventListener) { if(Pga) { NAc.addEventListener(eventType, jqb, true); } else { NAc.addEventListener(eventType, jqb, false); } return true; } else if (NAc.attachEvent) { return NAc.attachEvent("on"+ eventType, jqb); } else { return false; }}function vDb(ev){ if(efa) { return {x:(ev.touches[0].pageX - document.body.scrollLeft), y:(ev.touches[0].pageY - document.body.scrollTop)}; } if (ev.pageX) { if(Ifa) { return {x:(ev.pageX - document.documentElement.scrollLeft), y:(ev.pageY - document.documentElement.scrollTop)}; } else if(Jfa) { return {x:(ev.pageX - document.body.parentNode.scrollLeft), y:(ev.pageY - document.body.parentNode.scrollTop)}; } else { return {x:(ev.pageX - document.body.scrollLeft), y:(ev.pageY - document.body.scrollTop)}; } } else { return {x:ev.clientX, y:ev.clientY}; }}function xDb(Job){ var left = 0; var top = 0; if(typeof(jQuery) !="undefined"&& typeof(Job.id) =="string"&& Job.id.indexOf("summary") == 0) { var el = $(Job); if(el != null && el.length && el.length > 0) { var Ipb = el.position(); left = Ipb.left; top = Ipb.top; left -= rw_getScreenOffsetLeft(); top -= rw_getScreenOffsetTop(); return {x:left, y:top}; } } if(Job.nodeType == 3) { Job = Job.parentNode; } while (Job.offsetParent) { left += Job.offsetLeft + (Job.currentStyle ? (parseInt(Job.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Job.offsetTop + (Job.currentStyle ? (parseInt(Job.currentStyle.borderTopWidth, 10)).NaN0():0); Job = Job.offsetParent; } left += Job.offsetLeft + (Job.currentStyle ? (parseInt(Job.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Job.offsetTop + (Job.currentStyle ? (parseInt(Job.currentStyle.borderTopWidth, 10)).NaN0():0); left -= rw_getScreenOffsetLeft(); top -= rw_getScreenOffsetTop(); return {x:left, y:top};}var AEb = false; var BEb = false; var CEb = false; function $rw_isSpeaking(){ return AEb;}var DEb ="funplay play cyan magenta yellow green strike clear collect trans ffinder dictionary picturedictionary vocabulary";var EEb ="cyan magenta yellow green strike clear collect";var FEb ="spell homophone pred";var GEb ="funplay play hover";var HEb = 0;function KEb(PEb){ if(HEb > 0) { clearTimeout(HEb); HEb = 0; } if($g_bMouseSpeech) { PEb = true; } if(BEb == PEb) { return; } try { var IEb = SpeechStream.EnumIconParameter; for (var i = 0; i < mea; i++) { var enb = g_icons[i][IEb.ICON_NAME]; if (DEb.indexOf(enb) > -1) { if (PEb) { Zza(g_icons[i][IEb.ICON_NAME],"mask", g_icons[i][IEb.ICON_OFFSET], false); } else { Zza(g_icons[i][IEb.ICON_NAME],"flat", g_icons[i][IEb.ICON_OFFSET], false); } } } BEb = PEb; } catch(err) { thLogE(err); }}function MEb(PEb){ if(Rea != null) { if(CEb == PEb) { return; } try { if (PEb) { Tza("speaker"+Rea,"on"); } else { Tza("speaker"+Rea,"off"); Rea = null; } CEb = PEb; } catch(err) { thLogE(err); } }}function OEb(PEb){ AEb = PEb;}function SEb(){ try { var Olb = SpeechStream.EnumIconParameter; for (var i = 0; i < mea; i++) { var enb = g_icons[i][Olb.ICON_NAME]; if (EEb.indexOf(enb) > -1) { Zza(g_icons[i][Olb.ICON_NAME],"flat", g_icons[i][Olb.ICON_OFFSET], false); } } for (var i = 0; i < nea; i++) { var enb = lea[i][Olb.ICON_NAME]; if (FEb.indexOf(enb) > -1) { Zza(g_icons[i][Olb.ICON_NAME],"mask", g_icons[i][Olb.ICON_OFFSET], true); } } } catch(err) { thLogE(err); }}function VEb(Gwb){ return document.getElementById(Gwb);}function $speechFinishedInFlash(){ KEb(false); MEb(false); OEb(false);}Number.prototype.NaN0 = function(){ return isNaN(this)?0:this;};function XEb(){ if (!YEb()) { setTimeout(XEb, 250); } else { $jq = jQuery.noConflict(true); }}function YEb(){ var UEb = typeof(jQuery) !=="undefined"; if(UEb) { var ZEb = jQuery().jquery.split("."); return parseInt(ZEb[0]) >=1 && parseInt(ZEb[1]) >= 8; } return false;}SpeechStream.Highlighter = function(){ var self = this; this.dom = null; if(typeof(SSDOM) !="undefined") { self.dom = SSDOM; } this.setDom = function(p_dom) { self.dom = p_dom; }; this.Cnb = null; if(typeof(Zga) !="undefined") { self.Cnb = Zga; } this.setData = function(p_dat) { self.Cnb = p_dat; }; var aEb ="span"; var bEb ="thhom"; this.getTagToUse = function() { return Zga.pageData.strHighlightTag; }; this.setTagToUse = function(p_strTagToUse) { Zga.pageData.strHighlightTag = p_strTagToUse; aEb = p_strTagToUse; }; this.getHomClass = function() { return bEb; }; this.setHomClass = function(p_strClassToUse) { bEb = p_strClassToUse; }; };SpeechStream.highlighter = new SpeechStream.Highlighter();var cEb = SpeechStream.highlighter;function $rw_setSpeechRangeStyle(FHb){ cEb.Cnb.highlightData.strSpeechRangeColours = FHb;}function $rw_setSpeechWordStyle(FHb){ cEb.Cnb.highlightData.strSpeechWordColours = FHb;}function $rw_getSpeechRangeStyle(){ return cEb.Cnb.highlightData.strSpeechRangeColours;}function $rw_getSpeechWordStyle(){ return cEb.Cnb.highlightData.strSpeechWordColours;}var $rw_setSpeechRangeColours = $rw_setSpeechRangeStyle;var $rw_setSpeechWordColours = $rw_setSpeechWordStyle;var $rw_getSpeechRangeColours = $rw_getSpeechRangeStyle;var $rw_getSpeechWordColours = $rw_getSpeechWordStyle;function rw_setHighlight(XMb, IGb, eSb, JGb, Reb){ var SFb = XMb; var TFb = eSb; try { var result = null; if (eSb == XMb) { result = rw_setNodeBackground(XMb, IGb, JGb,"ss", Reb); SFb = result.node; TFb = result.node; } else { if (IGb > 0) { result = rw_setNodeBackground(XMb, IGb, XMb.nodeValue.length,"ss", Reb); } else { result = rw_setNodeBackground(XMb, -1, -1,"ss", Reb); } SFb = result.node; var Sub = cEb.dom.getNextTextNodeNoImg(result.node, false, eSb, true); while (Sub != null) { if (Sub == eSb) { result = rw_setNodeBackground(Sub, 0, JGb,"ss", Reb); Sub = result.node; TFb = Sub; break; } else { result = rw_setNodeBackground(Sub, -1, -1,"ss", Reb); Sub = result.node; } TFb = Sub; Sub = cEb.dom.getNextTextNodeNoImg(Sub, false, eSb, true); } } } catch(err){Fya("rw_setHighlight error:"+ err.message); } return {start: SFb, end: TFb};}var pEb = 1;var qEb = 1;var rEb = 1;function tEb(XMb, IGb, eSb, JGb){ var zfb =""+ pEb++; var SFb = XMb; var TFb = eSb; try { var result = null; if (eSb == XMb) { result = rw_setNodeBackground(XMb, IGb, JGb,"spell", zfb); SFb = result.node; TFb = result.node; } else { if (IGb > 0) { result = rw_setNodeBackground(XMb, IGb, XMb.nodeValue.length,"spell", zfb); } else { result = rw_setNodeBackground(XMb, -1, -1,"spell", zfb); } SFb = result.node; var Sub = cEb.dom.getNextTextNodeNoImg(result.node, false, eSb, true); while (Sub != null) { if (Sub == eSb) { result = rw_setNodeBackground(Sub, 0, JGb,"spell", zfb); Sub = result.node; TFb = Sub; break; } else { result = rw_setNodeBackground(Sub, -1, -1,"spell", zfb); Sub = result.node; } TFb = Sub; Sub = cEb.dom.getNextTextNodeNoImg(Sub, false, eSb, true); } } } catch(err){Fya("rw_setHighlight error:"+ err.message); } return {start: SFb, end: TFb};}function DFb(XMb, IGb, eSb, JGb){ var zfb =""+ qEb++; var SFb = XMb; var TFb = eSb; try { var result = null; if (eSb == XMb) { result = rw_setNodeBackground(XMb, IGb, JGb,"hom", zfb); SFb = result.node; TFb = result.node; } else { if (IGb > 0) { result = rw_setNodeBackground(XMb, IGb, XMb.nodeValue.length,"hom", zfb); } else { result = rw_setNodeBackground(XMb, -1, -1,"hom", zfb); } SFb = result.node; var Sub = cEb.dom.getNextTextNodeNoImg(result.node, false, eSb, true); while (Sub != null) { if (Sub == eSb) { result = rw_setNodeBackground(Sub, 0, JGb,"hom", zfb); Sub = result.node; TFb = Sub; break; } else { result = rw_setNodeBackground(Sub, -1, -1,"hom", zfb); Sub = result.node; } TFb = Sub; Sub = cEb.dom.getNextTextNodeNoImg(Sub, false, eSb, true); } } } catch(err){Fya("rw_setHighlight error:"+ err.message); } return {start: SFb, end: TFb};}function NFb(XMb, IGb, eSb, JGb){ var zfb =""+ rEb++; var SFb = XMb; var TFb = eSb; try { var result = null; if (eSb == XMb) { result = rw_setNodeBackground(XMb, IGb, JGb,"grammar", zfb); SFb = result.node; TFb = result.node; } else { if (IGb > 0) { result = rw_setNodeBackground(XMb, IGb, XMb.nodeValue.length,"grammar", zfb); } else { result = rw_setNodeBackground(XMb, -1, -1,"grammar", zfb); } SFb = result.node; var Sub = cEb.dom.getNextTextNodeNoImg(result.node, false, eSb, true); while (Sub != null) { if (Sub == eSb) { result = rw_setNodeBackground(Sub, 0, JGb,"grammar", zfb); Sub = result.node; TFb = Sub; break; } else { result = rw_setNodeBackground(Sub, -1, -1,"grammar", zfb); Sub = result.node; } TFb = Sub; Sub = cEb.dom.getNextTextNodeNoImg(Sub, false, eSb, true); } } } catch(err){Fya("rw_setHighlight error:"+ err.message); } return {start: SFb, end: TFb};}function cFb(rFb){ try { if (rFb == null || !(rFb instanceof Array) || rFb.length == 0) { return; } for (var i = 0; i < rFb.length; i++) { var IAc = rFb[i]; if (eFb(IAc)) { var BHb = IAc.parentNode; if(IAc.nextSibling != null || IAc.previousSibling != null) { var xsb = SSDOM.allTextFromNodeTH(BHb); var fub = BHb.ownerDocument; IAc = fub.createTextNode(xsb); } var xFb = BHb.parentNode; xFb.replaceChild(IAc, BHb); IAc = cEb.dom.mergeTextNodes(IAc); rFb[i] = IAc; } else { var nFb = hFb(IAc); if(nFb != null) { nFb.removeAttribute("rwstate"); nFb.removeAttribute("style"); } } } if(!Zga.controlData.bSpeakingFlag) { rw_removeSpeechHighlight(rFb, false); } } catch(err){Fya("Error in rw_setHighlight: "+ err.message);}}function eFb(Xsb){ if(Xsb.parentNode == null || Xsb.parentNode.parentNode == null) { return false; } var parent = Xsb.parentNode; var attr = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() != SpeechStream.highlighter.getTagToUse() || attr == null || attr =="csp"|| attr =="sp") { return parent.className =="thspell"|| parent.className == SpeechStream.highlighter.getHomClass() || parent.className =="thgrammar"; } return true;}function hFb(Xsb){ if (Xsb.nodeType != 3 || Xsb.parentNode == null || Xsb.parentNode.parentNode == null) { return null; } var AHb = SpeechStream.highlighter.getTagToUse(); var parent = Xsb.parentNode; var attr = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() != AHb || attr == null || attr !="ss") { if(parent.getAttribute("rwthgen") != null) { var kpb = parent; attr ="1"; while(attr != null) { kpb = kpb.parentNode; if(kpb.getAttribute("rwState") =="ss"&& kpb.tagName.toLowerCase() == AHb) { return kpb; } attr = kpb.getAttribute("rwthgen"); } } return null; } return parent;}function oFb(rFb){ try { if (rFb == null || !(rFb instanceof Array) || rFb.length == 0) { return; } for (var i = 0; i < rFb.length; i++) { var IAc = rFb[i]; if(IAc == null) { continue; } if (eFb(IAc)) { var BHb = IAc.parentNode; var xFb = BHb.parentNode; if(IAc.nextSibling != null || IAc.previousSibling != null) { var node = BHb.firstChild; while(node != null) { IAc = node; node = node.nextSibling; xFb.insertBefore(IAc, BHb); } xFb.removeChild(BHb); } else { xFb.replaceChild(IAc, BHb); } } else { var nFb = hFb(IAc); if(nFb != null) { nFb.removeAttribute("rwstate"); nFb.removeAttribute("style"); } } } } catch(err){Fya("Error in rw_setHighlight: "+ err.message);}}function rw_removeSpeechHighlight(rFb, AGb){ try { if(typeof(AGb) =="undefined") { AGb=false; } if (rFb == null || !(rFb instanceof Array) || rFb.length == 0) { return; } for (var i = 0; i < rFb.length; i++) { var IAc = rFb[i]; if (yFb(IAc, AGb)) { var BHb = IAc.parentNode; if(IAc.nextSibling != null || IAc.previousSibling != null) { var xsb = SSDOM.allTextFromNodeTH(BHb); var fub = BHb.ownerDocument; IAc = fub.createTextNode(xsb); } var xFb = BHb.parentNode; xFb.replaceChild(IAc, BHb); IAc = SSDOM.mergeTextNodes(IAc); rFb[i] = IAc; if(yFb(IAc, AGb)) { --i; } } else { var tagName =""; if(IAc.nodeType == 1) { tagName = IAc.tagName.toLowerCase(); } if(tagName=="math") { CHb(IAc, null, null, false); } } } } catch(err) { Fya("rw_removeSpeechHighlight failed error:"+ err.message); }}function yFb(Xsb, AGb){ if (Xsb.nodeType != 3 || Xsb.parentNode == null || Xsb.parentNode.parentNode == null) { return false; } var parent = Xsb.parentNode; var attr = parent.getAttribute("rwstate"); if (parent.tagName.toLowerCase() == SpeechStream.highlighter.getTagToUse() && attr != null) { if((!AGb && attr =="sp") || attr =="csp") { return true; } } return false;}function rw_setSpeechRangeImpl(XMb, IGb, eSb, JGb, KGb){ var result = null; try { if (eSb == XMb) { result = rw_setNodeBackground(XMb, IGb, JGb, KGb,""); return result; } if (IGb > 0) { result = rw_setNodeBackground(XMb, IGb, XMb.nodeValue.length, KGb,""); } else { result = rw_setNodeBackground(XMb, -1, -1, KGb,""); } var Sub = cEb.dom.getNextTextNodeNoImg(result.node, false, eSb, true); while (Sub != null) { if (Sub == eSb) { result = rw_setNodeBackground(Sub, 0, JGb, KGb,""); Sub = result.node; break; } else { result = rw_setNodeBackground(Sub, -1, -1, KGb,""); Sub = result.node; } Sub = cEb.dom.getNextTextNodeNoImg(Sub, false, eSb, true); } } catch(err) { Fya("rw_setSpeechRangeImpl error:"+ err.message); } return result;}function MGb(){ this.node = null; this.offset = 0;}function rw_setNodeBackground(fGb, gGb, hGb, iGb, jGb){ var cRb = new MGb(); cRb.node = fGb; cRb.offset = gGb; if (fGb.nodeType != 3) { if(fGb.nodeType == 1 && cEb.dom.isSpecialCaseHighlightable(fGb)) { if(fGb.tagName.toLowerCase() =="math") { var BHb = fGb.parentNode; cRb = dGb(BHb, fGb, gGb, hGb, iGb,""); } else { var VGb = cEb.dom.getFirstChildTextNode(fGb, false); var WGb = cEb.dom.getLastChildTextNode(fGb, false); if(VGb != null && VGb.nodeType == 3 && WGb != null && WGb.nodeType == 3) { rw_setSpeechRangeImpl(VGb, 0, WGb, WGb.nodeValue.length, iGb); cRb.node = VGb; cRb.offset = 0; } else { } } return cRb; } else { return cRb; } } if(fGb.nodeType == 3) { var xsb = fGb.nodeValue; xsb = xsb.trimTH(); if(xsb.length == 0) { var Nkb = fGb.parentNode; if(Nkb != null) { var nyb = Nkb.tagName.trimTH().toLowerCase(); if(nyb =="tr"|| nyb =="table") { return cRb; } } } } var BHb = fGb.parentNode; var bGb = null; if(BHb.tagName.toLowerCase() == SpeechStream.highlighter.getTagToUse()) { bGb = BHb.getAttribute("rwstate"); } if(iGb =="spell") { if(bGb == null || bGb =="") { cRb = dGb(BHb, fGb, gGb, hGb, iGb, jGb); } else { return cRb; } } else if(iGb =="hom") { if(bGb == null || bGb =="") { cRb = dGb(BHb, fGb, gGb, hGb, iGb, jGb); } else { return cRb; } } else if(iGb =="grammar") { if(bGb == null || bGb =="") { cRb = dGb(BHb, fGb, gGb, hGb, iGb, jGb); } else { return cRb; } } else if(iGb =="ss") { if(bGb == null || bGb =="") { cRb = dGb(BHb, fGb, gGb, hGb, iGb, jGb); } else if (bGb =="ss") { return cRb; } else { return cRb; } } else if (iGb =="sp") { if (bGb =="csp") { Fya("fail in rw_setNodeBackground setting sp to csp"); return cRb; } if (bGb =="sp") { Fya("fail in rw_setNodeBackground setting sp to sp"); return cRb; } cRb = dGb(BHb, fGb, gGb, hGb, iGb,""); } else if (iGb =="csp") { if (bGb =="csp") { Fya("fail parent is csp for csp"); return cRb; } if (bGb =="sp") { cRb = dGb(BHb, fGb, gGb, hGb, iGb,""); } else { } } else { } return cRb;}function dGb(eGb, fGb, gGb, hGb, iGb, jGb){ var cGb = iGb==="sp"|| iGb==="csp";var tagName =""; if(fGb.nodeType == 1) { tagName = fGb.tagName.toLowerCase(); } if((fGb.nodeType == 3 && (hGb == -1 || hGb > gGb)) || tagName =="math") { var kGb; if (iGb =="ss") { if(jGb =="strikethrough") { kGb ="text-decoration:line-through"; } else { kGb ="background:"+ jGb; } } else if(iGb =="sp") { kGb = cEb.Cnb.highlightData.strSpeechRangeColours; } else if(iGb =="csp") { kGb = cEb.Cnb.highlightData.strSpeechWordColours; } else if(iGb =="spell") { kGb =""; } else if(iGb =="hom") { kGb =""; } else if(iGb =="grammar") { kGb =""; } else { kGb ="color:#ff000; background:#00ff00"; } if(tagName =="math") { if(cGb) { CHb(fGb, iGb, kGb, true); } } else { var qzb = fGb.nodeValue.length; if( (qzb == 1 && (fGb.nodeValue =="\n"|| fGb.nodeValue =="\r") ) || (qzb == 2 && fGb.nodeValue =="\r\n") ) { var cRb = new MGb(); cRb.node = fGb; if (gGb < 0) { cRb.offset = 0; } else { cRb.offset = gGb; } return cRb; } var fub = eGb.ownerDocument; var wlb = false; if (gGb == -1 && hGb == -1) { wlb = true; } else if (hGb == -1) { hGb = qzb; } if (gGb == 0 && hGb >= qzb) { wlb = true; } var JHb = fub.createElement(Zga.pageData.strHighlightTag); if(iGb =="spell") { JHb.setAttribute("spellnum", jGb); if(cEb.Cnb.browser.bIE) { JHb.setAttribute("className","thspell"); kGb ="background:url(\""+ eya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wline.gif\")  repeat-x bottom left"; } else { JHb.className ="thspell"; } } if(iGb =="hom") { var rGb = SpeechStream.highlighter.getHomClass(); JHb.setAttribute("homnum", jGb); if(cEb.Cnb.browser.bIE) { JHb.setAttribute("className", rGb); kGb ="background:url(\""+ eya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wlineblue.gif\")  repeat-x bottom left"; } else { JHb.className = rGb; } } if(iGb =="grammar") { var rGb ="thgrammar"; JHb.setAttribute("grammarnum", jGb); if(cEb.Cnb.browser.bIE) { JHb.setAttribute("className","thgrammar"); kGb ="background:url(\""+ eya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wlinegreen.gif\")  repeat-x bottom left"; } else { JHb.className = rGb; } } if (wlb) { if(cEb.Cnb.browser.bIEOld) { JHb.style.setAttribute("cssText", kGb, 0); } else { JHb.setAttribute("style", kGb); } JHb.setAttribute("rwstate", iGb); if(cGb) { JHb.setAttribute("started","1"); } eGb.replaceChild(JHb, fGb); JHb.appendChild(fGb); } else { var xsb = fGb.nodeValue; var tGb; var uGb; var vGb; if (eGb.tagName.toLowerCase() =="span"&& eGb.getAttribute("pron") != null) { tGb =""; uGb = xsb; vGb =""; } else { tGb = xsb.substring(0, gGb); uGb = xsb.substring(gGb, hGb); vGb = xsb.substring(hGb); } if(cEb.Cnb.browser.bIEOld) { JHb.style.setAttribute("cssText", kGb, 0); } else { JHb.setAttribute("style", kGb); } JHb.setAttribute("rwstate", iGb); if(cGb) { JHb.setAttribute("started","1"); } var wGb = null; var Ilb; var yGb = null; if (tGb.length > 0) { wGb = fub.createTextNode(tGb); } Ilb = fub.createTextNode(uGb); if (vGb.length > 0) { yGb = fub.createTextNode(vGb); } JHb.appendChild(Ilb); eGb.replaceChild(JHb, fGb); if (wGb != null) { eGb.insertBefore(wGb, JHb); } if (yGb != null) { if (JHb.nextSibling == null) { eGb.insertBefore(yGb, null); } else { eGb.insertBefore(yGb, JHb.nextSibling); } } fGb = Ilb; } } } var cRb = new MGb(); cRb.node = fGb; if (gGb < 0) { cRb.offset = 0; } else { cRb.offset = gGb; } return cRb;}function CHb(DHb, EHb, FHb, GHb){ if(DHb == null) { return; } var AHb = Zga.pageData.strHighlightTag; if(cEb.Cnb.browser.bIE) { var BHb = DHb.parentNode; if(BHb == null) { return; } if(BHb.tagName.toLowerCase() == AHb && BHb.getAttribute("started") != null) { if(GHb) { BHb.style.setAttribute("cssText", FHb, 0); BHb.setAttribute("rwstate", EHb); } else { var HHb = BHb.parentNode; if(HHb == null) { return; } HHb.replaceChild(DHb, BHb); } } else { if(GHb) { var IHb = document.createElement(AHb); IHb.style.setAttribute("cssText", FHb, 0); IHb.setAttribute("started","1"); IHb.setAttribute("rwstate", EHb); BHb.replaceChild(IHb, DHb); IHb.appendChild(DHb); } } } else { var JHb = DHb.firstChild; while(JHb != null) { if(JHb.nodeType == 1) { if(GHb) { if(JHb.getAttribute("started") != null) { JHb.setAttribute("style", FHb); JHb.setAttribute("rwstate", EHb); } else { if(JHb.getAttribute("style") == null) { JHb.setAttribute("style", FHb); JHb.setAttribute("rwstate", EHb); JHb.setAttribute("started","1"); } } } else { if(JHb.getAttribute("started") != null) { JHb.removeAttribute("style"); JHb.removeAttribute("started"); JHb.removeAttribute("rwstate"); } } } JHb = JHb.nextSibling; } }}function MHb(NHb, OHb){ if (NHb == OHb) { return 0; } var KHb = SSDOM.getRangeObject(NHb.ownerDocument.body); KHb.setStart(NHb, 0); KHb.setEnd(NHb, 0); var LHb = SSDOM.getRangeObject(NHb.ownerDocument.body); LHb.setStart(OHb, 0); LHb.setEnd(OHb, 0); return (KHb.compareBoundaryPoints("START_TO_START", LHb));}function PHb(event){}function QHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } var target = event.target || event.srcElement; if(target.id =='rwDragMe'|| target.id =='rwToolbarTitleRW'|| target.id =='rwDragMeDisplay'|| target.id =='rwDragMeTrans'|| target.id =='rwDragMeFF'|| target.id =='rwDragMeDict'|| target.id =='rwDragMeCollect'|| target.id =='rwDragMeStickyNoteTop'|| target.id =='rwDragMeStickyNoteBot'|| target.id =='rwDragMePronCreate'|| target.id =='rwDragMePronEdit'|| target.id =='rwDragMeCal'|| target.id =='rwDragMePictureDictionary'|| target.id =='rwDragMeRec'|| target.id =='rwDragMePrediction'|| target.id =='rwDragMeSpelling'|| target.id =='rwDragMeHomophone'|| target.id =='rwDragMeGrammar') { rea = target; sea = true; if(Pga) { if(target.id =='rwToolbarTitleRW') { rea.parentElement.parentElement.style.opacity = 0.5; } else { rea.parentElement.style.opacity = 0.5; } } if (rea.setCapture) {rea.setCapture(true); } qea = xDb(rea); if(target.id =='rwDragMeStickyNoteBot') { qea.y -= target.offsetTop; } pea = vDb(event); return false; }}function RHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); QHb(event);}function SHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } var target = event.target || event.srcElement; if (target.tagName =="IMG"&& target.className =="rwIcon") { wHb(event); return false; }}function UHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); SHb(event);}var THb = 0;function WHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } var XJb = (new Date).getTime(); if((XJb - THb) < zga ) { return; } THb = XJb; if (event != null) { if (!sea) { if($g_bMouseSpeech && Uca) { zKb(event); } if(mfa) { dib(event); } } }}function XHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } if (event != null) { if (!sea) { if(Xfa) { if($g_bMouseSpeech && !Uca) { zKb(event); } else if(Zga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.mouseHoverBubblePopup(event); } else if(((ica & calculator_icon) == calculator_icon) && typeof(xmb) =="function"&& xmb()) { if(qHb(event)) { zKb(event, true); } } } } }}var YHb = -1;var ZHb = -1;function cHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } if (event == null) { return true; } if(Kfa) { var aHb = event.clientX; var bHb = event.clientY; if(YHb == aHb && ZHb == bHb) { return; } YHb = aHb; ZHb = bHb; } if(rea == null) { if($g_bMouseSpeech && (Zfa || Kfa) && !Uca) { zKb(event); } else if(Zga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.mouseHoverBubblePopup(event); } else if(((ica & calculator_icon) == calculator_icon) && typeof(xmb) =="function"&& xmb() && (Zfa || Kfa)) { if(qHb(event)) { zKb(event, true); } } sea = false; return true; } var IVb = vDb(event); if(!dfa) { if (IVb.x < 0 || IVb.y < 0 || IVb.x > rw_getDocumentDisplayWidth() || IVb.y > rw_getDocumentDisplayHeight()) { wHb(event); return false; } } var eHb; var fHb; var gHb = false; var hHb = 1.0; if(Kfa && !Ifa && Rfa) { var a1 = document.body.offsetWidth; var a2 = document.documentElement.offsetWidth; hHb = (a1 / a2); if(hHb > 1.05 || hHb < 99.5) { gHb = true; } } if(gHb && !dfa) { var kHb = (hHb * pea.x) - (qea.x); var lHb = (hHb * pea.y) - (qea.y); eHb = (((hHb * IVb.x) - kHb)) / hHb; fHb = (((hHb * IVb.y) - lHb)) / hHb; } else { var kHb = pea.x - (qea.x); var lHb = pea.y - (qea.y); eHb = (IVb.x - kHb); fHb = (IVb.y - lHb); } if(rea == null) { return; } if(rea.id =='rwDragMe'|| rea.id =='rwToolbarTitleRW') { OKb(eHb, fHb); if(!dfa) { if ((eHb + Afa + tea) > rw_getDocumentDisplayWidthAdjusted()) { eHb = rw_getDocumentDisplayWidthAdjusted() - Afa - tea; xea = 1.0; } } if (eHb < tea) { eHb = tea; xea = 0.0; } if(!dfa) { if ((fHb + Bfa + tea) > rw_getDocumentDisplayHeightAdjusted()) { fHb = rw_getDisplayHeightAdjusted() - Bfa - tea; yea = 1.0; } } if (fHb < tea) { fHb = tea; yea = 0.0; } CKb(); wHb(event); } else if(rea.id =='rwDragMeTrans'|| rea.id =='rwDragMeFF'|| rea.id =='rwDragMeDict'|| rea.id =='rwDragMeDisplay'|| rea.id =='rwDragMeCollect'|| rea.id =='rwDragMeStickyNoteTop'|| rea.id =='rwDragMeStickyNoteBot'|| rea.id =='rwDragMePronCreate'|| rea.id =='rwDragMePronEdit'|| rea.id =='rwDragMeCal'|| rea.id =='rwDragMeGencache'|| rea.id =='rwDragMeCheckcache'|| rea.id =='rwDragMePictureDictionary'|| rea.id =='rwDragMeRec'|| rea.id =='rwDragMePrediction'|| rea.id =='rwDragMeSpelling'|| rea.id =='rwDragMeHomophone'|| rea.id =='rwDragMeGrammar') { var mHb; if(rea.id =='rwDragMeDisplay') { mHb = Oba; } else if(rea.id =='rwDragMeTrans') { mHb = Pba; } else if(rea.id =='rwDragMeFF') { mHb = Qba; } else if(rea.id =='rwDragMeDict') { mHb = Rba; } else if(rea.id =='rwDragMeStickyNoteTop') { mHb = Tba; } else if(rea.id =='rwDragMeStickyNoteBot') { mHb = Tba; } else if(rea.id =='rwDragMePronCreate') { mHb = Uba; } else if(rea.id =='rwDragMePronEdit') { mHb = Vba; } else if(rea.id =='rwDragMeCal') { mHb = Wba; } else if(rea.id =='rwDragMeGencache') { mHb = Xba; } else if(rea.id =='rwDragMeCache') { mHb = Yba; } else if(rea.id =='rwDragMePictureDictionary') { mHb = Zba; } else if(rea.id =='rwDragMeRec') { mHb = aba; } else if(rea.id =='rwDragMePrediction') { mHb = bba; } else if(rea.id =='rwDragMeSpelling') { mHb = cba; } else if(rea.id =='rwDragMeHomophone') { mHb = dba; } else if(rea.id =='rwDragMeGrammar') { mHb = eba; } else { mHb = Sba; } QKb(mHb, eHb, fHb); if ((eHb + Efa[mHb] + tea) > rw_getDocumentDisplayWidthAdjusted()) { eHb = rw_getDocumentDisplayWidthAdjusted() - Efa[mHb] - tea; Cfa[mHb] = 1.0; } if (eHb < tea) { eHb = tea; Cfa[mHb] = 0.0; } if(!dfa) { if ((fHb + Ffa[mHb] + tea) > rw_getDocumentDisplayHeightAdjusted()) { fHb = rw_getDocumentDisplayHeightAdjusted() - Ffa[mHb] - tea; Dfa[mHb] = 1.0; } } if (fHb < tea) { fHb = tea; Dfa[mHb] = 0.0; } IKb(mHb); wHb(event); } return false;}function nHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); cHb(event);}function qHb(event){ var target; if(Zfa) { target = event.explicitOriginalTarget; } else if(Kfa) { target = event.srcElement; } else { target = event.target; } if(target != null && target.nodeType == 1) { var oHb = target.ownerDocument.body; if(target != oHb) { var fnb = target.parentNode; if(typeof(fnb.tagName)=="string") { while(fnb != null && fnb != oHb) { var iQb = fnb.tagName.toLowerCase(); if(iQb =="form") { if(fnb.id =="rw_calForm") { return true; } } fnb = fnb.parentNode; } } } } return false;}function sHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } if (!sea) { return true; } if (rea.releaseCapture) {rea.releaseCapture(); } if(Pga) { if(rea.id =='rwToolbarTitleRW') { rea.parentElement.parentElement.style.opacity = 1.0; } else { rea.parentElement.style.opacity = 1.0; } } rea = null; sea = false; if(Pga) { window.postMessage({ type:"1757FROM_PAGE", command:"saveCookiePosition", cookiex:Cfa, cookiey:Dfa, cookieBarx:xea, cookieBary:yea },"*"); } wHb(event); return false;}function tHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); sHb(event);}function vHb(event){ if(!Zga.controlData.bOnloadFinished) { return; } if (sea) { if (Zfa) { var IVb = vDb(event); if (IVb.x < 5 || IVb.y < 5 || IVb.x > (rw_getDocumentDisplayWidth() - 5) || IVb.y > (rw_getDocumentDisplayHeight() - 5)) { sHb(event); wHb(event); return; } } cHb(event); wHb(event); } else { if(!Uca) { lKb = null; } }}function wHb(event){ if (event == null) { return; } if (event.cancelBubble) { event.cancelBubble = true; } else if (event.stopPropagation) { event.stopPropagation(); } if (event.returnValue) { event.returnValue = false; } else if (event.preventDefault) { event.preventDefault(true); }}function xHb(Gwb, HIb, IIb){ if(vea > 0) { --vea; return; } if (sea) { return; } if($rw_blockClick(Gwb)) { return; } Zza(g_icons[HIb][SpeechStream.EnumIconParameter.ICON_NAME],"hover", g_icons[HIb][SpeechStream.EnumIconParameter.ICON_OFFSET], IIb);}function BIb(Gwb, HIb, IIb){ if(vea > 0) { --vea; return; } if(sea) { return; } if($rw_blockClick(Gwb)) { return; } Zza( g_icons[HIb][SpeechStream.EnumIconParameter.ICON_NAME],"flat", g_icons[HIb][SpeechStream.EnumIconParameter.ICON_OFFSET], IIb);}function FIb(Gwb, HIb, IIb){ if(Pga) { window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader "+ Gwb,'label': window.location.host } },'*'); } if(vea > 0) { --vea; return; } if (sea) { return; } if($rw_blockClick(Gwb)) { return; } Zza( g_icons[HIb][SpeechStream.EnumIconParameter.ICON_NAME],"toggle", g_icons[HIb][SpeechStream.EnumIconParameter.ICON_OFFSET], IIb);}function $rw_blockClick(Gwb){ if (BEb && DEb.indexOf(Gwb) > -1) { return true; } if(FEb.indexOf(Gwb) > -1) { return true; } if(Jga && (Gwb =="play"|| Gwb =="funplay"|| Gwb =="hover")) { return true; } return false;}var JIb ="rw_speechenablingdata";function LIb(){ if(Yda) { if(!vfa || !ufa) { setTimeout(LIb, 50); return; } } if(zea && !(sda && (Lfa || Mfa)) ) { var KIb = Ewa("rwebooks-x"); var MIb = Ewa("rwebooks-y"); if ((KIb != null) && (MIb != null) && KIb !="NaN"&& MIb !="NaN") { xea = parseFloat(KIb); yea = parseFloat(MIb); } } var NIb = false; var qzb = Cfa.length; var PIb; var QIb; if(zea && !(sda && (Lfa || Mfa)) ) { for(var i=0; i<qzb; i++) { PIb = Ewa("rwebooks-div"+ i +"x"); if(PIb != null) { Cfa[i] = parseFloat(PIb); } QIb = Ewa("rwebooks-div"+ i +"y"); if(QIb != null) { Dfa[i] = parseFloat(QIb); } if(i == Tba) { if(PIb == null && QIb == null) { NIb = true; } } } } else { NIb= true; } if(NIb) { Cfa[Tba] = 0.45; if(afa) { Dfa[Tba] = 0.0; } else { Dfa[Tba] = 0.35; } } CKb(); EKb(); $rw_pageSetup(); if(Yda) { if(ada !="*"&& typeof(agb) !="undefined") { agb(); } else { if(Zda !="*"&& typeof(fkb) !="undefined") { fkb(); } } } if(Kfa) { var RIb = document.createTextNode(" "); document.body.appendChild(RIb); } if(Lda && Pda) { $rw_cachePage(null, null); } if(Zga.bubbleData.bBubbleMode) { if(nda) { var SIb = SSDOM.createObject("script", ["type","text/javascript","src", Zga.paths.strFileLoc +"texthelpBubble.js"]); Zga.pageData.placeholder.appendChild(SIb); } if(Zga.bubbleData.bBubbleModeStartDisabled) { Zga.bubbleData.bBubbleMode = false; } } if(bea) { setTimeout ($rw_event_generate_cache, 1000); } if(cea) { setTimeout ($rw_event_check_cache, 1000); } Zga.controlData.bOnloadFinished = true; if(typeof($rw_toolbarLoadedCallback) =="function") { $rw_toolbarLoadedCallback(); }}function TIb(){ if(typeof(zjb) !='undefined'&& Yda && typeof(aib) !='undefined'&& aib > -1) { Tjb(aib); } if(zea && !(sda && (Lfa || Mfa)) ) { Kwa("rwebooks-x", xea, 20,"/", window.location.host); Kwa("rwebooks-y", yea, 20,"/", window.location.host); var qzb = Cfa.length; for(var i=0; i<qzb; i++) { Kwa("rwebooks-div"+ i +"x", Cfa[i], 20,"/", window.location.host); Kwa("rwebooks-div"+ i +"y", Dfa[i], 20,"/", window.location.host); } }}var VIb = new Array();function WIb(){ aca = true; rw_pageCompleteCallBack();}function $rw_clearInstructionQueue(){ VIb.length = 0;}function XIb(){ if(VIb != null) { var i; for(i=0; i<VIb.length; i++) { if(typeof(VIb[i])=="string") { if(VIb[i].indexOf("$rw_readNextTarget") > -1) { VIb.length = i; break; } } else if(typeof(VIb[i]) =="function"&& VIb[i] == WIb) { VIb[i] =""; } } }}function cIb(RMb){ var Tbb = RMb.range; var uAc; var Fob; if(Tbb != null) { Fob = Tbb.body; uAc = SSDOM.getCaretPairFromDomPosition(Fob, Tbb.rnb.path, Tbb.rnb.offset, Tbb.snb.path, Tbb.snb.offset); } else if(RMb.body != null && RMb.path != null) { Fob = RMb.body; var bIb = new Sqa(SSDOM.getNodeFromPosition(Fob, RMb.path), 0, true); uAc = new Yqa(bIb, bIb); } else { VIb.push("rw_pageCompleteCallBack()"); return; } Zga.controlData.bIgnoreSkipSection = true; var iIb = null; var gIb = false; if(RMb.jumpId != null) { var hIb = uAc.Zfb.node.ownerDocument.getElementById(RMb.jumpId); if(hIb!=null) { iIb = SSDOM.getSentenceFromPoint(new Sqa(hIb, 0, true)); gIb = true; if(iIb == null) { Zga.controlData.bIgnoreSkipSection = false; return; } } } if(iIb == null) { var iIb = SSDOM.getNextSentence(uAc); if(iIb == null) { VIb.push(WIb); Zga.controlData.bIgnoreSkipSection = false; return; } } while(!Xya(iIb)) { iIb = SSDOM.getNextSentence(iIb); if(iIb == null) { VIb.push(WIb); Zga.controlData.bIgnoreSkipSection = false; return; } } Zga.controlData.bIgnoreSkipSection = false; var jIb = new THHoverTarget(null,null, LPb(iIb)); jIb.prepareTextForSpeech(); var kIb = jIb.getCaretRange(); if(!kIb.equals(iIb)) { iIb = kIb; } if(WMb(uAc.Yfb.node, iIb.Zfb.node) && !gIb) { VIb.push(WIb); return; } aca = false; if(Zga.bubbleData.bBubbleMode) { var IAc = SSDOM.getStartOfParagraph(iIb.Yfb.node); iIb.Yfb.node = IAc; iIb.Zfb.node = SSDOM.getEndOfParagraph(iIb.Zfb.node); iIb.Yfb.offset = 0; if(iIb.Zfb.node.nodeType == 1) { iIb.Zfb.offset = 0; } else { iIb.Zfb.offset = iIb.Zfb.node.length; } } var mIb = new THRange(Fob, RTb(iIb.Yfb.node, iIb.Yfb.offset), RTb(iIb.Zfb.node, iIb.Zfb.offset)); Eea= new THHoverTarget(null, null, mIb); var xsb = Eea.getTextPreparedForSpeech(); if(xsb == null || xsb.length == 0) { VIb.push(WIb); return; } VIb.push("setTimeout($rw_readNextTarget, 50);");}function pIb(qIb){ while(qIb.length > 0) { var oIb = qIb.shift(); try { if(typeof(oIb) =="function") { oIb(); } else if(typeof(oIb) =="string") { eval(oIb); } } catch(err) { thLogE(err.message); } }}function rIb(){ this.xsb =""; this.DMb =""; this.voice = null; this.uAc = null; }function sIb(Xsb){ return UJb(zIb(Xsb));}function vIb(Xsb){ if(Xsb != null && Xsb.nodeType == 1) { var Sub = Xsb.getAttribute("lang"); if(Sub == null) { try { Sub = Xsb.getAttribute("xml:lang"); if(Sub != null) { return UJb(Sub); } } catch(e){} } else { return UJb(Sub); } } return null;}function zIb(Xsb){ var bNb = Xsb; while(bNb != null) { if(bNb.nodeType == 1) { var yIb = bNb.getAttribute("lang"); if(yIb != null && yIb.length > 0) { return yIb; } try { yIb = bNb.getAttribute("xml:lang"); if(yIb != null && yIb.length > 0) { return yIb; } } catch(e){} } bNb = bNb.parentNode; } return null;}function FJb(ZTb, SNb, MJb){ var bNb = ZTb; bNb = SSDOM.getNextNodeAllowMoveToChild(bNb, false, SNb); while(bNb != null) { var IJb = sIb(bNb); if(IJb != MJb) { var Osb = SSDOM.getPreviousTextNodeNoBlank(bNb, false, ZTb); if(Osb == null) { Osb = SSDOM.getPreviousTextNode(bNb, false, ZTb); if(Osb == null) { return null; } } if(Osb.nodeType == 3) { return new Sqa(Osb, Osb.nodeValue.length, false); } else { var Qyb = new Sqa(Osb, 0, true); Qyb.setSpecialCase(true); return Qyb; } } bNb = SSDOM.getNextNode(bNb, false, SNb); } return null;}function LJb(ZTb, SNb, MJb){ var bNb = SNb; bNb = SSDOM.getPreviousNode(bNb, false, ZTb); while(bNb != null) { var IJb = sIb(bNb); if(IJb != MJb) { var Osb = SSDOM.getNextTextNodeNoBlank(bNb, false, SNb); if(Osb != null) { if(Osb.nodeType == 3) { return new Sqa(Osb, 0, false); } else { var Qyb = new Sqa(Osb, 0, false); Qyb.setSpecialCase(true); return Qyb; } } else { return null; } } bNb = SSDOM.getPreviousNode(bNb, false, ZTb); } return null;}function QJb(ZTb, SNb, RJb){ var bNb = ZTb; bNb = SSDOM.getNextNodeAllowMoveToChild(bNb, false, SNb); while(bNb != null) { var OJb = nqa(bNb); if(OJb != RJb) { var Osb = SSDOM.getPreviousTextNodeNoBlank(bNb, false, ZTb); if(Osb == null) { Osb = SSDOM.getPreviousTextNode(bNb, false, ZTb); if(Osb == null) { return null; } } if(Osb.nodeType == 3) { return new Sqa(Osb, Osb.nodeValue.length, false); } else { return new Sqa(Osb, 0, true); } } bNb = SSDOM.getNextNode(bNb, false, SNb); } return null;}function UJb(Chb){ if(Chb != null) { var hAc = Chb.toLowerCase(); var TJb; if(hAc =="en"|| hAc=="en-gb"|| hAc=="en-uk") { TJb = ENGLISH; } else if(hAc =="en-us") { TJb = ENGLISH_US; } else if(hAc =="es-us") { TJb = SPANISH; } else if(hAc =="es"|| hAc=="es-es") { TJb = ESPANOL; } else if(hAc =="fr"|| hAc =="fr-fr") { TJb = FRENCH; } else if(hAc =="fr-ca") { TJb = FRENCH_CA; } else if(hAc =="de") { TJb = GERMAN; } else if(hAc =="it") { TJb = ITALIAN; } else if(hAc =="nl") { TJb = DUTCH; } else if(hAc =="sv") { TJb = SWEDISH; } else if(hAc =="en-au") { TJb = AUSTRALIAN; } else if(hAc =="pt-br") { TJb = PORTUGUESE; } else if(hAc =="pt"|| hAc =="pt-pt") { TJb = PORTUGUES; } else if(hAc =="ru") { TJb = Kca; } else if(hAc =="pl") { TJb = Lca; } else if(hAc =="ar") { TJb = Mca; } else if(hAc =="zh-cn"|| hAc =="zh-tw") { TJb = CHINESE; } else if(hAc =="ko") { TJb = Oca; } else { return null; } return faa[TJb]; } else { return null; }}var WJb="ReadHeader1 ReadSection";function ReadHeader1(){ var XJb = (new Date).getTime(); if((XJb - dga) < zga ) { return; } dga = XJb; var CBc = document.getElementsByTagName("H1")[0]; var Ilb = SSDOM.getNextNodeAllowMoveToChild(CBc, true, CBc); if(Ilb == null) { return; } if(Ilb.nodeType != 3) { Ilb = SSDOM.getNextTextNode(Ilb, true, CBc); } if(Ilb == null) { return; } var Qyb = new Sqa(Ilb, 0, true); var target = VLb(Qyb); if(target != null) { var onb = target.getCaretRange(); if(Xya(onb)) { var start = onb.Yfb.node; if(target.isRange()) { var end = onb.Zfb.node; start = SSDOM.getStartOfParagraph(start); end = SSDOM.getEndOfParagraph(end); var rnb = RTb(start, 0); var snb; if(end.nodeType == 1) { snb = RTb(end, 0); } else { snb = RTb(end, end.nodeValue.length); } target.range = new THRange(document.body, rnb, snb); } var hJb = Dea; $rw_stopSpeech(); Dea = false; rw_speakHoverTarget(target); Dea = hJb; } }}function $rw_getHashCodes() { var iJb =""; var jJb = SSDOM.getFirstSentence(document.body); while(jJb != null) { var hOb = tMb(jJb , new Array()); iJb = iJb + APb() +"/"; var tOb; if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY || SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { tOb = AQb(hOb.xsb); } else { tOb= AQb(hOb.DMb); } iJb = iJb + tOb +"~"; jJb = SSDOM.getNextSentence(jJb); } return iJb;}function $rw_getSoundFileLength(Dsa){ var flash = Xab.getConnector(); if(flash == null) { alert("Connection not available to the server."); } else { flash.getSoundFileLength(Dsa); }}function $rw_soundFileLengthCallback(p_strLength){ alert(p_strLength);}SpeechStream.storedVoice = null;SpeechStream.storedSpeed = null;SpeechStream.storedCustId = null;SpeechStream.storedBookId = null;SpeechStream.storedPageId = null;function pJb(qJb, vJb, wJb, xJb, yJb){ if(SpeechStream.storedVoice == null) { SpeechStream.storedVoice = wca; SpeechStream.storedSpeed = Gda; SpeechStream.storedCustId = xca; SpeechStream.storedBookId = yca; SpeechStream.storedPageId = zca; } if(qJb != undefined) { wca = qJb; } if(vJb != undefined) { $rw_setSpeedValue(vJb); } if(wJb != undefined) { xca = wJb; } if(xJb != undefined) { yca = xJb; } if(yJb != undefined) { zca = yJb; } var flash = Xab.getConnector(); if(flash != null) { flash.setAltSettings(qJb, vJb, wJb, xJb, yJb); }}function zJb(){ if(SpeechStream.storedVoice != null) { wca = SpeechStream.storedVoice; g_speedValue = SpeechStream.storedSpeed; xca = SpeechStream.storedCustId; yca = SpeechStream.storedBookId; zca = SpeechStream.storedPageId; SpeechStream.storedVoice = null; SpeechStream.storedSpeed = null; SpeechStream.storedCustId = null; SpeechStream.storedBookId = null; SpeechStream.storedPageId = null; } var flash = Xab.getConnector(); if(flash != null) { flash.restoreSettings(); }}/*Code designed and developed by Stuart McWilliams.*/var AKb = false;function $rw_ipadFrameScrolling(uUb, p_nStartingOffset){ AKb = true; CKb(); EKb();}function CKb(){ var hKb; hKb = document.getElementById('rwDrag').style; if (hKb == null) { return; } if(!bca) { var x; var y; if(typeof(eba_override_x) =='number'&& typeof(eba_override_y) =='number') { x = eba_override_x; y = eba_override_y; } else { var wd = rw_getDisplayWidth(); var ht = rw_getDisplayHeight(); if(Yca) { xea = 1; yea = 0; tea = 0; } if(dfa) { wd = rw_getDocumentDisplayWidth(); ht = rw_getDocumentDisplayHeight(); x = wd * xea; y = ht * yea; } else { x = wd * xea; y = ht * yea; } if((x + Afa + tea) > rw_getDisplayWidthAdjusted()) { x = rw_getDisplayWidthAdjusted() - Afa - tea; } if (x < tea) { x = tea; } if((y + Bfa + tea) > rw_getDisplayHeightAdjusted()) { y = rw_getDisplayHeightAdjusted() - Bfa - tea; } if (y < tea) { y = tea; } if(!dfa) { x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; } if(Yca) { y = 0; } } if(rw_getDisplayWidthAdjusted() < Afa) { x = rw_getScreenOffsetLeft() + rw_getDisplayWidthAdjusted() - Afa - tea; } if (x < tea) { x = tea; } hKb.left = x +'px'; hKb.top = y +'px'; } if(Jda) { return; } hKb.visibility ='visible'; hKb.display ="inline"; var IAc = document.getElementById("rwMainOutline"); if(IAc != null) { IAc.style.visibility ='visible'; IAc.style.display ="block"; } IAc = document.getElementById("rwMainNoOutline"); if(IAc != null) { IAc.style.visibility ='visible'; IAc.style.display ="block"; }}function EKb(){ IKb(0); IKb(1); IKb(2); IKb(3); IKb(4); IKb(5); IKb(6); IKb(7); IKb(8); IKb(9); IKb(10); IKb(11); IKb(12); IKb(13); IKb(14); IKb(15); IKb(16);}function IKb(cKb){ var FKb; var hKb; var enb; switch(cKb) { case 0: enb ="rwDisplay"; break; case 1: enb ="rwTrans"; break; case 2: enb ="rwFF"; break; case 3: enb ="rwDict"; break; case 4: enb ="rwCollect"; break; case 5: enb ="rwSticky"; break; case 6: enb ="rwPronCreate"; break; case 7: enb ="rwPronEdit"; break; case 8: enb ="rwCal"; break; case 9: enb ="rwGenerateCache"; break; case 10: enb ="rwCheckCache"; break; case 11: enb ="rwPictureDictionary"; break; case 12: enb ="rwRec"; break; case 13: enb ="rwPrediction"; break; case 14: enb ="rwSpelling"; break; case 15: enb ="rwHomophone"; break; case 16: enb ="rwGrammar"; break; default: enb ="rwDisplay"; } FKb = document.getElementById(enb); if(typeof(FKb) =='undefined'|| FKb == null) { return; } hKb = FKb.style; if (hKb == null) { return; } if(Gfa[cKb]) { hKb.display ="block"; if(hKb.visibility =='visible') { var gKb = VEb(enb); if(gKb != null) { var LKb = parseInt(gKb.offsetHeight, 10); if(!isNaN(LKb)) { Ffa[cKb] = LKb - 4; } } } var width = rw_getDocumentDisplayWidth(); var height = rw_getDocumentDisplayHeight(); var x,y; if(dfa) { x = Cfa[cKb]; y = Dfa[cKb] + top.window.pageYOffset; } else { x = width * Cfa[cKb]; y = height * Dfa[cKb]; } var MKb = Efa[cKb]; if(!dfa) { if((x + MKb + tea) > rw_getDisplayWidthAdjusted()) { x = rw_getDisplayWidthAdjusted() - MKb - tea; } } else { if((x - top.window.pageXOffset + MKb + tea) > top.window.innerWidth) { x = top.window.innerWidth - MKb - tea + top.window.pageXOffset; } } if (x < tea) { x = tea; } var NKb = Ffa[cKb]; if(!dfa) { if ((y + NKb + tea) > rw_getDisplayHeightAdjusted()) { y = rw_getDisplayHeightAdjusted() - NKb - tea; } } else { if((y - top.window.pageYOffset + NKb + tea) > top.window.innerHeight) { y = top.window.innerHeight - NKb - tea + top.window.pageYOffset; } } if (y < tea) { y = tea; } if(!dfa) { x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; } if(rw_getDisplayWidthAdjusted() < Afa) { x = rw_getScreenOffsetLeft() + rw_getDisplayWidthAdjusted() - Afa - tea; } if (x < tea) { x = tea; } hKb.left = x +'px'; hKb.top = y +'px'; hKb.visibility ='visible'; } else { hKb.display ="none"; hKb.visibility ='hidden'; }}function OKb(x, y){ if(x<0) { x=0; } if(y<0) { y=0; } xea = x / rw_getDocumentDisplayWidth(); yea = y / rw_getDocumentDisplayHeight(); if(xea > 1) { xea = 1; } if(yea > 1) { yea = 1; }}function QKb(cKb, x, y){ if(dfa) { Cfa[cKb] = x; Dfa[cKb] = y; } else { Cfa[cKb] = x / rw_getDocumentDisplayWidth(); Dfa[cKb] = y / rw_getDocumentDisplayHeight(); }}function $rw_divOver(cKb){ var enb; switch(cKb) { case Oba: enb ="displayImg"; break; case Pba: enb ="transImg"; break; case Qba: enb ="FFImg"; break; case Rba: enb ="dictImg"; break; case Sba: enb ="collectImg"; break; case Uba: enb ="pronCreateImg"; break; case Vba: enb ="pronEditImg"; break; case Wba: enb ="calImg"; break; case Xba: enb ="generateCacheImg"; break; case Yba: enb ="checkCacheImg"; break; case Zba: enb ="pictureDictionaryImg"; break; case aba: enb ="recImg"; break; case bba: enb ="predictImg"; break; case cba: enb ="spellingImg"; break; case dba: enb ="homophoneImg"; break; case eba: enb ="grammarImg"; break; default: enb ="displayImg"; } if (document.images[enb] != null) { document.images[enb].src = Zga.paths.strFileLoc +"rwimgs/thepressedx.bmp"; }}function $rw_divOut(cKb){ var enb; switch(cKb) { case Oba: enb ="displayImg"; break; case Pba: enb ="transImg"; break; case Qba: enb ="FFImg"; break; case Rba: enb ="dictImg"; break; case Sba: enb ="collectImg"; break; case Uba: enb ="pronCreateImg"; break; case Vba: enb ="pronEditImg"; break; case Wba: enb ="calImg"; break; case Xba: enb ="generateCacheImg"; break; case Yba: enb ="checkCacheImg"; break; case Zba: enb ="pictureDictionaryImg"; break; case aba: enb ="recImg"; break; case bba: enb ="predictImg"; break; case cba: enb ="spellingImg"; break; case dba: enb ="homophoneImg"; break; case eba: enb ="grammarImg"; break; default: enb ="displayImg"; } if (document.images[enb] != null) { document.images[enb].src = Zga.paths.strFileLoc +"rwimgs/thex.bmp"; }}function $rw_divPress(cKb){ $rw_event_stop(); aKb(false, cKb);}function VKb(cKb, Awb){ var hKb; var enb; switch(cKb) { case Oba: enb ="rwpopupdisplay"; break; case Pba: enb ="rwpopuptrans"; break; case Qba: enb ="rwpopupff"; break; case Rba: enb ="rwpopupdict"; break; case Sba: enb ="rwpopupcollect"; break; case Uba: enb ="rwpopupproncreate"; break; case Vba: enb ="rwpopuppronedit"; break; case Wba: enb ="rwpopupcal"; break; case Xba: enb ="rwpopupgeneratecache"; break; case Yba: enb ="rwpopupcheckcache"; break; case Zba: enb ="rwpopuppicturedictionary"; break; case aba: enb ="rwpopuprec"; break; case bba: enb ="rwPopupPredict"; break; case cba: enb ="rwPopupSpelling"; break; case dba: enb ="rwpopuphomophone"; break; case eba: enb ="rwpopupgrammar"; break; default: enb ="rwpopupdisplay"; } hKb = document.getElementById(enb); if (hKb == null) { return; } try { hKb.innerHTML = Awb; } catch(err) { SSDOM.Bnb(hKb, Awb, false); }}function aKb(bKb, cKb){ var hKb; Gfa[cKb] = bKb; var enb; switch(cKb) { case Oba: enb ="rwDisplay"; break; case Pba: enb ="rwTrans"; break; case Qba: enb ="rwFF"; break; case Rba: enb ="rwDict"; break; case Sba: enb ="rwCollect"; break; case Tba: enb ="rwSticky"; break; case Uba: enb ="rwPronCreate"; break; case Vba: enb ="rwPronEdit"; break; case Wba: enb ="rwCal"; break; case Xba: enb ="rwGenerateCache"; break; case Yba: enb ="rwCache"; break; case Zba: enb ="rwPictureDictionary"; break; case aba: enb ="rwRec"; break; case bba: enb ="rwPrediction"; break; case cba: enb ="rwSpelling"; break; case dba: enb ="rwHomophone"; break; case eba: enb ="rwGrammar"; break; default: enb ="rwDisplay"; } var gKb = VEb(enb); if(gKb != null) { hKb = gKb.style; if (hKb == null) { return; } if(bKb) { fKb(); hKb.visibility ='visible'; hKb.display ='block'; hKb.zIndex = 501; } else { hKb.visibility ='hidden'; hKb.display ="none"; VKb(cKb,""); } } EKb();}function fKb(){ var enb; enb ="rwDisplay"; var gKb = VEb(enb); var hKb; if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwTrans"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwFF"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwDict"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwCollect"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwSticky"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwCal"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwGenerateCache"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwCheckCache"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwPictureDictionary"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwRec"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwPrediction"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwSpelling"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwHomophone"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; } enb ="rwGrammar"; gKb = VEb(enb); if(gKb != null && gKb.style) { hKb = gKb.style; hKb.zIndex = 500; }}function $rw_getToolbarX(){ return xea;}function $rw_getToolbarY(){ return yea;}function $rw_setToolbarPosition(p_nX, p_nY){ if(typeof(p_nX) =="string") { $rw_dockToolbar(p_nX); } if(typeof(p_nX) !="number"|| typeof(p_nY) !="number") { return; } OKb(p_nX, p_nY); CKb();}function $rw_placeToolbar(p_strSlot){ if(typeof(p_strSlot) !="string") { return; } var Hkb = p_strSlot.toLowerCase().replace(/\s+/g,""); if(Hkb =="topleft"|| Hkb =="lefttop") { xea = 0; yea = 0; } else if(Hkb =="topright"|| Hkb =="righttop") { xea = 1; yea = 0; } else if(Hkb =="bottomleft"|| Hkb =="leftbottom") { xea = 0; yea = 1; } else if(Hkb =="bottomright"|| Hkb =="rightbottom") { xea = 1; yea = 1; } else if(Hkb =="top") { xea = ((rw_getDisplayWidthAdjusted() - Afa) / 2.0) / rw_getDisplayWidthAdjusted(); yea = 0; } else if(Hkb =="right") { xea = 1; yea = 0.5 - (Bfa/rw_getDisplayHeightAdjusted()); } else if(Hkb =="bottom") { xea = ((rw_getDisplayWidthAdjusted() - Afa) / 2.0) / rw_getDisplayWidthAdjusted(); yea = 1; } else if(Hkb =="left") { xea = 0; yea = 0.5 - (Bfa/rw_getDisplayHeightAdjusted()); } CKb();}function $rw_setOverridePosition(p_nX, p_nY){ eba_override_x = p_nX; eba_override_y = p_nY; CKb();}function $rw_getOverrideX(){ return eba_override_x;}function $rw_getOverrideY(){ return eba_override_y;}var jKb ='<bookmark mark="';var kKb ='"/>';var lKb = null; var mKb = null; var nKb = 0;var oKb = 0;var pKb = false;var qKb = false;var rKb = false;if(Xfa){ var sKb = navigator.appVersion; var tKb = sKb.lastIndexOf("/"); sKb = sKb.substring(tKb + 1); try { var uKb = parseFloat(sKb); if(uKb < 300 || (uKb > 400 && uKb < 416)) { pKb = true; } else if(uKb > 500) { rKb = true; } else { qKb = true; } } catch(err) { rKb = true; }}var vKb = 0;var wKb = 0;function zKb(evt, gLb){ try { if(Uca) { var d = new Date(); var Dmb = d.getTime(); if(Dmb < (wKb + 800) || !Zga.controlData.bOnloadFinished) { return; } } var cnb = FLb(evt, Uca); if(cnb != null) { if(cnb.node.nodeType == 1 && cnb.node.tagName.toLowerCase() =="img") { if(cnb.node.className =="mceIcon") { return; } } if(cnb.node.nodeType == 1 && cnb.node.tagName.toLowerCase() =="input"&& cnb.node.type.toLowerCase() =="button"&& Kda && !qHb(evt)) { return; } if(Nga != null) { SSAPIP.apipHandler.checkElement(cnb.node, SSAPIP.apipHandler.Type.DEFAULT); return; } if(Qea) { if(cnb.node.nodeType == 1 && cnb.node.tagName.toLowerCase() =="input") { var xjb = cnb.node.getAttribute("type"); if(xjb != null) { xjb = xjb.toLowerCase(); if((xjb =="radio"|| xjb =="checkbox")) { cnb.node = SSDOM.getNextTextNodeNoBlank(cnb.node, true, null); cnb.offset = 0; } } } } var Rtb = VLb(cnb); if(Rtb != null) { try { if(Rtb.equals(lKb)) { return; } if(Rtb.equals(mKb)) { if((Dmb - vKb) < 1000) { return; } vKb = Dmb; } if(typeof(gLb) =="boolean"&& gLb) { Rtb.useHighlighting = false; eLb(Rtb, true); } else { eLb(Rtb, false); } }catch(err){thLogE(err);} } else { lKb = null; } } } catch(err) { Fya("mousehover error: "+ err); }}function FLb(utb, EVb){ var OLb = null; var ELb = 0; if(Kfa) { OLb = utb.srcElement; if(OLb.nodeType == 1 && OLb.tagName.toLowerCase() =="textarea") { } else { var vsb = rw_getTargetNodeAsCaretIE(utb, EVb); if(vsb != null) { OLb = vsb.node; ELb = vsb.offset; } else { var JLb = false; if(OLb.tagName.toLowerCase() =="li"|| OLb.tagName.toLowerCase() =="a") { JLb = true; } else if(OLb.parentNode != null && OLb.parentNode.tagName != null && OLb.parentNode.tagName.toLowerCase() =="li") { JLb =true; } if(JLb) { var Sub = OLb.firstChild; if(Sub == null) { return null; } if(Sub.nodeType != 3) { Sub = SSDOM.getNextTextNodeNoBlank(Sub, false, OLb); if(Sub == null) { return null; } } OLb = Sub; ELb = 0; } } } } else if(Xfa) { OLb = utb.target; if(OLb != null) { if(rKb) { if(OLb.firstChild != null && OLb.firstChild.nodeType == 3 && OLb.tagName.toLowerCase() !="textarea") { var HVb = OLb.firstChild.nodeValue; if(HVb.trimTH().length > 0) { OLb = OLb.firstChild; } } } else if(qKb) { if(utb.fromElement != null) { if(OLb.nodeType == 1 && OLb.tagName.toLowerCase() !="textarea") { if(utb.fromElement.nodeType == 3) { OLb = utb.fromElement; } } } else { if(OLb.firstChild != null && OLb.firstChild.nodeType == 3 && OLb.tagName.toLowerCase() !="textarea") { var HVb = OLb.firstChild.nodeValue; if(HVb.trimTH().length > 0) { OLb = OLb.firstChild; } } } } } } else { if(utb.explicitOriginalTarget.nodeValue != null) { if(utb.target.tagName.toLowerCase() =="textarea") { OLb = utb.target; } else { OLb = utb.explicitOriginalTarget; if(utb.rangeOffset) { ELb = utb.rangeOffset; } } } else { OLb = utb.target; } } if(OLb == null) { return null; } if(SSDOM.isIgnored(OLb)) { return null; } return new Sqa(OLb, ELb, true);}function VLb(WLb){ var NLb = false; var OLb = WLb.node; var Rtb = null; if(gTb(OLb)) { if(nca == null) { return Rtb; } else { NLb = true; } } if(OLb != null && OLb.parentNode != null && OLb.parentNode.getAttribute) { var iQb; var RLb; var SLb; var TLb; var ULb; if(OLb.nodeType == 1) { iQb = OLb.tagName; if(Kda && iQb.toUpperCase() =="INPUT") { var xjb = OLb.getAttribute("type"); var YLb = OLb.className; if(xjb != null && xjb =="button"&& YLb !="rwcalbutton"&& YLb !="rwcalEqbutton") { return Rtb; } } RLb = OLb.getAttribute("started"); SLb = OLb.getAttribute("ignore"); TLb = OLb.getAttribute("sp"); ULb = OLb.getAttribute("csp"); if(ULb != null || SLb != null || TLb != null || RLb != null) { return Rtb; } } var Kob = OLb.parentNode; RLb = Kob.getAttribute("started"); SLb = Kob.getAttribute("ignore"); TLb = Kob.getAttribute("sp"); ULb = Kob.getAttribute("csp"); if(ULb != null || SLb != null || TLb != null || RLb != null) { Rtb = null; } else { var Yfb; var Zfb; if(OLb.nodeType == 3) { var vsb = WLb; try { if(!Kfa && vsb.node.nodeValue.length > 0) { if(!Dea && Xfa) { vsb.offset=0; Yfb = SSDOM.getSentenceBreakToLeft(vsb); vsb.offset=vsb.node.nodeValue.length - 1; Zfb = SSDOM.getSentenceBreakToRight(vsb); } else { Yfb = SSDOM.getSentenceBreakToLeft(vsb); Zfb = SSDOM.getSentenceBreakToRight(vsb); } } else { Yfb = SSDOM.getSentenceBreakToLeft(vsb); Zfb = SSDOM.getSentenceBreakToRight(vsb); } if(Yfb != null && Zfb != null) { var range = new THRange(SSDOM.getBody(Kob), RTb(Yfb.node, Yfb.offset), RTb(Zfb.node, Zfb.offset)); Rtb = new THHoverTarget(null, null, range); Rtb.blockCache = NLb; } } catch(err){thLogE(err);} } else if(OLb.nodeType == 1) { if(OLb.tagName.toLowerCase() =="img"&& OLb.getAttribute("msg") != null) { Yfb = SSDOM.getSentenceBreakToLeft(WLb); Zfb = SSDOM.getSentenceBreakToRight(WLb); if(Yfb != null && Zfb != null) { var range = new THRange(SSDOM.getBody(Kob), RTb(Yfb.node, Yfb.offset), RTb(Zfb.node, Zfb.offset)); Rtb = new THHoverTarget(null, null, range); } else { Rtb = new THHoverTarget(SSDOM.getBody(OLb), SSDOM.getPositionInDom(OLb), null); } Rtb.blockCache = NLb; } else { Rtb = new THHoverTarget(SSDOM.getBody(OLb), SSDOM.getPositionInDom(OLb), null); Rtb.blockCache = NLb; Rtb.allowContinuous = false; } } else { Rtb = null; } } } return Rtb;}function eLb(vnb, gLb){ if(nKb > 0) { clearTimeout(nKb); nKb = 0; } if(oKb > 0) { clearTimeout(oKb); oKb = 0; } if(Uca && !gLb) { if(!mLb(vnb)) { return; } lKb = vnb; var dLb = AEb; $rw_event_stop_limited(); if(dLb) { nKb = setTimeout(kLb, 500); } else { nKb = setTimeout(kLb, 5); } } else { lKb = vnb; nKb = setTimeout(hLb, 500); }}function hLb(){ if(lKb == null) { return; } if($g_bMouseSpeech || ((ica & calculator_icon) == calculator_icon)) { nKb = 0; if (lKb != null) { if(!mLb(lKb)) { return; } } if(nKb > 0) { clearTimeout(nKb); nKb = 0; } if(oKb > 0) { clearTimeout(oKb); oKb = 0; } if(Pga){ window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader start hover action",'label': window.location.host } },'*'); } $rw_event_stop_limited(); oKb = setTimeout(kLb, 500); }}var iLb = false;function kLb(){ try { iLb = true; nKb = 0; if (lKb != null) { if(mKb!= null) { if(oKb > 0) { clearTimeout(oKb); oKb = 0; } $rw_event_stop_limited(); oKb = setTimeout(kLb, 500); } else { var d = new Date(); wKb = d.getTime(); if(lKb.range != null) { Sga = lKb; } rw_speakHoverTarget(lKb); lKb = null; } } } catch(ignore) { thLogE(ignore); } iLb = false;}function mLb(vnb){ if (vnb != null) { var xsb; if(vnb instanceof String) { xsb = vnb.toString(); } else { if(vnb.isRange()) { if(Xya(vnb.getCaretRange())) { xsb =" "; } else { xsb = null; } } else { xsb = vnb.getTextPreparedForSpeech(); } } if(xsb == null || xsb.length == 0) { return false; } else { return true; } }}var oLb = new Array();var pLb = (new Date).getTime();var qLb = 0;var rLb = 500;function tLb(){ if((new Date).getTime() - pLb < rLb) { return true; } return false;}function uLb(){ if(tLb()) { qLb = setTimeout(uLb, 100); } else { qLb = 0; if(oLb.length > 1) { var fab = oLb[oLb.length - 2]; var target = oLb[oLb.length - 1]; oLb.length = 0; if(fab =="rw_speakHoverTarget") { rw_speakHoverTarget(target); } else if(fab =="rw_speechHighlightOnly") { rw_speechHighlightOnly(target); } else { LMb(target, fab); } } }}function rw_speakHoverTarget(RMb){ try { if(Pga) { window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader speak sentence with hover",'label': window.location.host } },'*'); } if(RMb == null) { return; } if(tLb()) { oLb.push("rw_speakHoverTarget"); oLb.push(RMb); if(qLb == 0) { qLb = setTimeout(uLb, 100); } return; } pLb = (new Date).getTime(); if(mKb != null) { mKb.unhighlightRange(); } if(RMb instanceof String) { mKb = null; var ENb = new SpeechStream.SpeechRequest(); ENb.setString(RMb.toString(), SpeechStream.SpeechRequestBookmarks.NONE); var KBc = ENb.getText(); var flash = Xab.getConnector(); if(flash != null && !Jga) { if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(KBc, !nfa); } else { flash.simpleSpeech(KBc, !nfa); } } } else { if(RMb.range && RMb.range instanceof THRange) { var zMb = jPb(RMb.range); if(zMb != null && FMb(zMb.Yfb.node)) { Sga = null; dga = 0; $rw_speakFirstSentence(); return; } if(zMb != null && gTb(zMb.Yfb.node)) { if(nca == null) { return; } else { RMb.blockCache = true; } } } if(!Mea && Pea != null && Oea != null) { if(RMb.equalsAprox(Oea)) { RMb = Pea; RMb.allowContinuous = false; Oea = null; Pea = null; if(Nea) { VIb.push("rw_pageCompleteCallBack()"); } } } mKb = RMb; var xsb = RMb.getTextPreparedForSpeech(); if(xsb != null && xsb.length > 0) { uqa(RMb); if(!RMb.isValid()) { return; } $rw_setSentenceFromSelection(); if(!RMb.useHighlighting) { var flash = Xab.getConnector(); if(flash != null) { if(RMb.isOverridingGlobal()) { pJb(RMb.voice, null, null, RMb.bookId, RMb.pageId); if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(xsb, !nfa); } else { flash.simpleSpeech(xsb, !nfa); } zJb(); } else { if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(xsb, !nfa); } else { flash.simpleSpeech(xsb, !nfa); } } } } else { RMb.highlightRange(); var DMb = RMb.textToSpeakNoChanges; if(RMb.isOverridingGlobal()) { pJb(RMb.voice, null, null, RMb.bookId, RMb.pageId); Dua(xsb, RMb.blockCache, DMb); zJb(); } else { Dua(xsb, RMb.blockCache, DMb); } } if(Dea && RMb.allowContinuous) { if(RMb.equals(Oea)) { Oea = null; if(Nea) { VIb.push("rw_pageCompleteCallBack()"); } } else { cIb(RMb); } } } } } catch(err) { Fya("rw_speakHoverTarget error:"+err.message); }}function FMb(Xsb){ try { var EMb = SSDOM.getComputedStyle(Xsb); if(EMb != null && (EMb.display =="none"|| EMb.visibility =="hidden")) { return true; } else { var Sub = Xsb; var Fob = Sub.ownerDocument.body; while(Sub != Fob) { Sub = Sub.parentNode; if(SSDOM.getComputedStyle(Sub).display =="none") { return true; } } } } catch(e) {} return false;}function LMb(RMb, PMb){ if(RMb == null || PMb == null) { return; } if(tLb()) { oLb.push(PMb); oLb.push(RMb); if(qLb == 0) { qLb = setTimeout(uLb, 100); } return; } pLb = (new Date).getTime(); if(mKb != null) { mKb.unhighlightRange(); } if(RMb instanceof String) { mKb = null; try { var flash = Xab.getConnector(); if(flash != null) { KEb(true); flash.startSpeechFromFile(RMb, PMb, !nfa); kwa(); } } catch(err) { thLogE(err); } } else { mKb = RMb; var xsb = RMb.getTextPreparedForSpeech(); if(xsb != null && xsb.length > 0) { uqa(RMb); if(!RMb.isValid()) { return; } RMb.highlightRange(); hua(xsb, PMb); } }}function rw_speechHighlightOnly(RMb){ if(RMb == null) { return; } if(tLb()) { oLb.push("rw_speechHighlightOnly"); oLb.push(RMb); if(qLb == 0) { qLb = setTimeout(uLb, 100); } return; } pLb = (new Date).getTime(); if(mKb != null) { mKb.unhighlightRange(); } if(RMb instanceof String) { mKb = null; } else { mKb = RMb; var xsb = RMb.getTextPreparedForSpeech(); if(xsb != null && xsb.length > 0) { uqa(RMb); if(!RMb.isValid()) { return; } RMb.highlightRange(); nua(xsb); } }}function $rw_readNextTarget(){ if(Eea != null) { lKb = Eea; Sga = Eea; Eea = null; kLb(); }}function WMb(XMb, eSb){ if(XMb == null || eSb == null || XMb == eSb) { return false; } var Ggb; var SNb=XMb; var VMb = null; if(Oea != null) { VMb = Oea.getCaretRange().Zfb.node; } while(SNb != null && SNb != eSb) { if(SNb.nodeType == 1) { if(SNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(SNb == VMb && SNb != eSb) { return true; } Ggb = !SSDOM.isInvalidNode(SNb); if (SNb.firstChild != null && Ggb) { SNb = SNb.firstChild; } else if(SNb.nextSibling != null) { SNb = SNb.nextSibling; } else { while (SNb != null && SNb.nextSibling == null) { SNb = SNb.parentNode; if(SNb != null && SNb.nodeType == 1) { if(SNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(eSb == SNb) { return false; } } if (SNb != null && eSb != SNb) { SNb = SNb.nextSibling; } } } return false;}function aMb(Zdb, qqb){ this.range = Zdb; this.word = qqb; }function gMb(BWb, iMb, p_domRefRight, aNb){ try { if(iMb == null || p_domRefRight == null) { return new rIb(); } var uAc = SSDOM.getCaretPairFromDomPosition(BWb, iMb.path, iMb.offset, p_domRefRight.path, p_domRefRight.offset); return tMb(uAc, aNb); } catch(err) { Fya("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return new rIb(); }}function tMb(uMb, aNb){ var lMb = new rIb(); try { if(uMb == null) { return lMb; } var Yfb = uMb.Yfb; var Zfb = uMb.Zfb; if(Yfb == null) { return lMb; } if(Zfb == null) { return lMb; } if(Yfb.node != null) { var Nkb = SSDOM.checkForSpecialParent(Yfb.node); if(Nkb != null) { Yfb.node = Nkb; Yfb.offset = 0; } } if(Zfb.node != null && Zfb.node.nodeType == 3) { var Nkb = SSDOM.checkForSpecialParent(Zfb.node); if(Nkb != null) { if(Zfb.node.nodeType == 3) { Zfb.offset = Zfb.node.nodeValue.length; } Zfb.node = Nkb; } } var qMb = false; if(!Eda) { var Sub = Yfb.node; var Okb; while(Sub != null) { if(Sub.nodeType == 1) { Okb = Sub.getAttribute("id"); if(Okb != null && Okb.length > 0) { if(Okb =="rwpopuptrans") { qMb = true; break; } else { if(Okb.indexOf("rwMeaning")!=0 && Okb.indexOf("rwHeadWord")!= 0) { break; } } } } Sub = Sub.parentNode; } } if(Eda || qMb) { var vMb = sIb(Yfb.node); if(vMb != null) { lMb.voice = vMb; } var wMb = FJb(Yfb.node, Zfb.node, vMb); if(wMb != null) { lMb.uAc = new Yqa(Yfb, wMb); var xsb = lMb.uAc.toString(); if(xsb.length == 0 || !Nya(xsb)) { var Sub = SSDOM.getNextTextNodeNoBlank(Yfb.node, false, Zfb.node); if(Sub != null && Sub != Yfb.node && Sub != uMb.Yfb.node) { var zMb = new Yqa(new Sqa(Sub, 0, true), uMb.Zfb); return tMb(zMb, aNb); } } Zfb = wMb; } } if(Bga) { var ANb = nqa(Yfb.node); var BNb = QJb(Yfb.node, Zfb.node, ANb); if(BNb != null) { lMb.uAc = new Yqa(uMb.Yfb, BNb); Zfb = BNb; } } rw_getTextOverRangeToSpeakImpl(Yfb, Zfb, aNb); var i; var qzb = aNb.length; var wordList = new Array(); for(i=0; i<qzb; i++) { wordList.push(aNb[i].word); } var ENb = new SpeechStream.SpeechRequest(); ENb.setWordList(wordList, SpeechStream.SpeechRequestBookmarks.ALL); lMb.DMb = ENb.getText(); lMb.xsb = ENb.getFinalText(); return lMb; } catch(err) { Fya("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return lMb; }}var FNb = 500;function HNb(INb){ var dNb = INb.length; if(dNb > 1 && INb.substr(dNb - 2, 2) ==". ") { return INb; } else if(dNb > 0 && INb.substr(dNb - 1, 1) ==".") { return INb +" "; } else { var xsb = INb.trimEndTH(); var c = xsb.charCodeAt(xsb.length - 1); if(Yxa(c) || c > 127) { return INb +". "; } else { return INb; } }}function LNb(qqb){ var szb =""; if(qqb.indexOf("<math") > -1) { return qqb; } else { var NNb = (qqb.length > 20); var xvb = 0; var qzb = qqb.length; var i = 0; var Qub; for(i = 0; i < qzb; i++) { Qub = qqb.charCodeAt(i); if(Qub > 127) { szb += qqb.charAt(i); } else { switch(Qub) { case 35: case 40: case 41: case 91: case 93: case 95: case 123: case 124: case 125: szb +=" "; break; case 96: szb +="'"; break; case 38: szb +="&amp;"; break; case 34: szb +="&quot;"; break; case 60: szb +="&lt"; break; case 62: szb +="&gt"; break; default: szb += qqb.charAt(i); } if(NNb) { if((Qub >=48 && Qub <=57) || Qub == 44) { ++xvb; if(xvb > 20) { szb +=' '; xvb = 0; } } else { xvb = 0; } } } } return szb; }}function rw_getTextOverRangeToSpeakImpl(YNb, ZNb, aNb){ try { var ZTb = YNb.node; var SNb = ZNb.node; var Fob = SSDOM.getBody(ZTb); var UNb = YNb.offset; var VNb = ZNb.offset; var WNb =""; var bNb = ZTb; var cNb = null; var dNb = 0; var eNb = true; var xvb = 0; var fVb = RTb(bNb, UNb); var gVb = null; while(bNb != null) { if(xvb > FNb && FNb > 0) { if(Lda) { throw"Full selection will not be spoken due to its length."; } else { cya("Full selection will not be spoken due to its length."); } return; } if(SSDOM.isSpecialCase(bNb)) { if(WNb.length > 0) { if(Nya(WNb)) { aNb[xvb++] = new aMb(new THRange(Fob, fVb, gVb), WNb); } WNb =""; } var nNb = SSDOM.getTextFromNode(bNb); if(nNb.length > 0 && Nya(nNb)) { if(SSDOM.isSpecialCaseHighlightable(bNb)) { var jNb = SSDOM.getFirstChildTextNode(bNb, false); var Osb = SSDOM.getLastChildTextNode(bNb, false); var lNb =""; var mNb =""; if(jNb.nodeType == 1) { lNb = jNb.tagName.toLowerCase(); } if(Osb.nodeType == 1) { mNb = Osb.tagName.toLowerCase(); } if(jNb != null && jNb.nodeType == 3 && Osb != null && Osb.nodeType ==3) { fVb = RTb(jNb, 0); gVb = RTb(Osb, Osb.nodeValue.length); } if(jNb != null && jNb.nodeType == 1 && lNb =="math"&& Osb != null && Osb.nodeType ==1 && mNb =="math") { fVb = RTb(jNb, 0); gVb = RTb(Osb, nNb.length); } aNb[xvb++] = new aMb(new THRange(Fob, fVb, gVb), nNb); } else { fVb = RTb(bNb, -1); aNb[xvb++] = new aMb(new THRange(Fob, fVb, fVb), nNb); } WNb =""; } fVb = null; gVb = null; bNb = SSDOM.getNextNodeIgnoreChildren(bNb, false, SNb); } else if(bNb.nodeType == 1) { if(SpeechStream.pauseHandler.isPauseElement(bNb)) { WNb += SpeechStream.pauseHandler.encodePauseFromNode(bNb); } if(eNb) { cNb = SSDOM.getNextNodeAllowMoveToChild(bNb, true, SNb); } else { cNb = SSDOM.getNextNode(bNb, true, SNb); } if(cNb == null) { if(WNb.length > 0) { if(Nya(WNb)) { aNb[xvb++] = new aMb(new THRange(Fob, fVb, gVb), HNb(WNb)); } WNb =""; fVb = null; gVb = null; } if(eNb) { bNb = SSDOM.getNextNodeAllowMoveToChild(bNb, false, SNb); } else { bNb = SSDOM.getNextNode(bNb, false, SNb); } } else { bNb = cNb; } } else if(bNb.nodeType == 3) { var nNb = SSDOM.getTextFromNode(bNb); if(nNb == null) { nNb =""; } var Nyb = 0; if(SNb == bNb && VNb > -1) { nNb = nNb.substring(0, VNb); } if(ZTb == bNb && UNb > 0) { nNb = nNb.substring(UNb); Nyb = UNb; } if(nNb.length == 0 && WNb.length == 0) { fVb = null; } else { if(fVb == null || WNb.length == 0) { fVb = RTb(bNb, Nyb); } var bzb = COb(nNb); while(bzb > -1) { if(bzb == 0) { if(WNb.length > 0) { if(Nya(WNb)) { if(gVb == null) { gVb = RTb(bNb, Nyb); } var Tbb = new THRange(Fob, fVb, gVb); if(!rda) { WNb = WNb + nNb.substr(0, 1); } else { var NQb = null; var sNb = null; var wNb = bNb.parentNode; if(wNb != null && wNb.nodeType == 1) { NQb = wNb.getAttribute("class"); sNb = wNb.getAttribute("className"); } var uNb = false; uNb = (NQb != null && (NQb.toLowerCase() =="x2"|| NQb.toLowerCase() =="x3")) || (sNb != null && (sNb.toLowerCase() =="x2"|| sNb.toLowerCase() =="x3")); var vNb = false; while(uNb) { if(wNb.previousSibling != null && wNb.previousSibling.nodeType == 1) { NQb = wNb.previousSibling.getAttribute("class"); sNb = wNb.previousSibling.getAttribute("className"); if(NQb != null && NQb.length > 3) { NQb = NQb.substr(NQb.length - 4).toLowerCase(); if(NQb =="text") { vNb = true; break; } } if(sNb != null && sNb.length > 3) { sNb = sNb.substr(sNb.length - 4).toLowerCase(); if(sNb =="text") { vNb = true; break; } } break; } wNb = wNb.parentNode; if(wNb != null && wNb.nodeType == 1 && wNb.tagName.toLowerCase() =="span") { } else { break; } } if(uNb) { if(!vNb) { WNb = WNb + nNb.substr(0, 1); } } else { if(bNb.previousSibling != null) { NQb = bNb.previousSibling.getAttribute("class"); sNb = bNb.previousSibling.getAttribute("className"); if( (NQb != null && (NQb.toLowerCase() =="x2"|| NQb.toLowerCase() =="x3")) || (sNb != null && (sNb.toLowerCase() =="x2"|| sNb.toLowerCase() =="x3")) ) { WNb = WNb + nNb.substr(0, 1); } } else { var wNb = bNb; var tvb = false; while(wNb.previousSibling == null && wNb.parentNode.tagName.toLowerCase() =="span") { wNb = wNb.parentNode; if(wNb.previousSibling != null) { tvb = true; } } if(tvb && wNb.previousSibling != null) { NQb = wNb.previousSibling.getAttribute("class"); sNb = wNb.previousSibling.getAttribute("className"); if( (NQb != null && (NQb.toLowerCase() =="x2"|| NQb.toLowerCase() =="x3")) || (sNb != null && (sNb.toLowerCase() =="x2"|| sNb.toLowerCase() =="x3")) ) { WNb = WNb + nNb.substr(0, 1); } } } } } aNb[xvb++] = new aMb(Tbb, WNb); } WNb =""; ++Nyb; nNb = nNb.substr(1); } else { nNb = nNb.substr(1); ++Nyb; } } else { var yNb = WNb + nNb.substring(0, bzb + 1); if(yNb.trimTH() =="*") { if(! (pfa && RUb("*")) ) { yNb =""; } } if(Nya(yNb)) { gVb = RTb(bNb, bzb + Nyb); var Tbb = new THRange(Fob, fVb, gVb); aNb[xvb++] = new aMb(Tbb, yNb); if(xvb > FNb && FNb > 0) { if(Lda) { throw"Full selection will not be spoken due to its length."; } else { cya("Full selection will not be spoken due to its length."); } return ; } } WNb =""; Nyb += bzb + 1; nNb= nNb.substring(bzb + 1); } fVb = RTb(bNb, Nyb); gVb = null; bzb = COb(nNb); } if(nNb.length > 0) { WNb += nNb; gVb = RTb(bNb, nNb.length + Nyb); if(gVb == null) { WNb =""; } } if(bNb == SNb) { if(WNb.length > 0) { var Tbb = new THRange(Fob, fVb, gVb); if(Nya(WNb)) { aNb[xvb++] = new aMb(Tbb, WNb); } } return ; } } cNb = SSDOM.getNextNode(bNb, true, SNb); if(cNb == null) { if(WNb.length > 0) { if(Nya(WNb)) { aNb[xvb++] = new aMb(new THRange(Fob, fVb, gVb), HNb(WNb)); } WNb =""; fVb = null; gVb = null; } bNb = SSDOM.getNextNode(bNb, false, SNb); } else { bNb = cNb; } } else { cNb = SSDOM.getNextNode(bNb, true, SNb); if(cNb == null) { if(WNb.length > 0) { if(Nya(WNb)) { aNb[xvb++] = new aMb(new THRange(Fob, fVb, gVb), HNb(WNb)); } WNb =""; fVb = null; gVb = null; } bNb = SSDOM.getNextNode(bNb, false, SNb); } else { bNb = cNb; } } eNb = false; } } catch(err) { Fya("err rw_getTextOverRangeToSpeakImpl:"+ err.message); }}function COb(DOb){ if(DOb == null || DOb.length == 0) { return -1; } var bzb = DOb.search("[\\s\"]"); return bzb;}/* The following code is derived from MD5 hash functions (c) Paul Johnston, http://pajhome.org.uk/crypt/md5/. */var EOb = 0; var FOb =""; var GOb = 8;function HOb(s){ return aOb(IOb(YOb(s), s.length * GOb));}function IOb(x, Gwa){x[Gwa >> 5] |= 0x80 << ((Gwa) % 32); x[(((Gwa + 64) >>> 9) << 4) + 14] = Gwa; var a = 1732584193; var b = -271733879; var c = -1732584194; var d = 271733878; for(var i = 0; i < x.length; i += 16) { var JOb = a; var KOb = b; var LOb = c; var MOb = d; a = OOb(a, b, c, d, x[i+ 0], 7 , -680876936); d = OOb(d, a, b, c, x[i+ 1], 12, -389564586); c = OOb(c, d, a, b, x[i+ 2], 17, 606105819); b = OOb(b, c, d, a, x[i+ 3], 22, -1044525330); a = OOb(a, b, c, d, x[i+ 4], 7 , -176418897); d = OOb(d, a, b, c, x[i+ 5], 12, 1200080426); c = OOb(c, d, a, b, x[i+ 6], 17, -1473231341); b = OOb(b, c, d, a, x[i+ 7], 22, -45705983); a = OOb(a, b, c, d, x[i+ 8], 7 , 1770035416); d = OOb(d, a, b, c, x[i+ 9], 12, -1958414417); c = OOb(c, d, a, b, x[i+10], 17, -42063); b = OOb(b, c, d, a, x[i+11], 22, -1990404162); a = OOb(a, b, c, d, x[i+12], 7 , 1804603682); d = OOb(d, a, b, c, x[i+13], 12, -40341101); c = OOb(c, d, a, b, x[i+14], 17, -1502002290); b = OOb(b, c, d, a, x[i+15], 22, 1236535329); a = POb(a, b, c, d, x[i+ 1], 5 , -165796510); d = POb(d, a, b, c, x[i+ 6], 9 , -1069501632); c = POb(c, d, a, b, x[i+11], 14, 643717713); b = POb(b, c, d, a, x[i+ 0], 20, -373897302); a = POb(a, b, c, d, x[i+ 5], 5 , -701558691); d = POb(d, a, b, c, x[i+10], 9 , 38016083); c = POb(c, d, a, b, x[i+15], 14, -660478335); b = POb(b, c, d, a, x[i+ 4], 20, -405537848); a = POb(a, b, c, d, x[i+ 9], 5 , 568446438); d = POb(d, a, b, c, x[i+14], 9 , -1019803690); c = POb(c, d, a, b, x[i+ 3], 14, -187363961); b = POb(b, c, d, a, x[i+ 8], 20, 1163531501); a = POb(a, b, c, d, x[i+13], 5 , -1444681467); d = POb(d, a, b, c, x[i+ 2], 9 , -51403784); c = POb(c, d, a, b, x[i+ 7], 14, 1735328473); b = POb(b, c, d, a, x[i+12], 20, -1926607734); a = QOb(a, b, c, d, x[i+ 5], 4 , -378558); d = QOb(d, a, b, c, x[i+ 8], 11, -2022574463); c = QOb(c, d, a, b, x[i+11], 16, 1839030562); b = QOb(b, c, d, a, x[i+14], 23, -35309556); a = QOb(a, b, c, d, x[i+ 1], 4 , -1530992060); d = QOb(d, a, b, c, x[i+ 4], 11, 1272893353); c = QOb(c, d, a, b, x[i+ 7], 16, -155497632); b = QOb(b, c, d, a, x[i+10], 23, -1094730640); a = QOb(a, b, c, d, x[i+13], 4 , 681279174); d = QOb(d, a, b, c, x[i+ 0], 11, -358537222); c = QOb(c, d, a, b, x[i+ 3], 16, -722521979); b = QOb(b, c, d, a, x[i+ 6], 23, 76029189); a = QOb(a, b, c, d, x[i+ 9], 4 , -640364487); d = QOb(d, a, b, c, x[i+12], 11, -421815835); c = QOb(c, d, a, b, x[i+15], 16, 530742520); b = QOb(b, c, d, a, x[i+ 2], 23, -995338651); a = ROb(a, b, c, d, x[i+ 0], 6 , -198630844); d = ROb(d, a, b, c, x[i+ 7], 10, 1126891415); c = ROb(c, d, a, b, x[i+14], 15, -1416354905); b = ROb(b, c, d, a, x[i+ 5], 21, -57434055); a = ROb(a, b, c, d, x[i+12], 6 , 1700485571); d = ROb(d, a, b, c, x[i+ 3], 10, -1894986606); c = ROb(c, d, a, b, x[i+10], 15, -1051523); b = ROb(b, c, d, a, x[i+ 1], 21, -2054922799); a = ROb(a, b, c, d, x[i+ 8], 6 , 1873313359); d = ROb(d, a, b, c, x[i+15], 10, -30611744); c = ROb(c, d, a, b, x[i+ 6], 15, -1560198380); b = ROb(b, c, d, a, x[i+13], 21, 1309151649); a = ROb(a, b, c, d, x[i+ 4], 6 , -145523070); d = ROb(d, a, b, c, x[i+11], 10, -1120210379); c = ROb(c, d, a, b, x[i+ 2], 15, 718787259); b = ROb(b, c, d, a, x[i+ 9], 21, -343485551); a = UOb(a, JOb); b = UOb(b, KOb); c = UOb(c, LOb); d = UOb(d, MOb); } return Array(a, b, c, d);}function NOb(q, a, b, x, s, t){ return UOb(VOb(UOb(UOb(a, q), UOb(x, t)), s),b);}function OOb(a, b, c, d, x, s, t){ return NOb((b & c) | ((~b) & d), a, b, x, s, t);}function POb(a, b, c, d, x, s, t){ return NOb((b & d) | (c & (~d)), a, b, x, s, t);}function QOb(a, b, c, d, x, s, t){ return NOb(b ^ c ^ d, a, b, x, s, t);}function ROb(a, b, c, d, x, s, t){ return NOb(c ^ (b | (~d)), a, b, x, s, t);}function UOb(x, y){ var SOb = (x & 0xFFFF) + (y & 0xFFFF); var TOb = (x >> 16) + (y >> 16) + (SOb >> 16); return (TOb << 16) | (SOb & 0xFFFF);}function VOb(num, cnt){ return (num << cnt) | (num >>> (32 - cnt));}function YOb(hAc){ var WOb = Array(); var mask = (1 << GOb) - 1; for(var i = 0; i < hAc.length * GOb; i += GOb) { WOb[i>>5] |= (hAc.charCodeAt(i / GOb) & mask) << (i%32); } return WOb;}function aOb(binarray){ var ZOb = EOb ?"0123456789ABCDEF":"0123456789abcdef"; var hAc =""; for(var i = 0; i < binarray.length * 4; i++) { hAc += ZOb.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) + ZOb.charAt((binarray[i>>2] >> ((i%4)*8 )) & 0xF); } return hAc;}function $rw_hash(vyb){ return HOb(vyb);}function $rw_cachePage(qJb, vJb, p_strBookName) { var fOb = 0; try { if(Cea) { eba_cacheResult ="failure: The embedded speech toolbar cannot be added due to invalid html tag markup in this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } if(Ada == 300) { if(typeof(p_strBookName) =="string"&& p_strBookName != null && p_strBookName.length > 0) { yca = p_strBookName; } else { yca ="1"; } zca ="1"; } if(Lda) { if(vJb != null) { $rw_setSpeedValue(parseInt(vJb), 10); } if(qJb != null) { $rw_setVoice(qJb); } var dOb = SSDOM.getFirstSentence(document.body); $rw_doSelection(-2); fOb = kOb(dOb, fOb); } else { eba_cacheResult ="failure: The generate cache flag was set to false, no processing done for this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } } catch(err) { if(err.message != null) { eba_cacheResult ="failure:"+ err.message; } else { eba_cacheResult ="failure:"+ err; } window.external.completed(eba_cacheResult); return eba_cacheResult; } eba_cacheResult ="success"; if(fOb > 0) { eba_cacheResult = eba_cacheResult +":Warning, encountered "+ fOb +" zero length speech files."; } window.external.completed(eba_cacheResult); return"success";}function kOb(lOb, mOb){ var eOb = lOb; var fOb = mOb; var gOb = 0; while(eOb != null) { var hOb = tMb(eOb, new Array()); var xsb = hOb.xsb; if(xsb == null || xsb.trimTH().length == 0) { if(eOb != null) { var sentence = SSDOM.getNextSentence(eOb); if(sentence != null) { eOb = sentence; } else { if(gOb > 1) { throw"Speech engine generating empty files."; } rOb(); return fOb; } } else { if(gOb > 1) { throw"Speech engine generating empty files."; } rOb(); return fOb; } } var nOb = AQb(xsb); var oOb = yOb(); var Xdb = window.external.Generate(xsb, oOb, nOb); if(Xdb == 1) { gOb = 0; } else { if(Xdb == 2) { throw"Got a Failure response from the speech engine."; } else if(Xdb == 3) { ++fOb; ++gOb; if(gOb > 4) { throw"Speech engine generating empty files."; } } } eOb = SSDOM.getNextSentence(eOb); } if(gOb > 1) { throw"Speech engine generating empty files."; } rOb(); return fOb;}function rOb(){ var kpb = document.getElementById("pageComplete"); if(kpb != null) { kpb.click(); }}function vOb(Awb){ if(Oda) { var sOb = APb(); var tOb = AQb(Awb); var uOb = BPb(tOb); return sOb +"/"+ uOb +"/"+tOb; } else { return APb() +"/"+ AQb(Awb); }}function yOb(){ var hAc = hUb(wca," ","_"); if(Aea) { return DPb(xca +"\\"+ yca +"\\"+ $rw_scholasticHash(zca) +"\\"+ zca +"\\"+ hAc + (Gda)); } else { return DPb(xca +"\\"+ yca +"\\"+ zca +"\\"+ hAc + Gda); }}function APb(){ var hAc = hUb(wca," ","_"); if(Aea) { return DPb(xca +"/"+ yca +"/"+ $rw_scholasticHash(zca) +"/"+ zca +"/"+ hAc + Gda); } else { return DPb(xca +"/"+ yca +"/"+ zca +"/"+ hAc + Gda); }}function BPb(Gwb){ if(Gwb == null || Gwb.length < 2) { return"1/1"; } return Gwb.substr(0, 1) +"/"+ Gwb.substr(1, 1);}function DPb(vyb){ return vyb.replace(/[\x26\x3a\x2a\x3f\x22<>\x7c]/g,""); }var vYb ="";function $rw_speechCacheGenErrorHandler(Vja){ vYb = Vja; var kpb = document.getElementById("pageFailed"); if(kpb != null) { kpb.click(); }}function $rw_getLastError(){ return vYb;}function LPb(OPb){ if(OPb == null || OPb.Yfb == null || OPb.Zfb == null) { return null; } return new THRange(OPb.Yfb.node.ownerDocument.body, RTb(OPb.Yfb.node, OPb.Yfb.offset), RTb(OPb.Zfb.node, OPb.Zfb.offset));}function VPb(ePb){ if(ePb == null || ePb.rnb == null || ePb.snb == null) { return null; } else { return new THRange(ePb.body, ePb.rnb, ePb.snb); }}function dPb(ePb){ if(ePb == null || ePb.rnb == null || ePb.snb == null) { return null; } else { var Yfb = SSDOM.getCaretFromDomPosition( ePb.body, ePb.rnb.path, ePb.rnb.offset, true); var Zfb = SSDOM.getCaretFromDomPosition( ePb.body, ePb.snb.path, ePb.snb.offset, false); if(Yfb != null && Zfb != null) { return new Yqa(Yfb, Zfb); } else { return null; } }}function jPb(Zdb){ if(Zdb == null || Zdb.rnb == null || Zdb.snb == null) { return null; } else { var Yfb = SSDOM.getCaretFromDomPosition( Zdb.body, Zdb.rnb.path, Zdb.rnb.offset, true); var Zfb = SSDOM.getCaretFromDomPosition( Zdb.body, Zdb.snb.path, Zdb.snb.offset, false); if(Yfb != null && Zfb != null) { return new Yqa(Yfb, Zfb); } else { return null; } }}function pPb(ffb){ return RTb(ffb.node, ffb.offset);}function vPb(BWb, zPb){ return SSDOM.getCaretFromDomPosition(BWb, zPb.path, zPb.offset, true);}function AQb(vyb){ if(Ada == 200) { vyb = vyb.replace(/\s+/g," "); } else { vyb = vyb.replace(/(\x3cbookmark\x20mark\x3d\x22(\d)+\x22\x2f\x3e)/g,""); vyb = vyb.replace(/[\s\xA0]+/g," "); } return HOb(vyb);}function $rw_scholasticHashShort(p_asset){ var xsb = p_asset.replace(/^0+|[^0-9]/g,""); return"0001".substring(0, 4-xsb.length) + xsb.substring(0, 4);}function $rw_scholasticHash(p_asset){ var xsb = p_asset.replace(/^0+|[^0-9]/g,""); if(xsb.length < 4) { xsb ="0001".substring(0, 4-xsb.length) + xsb; } else { xsb = xsb.substring(0, 4); } return xsb;}SpeechStream.pauseHandler = (function(){ var self = {}; var EQb = {"none":0,"x-weak":233,"weak":466,"medium":700,"strong":933,"x-string":1166 }; var FQb ="~!pause:"; var GQb ="!~"; var HQb = FQb.length + 4; var IQb ="silence"; var JQb ="break";self.getStrengthValue = function(p_strStrength) { if(typeof(EQb[p_strStrength]) !="undefined") { return EQb[p_strStrength]; } else { return 0; } };self.getPauseTimeFromNode = function(Xsb) { var pQb = 0; var iQb = Xsb.tagName.toLowerCase(); if(iQb == IQb) { var NQb = Xsb.getAttribute("msec"); if(NQb != null) { pQb = parseInt(NQb, 10); if(isNaN(pQb)) { pQb = 0; } } } else if(iQb == JQb) { var NQb = Xsb.getAttribute("time"); if(NQb != null && NQb.length >= 2) { if(NQb.substr(NQb.length - 2) =="ms") { pQb = parseInt(NQb, 10); } else if(NQb.substr(NQb.length - 1) =="s") { pQb = parseInt(NQb, 10) * 1000; } if(isNaN(pQb)) { pQb = 0; } } else { NQb = Xsb.getAttribute("strength"); if(NQb != null) { pQb = self.getStrengthValue(NQb.toLowerCase()); } else { pQb = self.getStrengthValue("medium"); } } } return pQb; };self.encodedPause = function(p_nMsec) { if(!isNaN(p_nMsec) && p_nMsec>=0 && p_nMsec < 10000) { return FQb + p_nMsec + GQb; } else { return""; } };self.encodePauseFromNode = function(Xsb) { return self.encodedPause(self.getPauseTimeFromNode(Xsb)); }; self.encodePauseFromString = function(Awb) { if(Awb.indexOf(JQb) > -1 || Awb.indexOf(IQb) > -1) { Awb = PQb(Awb, IQb,"msec"); Awb = PQb(Awb, JQb,"time"); Awb = PQb(Awb, JQb,"strength"); Awb = PQb(Awb, JQb,""); } return Awb; }; function PQb(Awb, RQb, hQb) { var OQb =" "+hQb+"=\""; var TQb ="</"+ RQb +">"; var UQb; var VQb; var WQb; var XQb; var YQb; var ZQb; var aQb; UQb = Awb.indexOf("<"+RQb); while(UQb > -1) { WQb = Awb.indexOf(">", UQb); XQb = Awb.indexOf("/>", UQb); if(WQb>UQb && (XQb<0 || WQb<XQb) ) { VQb = WQb; aQb = Awb.indexOf(TQb); } else if(XQb>UQb && (WQb<0 || XQb<WQb) ) { VQb = WQb; aQb=-1; } else { Fya("Error in pause handler, appears to be due to unclosed element in html."); break; } var pQb; if(hQb ==""&& RQb == JQb) { pQb = self.getStrengthValue("medium"); } else { YQb = Awb.indexOf(OQb, UQb); ZQb = Awb.indexOf("\"", YQb+OQb.length); if(YQb == -1) { break; } else if(YQb > VQb) { pQb = -1; } else if(ZQb > VQb || ZQb == -1) { Fya("Error in pause handler, appears to be due to unclosed string in html attribute."); break; } else { var cQb = Awb.substring(YQb + OQb.length, ZQb); pQb = fQb(cQb, hQb); } } if(pQb > -1) { var IAc = Awb.substr(0, UQb);IAc+= self.encodedPause(pQb);if(aQb > -1) { IAc += Awb.substring(VQb+1, aQb);IAc += Awb.substr(aQb + TQb.length);} else { IAc += Awb.substring(VQb+2);} Awb = IAc; UQb = Awb.indexOf("<"+RQb, UQb+1); } UQb = Awb.indexOf("<"+RQb, UQb+1); } return Awb; } function fQb(gQb, hQb) { var pQb = 0; if(hQb =="msec") { pQb = parseInt(gQb, 10); if(isNaN(pQb)) { pQb = 0; } } else if(hQb =="time") { if(gQb.substr(gQb.length-2) =="ms") { pQb = parseInt(gQb.substr(0, gQb.length-2), 10); if(isNaN(pQb)) { pQb = 0; } } else { pQb = parseInt(gQb.substr(0, gQb.length-1), 10) * 1000; if(isNaN(pQb)) { pQb = 0; } } } else if(hQb =="strength") { pQb = self.getStrengthValue(gQb); } return pQb; }self.isPauseElement = function(Xsb) { if(Xsb.nodeType == 1) { var iQb = Xsb.tagName.toLowerCase(); return (iQb == IQb || iQb == JQb); } else { return false; } };self.hasPauseKey = function(p_strCode) { if(typeof(p_strCode) =="string") { var nkb = p_strCode.indexOf(FQb); if(nkb > -1) { var Ywb = p_strCode.indexOf(GQb, nkb); if(Ywb>-1 && (Ywb-nkb) <= HQb) { return true; } } } else { return false; } };self.decodedPause = function(p_strCode) { var lQb = []; if(typeof(p_strCode) =="string") { var nkb = p_strCode.indexOf(FQb); while(nkb > -1) { var Ywb = p_strCode.indexOf(GQb, nkb); if(Ywb>-1 && (Ywb-nkb) <= HQb) { if(nkb > 0) { lQb.push(p_strCode.substr(0, nkb)); } var IAc = p_strCode.substring(nkb + FQb.length, Ywb); var pQb = parseInt(IAc, 10); if(!isNaN(pQb)) { lQb.push("<silence msec=\""+ IAc +"\"/>"); } p_strCode = p_strCode.substr(Ywb + GQb.length); nkb = p_strCode.indexOf(FQb); } } lQb.push(p_strCode); } return lQb; }; return self;})();function rw_getDisplayWidth(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } var nW = (uUb.innerWidth) ? uUb.innerWidth : uUb.document.body.offsetWidth; return nW;}function rw_getDisplayWidthAdjusted(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } var nW = ((uUb.innerWidth) ? uUb.innerWidth : uUb.document.body.offsetWidth) - rw_getScrollBarWidth(uUb); return nW;}function rw_getDocumentDisplayWidth(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } var nW = (uUb.innerWidth) ? uUb.innerWidth : uUb.document.documentElement.offsetWidth; return nW;}function rw_getDocumentDisplayWidthAdjusted(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } var nW = ((uUb.innerWidth) ? uUb.innerWidth : uUb.document.documentElement.offsetWidth) - rw_getScrollBarWidth(uUb); return nW;}function rw_getDisplayHeight(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(AKb) { return top.window.innerHeight; } if(Ifa) { return rw_getDocumentDisplayHeight(uUb); } else { var nH = (uUb.innerHeight) ? uUb.innerHeight : uUb.document.body.offsetHeight; return nH; }}function rw_getDisplayHeightAdjusted(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(AKb) { return top.window.innerHeight - window.pageYOffset; } if(Ifa) { return rw_getDocumentDisplayHeightAdjusted(uUb); } else { var nH = ((uUb.innerHeight) ? uUb.innerHeight : uUb.document.body.offsetHeight ) - rw_getScrollBarHeight(uUb); return nH; }}function rw_getDocumentDisplayHeight(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(AKb) { return top.window.innerHeight; } var nH = (uUb.innerHeight) ? uUb.innerHeight : uUb.document.documentElement.offsetHeight; return nH;}function rw_getDocumentDisplayHeightAdjusted(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } var nH = ((uUb.innerHeight) ? uUb.innerHeight : uUb.document.documentElement.offsetHeight) - rw_getScrollBarHeight(uUb); return nH;}function GRb(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(uUb.document.compatMode =="CSS1Compat"&& uUb.document.body.parentNode && uUb.document.body.parentNode.scrollLeft) { return uUb.document.body.parentNode.scrollLeft; } var n = (uUb.pageXOffset) ? uUb.pageXOffset : (uUb.scrollX) ? uUb.scrollX : (uUb.document.body.scrollLeft) ? uUb.document.body.scrollLeft : (uUb.document.documentElement.scrollLeft)? uUb.document.documentElement.scrollLeft:0; return n;}function rw_getScreenOffsetLeft(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(uUb.pageXOffset && uUb.pageXOffset > 0) { return uUb.pageXOffset; } else if(uUb.document.body.scrollLeft && uUb.document.body.scrollLeft > 0) { return uUb.document.body.scrollLeft; } else if(uUb.document.documentElement.scrollLeft && uUb.document.documentElement.scrollLeft > 0) { return uUb.document.documentElement.scrollLeft; } return 0;}function rw_getScreenOffsetTop(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(uUb.pageYOffset && uUb.pageYOffset > 0) { return uUb.pageYOffset; } else if(uUb.document.body.scrollTop && uUb.document.body.scrollTop > 0) { return uUb.document.body.scrollTop; } else if(uUb.document.documentElement.scrollTop && uUb.document.documentElement.scrollTop > 0) { return uUb.document.documentElement.scrollTop; } return 0;}function MRb(aob){ if(aob.scrollLeft && aob.scrollLeft > 0) { return aob.scrollLeft; } if(aob.tagName.toLowerCase() =="body"&& aob.ownerDocument && aob.ownerDocument.documentElement && aob.ownerDocument.documentElement.scrollLeft) { return aob.ownerDocument.documentElement.scrollLeft; } return 0;}function ORb(aob){ if(aob.scrollTop && aob.scrollTop > 0) { return aob.scrollTop; } if(aob.tagName.toLowerCase() =="body"&& aob.ownerDocument && aob.ownerDocument.documentElement && aob.ownerDocument.documentElement.scrollTop) { return aob.ownerDocument.documentElement.scrollTop; } return 0;}function rw_getScrollBarWidth(uUb){ if(Kfa) { if(Ifa) { return 20; } else { if(typeof(uUb) =="undefined") { uUb = window; } if(uUb.document.compatMode.equalsTH("CSS1Compat")) { return (uUb.document.documentElement.offsetWidth - uUb.document.documentElement.clientWidth); } else { return (uUb.document.body.offsetWidth - uUb.document.body.clientWidth); } } } else { if(window.scrollMaxY > 0 || Xfa) { return 18; } else { return 4; } }}function rw_getScrollBarHeight(uUb){ if(typeof(uUb) =="undefined") { uUb = window; } if(Kfa) { if(Ifa) { return 20; } else { if(uUb.document.compatMode.equalsTH("CSS1Compat")) { return (uUb.document.documentElement.offsetHeight - uUb.document.documentElement.clientHeight); } else { return (uUb.document.body.offsetHeight - uUb.document.body.clientHeight); } } } else { if(uUb.scrollMaxX > 0) { return 18; } else { return 4; } }}function WRb(){ var zUb = null; var VRb = null; if (Tfa) {var range = document.selection.createRange(); if(range == null || range.text == null || range.text.length == 0) { var cRb = SSDOM.getFrameSelectionOldIE(window); if(cRb.VRb) { zUb = cRb.zUb; VRb = cRb.VRb; } } else { zUb = window; VRb = range; } if(VRb != null) { var Udb = VRb.duplicate(); Udb.collapse(); var Nkb = Udb.parentElement(); if(SSDOM.isIgnored(Nkb)) { VRb = null; } } if(VRb != null && VRb.parentElement() != null && VRb.parentElement().tagName.toLowerCase() =="input") { VRb = new String(VRb.text); } } else {if(Xja!=null) { Yja.getSelection().addRange(Xja); } var aRb = window.getSelection(); var bRb = null; if(!aRb.isCollapsed && aRb.toString().trimTH().length > 0) { zUb = window; bRb = aRb; } else { if(rDb && rDb.selectionStart != rDb.selectionEnd) { return {frame:window, range:new String( rDb.value.substring(rDb.selectionStart, rDb.selectionEnd) )}; } var cRb = SSDOM.getFrameSelectionSFF(window); if(cRb.bRb) { zUb = cRb.zUb; bRb = cRb.bRb; } } if(bRb == null) { return null; } if(bRb.anchorNode) { if(SSDOM.isIgnored(bRb.anchorNode)) { return null; } } if(bRb.focusNode && bRb.focusNode.id) { if(bRb.focusNode.id =="flashcontent") { return null; } } if(bRb.anchorNode != null && bRb.anchorNode == bRb.focusNode && bRb.anchorOffset == bRb.focusOffset) { return null; } var dRb = null; if(bRb.getRangeAt) { dRb = bRb.getRangeAt(0); } else { var range = SSDOM.getRangeObject(); if(range != null) { if( bRb.anchorNode == bRb.focusNode && bRb.anchorOffset == bRb.focusOffset) { range = SSDOM.getRangeFromSelectionPoint(bRb); } else { range.setStart(bRb.anchorNode, bRb.anchorOffset); range.setEnd(bRb.focusNode, bRb.focusOffset); if(range.toString().length == 0) { range.setStart(bRb.focusNode, bRb.focusOffset); range.setEnd(bRb.anchorNode, bRb.anchorOffset); } } dRb = range; } } if(dRb != null) { var eRb = dRb.startContainer; var fRb = dRb.startOffset; var gRb = dRb.endContainer; var hRb = dRb.endOffset; if(eRb.nodeType != 3) { if(eRb.nodeType != 1) { return null; } else { if(fRb > 0) { if(eRb.hasChildNodes() && eRb.childNodes.length > fRb) { eRb = eRb.childNodes[fRb]; if(eRb.nodeType == 3) { fRb = 0; } else { fRb = 0; if(eRb.toString() =="[object HTMLEmbedElement]") { return null; } } } } } } if(gRb.nodeType != 3) { if(gRb.nodeType != 1) { return null; } else { if(gRb.hasChildNodes()) { if(gRb.childNodes.length > hRb) { gRb = gRb.childNodes[hRb]; } else { gRb = gRb.childNodes[hRb - 1]; if(gRb.nodeType != 3) { var Sub = SSDOM.getLastChildTextNode(gRb, true); if(Sub != null) { gRb = Sub; } } } } if(gRb.nodeType != 3) { var jRb = SSDOM.getPreviousNode(eRb, true, null); var Sub = SSDOM.getPreviousTextNode(gRb, true, jRb); if(Sub != null) { gRb = Sub; } } if(gRb.nodeType == 3) { hRb = gRb.nodeValue.length; } else { hRb = 0; } } } VRb = new dra(eRb, fRb, gRb, hRb); } else { return null; } } if(zUb != null && VRb != null) { return {frame:zUb, range:VRb}; } else { return null; }}function mRb(){ var oRb = WRb(); if(oRb != null && oRb.range != null && !(oRb.range instanceof String)) { if(Tfa) { oRb.range = pVb(oRb.frame.document.body, oRb.range); } else if(oRb.range instanceof dra) { oRb.range = VPb(oRb.range); } } return oRb;}function pRb(){ var NAc = WRb(); if(NAc != null) { var oRb = NAc.range; if(oRb instanceof String) { return oRb; } else if(oRb instanceof dra) { return oRb.toString(); } else { return NAc.range.text; } } return"";}function qRb(Xsb){ if(typeof(eba_no_scroll) =="boolean"&& eba_no_scroll) { return; } try { var zUb = SSDOM.getWindow(Xsb); if(zUb == null || Xsb == null || Xsb.parentNode == null) { return; } var x = 0; var y = 0; var NAc = Xsb; if(NAc.nodeType == 3) { NAc = NAc.parentNode; } var uRb = null; var vRb = NAc; var Lob = NAc.ownerDocument.body; var xRb = false; var Mob = null; while(vRb != null && vRb != Lob) { if(vRb.tagName.toLowerCase() =="div"|| vRb.tagName.toLowerCase() =="form") { if(ISb(vRb)) { xRb = true; uRb = VSb(NAc, vRb, uRb); Mob = vRb; NAc = vRb; } } vRb = vRb.parentNode; } if(Mob != null) { NAc = Mob; } while (NAc != null) { x += NAc.offsetLeft; y += NAc.offsetTop; NAc = NAc.offsetParent; } if(uRb != null) { y += uRb.y; x += uRb.x; } var zRb; var ASb; var BSb; var CSb; var DSb = 30; if (Xsb.nodeType == 3) { DSb = 10 + 5 * Xsb.nodeValue.length; if (DSb > 60) { DSb = 60; } } zRb = rw_getScreenOffsetLeft(zUb); ASb = rw_getScreenOffsetTop(zUb); if(typeof( zUb.innerWidth ) =='number') { BSb = zUb.innerWidth; CSb = zUb.innerHeight; } else if(zUb.document.documentElement.clientHeight > 0 && zUb.document.documentElement.clientWidth > 0) { BSb = zUb.document.documentElement.clientWidth; CSb = zUb.document.documentElement.clientHeight; } else { BSb = zUb.document.body.clientWidth; CSb = zUb.document.body.clientHeight; } BSb = BSb - DSb; CSb = CSb - 20; var ESb; var FSb; if(xRb) { } ESb = (x < zRb || x > (zRb + BSb)); FSb = (y < ASb || y > (ASb + CSb)); if (ESb || FSb && (x != 0 || y != 0)) { if (x > (zRb + BSb)) { x = (x + zRb) / 2; } if (y > (ASb + CSb)) { y = (y + ASb) / 2; } var GSb = $g_bMouseSpeech; if($g_bMouseSpeech) { $g_bMouseSpeech = false; } zUb.scrollTo((ESb?x:zRb), (FSb?y:ASb)); if(afa) { CKb(); EKb(); } if(GSb) { var HSb = function() { $g_bMouseSpeech = true; }; setTimeout(HSb, 500); } } } catch(ignore) { thLogE(ignore); } g_bDidScroll = false;}function ISb(aob){var Pob = aob.clientHeight; var Qob = aob.clientWidth; var Rob = SSDOM.getComputedStyle(aob); var Sob = false; if(Rob != null && Rob.overflow !="visible"&& Rob.display !="inline") { if(aob.scrollHeight > Pob && Rob.overflowY !="visible") { Sob = true; } if(aob.scrollWidth > Qob && Rob.overflowX !="visible") { Sob = true; } } return Sob;}function VSb(Xsb, aob, YSb){ var mnb; var nnb; var Pob = aob.clientHeight; var Qob = aob.clientWidth; var SSb = 0; var TSb = 0; var kAc = Xsb; while(kAc != aob && kAc != null) { SSb += kAc.offsetTop; TSb += kAc.offsetLeft; kAc = cSb(kAc, aob); } if(kAc == null) { TSb -= aob.offsetLeft; SSb -= aob.offsetTop; } if(YSb != null) { SSb += YSb.y; TSb += YSb.x; } if(aob.scrollTop > SSb || (aob.scrollTop + Pob) < (SSb + Xsb.offsetHeight)) { if(Pob > (Xsb.offsetHeight * 6)) { aob.scrollTop = SSb - Xsb.offsetHeight; } else { aob.scrollTop = SSb; } } if(aob.scrollLeft > TSb || (aob.scrollLeft + Qob) < (TSb + Xsb.offsetWidth)) { aob.scrollLeft = TSb; } mnb = TSb - aob.scrollLeft; nnb = SSb - aob.scrollTop; return {x:mnb, y:nnb};}function cSb(Zzb, eSb){ var aSb = Zzb; var bSb = aSb.offsetParent; if(bSb == null) { return null; } if(eSb == null) { return bSb; } while(aSb != null && aSb != bSb) { if(aSb == eSb) { return null; } aSb = aSb.parentNode; } return bSb;}function gSb(){ var hAc =""+"rw_getDisplayWidth="+ rw_getDisplayWidth() +"  rw_getDisplayWidthAdjusted="+ rw_getDisplayWidthAdjusted() +"  rw_getDocumentDisplayWidth="+ rw_getDocumentDisplayWidth() +"  rw_getDocumentDisplayWidthAdjusted="+ rw_getDocumentDisplayWidthAdjusted() +"  rw_getDisplayHeight="+ rw_getDisplayHeight() +"  rw_getDisplayHeightAdjusted="+ rw_getDisplayHeightAdjusted() +"  rw_getDocumentDisplayHeight="+ rw_getDocumentDisplayHeight() +"  rw_getDocumentDisplayHeightAdjusted="+ rw_getDocumentDisplayHeightAdjusted() +"  rw_getScreenOffsetLeft="+ rw_getScreenOffsetLeft() +"  rw_getScreenOffsetTop="+ rw_getScreenOffsetTop() +"  rw_getScrollBarWidth="+ rw_getScrollBarWidth() +"  rw_getScrollBarHeight="+ rw_getScrollBarHeight(); cya(hAc);}function hSb(Xpb){ qRb(document.getElementById(Xpb));}if(document.getElementById("testbuildspan")){ document.getElementById("testbuildspan").innerHTML ="test build 4";}SpeechStream.stringAssist = new function(){ var jSb = String.fromCharCode(160); this.SOFT_HYPHEN = String.fromCharCode(173); var self = this; var kSb = /[\s\xA0]+/g; this.REGEX_WORD_SPLIT = null; this.REGEX_NON_WORD = null; function mSb() { var lSb =""; var i; var hAc ='\\s\xA0!"%&()*+,-./:;<=>?[]^_{|}\u201d\u201c'; for(i = 0; i < hAc.length; i++) { lSb +='\\'+ hAc.charAt(i); } self.REGEX_WORD_SPLIT = new RegExp('(['+ lSb +'])','g'); self.REGEX_NON_WORD = new RegExp('(\\S*[0-9|$@#]\\S*)','g'); } mSb();this.trimWordsFromStart = function(Awb, p_nWords) { if(Awb == null) { return""; } var jsb = Awb; jsb = self.reduceWhiteSpace(jsb); if(jsb.length == 0) { return""; } var sSb = 0; var bzb = jsb.indexOf(' '); while(bzb > -1) { if(sSb == p_nWords) { jsb = jsb.substr(0, bzb); break; } ++sSb; bzb = jsb.indexOf(' ', bzb + 1); } return jsb; };this.trimWordsFromEnd = function(Awb, p_nWords) { if(Awb == null) { return""; } var jsb = Awb; jsb = self.reduceWhiteSpace(jsb); if(jsb.length == 0) { return""; } var sSb = 0; var bzb = jsb.lastIndexOf(' '); while(bzb > -1) { if(sSb == p_nWords) { jsb = jsb.substr(bzb+1); break; } ++sSb; bzb = jsb.lastIndexOf(' ', bzb - 1); } return jsb; };this.trimWordsFromStartAsArray = function(Awb, p_nWords) { var words = self.convertTextToArray(Awb); if(words.length<=p_nWords) { return words; } else { return words.slice(0, p_nWords); } };this.trimWordsFromEndAsArray = function(Awb, p_nWords) { var words = self.convertTextToArray(Awb); if(words.length<=p_nWords) { return words; } else { return words.slice(words.length - p_nWords, words.length); } };this.getWordListToBreak = function(Awb, p_nWords, p_bForward) { var wordList; if(p_nWords > -1) { wordList = p_bForward? SpeechStream.stringAssist.trimWordsFromStartAsArray(Awb, p_nWords): SpeechStream.stringAssist.trimWordsFromEndAsArray(Awb, p_nWords); } else { wordList = SpeechStream.stringAssist.convertTextToArray(Awb); } if(!p_bForward) { wordList.reverse(); } var xSb=false; var qzb = wordList.length; var i; var zSb, bPost; var szb; for(i=0; i<qzb; i++) { if(i == p_nWords) { xSb = true; } if(!xSb) { var BTb = i; szb = wordList[i]; zSb = !Wxa(szb.charCodeAt(0)); bPost = !Wxa(szb.charCodeAt(szb.length - 1)); if(zSb || bPost) { xSb=true; if(!zSb && bPost && p_bForward) { i++; } else if(zSb && !bPost && !p_bForward) { i++; } } szb = SpeechStream.stringAssist.Jra(szb); wordList[BTb] = szb; } if(xSb) { wordList = wordList.slice(0, i); break; } } if(!p_bForward) { wordList.reverse(); } return wordList; };this.convertTextToArray = function(Awb) { if(Awb == null || Awb.length == 0) { return []; } var KBc = self.reduceWhiteSpace(Awb).trimTH(); return KBc.split(" "); };this.reduceWhiteSpace = function(Awb) { return Awb.replace(kSb," "); }; this.filterWordForPronunciation = function(lxa) { if(lxa == null || lxa.length == 0) { return lxa; } var qzb = lxa.length; for(var i = 0; i < qzb; i++) {var Qub = lxa.charCodeAt(i); if(! (Qub == 39 || Qub == 45 || (Qub > 47 && Qub < 58) || (Qub > 64 && Qub < 91) || (Qub > 94 && Qub < 123) || (Qub > 127 && Qub!=160) )) { lxa = lxa.replace(lxa.charAt(i),' '); } } return lxa.trimTH(); };this.filterToListOfWords = function(vyb, p_filterList, p_regExSplit) { var KBc; var wordList; var HTb = []; if(typeof(p_regExSplit) =="undefined"|| p_regExSplit == null) { p_regExSplit = self.REGEX_WORD_SPLIT; } KBc = vyb.replace(self.REGEX_NON_WORD,' '); KBc = KBc.replace(p_regExSplit,' '); KBc = tinymce.trim(KBc.replace(/(\s+)/g,' ')); wordList = KBc.split(" "); tinymce.each(wordList, function (v) { if(HTb.indexOf(v) == -1 && p_filterList.indexOf(v) == -1) { HTb.push(v); } }); return HTb; };this.Jra = function(vyb) { var qzb = vyb.length; for(var i = 0; i < qzb; i++) {var Qub = vyb.charCodeAt(i); if(! (Qub == 39 || Qub == 45 || (Qub > 47 && Qub < 58) || (Qub > 64 && Qub < 91) || (Qub > 94 && Qub < 123) || (Qub > 127 && (Qub!=160 && Qub!=163 && Qub!=8364) ) )) { vyb = vyb.replace(vyb.charAt(i),' '); } } return vyb.replace(self.REGEX_WORD_SPLIT,' ').trimTH(); };this.checkIfIncludesBreak = function(qqb) { return !(Wxa(qqb.charCodeAt(0)) && Wxa(qqb.charCodeAt(qqb.length - 1))); };this.filterNbsp = function(Awb) { if(typeof(Awb) =="string"&& Awb.indexOf(jSb) > -1) { var bzb = Awb.indexOf(jSb); while(bzb > -1) { Awb = Awb.replace(jSb," "); bzb = Awb.indexOf(jSb, bzb + 1); } } return Awb; };this.filter = function(Awb, p_strFilter, kUb) { if(typeof(Awb) =="string"&& typeof(p_strFilter) =="string"&& typeof(kUb) =="string") { if(Awb.indexOf(p_strFilter) > -1) { var bzb = Awb.indexOf(p_strFilter) > -1; while(bzb > -1) { Awb = Awb.replace(p_strFilter, kUb); bzb = Awb.indexOf(p_strFilter, bzb + 1); } } } return Awb; };this.compareStrings = function(p_str1, p_str2) { var pyb = self.reduceWhiteSpace(p_str1); var ryb = self.reduceWhiteSpace(p_str2); return pyb == ryb; };};function RTb(Xsb, tfb){ try { if(Xsb == null) { return null; } if(Xsb.nodeType == 1 || Xsb.nodeType == 3) { var Nkb = SSDOM.checkForSpecialParent(Xsb); if(Nkb != null) { return new THDomRefPt(SSDOM.getPositionInDom(Nkb), tfb); } var Nyb; var rjb; if(Xsb.nodeType == 1) { Nyb = 0; rjb = Xsb; } else { Nyb = bTb(Xsb); rjb = Xsb.parentNode; } var attr = rjb.getAttribute("rwstate"); var VTb = rjb.getAttribute(daa); while( (attr != null && attr.length > 0) || VTb!= null ) { Nyb += bTb(rjb); rjb = rjb.parentNode; attr = rjb.getAttribute("rwstate"); VTb = rjb.getAttribute(daa); } if(tfb == -1) { Nyb = -1; } return new THDomRefPt(SSDOM.getPositionInDom(rjb), Nyb + tfb); } else { return null; } } catch(ignore) { return null; }}function bTb(Xsb){if(Xsb == null){ return 0;}var Nyb = 0;var ZTb = Xsb.previousSibling;if(ZTb != null){ Nyb = dTb(ZTb);}return Nyb;}function dTb(Xsb){var Nyb = 0;var ZTb = Xsb;var nyb;while(ZTb != null){ if(ZTb.nodeType ==3) { nyb = ZTb.nodeValue; Nyb += nyb.length; } else if(ZTb.nodeType == 1) { if(!SSDOM.isInvalidNode(ZTb)) { if(SSDOM.isSpecialCase(ZTb)) { Nyb += 1; } else if(ZTb.tagName.toLowerCase() !="textarea") { Nyb += dTb(ZTb.lastChild); } else { Nyb += 1; } } } ZTb = ZTb.previousSibling;}return Nyb;}function gTb(Xsb){ if(Mda || Lda) { var Fob = SSDOM.getBody(Xsb); if(Fob.getAttribute(("id")) =="tinymce") { return true; } var Sub = Xsb; if(Sub.nodeType == 3) { Sub = Sub.parentNode; } while(Sub != null && Sub != Fob) { if(Sub.getAttribute(caa) != null) { return true; } Sub = Sub.parentNode; } } return false;}function kTb(Xsb){ var xsb =""; try { if(Xsb.nodeType == 1) { if(Xsb.getAttribute("ignore") == null) { var tagName = Xsb.tagName.toLowerCase(); if(tagName =="input") { var fab = Xsb.getAttribute("type"); if(fab != null) { fab = fab.toLowerCase(); if(fab.length == 0 || fab =="text") { xsb = Xsb.value; } else if(fab =="password") { xsb =""; } else if(fab =="image") { var hnb = Xsb.getAttribute("alt"); if(hnb != null && hnb.length > 0) { xsb = hnb; } else { xsb =""; } } else if(fab =="button"|| fab =="submit"|| fab =="reset") { if(Xsb.className =="rwcalbutton"|| Xsb.className =="rwcalEqbutton") { xsb = Xsb.getAttribute("name"); } else { xsb = Xsb.getAttribute("value"); } } } else { xsb = Xsb.value; } } else if(tagName =="select") { var oTb = Xsb.selectedIndex; var Dsb =""; var qzb = Xsb.options.length; for( var xvb = 0; xvb < qzb; xvb++) { Dsb += Xsb.options[xvb].text +" "; } if(qzb > 0) { if(oTb > -1) { xsb = Xsb.options[oTb].text +" selected from the list "+ Dsb; } else { xsb ="No selection from list "+ Dsb; } } } else if(tagName =="textarea"|| tagName =="option") { xsb = Xsb.value; } else if(tagName =="img") { var gnb = Xsb.getAttribute("title"); if(gnb != null && gnb.length > 0) { xsb = gnb; } else { var hnb = Xsb.getAttribute("alt"); if(hnb != null && hnb.length > 0) { xsb = hnb; } else { var inb = Xsb.getAttribute("msg"); if(inb != null && inb.length > 0) { xsb = inb; } } } } else if(tagName =="math") { var vTb = SSDOM.getTextFromMathMl(Xsb); if(vTb.length > 0) { xsb = hnb; } } else { var hnb = Xsb.getAttribute("alt"); if(hnb != null && hnb.length > 0) { xsb = hnb; } else { var inb = Xsb.getAttribute("msg"); if(inb != null && inb.length > 0) { xsb = inb; } } } } } } catch(ignore) { xsb =""; } if(xsb == null) { xsb =""; } return xsb;}function EUb(FUb){ var yTb; var nkb; var Ywb; var Jgb; var slb; var sXb; nkb = 0; Ywb = FUb.indexOf(":"); Jgb = FUb.indexOf(";", Ywb); while(nkb > -1 && Ywb > -1) { slb = FUb.substring(nkb, Ywb); if(Jgb > -1) { sXb = FUb.substring(Ywb + 1, Jgb); } else { sXb = FUb.substring(Ywb + 1); } if(sXb.length == 0) { yTb = qfa.indexOf(slb); if(yTb > -1) { qfa.splice(yTb, 1); delete rfa[slb]; } } else { yTb = qfa.indexOf(slb); if(!(yTb > -1)) { qfa.push(slb); } rfa[slb] = sXb; } if(Jgb > -1) { nkb = Jgb + 1; Ywb = FUb.indexOf(":", nkb); Jgb = FUb.indexOf(";", Ywb); } else { break; } }}function KUb(Awb){ var qzb = Awb.length; var KBc = Awb; var Uqb = PUb(Awb); if(Uqb == null) { return Awb; } var i; var j; var c; for(i=qzb - 1; i>=0; i--) { c = Uqb.charCodeAt(i); if(c != 32) { j = i; while(c != 32 && i >= 0) { --i; c = Uqb.charCodeAt(i); } var JUb = Uqb.substring(i+1, j+1); if(rfa[JUb] != null) { KBc = KBc.substring(0, i+1) +' '+ rfa[JUb ] +' '+ KBc.substr(j+1); } } } return KBc;}function PUb(Awb){ var tvb = false; var qzb = Awb.length; var ZUb =""; var i; var c; for(i=0; i<qzb; i++) { c = Awb.charCodeAt(i); if(c == 32 || cxa(c)) { ZUb +=' '; } else { ZUb += Awb.charAt(i); tvb = true; } } if(tvb) { return ZUb; } else { return null; }}function RUb(Awb){ return (qfa.indexOf(Awb.trimTH()) > -1);}function WUb(XUb){ var Ivb; var cbb = false; var VUb = XUb.split(" "); var qzb = VUb.length; var i; for(i=0; i<qzb; i++) { Ivb = KUb(VUb[i]); if(Ivb != VUb[i]) { VUb[i] = Ivb; cbb = true; } } if(cbb) { var ZUb =""; for(i=0; i<qzb - 1; i++) { ZUb += VUb[i]; ZUb +=" "; } ZUb += VUb[qzb - 1]; return ZUb; } return XUb;}function dUb(lwb){ var cbb = false; if(pfa && lwb != null) { var qzb = lwb.length; var i; for(i=0; i<qzb; i++) { var Ivb = KUb(lwb[i]); if(Ivb != lwb[i]) { lwb[i] = Ivb; cbb = true; } } } return cbb;}EUb(sfa);function hUb(vyb, jUb, kUb){ if(typeof(vyb) =="string") { var n = vyb.indexOf(jUb); while(n > -1) { vyb = vyb.replace(jUb, kUb); n = vyb.indexOf(jUb, n +1); } } return vyb;}function mUb(Awb){ var lUb = Awb.replace(/\x26/g,'&amp;'); lUb = lUb.replace(/\x3c/g,'&lt;'); lUb = lUb.replace(/\x3e/g,'&gt;'); return lUb;}function pUb(Xpb){ var qzb = Xpb.length; if(qzb > 100) { return HOb(Xpb); } else { var i; var c; var s; for(i=0;i<qzb;i++) { c = Xpb.charCodeAt(i); if( (c>47&&c<58) || (c>63&&c<92) || (c>94&&c<124) ) { continue; } if(c>126 || c==92 || c==47 || c==58 || c==59 || c==42 || c==63 || c==34 || c==60 || c==62 || c==124 || c==35 || c==37 || c==43 || c==38 || c==94) { s ="^"+ aya(c); Xpb = Xpb.substr(0, i) + s + Xpb.substr(i+1); qzb = Xpb.length; i+=s.length-1; } } } return Xpb;}var rUb = null;function tUb(uUb){ var hAc ="th_tmp$"; var xvb = 1; var thb; var Zeb = true; while(Zeb) { thb = hAc + xvb; if(uUb.document.getElementById(thb)) { ++xvb; } else { Zeb = false; } } return thb;}function rw_getTargetNodeAsCaretIE(evt, EVb){ try { if((Nfa||Ofa||Pfa) && EVb && !qHb(evt)) { var yUb = evt.srcElement; var zUb = SSDOM.getWindow(yUb); var AVb = yUb.childNodes.length; var i; var BVb = false; for(i=0; i<AVb; i++) { if(yUb.childNodes[i].nodeType == 3) { BVb = true; break; } } if(BVb) { if(rUb == null) { rUb = tUb(zUb); } var CVb = zUb.document.getElementById(rUb); if(CVb != null) { CVb.parentNode.removeChild(CVb); } var range = zUb.document.selection.createRange(); range.collapse(); range.pasteHTML("<span id='"+ rUb +"'></span>"); var CBc = zUb.document.getElementById(rUb); var GVb = null; if(CBc != null) { if(CBc.previousSibling != null && CBc.previousSibling.nodeType == 3) { SSDOM.mergeTextNodes(CBc.previousSibling); GVb = new Sqa(CBc.previousSibling, CBc.previousSibling.length, true); } if(CBc.nextSibling != null && CBc.nextSibling.nodeType == 3) { SSDOM.mergeTextNodes(CBc.nextSibling); if(GVb == null) { GVb = new Sqa(CBc.nextSibling, 0, true); } } if(GVb == null && CBc.nextSibling != null && CBc.nextSibling.nodeType == 1) { GVb = new Sqa(CBc.nextSibling, 0, true); } else if(GVb == null && CBc.previousSibling != null && CBc.previousSibling.nodeType == 1) { GVb = new Sqa(CBc.previousSibling, 0, true); } } if(GVb == null) { GVb = new Sqa(CBc.parentNode, 0, true); } if(CBc != null) { CBc.parentNode.removeChild(CBc); } return GVb; } else { return new Sqa(yUb, 0, true); } } if(Ufa) { OLb = evt.target; if(OLb != null) { if(OLb.firstChild != null && OLb.firstChild.nodeType == 3 && OLb.tagName.toLowerCase() !="textarea") { var HVb = OLb.firstChild.nodeValue; if(HVb.trimTH().length > 0) { OLb = OLb.firstChild; } } return new Sqa(OLb, 0, true); } } else { var IVb = vDb(evt); var JVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); try { JVb.moveToPoint(IVb.x, IVb.y); } catch(skip) { return null; } var QVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); var LVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); var MVb = evt.srcElement.firstChild; while((MVb != null)) { if(MVb.nodeType == 3 && MVb.nodeValue.trimTH().length > 0) { SSDOM.mergeTextNodes(MVb); var Cjb = MVb.previousSibling; while(Cjb != null && Cjb.nodeType != 1) { Cjb = Cjb.previousSibling; } if(Cjb != null) { QVb.moveToElementText(Cjb); QVb.collapse(false); } else { QVb.moveToElementText(MVb.parentNode); } var nextNode = MVb.nextSibling; while(nextNode != null && nextNode.nodeType != 1) { nextNode = nextNode.nextSibling; } if(nextNode != null) { LVb.moveToElementText(nextNode); QVb.setEndPoint("EndToStart", LVb); } else { LVb.moveToElementText(MVb.parentNode); QVb.setEndPoint("EndToEnd", LVb); } if(QVb.inRange(JVb)) { var Nyb = YVb(MVb, QVb, JVb); return new Sqa(MVb, Nyb, true); } } MVb = MVb.nextSibling; } } } catch(exc) { Fya("rw_getTargetNodeAsCaretIE error:"+ exc.message); } return null;}function rw_getTextRangeAsRefPtIE(BWb, rVb){ try { var QVb = SSDOM.getRangeObject(BWb); var parentNode = rVb.parentElement(); QVb.moveToElementText(parentNode); var Nyb = YVb(parentNode, QVb, rVb); var jfb = RTb(parentNode, Nyb); return jfb; } catch(exc) { Fya("rw_getTextRangeAsRefPtIE error:"+ exc.message); } return null;}function YVb(ZVb, Zdb, bVb){ try { var Nyb = 0; var range = Zdb.duplicate(); range.collapse(); range.move("character", 1); range.move("character", -1); var cVb = 0; var dVb = 0; while(range.compareEndPoints("EndToEnd", bVb) == -1) { range.moveEnd("character", 1); cVb = range.text.length; if(cVb > dVb) { ++Nyb; dVb = cVb; } } return Nyb; } catch(err) { return 0; }}function pVb(BWb, rVb){ var Udb = rVb.duplicate(); Udb.collapse(true); var fVb = rw_getTextRangeAsRefPtIE(BWb, Udb); Udb = rVb.duplicate(); Udb.collapse(false); var gVb = rw_getTextRangeAsRefPtIE(BWb, Udb); return new THRange(BWb, fVb, gVb);}function rw_getAsTextRange(BWb, GWb, IWb, HWb, JWb){ var range = SSDOM.getRangeObject(BWb); var uAc = SSDOM.getCaretPairFromDomPosition(BWb, GWb, -1, HWb, -1); var Yfb = uAc.Yfb; var Zfb = uAc.Zfb; if(Yfb != null && Yfb.node != null && Zfb != null && Zfb.node != null) { var kVb = Yfb.node; if(kVb.nodeType == 3) { var Nyb = bTb(kVb); kVb = kVb.parentNode; IWb += Nyb; } var mVb = Zfb.node; if(mVb.nodeType == 3) { var Nyb = bTb(mVb); mVb = mVb.parentNode; JWb += Nyb; } range.moveToElementText(kVb); range.collapse(); NWb(range, IWb); range.collapse(false); range.select(); var oVb = SSDOM.getRangeObject(BWb); oVb.moveToElementText(mVb); oVb.collapse(); NWb(oVb, JWb); oVb.collapse(false); range.setEndPoint("EndToEnd", oVb); } else { range = null; Fya("Error with rw_getAsTextRange."); } return range;}function NWb(Zdb, Ekb){ var qzb; var Gzb; var MWb; qzb = Zdb.text.length; while(Ekb > 0) { MWb = Zdb.moveEnd("character", Ekb); if(MWb == 0) { return; } Gzb = Zdb.text.length; Ekb -= (Gzb - qzb); qzb = Gzb; }}SpeechStream.ipadUtils = new function(){ this.tinyMceBlurFix = function() { if(Cga && bfa) { try { var QWb = OAb(true); if(QWb) { if(QWb.ipadTinyMceFocus) { QWb.ipadTinyMceFocus = false; var RWb = window.pageXOffset; var SWb = window.pageYOffset; var IAc = document.getElementById(SpeechStream.tinymceipadfix); IAc.focus(); window.scrollTo(RWb, SWb); IAc.blur(); } } } catch(err){} } };};var UWb = new SpeechStream.Dictionary();function XWb(vyb){ var KBc; var qzb; var i; var c; if(SpeechStream.pronunciation.encodeData()) { KBc =""; qzb = vyb.length; for(i=0; i<qzb; i++) { c = vyb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { var Ukb = aya(c); switch(Ukb.length) { case 1: Ukb ="0"+ Ukb; case 2: KBc +="/x"+ Ukb; break; case 3: Ukb ="0"+ Ukb; case 4: KBc +="/u"+ Ukb; break; default: } } else { KBc += vyb.charAt(i); } } } else { KBc =""; qzb = vyb.length; for(i=0; i<qzb; i++) { c = vyb.charCodeAt(i); if(c == 34) { KBc +="%22"; } else if(c == 39) { KBc +="%27"; } else { KBc += vyb.charAt(i); } } } return KBc;}function cWb(vyb){ var Ivb = decodeURIComponent(vyb); var KBc =""; var qzb = Ivb.length; var i; var IAc; var gWb; for(i=0; i<qzb; i++) { var c = Ivb.charAt(i); if(c =='/') { if(i< qzb - 1) { var hWb = Ivb.charAt(i + 1); switch(hWb) { case'/': KBc +='/'; i++; break; case'x': if(i<qzb - 3) { IAc = Ivb.substr(i + 2, 2); gWb = bya(IAc); KBc += String.fromCharCode(gWb); i+=3; } break; case'u': if(i<qzb - 5) { IAc = Ivb.substr(i + 2, 4); gWb = bya(IAc); KBc += String.fromCharCode(gWb); i+=5; } break; default: } } else { } } else if(c =='+') { KBc +=' '; } else if (c == 10 || c == 13) { } else if(c =='%') { if(i<qzb - 2) { IAc = Ivb.substr(i, 3); if(IAc =="%2f") { KBc +='/'; i+=2; } else if(IAc =="%2a") { KBc +=':'; i-=2; } else if(IAc =="%60") { KBc +='`'; i-=2; } else { if(i<qzb - 9) { IAc = Ivb.substr(i, 10); if(IAc =="%26quot%3b") { KBc +='"'; i+=9; } else { if(i<qzb - 6) { IAc = Ivb.substr(i,7); if(IAc =="%26quot") { KBc +='"'; i+=6; } else { KBc += c; } } else { KBc += c; } } } else { KBc += c; } } } else { KBc += c; } } else if(c =='&') { if(i<qzb - 5) { IAc = Ivb.substr(i, 6); if(IAc =="&#x27") { KBc +='\''; } else if(IAc =="&quot;") { KBc +='"'; } KBc += String.fromCharCode(gWb); i+=5; } } else { KBc += Ivb.charAt(i); } } return KBc;}function jWb(vyb){ var KBc =""; var qzb = vyb.length; var i; for(i=0; i<qzb; i++) { var c = vyb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { KBc +="&#"+ c +";"; } else { KBc += vyb.charAt(i); } } return KBc;}function nWb(vyb){ var KBc =""; var qzb = vyb.length; var i; for(i=0; i<qzb; i++) { var c = vyb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { if(c == 34 || c == 39) { KBc +="\\&#"+ c +";"; } else { KBc +="&#"+ c +";"; } } else { KBc += vyb.charAt(i); } } return KBc;}var qWb ="\\x82\\x91\\x92";var rWb ="\\x93\\x94";var sWb = /^[,.?!;:\x27\x22$]+|[,.?!;:\x27\x22$]+$/g;function xWb(lwb){ if(!ofa) { return false; } var cbb = false; var Ivb; var KBc; var qzb = lwb.length; var i; for(i=0; i<qzb; i++) { KBc = lwb[i].trimTH(); if(KBc.indexOf(" ") > -1) { var thb = JXb(KBc); if(thb != KBc) { lwb[i] = thb; cbb = true; } continue; } var value; if(UWb.MultiwordStart$__.indexOf(KBc) > -1) { if(i < qzb - 1) { Ivb = KBc +" "+ lwb[i+1].trimTH(); if( (value = UWb.get$__(Ivb)) != null ) { var EXb = value.split(" "); var pyb = EXb[0] +" "; var ryb = EXb[1] +" "; lwb[i] = pyb; lwb[i+1] = ryb; cbb = true; continue; } } if(i < qzb - 2) { Ivb = KBc +" "+ lwb[i+1].trimTH() +" "+ lwb[i+2].trimTH(); if( (value = UWb.get$__(Ivb)) != null ) { var EXb = value.split(" "); var pyb = EXb[0] +" "; var ryb = EXb[1] +" "; var qyb = EXb[2] +" "; lwb[i] = pyb; lwb[i+1] = ryb; lwb[i+2] = qyb; cbb = true; continue; } } } if( (value = UWb.get$__(KBc)) != null || (value = UWb.get$__(KBc.toLowerCase())) != null) { lwb[i] = value +" "; cbb = true; continue; } else { Ivb = KBc.replace(qWb,'\''); Ivb = Ivb.replace(rWb,'"'); if(KBc != Ivb) { if( (value = UWb.get$__(Ivb)) != null || (value = UWb.get$__(Ivb.toLowerCase())) != null) { lwb[i] = value +" "; cbb = true; continue; } else { KBc = Ivb; Ivb = KBc.replace(sWb,''); if(KBc != Ivb) { if( (value = UWb.get$__(Ivb)) != null || (value = UWb.get$__(Ivb.toLowerCase())) != null ) { lwb[i] = value +" "; cbb = true; continue; } } } } else { Ivb = KBc.replace(sWb,''); if(KBc != Ivb) { if( (value = UWb.get$__(Ivb)) != null || (value = UWb.get$__(Ivb.toLowerCase())) != null ) { lwb[i] = value +" "; cbb = true; continue; } } } } } return cbb;}function JXb(Awb){ if(!ofa) { return Awb; } var KBc =""; var wordList = Awb.split(" "); if(xWb(wordList)) { var qzb = wordList.length; var i; for(i=0; i<qzb; i++) { KBc += wordList[i]; if(i < qzb - 1) { KBc +=" "; } } return KBc; } else { return Awb; }}function RXb(Awb){ var n1; var n2; var NXb; var xlb; var ylb; var QXb = Awb.split("\r\n"); var i; for(i=0; i<QXb.length; i++) { NXb = QXb[i]; var TXb = NXb.indexOf("&p_pageID=*&") > -1; n1 = NXb.indexOf("&sayThis="); n2 = NXb.indexOf("&likeThis="); xlb = NXb.substring(n1 + 9, n2); ylb = NXb.substring(n2 + 10); xlb = cWb(xlb); ylb = cWb(ylb); UWb.add$__(xlb, ylb, TXb); } if(typeof(plb) =="function") { plb(); }}function WXb(){ }function XXb(){ if(xca != null && xca.length > 0 && yca != null && yca.length > 0 && zca != null && zca.length > 0) { var dqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } dqb = eya(true) + SpeechStream.cacheMode.getLiveServer(); var mgb ="&custID="+ xca +"&bookID="+ yca +"&pageID="+ zca +"&combined=Y"; var flash = Xab.getConnector(); if(flash == null) { cya("Connection to the server is not available."); } else { flash.getPronunciationDataAll(dqb, mgb); } }}var ZXb = 2;function $rw_loadPronCallback(xfb){ if(xfb == null) { if(ZXb > 0) { --ZXb; XXb(); } else { cya("Failed to load pronunciation data, this may affect the text to speech function."); } } else { xfb = xfb.trimTH(); if(xfb =="") { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { nfa = true; } if(typeof(plb) =="function") { plb(); } } else if(xfb =="-1") { if(ZXb > 0) { --ZXb; XXb(); } else { cya("Failed to load pronunciation data, this may affect the text to speech function."); } } else { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { nfa = true; } RXb(xfb); } }}function cXb(xXb, oXb, yXb){ if(xca != null && xca.length > 0 && yca != null && yca.length > 0 && zca != null && zca.length > 0) { var dqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } dqb = eya(true) + SpeechStream.cacheMode.getLiveServer(); var mgb ="&custID="+ xca +"&bookID="+ yca +"&pageID="+ (yXb?"*":zca) +"&sayThis="+ XWb(xXb) +"&likeThis="+ XWb(oXb); var flash = Xab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.addPronunciationData(dqb, mgb); } }}function $rw_addPronCallback(xfb){ if(xfb == null) { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else if(xfb =="-1") { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else { var slb = document.getElementById('createSayThis').value.trimTH(); var sXb = document.getElementById('createLikeThis').value.trimTH(); var wlb = document.getElementById('createAllPages').checked; UWb.add$__(slb, sXb, wlb); document.getElementById('createSayThis').value =''; document.getElementById('createLikeThis').value =''; document.getElementById("confirmPageMsg").innerHTML ="Pronunciation inserted."; plb(); }}function mXb(xXb, oXb, yXb){ if(xca != null && xca.length > 0 && yca != null && yca.length > 0 && zca != null && zca.length > 0) { var dqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } dqb = eya(true) + SpeechStream.cacheMode.getLiveServer(); var mgb ="&custID="+ xca +"&bookID="+ yca +"&pageID="+ (yXb?"*":zca) +"&sayThis="+ XWb(xXb) +"&likeThis="+ XWb(oXb); var flash = Xab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.updatePronunciationData(dqb, mgb); } }}function $rw_updatePronCallback(xfb){ if(xfb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else if(xfb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else { var slb = document.getElementById('editSayThis').value.trimTH(); var sXb = document.getElementById('editLikeThis').value.trimTH(); var wlb = document.getElementById('editAllPages').checked; UWb.add$__(slb, sXb, wlb); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation updated."; Bmb(); plb(); }}function wXb(xXb, yXb){ if(xca != null && xca.length > 0 && yca != null && yca.length > 0 && zca != null && zca.length > 0) { var dqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } dqb = eya(true) + SpeechStream.cacheMode.getLiveServer(); var mgb ="&custID="+ xca +"&bookID="+ yca +"&pageID="+ (yXb?"*":zca) +"&sayThis="+ XWb(xXb); var flash = Xab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.removePronunciationData(dqb, mgb, xXb); } }}function $rw_removePronCallback(xfb, RQb){ if(xfb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else if(xfb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else { UWb.remove$__(RQb); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation deleted."; plb(); }}var AYb = null;function CYb(){ if(AYb != null) { return AYb; } else { if(tfa) { var kpb = document.getElementById("rwDrag"); if(kpb != null) { kpb.style.position ="relative"; tfa = false; } } var flash = null; try { if(Xfa) { flash = window.document.WebToSpeech; } else { if (window.document.WebToSpeech) { flash = window.document.WebToSpeech; } else {flash = window.WebToSpeech; } } if(flash != null) { flash.getVersion(); AYb = flash; } } catch(err) { flash = null; AYb = null; } if(flash == null) { var EYb = document.getElementById("WebToSpeech"); if(EYb != null) { flash = EYb; try { flash.getVersion(); AYb = flash; } catch(e) { flash = null; AYb = null; } if(flash == null && !Kfa && EYb.childNodes && typeof(EYb.childNodes.length) =="number") { var qzb = EYb.childNodes.length; var i; for(i=0; i<qzb; i++) { var Sub = EYb.childNodes[i]; if(Sub.tagName.toLowerCase() =="embed") { flash = Sub; try { flash.getVersion(); AYb = flash; } catch(e) { flash = null; AYb = null; } } } } } } return flash; }}var HYb = 0;SpeechStream.AjaxRequest = function(){ var IYb = ++HYb; var JYb = null; var KYb = null; var LYb = null; var MYb = false; var NYb = null; var OYb = null; var PYb = 0; var QYb = false; this.cancel = function() { Fya("Cancelling request "+ IYb); QYb = true; }; this.getCount = function() { return IYb; }; this.setTimeoutCallBack = function(p_func) { OYb = p_func; }; this.setErrorCallBack = function(p_func) { NYb = p_func; }; this.setTimeout = function(p_nMs) { PYb = p_nMs; };this.callBack = function() { if(QYb) { return; } with(this) { if(readyState < 4) { return; } if(status != 200) { if(OYb) { OYb(IYb); return; } if(NYb) { NYb(status); return; } } if(MYb) { if(LYb == null) { KYb(responseXML); } else { KYb[LYb](responseXML); } } else { if(LYb == null) { KYb(responseText); } else { KYb[LYb](responseText); } } } }; this.doPost = function(fAb, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { KYb = p_responseObject; LYb = p_responseCallback; MYb = p_bXml; if(Pga) { g_ExtBackgroundScriptCommObj.extBGAjaxRequest(p_parameters, fAb, p_responseObject, p_responseCallback, p_bXml); } else { JYb = new XMLHttpRequest(); if(Zfa) { JYb.timeout = PYb; } JYb.open("POST", fAb, true); JYb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); JYb.onreadystatechange = callBack; JYb.send(p_parameters); } } }; this.doGet = function(fAb, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { KYb = p_responseObject; LYb = p_responseCallback; MYb = p_bXml; if(Pga) { g_ExtBackgroundScriptCommObj.extBGAjaxRequest(p_parameters, fAb, p_responseObject, p_responseCallback, p_bXml); } else { JYb = new XMLHttpRequest(); if(Zfa) { JYb.timeout = PYb; } JYb.open("GET", fAb, true); JYb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); JYb.onreadystatechange = callBack; JYb.send(p_parameters); } } };};SpeechStream.HTML5Controller = function(){ var self = this; var RYb = fca; var SYb = false; var TYb = 0; var UYb = false; var VYb = 0; var WYb = null; var XYb; var YYb; var ZYb; var aYb; var bYb; var cYb; var dYb = wca; var dab = new Audio(); dab.type ="audio/mpeg"; if(typeof(Hda) =="number"&& Hda > -1) { dab.volume = ( parseInt(Hda, 10) / 100.0); } var Lab = null; var gYb = 0; var hYb = null; var Sab = true; var jYb = false; var kYb = false; this.initialise = function (p_flashVars, zBb, ACb, BCb) { XYb = zBb; YYb = ACb; ZYb = BCb; if(pca != null) { aYb = pca; } else { aYb = GCb(hca, false); } if(oca != null) { bYb = oca; } else { bYb = GCb(hca, false); } if(qca != null) { cYb = qca; } else { cYb = GCb(hca, false); } if(p_flashVars.cacheMode =="true") { jYb = true; } if(p_flashVars.cacheLiveFallover =="true") { kYb = true; } if(p_flashVars.volumeValue > -1) { dab.volume = (p_flashVars.volumeValue / 100.0); } };this.setToClipboard = function(vyb) { };this.setCacheBuster = function(p_bCacheBuster) { SYb = p_bCacheBuster; }; this.setCacheMode = function() { };this.resetCacheTimer = function() { TYb = 0; setTimeout(self.resetCacheTimer, Vda * 1000 * 60); }; setTimeout(this.resetCacheTimer, Vda * 1000 * 60); this.canPause = function() { return dab && !dab.ended && !isNaN(dab.duration) && dab.duration > 0; }; this.isPaused = function() { return UYb; }; this.pause = function() { if(dab != null) { dab.pause(); UYb = true; return true; } return false; }; this.resume = function() { if(dab != null && UYb) { if(Wfa && dab.currentTime > 0.05 && !dab.ended) { dab.currentTime -= 0.05; } dab.play(); UYb = false; return true; } return false; }; this.setCustomerId = function() {}; this.setBookId = function() {}; this.setPageId = function() {}; this.setSpeedValue = function() {}; this.setVoiceName = function(qJb) { dYb = qJb; }; this.getVoiceName = function() { return dYb; }; this.setVolumeValue = function(p_strVal) { if(dab != null) { try { dab.volume = ( parseInt(p_strVal, 10) / 100.0); } catch(e) { } } }; this.checkPath = function(Dsa) { if(lda != null && mda != null) { var Ivb; Ivb = Dsa; if(Ivb.indexOf(lda) > -1) { Ivb = Ivb.substr(0, Ivb.indexOf(lda)) + mda + Ivb.substr(Ivb.indexOf(lda) + lda.length); } return Ivb; } else { return Dsa; } }; this.getPronunciationDataAll = function(p_strBase, p_strDetails) { var Enb = p_strBase +"/SpeechNAServer/pronounce.html?type=get&pronounceClient="+ Bda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Enb, null, this,"requestPGetAllLoad", false); }; this.requestPGetAllLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_loadPronCallback("-1"); } else if(Awb =="get=false"|| Awb =="") { $rw_loadPronCallback("-1"); } else if(Awb =="empty") { $rw_loadPronCallback(""); } else { $rw_loadPronCallback(Awb); } }; this.addPronunciationData = function(p_strBase, p_strDetails) { var Enb = p_strBase +"/SpeechNAServer/pronounce.html?type=add&pronounceClient="+ Bda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Enb, null, this,"requestPAddLoad", false); }; this.requestPAddLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_addPronCallback("-1"); } else if(Awb =="add=false") { $rw_addPronCallback("-1"); } else if(Awb =="add=true") { $rw_addPronCallback("1"); } else { $rw_addPronCallback("-1"); } }; this.updatePronunciationData = function(p_strBase, p_strDetails) { var Enb = p_strBase +"/SpeechNAServer/pronounce.html?type=update&pronounceClient="+ Bda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Enb, null, this,"requestPUpdateLoad", false); }; this.requestPUpdateLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_updatePronCallback("-1"); } else if(Awb =="update=false") { $rw_updatePronCallback("-1"); } else if(Awb =="update=true") { $rw_updatePronCallback("1"); } else { $rw_updatePronCallback("-1"); } }; this.removePronunciationData = function(p_strBase, p_strDetails, RQb) { var Enb = p_strBase +"/SpeechNAServer/pronounce.html?type=delete&pronounceClient="+ Bda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); var uYb = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_removePronCallback("-1"); } else if(Awb =="delete=false") { $rw_removePronCallback("-1"); } else if(Awb =="delete=true") { $rw_removePronCallback("1", RQb); } else { $rw_removePronCallback("-1"); } }; caller.doGet(Enb, null, uYb, null, false); }; var vYb =""; this.getLastError = function() { return vYb; }; this.getVersion = function() { return RYb; }; this.getRevisionNumber = function() { return"0"; };function xYb() { var WZb = (++VYb); if(WYb != null) { BZb(0); delete WYb; WYb = null; } UYb = false; if(Sab) { dab.pause(); dab.autoplay = true; dab.play(); Sab = false; } return WZb; } this.checkRequestStillValid = function(yYb) { return yYb == VYb; }; this.setAudio = function(p_strMp3Url) { dab.src = p_strMp3Url; }; this.setTimer = function(p_timerArray) { Lab = p_timerArray; }; this.requestCompleteStartPlayback = function() { $rw_renderingSpeechCallback(); audioPlaybackTimer(); dab.autoplay = true;dab.play(); };this.stopSpeech = function() { if(dab != null) { dab.pause(); dab.currentTime = 0; this.onSpeechStop(-1); } WYb = null; ++VYb; };this.stopSpeechAlt = function() { if(dab != null) { dab.pause(); try { dab.currentTime = 0; } catch(err) { } this.onSpeechStop(-2); } WYb = null; ++VYb; };this.onSpeechStop = function(CZb) { BZb(CZb); }; function BZb(CZb) { if(CZb < 0) { $rw_doSelection(CZb); } Lab = null; gYb = 0; hYb = null; }; this.startSpeech = function(Awb, IZb) { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, Awb, IZb); if(TYb <= Uda || ZYb == null) { WYb.makeSpeechRequest(YYb, false); } else { WYb.makeSpeechRequest(ZYb, true); } }; this.startSpeechFromBackup = function(Awb, IZb) { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, Awb, IZb); WYb.makeSpeechRequest(ZYb, true); };this.startSpeechBackup = function(p_params) { if(ZYb == null) { this.onSpeechStop(-3); return false; } else { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.copyParameters(this, WZb, p_params); WYb.makeSpeechRequest(ZYb, true); return true; } };this.startSpeechFromCacheWithGen = function(p_strFilePath, XUb, p_destFolder, p_destFilename, p_bPron) { var WZb = xYb(); if(TYb <= Uda || !kYb || ZYb == null) { var SZb; var TZb; if(SYb) { SZb = YYb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); TZb = YYb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { SZb = YYb +"SpeechCache/"+ p_strFilePath +".xml"; TZb = YYb +"SpeechCache/"+ p_strFilePath +".mp3"; } WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.setStaticParameters(p_destFolder, p_destFilename); WYb.loadFiles(SZb, TZb); } else { WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.setStaticParameters(p_destFolder, p_destFilename); WYb.makeSpeechRequest(ZYb, true); } };this.startSpeechGenerateCache = function(p_strFilePath, XUb, p_destFolder, p_destFilename, p_bPron, p_strServerName) { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.setStaticParameters(p_destFolder, p_destFilename); WYb.makeSpeechRequest(p_strServerName, true); };this.startSpeechFromCache = function(p_strFilePath, XUb, p_bPron) { var WZb = xYb(); if(TYb <= Uda || !kYb || ZYb == null) { var SZb; var TZb; if(SYb) { SZb = YYb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); TZb = YYb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { SZb = YYb +"SpeechCache/"+ p_strFilePath +".xml"; TZb = YYb +"SpeechCache/"+ p_strFilePath +".mp3"; } WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.loadFiles(SZb, TZb); } else { WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.makeSpeechRequest(ZYb, true); } }; this.speakFromFile = function(Gwb) { var WZb = xYb(); var SZb = Gwb +".xml"; var TZb = Gwb +".mp3"; WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb,"n/a", false); WYb.loadFiles(SZb, TZb); }; this.startSpeechFromFile = function(Awb, fAb, p_bPron) { }; this.startHighlighting = function(Awb) {}; this.simpleSpeech = function(Awb, IZb) { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, Awb, IZb); WYb.setHighlightable(false); if(TYb <= Uda || ZYb == null) { WYb.makeSpeechRequest(YYb, false); } else { WYb.makeSpeechRequest(ZYb, true); } }; this.simpleSpeechFromBackup = function(Awb, IZb) { var WZb = xYb(); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, Awb, IZb); WYb.setHighlightable(false); WYb.makeSpeechRequest(ZYb, true); }; this.autogenSpeechFiles = function(XUb, p_destFolder, p_destFilename, p_bPron, p_strServerName) { var WZb = xYb(); this.onSpeechStop(-2); WYb = new SpeechStream.Html5Speech(); WYb.setParameters(this, WZb, XUb, p_bPron); WYb.setStaticParameters(p_destFolder, p_destFilename); WYb.makeSpeechRequest(p_strServerName, true); }; this.checkAutogenCachedFiles = function(p_strFilePath) { }; this.autoGenComplete = function(p_strServerName) { }; this.getMP3File = function(DOb, p_bPron) { }; this.getPictureDictionaryPage = function(Awb, p_strLocale) { var XZb ="&userName="+ Bda +"&swf="+ RYb; var vZb = cYb +"ImageServices/imagedict.html"; var gZb ="word="+ Awb + XZb; if(p_strLocale != null) { gZb +="&locale="+ p_strLocale; } if(xca != null) { gZb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, gZb, this,"imagedictionaryLoad", false); }; this.imagedictionaryLoad = function(Awb) { if (Awb == null || Awb.length == 0) { $rw_picturedictionaryReply("No Image."); } else { $rw_picturedictionaryReply(Awb); } }; this.getCustomDictionaryPage = function(XUb, fAb) { var caller = new SpeechStream.AjaxRequest(); caller.doPost(fAb, XUb, this,"dictionaryLoad", false); }; this.getDictionaryPage = function(Awb) { var vZb = aYb +"rwserver/"; var gZb ="query=dictionaryHtml"+"&text="+ Awb +"&locale="+ Fda +"&userName="+ Bda +"&swf="+ RYb; if(xca != null) { gZb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, gZb, this,"dictionaryLoad", false); }; this.dictionaryLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_dictionaryReply("Error loading content."); } else { $rw_dictionaryReply(Awb); } };this.getPopupDictionaryPage = function(Awb) { var vZb = aYb +"rwserver/"; var gZb ="query=dictionaryHtml"+"&text="+ Awb +"&locale="+ Fda +"&userName="+ Bda +"&swf="+ RYb; if(xca != null) { gZb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, gZb, this,"dictionaryPopupLoad", false); };this.dictionaryPopupLoad = function(Awb) { if(typeof($rw_popupDictionaryReply) =="function") { if(Awb == null || Awb.length == 0) { $rw_popupDictionaryReply("Error loading content."); } else { $rw_popupDictionaryReply(Awb); } } }; this.getDictionaryPageFl = function(Awb) { var vZb = aYb +"rwserver/?query=dictionary&type=result&wordType=15&"+"&text="+ Awb +"&locale="+ Fda +"&userName="+ Bda +"&swf="+ RYb +"&dictionaryType=SIMPLE"; if(xca != null) { vZb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, null, this,"dictionaryFlLoad", false); }; this.getDictionaryPageFlHTML = function(Awb) { var vZb = aYb +"rwserver/?query=dictionaryHtml"+"&text="+ Awb +"&locale="+ Fda +"&userName="+ Bda +"&swf="+ RYb +"&dictionaryType=SIMPLE"; if(xca != null) { vZb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, null, this,"dictionaryFlLoad", false); }; this.dictionaryFlLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_dictionaryFlReply("Error loading content."); } else { $rw_dictionaryFlReply(Awb); } }; this.getTranslationPage = function(Awb) { this.getTranslationGenericPage(Awb,"English","Spanish"); }; this.getTranslationGenericPage = function(Awb, yZb, zZb) { nZb(Awb, yZb, zZb, false, this); }; this.getTranslationFlGenericPage = function(Awb, yZb, zZb) { nZb(Awb, yZb, zZb, true, this); }; this.getTranslationParagraph = function(Awb, yZb, zZb) { wZb(Awb, yZb, zZb, this); }; function nZb(Awb, yZb, zZb, rZb, Aab) { var vZb = bYb +"rwtranslateserver/onlinetranslator"; var jeb ="type=ultrahtml5&mode=content"+"&value="+ encodeURIComponent(Awb) +"&value2="+ Awb +"&caller="+ location.protocol +"//"+ location.host + location.pathname +"&key="+ HOb(Awb + Bda) +"&username="+ Bda +"&source="+ yZb +"&dest="+ zZb; if(xca != null) { jeb +="&custID="+ xca; } var caller = new SpeechStream.AjaxRequest(); if(rZb) { caller.doPost(vZb, jeb, Aab,"translationFlLoad", false); } else { caller.doPost(vZb, jeb, Aab,"translationLoad", false); } } this.paratranCaller = null; function wZb(Awb, yZb, zZb, Aab) { var vZb = bYb +"rwtranslateserver/onlinetranslator"; var jeb ="type=paragraphtranslate&mode=content"+"&value="+ Awb +"&caller="+ location.protocol +"//"+ location.host + location.pathname +"&username="+ Bda +"&source="+ yZb +"&dest="+ zZb; if(xca != null) { jeb +="&custID="+ xca; } if(self.paratranCaller != null) { self.paratranCaller.cancel(); } var caller = new SpeechStream.AjaxRequest(); caller.doPost(vZb, jeb, Aab,"translationLoad", false); self.paratranCaller = caller; } this.translationLoad = function(Awb) { self.paratranCaller = null; if(Awb == null || Awb.length == 0) { $rw_transReply("Error loading content."); } else { Awb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding: 5px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Awb; $rw_transReply(Awb); } }; this.translationFlLoad = function(Awb) { if(Awb == null || Awb.length == 0) { $rw_transFlReply("Error loading content."); } else { Awb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding: 5px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Awb; $rw_transFlReply(Awb); } }; this.getSoundFileLength = function(Enb) { }; audioPlaybackTimer = function() { if(Lab == null) { return; } if(dab.ended) { $rw_speechCompleteCallback("Complete"); BZb(-1); try { dab.pause(); dab.currentTime = 0; } catch(err) {} return; } if(Lab.length > 0) { if(Lab[gYb] < dab.currentTime) { $rw_doSelection(gYb); gYb++; } if(dab.currentTime > Lab[Lab.length-1]) { $rw_speechCompleteCallback("Complete"); BZb(-1); try { dab.pause(); dab.currentTime = 0; } catch(err) {} return; } } hYb = setTimeout(audioPlaybackTimer, 10); }; this.strStoredVoice = null; this.setAltSettings = function (qJb, vJb, wJb, xJb, yJb) { if(this.strStoredVoice == null) { this.strStoredVoice = dYb; } if(typeof(qJb) =="string") { dYb = qJb; } }; this.restoreSettings = function() { if(this.strStoredVoice != null) { dYb = this.strStoredVoice; this.strStoredVoice = null; } };};SpeechStream.Html5Speech = function(){ this.m_nRequestNumber = -1; this.m_params = null; this.m_bBackup = false; this.m_bHighlightable = true; this.m_controller = null;this.makeSpeechRequest = function(p_strSpeechServer, p_bBackup) { var server = p_strSpeechServer +"SpeechServices/index.html"; this.m_bBackup = p_bBackup; var Eab = new SpeechStream.AjaxRequest(); Eab.doPost(server, this.m_params, this,"onSpeechRequestResponse", false); };this.onSpeechRequestResponse = function(p_strResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var Fab = p_strResponse.indexOf("xml="); var Gab = p_strResponse.indexOf("&mp3"); var Hab = p_strResponse.substring(Fab + 4, Gab); var Iab = p_strResponse.substring(Gab + 5, p_strResponse.length); if(Hab =="error"|| Iab =="error"|| Hab ==""|| Iab =="") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { vYb ="Error response from server"; } return; } else { vYb ="Error response from server"; this.m_controller.onSpeechStop(-3); return; } } if(Hab =="busy"|| Iab =="busy") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { vYb ="Busy response from server"; } return; } else { vYb ="Busy response from server"; this.m_controller.onSpeechStop(-3); return; } } if(Hea) { if(Hab.substring(0, 5) =="http:") { Hab ="https:"+ Hab.substr(5); } if(Iab.substring(0, 5) =="http:") { Iab ="https:"+ Iab.substr(5); } } this.loadFiles(Hab, Iab); }; this.loadFiles = function(p_strXmlUrl, p_strMp3Url) { p_strXmlUrl = this.m_controller.checkPath(p_strXmlUrl); p_strMp3Url = this.m_controller.checkPath(p_strMp3Url); this.m_controller.setAudio(p_strMp3Url); if(this.m_bHighlightable) { var Jab = new SpeechStream.AjaxRequest; Jab.doGet(p_strXmlUrl, null, this,"onTimingFileResponse", true); } else { var Lab = new Array(); this.m_controller.setTimer(Lab); this.m_controller.requestCompleteStartPlayback(); } }; this.onTimingFileResponse = function(p_xmlResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var Lab = new Array(); if(p_xmlResponse && p_xmlResponse.documentElement && p_xmlResponse.documentElement.childNodes) { var Mab = p_xmlResponse.documentElement.childNodes; var Nab = 0; for(i = 0; i < Mab.length; i++) { if(Mab[i].nodeType == 1) { Lab[Nab] = parseFloat(Mab[i].getAttribute("time") / 1000); if(Nab > 0 && Lab[Nab] <= Lab[Nab - 1]) { Lab[Nab] = Lab[Nab - 1] + 0.010; } Nab = Nab + 1; } } this.m_controller.setTimer(Lab); this.m_controller.requestCompleteStartPlayback(); } else { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { vYb ="Failed to get timing response from server"; } } else { vYb ="Failed to get timing response from server"; this.m_controller.onSpeechStop(-3); } } };};SpeechStream.Html5Speech.prototype.setParameters = function (iqb, yYb, Awb, IZb){ if(Awb == null) { Awb =""; } this.m_controller = iqb; this.m_nRequestNumber = yYb; var jeb ="text="+ encodeURIComponent(Awb) +"&userName="+ encodeURIComponent(Bda) +"&voiceName="+ encodeURIComponent(iqb.getVoiceName())+"&speedValue="+ encodeURIComponent(Gda); if(xca != null) { jeb +="&custID="+ encodeURIComponent(xca); } if(yca != null) { jeb +="&bookID="+ encodeURIComponent(yca); } if(zca != null) { jeb +="&pageID="+ encodeURIComponent(zca); } if(IZb) { jeb +="&usePron=Y"; } this.m_params = jeb;};SpeechStream.Html5Speech.prototype.copyParameters = function(iqb, yYb, p_params){ this.m_controller = iqb; this.m_nRequestNumber = yYb; this.m_params = p_params;};SpeechStream.Html5Speech.prototype.setStaticParameters = function (p_strDestFolder, p_strDestFilename){ var jeb ="&destFolder="+ p_strDestFolder +"&destFilename="+ p_strDestFilename; this.m_params = this.m_params + jeb;};SpeechStream.Html5Speech.prototype.setHighlightable = function(p_bHighlightable){ this.m_bHighlightable = p_bHighlightable;};SpeechStream.Html5Speech.prototype.getHighlightable = function(){ return this.m_bHighlightable;};SpeechStream.TouchScreenManager = function(){ var Qab = false; var Rab = false; var Sab = true; var Tab = null;this.initialise = function() { if(gfa >= 6 && Cga) { } else { tDb(document,"touchstart", onTouchStart); tDb(document,"touchmove", onTouchMove); tDb(document,"touchend", onTouchEnd); if(!tda && window.frames.length > 0) { var i; for(i=0; i<window.frames.length; i++) { this.initialiseToFrame(window.frames[i]); } } } }; this.initialiseToFrame = function(uUb) { if(gfa >= 6 && Cga) { } else if(Pga) { } else { try { if(uUb.document) { tDb(uUb.document,"touchstart", onTouchStart); tDb(uUb.document,"touchmove", onTouchMove); tDb(uUb.document,"touchend", onTouchEnd); } } catch(err) { } } };this.clickAndSpeak = function(enable) { Qab = enable; }; var Uab ="onTouchStart onTouchMove onTouchEnd changedTouches";onTouchStart = function(event) { if(!afa) { afa = true; } Rab = false; if(Qab || mfa) { if(Sab) { var changedTouches = event.changedTouches ; if(changedTouches != null && changedTouches.length > 0) { var cnb = FLb(changedTouches[0], true); Tab = VLb(cnb); } } } };onTouchMove = function() { if(!afa) { afa = true; } Rab = true; };onTouchEnd = function(event) { if(Qab || mfa) { if(Rab) { Tab = null; return; } if(Sab && !mfa) { if(Tab == null) { return; } var target = new THHoverTarget(null, null, Tab.range); if(target == null) { return; } Sab = false; rw_speakHoverTarget(target); } else { WHb(event); } } };};var Xab = null;SpeechStream.setUpControllerFactory = function(){ if(Xab == null) { Xab = (function() { var Yab = null; var Zab = null; var aab = false; var bab = false; var cab = new SpeechStream.TouchScreenManager(); cab.initialise(); if(kea) { Yab = null; aab = false; } else { eab(); } function eab() { var dab; try { if((Kfa && !Pfa && !Qfa) || (Kfa && (Pfa||Qfa) && mab()) || eca =="hmh") { dab = null; aab = false; } else { dab = new Audio(); var fab; if(xfa =="mp3") { fab ="audio/mpeg"; } else { fab ="audio/"+ xfa; } dab.type = fab; if(dab.canPlayType) { aab = ("no"!= dab.canPlayType(fab)) && (""!= dab.canPlayType(fab)); } } } catch(err) { dab = null; aab = false; } } var instance = { enableTouchEvents: function(enable) { cab.clickAndSpeak(enable); },getConnector: function() { if(Yab != null) { return Yab; } if(aab) { Yab = new SpeechStream.HTML5Controller(); if(tfa) { var kpb = document.getElementById("rwDrag"); if(kpb != null) { kpb.style.position ="relative"; tfa = false; } } } else { bab = instance.hasFlashSupport(); if(bab) { Yab = CYb(); } } return Yab; }, setSwaConntector: function(p_con) { Zab = p_con; },getSwaConnector: function() { if(Zab != null) { return Zab; } else { return instance.getConnector(); } },hasFlashSupport: function() { if(typeof(eba_no_flash) =="boolean"&& eba_no_flash == true) { bab = true; } else { var flash = CYb(); if(flash != null) { var jab = flash.getVersion(); var kab = parseFloat(jab); if(kab < 1.05 || kab == NaN) { bab = false; } else { bab = true; } } } return bab; },doesSupportSpeech: function() { if(aab) { return true; } else { return instance.hasFlashSupport(); } },doesSupportHtml5: function() { return aab; } }; return instance; })(); }};function mab(){ var lab = null; try { lab = !!new ActiveXObject("htmlfile"); } catch (e) { lab = false; } return lab;}if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.translator = (function(){ var self = {}; self.translate = function(qqb) { if(typeof(qqb) =="string"&& qqb.length > 0) { var flash = Xab.getConnector(); if(flash != null) { flash.getTranslationGenericPage(qqb, SpeechStream.translatorData.Fhb, SpeechStream.translatorData.Mzb); } } else { var thb ="<style type=\"text/css\">"+"div.rwTranWordHeader{"+"font-size:150%;"+"font-weight: bold;"+"padding-bottom: 3px;"+"padding-left: 5px;"+"border-bottom: 1px solid #666666;"+"margin-bottom: 10px;}"+"span.rwMeaningNum{padding-left: 10px;"+"padding-right: 10px;"+"font-weight: bold;}"+"span.rwMeaning{padding-right:10px}"+"</style>"+"<div class=\"rwTranWordHeader\">No valid word selected</div>"; $rw_transReply(thb); } }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.dictionary = (function(){ var self = {}; self.lookup = function(qqb) { $rw_dictionaryRequest(qqb); }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.pictureDictionary = (function(){ var self = {}; self.lookup = function(qqb) { if(qqb.length > 0) { var flash = Xab.getConnector(); if(flash != null) { flash.getPictureDictionaryPage(qqb, Fda); } } else { var thb ="<div class=\"rwDictWordHeader\">No valid word selected</div>"; VKb(Zba, thb); aKb(true, Zba); } }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.factfinder = (function(){ var self = {}; self.lookup = function(lxa) { var Vhb = kxa(lxa); if(Vhb.length > 0) { var xsb ="http://www.google.com/search?q="+ Vhb; xva(xsb,'popup', 700, 500, 1, 1, 0, 0, 0, 0, 0); } }; return self;})();function $rw_barCacheInit(){ if(Kfa) { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ Zga.paths.strFileLoc +"rwcache.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ Zga.paths.strFileLoc +"rwcacheSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var Bpb =""; Bpb +='<div id="rwGenerateCache" rwTHcomp="1" texthelpStopContinuous="1">'; Bpb +='<div class="rwGenerateCachePopupOutline">'; Bpb +='<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore="1">'; Bpb +='Loading, please wait...'; Bpb +='<img name="displayImg" align="right" src="'+ Zga.paths.strFileLoc +'rwimgs/thex.bmp" onMouseOver="$rw_divOver(9)" onMouseOut="$rw_divOut(9)" '+'onMouseUp="$rw_divPress(9)" />'; Bpb +='</div>'; Bpb +='<div class="rwGenerateCachePopupContent">'; Bpb +='<span id="rwGenerateCachedisplay" ignore="1">'; Bpb +=''; Bpb +='</span>'; Bpb +='</div>'; Bpb +='</div>'; Bpb +='</div>'; SSDOM.Bnb(Zga.pageData.placeholder, Bpb, false);}function $rw_barRecInit(){ if(Kfa) { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ Zga.paths.strFileLoc +"rwrecorder.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Bnb(Zga.pageData.placeholder,"<link href=\""+ Zga.paths.strFileLoc +"rwrecorderSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var Bpb =""; Bpb +='<div id="rwRec" rwTHcomp="1" style="visibility:hidden" texthelpStopContinuous="1">'; Bpb +=' <div class="rwRecPopupOutline">'; if(Dda == ENG_UK || Dda == ENG_US) { Bpb +='  <div id="rwDragMeRec" class="rwToolbarCaptionRec" >'; } else { Bpb +='  <div id="rwDragMeRec" class="rwToolbarSpanCaptionRec" >'; } Bpb +='<img name="recImg" align="right" src="'+ Zga.paths.strFileLoc +'rwimgs/thex.bmp" onmouseover="$rw_divOver(12);" onmouseout="$rw_divOut(12);" onmouseup="$rw_divPress(12);" /></div>'; Bpb +='<div class="rwRecPopupContent">'; Bpb +='<form name="rw_recForm" class="rw_recForm" id="rw_recForm">'; Bpb +='<table class="rw_recTable">'; Bpb +="<tbody>"; Bpb +='<tr><td><div class="rw_micDisplay" id="rw_micDisplay" onclick="recordExercise(START_RECORDING)"></div><div class="rw_micRecordingOn" id="rw_micRecordingOn" onclick="recordExercise(STOP_RECORDING)"></div></td></tr>'; Bpb +='<tr><td><div id="coverUpDiv"></div><div class="rw_playBackButton" id="rw_playBackButton" onclick="recordExercise(REPLAY_RECORDING)"></div></td></tr>'; Bpb +='</tbody></table></form>'; Bpb +='<div id="flashcontent" align="center"><embed type="application/x-shockwave-flash" src="SpeechStream/v194/flashaudiocontrol/textHelpAudioRecord.swf" width="300" height="138" style="undefined" id="audiocontrol" name="audiocontrol" bgcolor="#FF6600" quality="high" wmode="transparent" flashvars="myServer=SpeechStream/v194/flashaudiocontrol/&amp;mySound=3845_2013-12-03_155532191_p&amp;schoolId=235&amp;studentId=20543&amp;signature=acK8In%2Fa6khZxBMNM6XsPQ%3D%3D&amp;soundMode=playOnly&amp;audioStreamFileName=SpeechStream/v194/flashaudiocontrol/3845_2013-12-03_155532191_p&amp;recordType=1&amp;studentRecordModePendingText=Uploading...&amp;studentRecordModeRecordingText=Recording...&amp;audioQualityOGG=0.5&amp;studentRecordModeCSSPath=SpeechStream/v194/flashaudiocontrol/flashstyle.css"></embed></div>'; Bpb +='</div></div></div>'; SSDOM.Bnb(Zga.pageData.placeholder, Bpb, false); }var START_RECORDING = 0;var STOP_RECORDING = 2;var REPLAY_RECORDING = 3;var yab = false;var zab=0;var Abb=0;var Bbb = false;function recordExercise(i){ if( i == START_RECORDING ) { var CBc = document.getElementById("rw_micDisplay"); CBc.style.visibility="hidden"; var Gbb = document.getElementById("rw_micRecordingOn"); Gbb.style.visibility="visible"; Ibb("audiocontrol").stopRecording(); Jbb( false ); Ibb("audiocontrol").startRecording(); zab=new Date().getTime(); } else if(i==STOP_RECORDING) { var CBc = document.getElementById("rw_micDisplay"); CBc.style.visibility="visible"; var Gbb = document.getElementById("rw_micRecordingOn"); Gbb.style.visibility="hidden"; var Hbb = document.getElementById("coverUpDiv"); Hbb.style.visibility="hidden"; yab=false; Lbb(); Ibb("audiocontrol").stopRecording(); Abb=new Date().getTime(); } else if(i==REPLAY_RECORDING) { yab=true; Lbb(); Ibb("audiocontrol").stopRecording(); Abb=new Date().getTime(); Ibb("audiocontrol").playStreaming(); }}function Ibb(movieName){ if(navigator.appName.indexOf("Microsoft")!=-1) { if(window[movieName]) { return window[movieName]; } else { return document[movieName]; } } else { return document[movieName]; }}function Jbb(){ g_timerSeconds = 175; Lbb(); StartTheTimer();}function StartTheTimer(){ if( g_timerSeconds == 0 ) { Lbb(); recordExercise( STOP_RECORDING ); } else { self.status = g_timerSeconds; g_timerSeconds -= 1; Bbb = true; g_timerID = self.setTimeout("StartTheTimer()", 1000 ); }}function Lbb(){ if( Bbb ) { clearTimeout( g_timerID ); } Bbb = false;}if(typeof($rw_swaParameters) =="function"){ hea = true; $rw_swaParameters(); if(typeof($rw_userParameters) =="function") { $rw_userParameters(); } if($rw_barInit()) { LIb(); }}else if(typeof($rw_userParameters) =="function"){ hea = true; $rw_userParameters(); if($rw_barInit()) { LIb(); }}
